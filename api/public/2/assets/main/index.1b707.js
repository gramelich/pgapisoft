window.__require=function t(e,i,n){function o(s,r){if(!i[s]){if(!e[s]){var c=s.split("/");if(c=c[c.length-1],!e[c]){var l="function"==typeof __require&&__require;if(!r&&l)return l(c,!0);if(a)return a(c,!0);throw Error("Cannot find module '"+s+"'")}s=c}var h=i[s]={exports:{}};e[s][0].call(h.exports,function(t){return o(e[s][1][t]||t)},h,h.exports,t,e,i,n)}return i[s].exports}for(var a="function"==typeof __require&&__require,s=0;s<n.length;s++)o(n[s]);return o}({"APIClient.spec":[function(t,e,i){"use strict";if(!cc._RF.push(e,"fa99fu5VLJLuLgYZfYsJwuU","APIClient.spec")){Object.defineProperty(i,"__esModule",{value:!0}),i.onRequestReceived=i.onRequestSent=void 0;var n=t("AutomationConstant"),o=System.get("automation")&&System.get("automation").GameData;i.onRequestSent=function(){o.emit(n.AUTOMATION_EVENT.REQUEST_SENT)},i.onRequestReceived=function(t,e){o.emit(n.AUTOMATION_EVENT.REQUEST_RECEIVED,{error:t,result:e})},cc._RF.pop()}},{AutomationConstant:"AutomationConstant"}],APIClient:[function(t,e){"use strict";if(!cc._RF.push(e,"b48ffH1jSZE16a4uk3Y0W0N","APIClient")){var i=function(t,e){var i=o();return function(t){return i[t-=381]}(t,e)},n=System[i(392)](i(384)+i(385)+i(388)+"rk")[i(391)+i(382)+i(381)];e[i(387)+i(389)+"s"][i(394)+i(397)+"t"]=n,e[i(387)+i(389)+"s"][i(393)+i(395)+i(390)+"e"]=!0,cc._RF.pop()}function o(){var t=["ent","Cli","isB","bvf","ram","uil","exp","ewo","ort","dul","API","get","__e","def","sMo","der","aul"];return(o=function(){return t})()}},{}],AdapterEventEmitter:[function(t,e,i){"use strict";if(!cc._RF.push(e,"4a843d9tZpBC5Aag4RGjJxr","AdapterEventEmitter")){Object.defineProperty(i,"__esModule",{value:!0});var n=t("Utils"),o=(t("AudioAdapterConstant"),function(){function t(){this._eventPool=Object.create(null),this._deferCallback=n.deferCallback(this)}return t.prototype.once=function(t,e,i){this.on(t,e,i,!0)},t.prototype.emit=function(t,e,i,o){void 0===o&&(o=!1);var a=this._eventPool,s=a[t];s||(s=a[t]=[]);for(var r=0,c=function(a){var c=s[a];c.id&&c.id!==e||(r=a,l._deferCallback(function(){var s=c.fn;s!==n.emptyFunc&&(c.once&&this.off(t,s,c.id),s(e,i)),a===r&&void 0!==e&&o&&this.off(e)}))},l=this,h=0,u=s.length;h<u;h++)c(h)},t.prototype.on=function(t,e,i,n){var o=this._eventPool,a=o[t];a||(a=o[t]=[]);for(var s=0,r=a.length;s<r;s++){var c=a[s];if(c.fn===e){if(c.id===i)return;if(!i||!c.id)return}}a.push({id:i,fn:e,once:!!n})},t.prototype.off=function(t,e,i){if(void 0!==t)switch(typeof t){case"number":return this._offByFunction(void 0,t);case"function":return this._offByFunction(t,e);default:return"number"==typeof e&&(i=e,e=void 0),this._offByEvent(t,e,i)}else for(var n in this._eventPool)this._eventPool[n].length=0},t.prototype._offByEvent=function(t,e,i){var n=this._eventPool[t];n&&(void 0!==e||void 0!==i?this._eventPool[t]=n.filter(function(t){return a(t,e,i)}):n.length=0)},t.prototype._offByFunction=function(t,e){for(var i in this._eventPool)this._eventPool[i]=this._eventPool[i].filter(function(i){return a(i,t,e)})},t}());i.default=o,cc._RF.pop()}function a(t,e,i){return!!(i&&i!==t.id||e&&e!==t.fn)||(t.fn=n.emptyFunc,!1)}},{AudioAdapterConstant:"AudioAdapterConstant",Utils:"Utils"}],AnalyticsHelper:[function(t,e){"use strict";if(!cc._RF.push(e,"b4280UeNWJGm4uHVBlPyieD","AnalyticsHelper")){var i=function(t,e){var i=a();return function(t){return i[t-=312]}(t,e)},n=System[i(320)](i(319)+i(316)+i(313)+"rk")[i(315)+i(317)+i(325)+i(322)+i(327)];for(var o in n)e[i(324)+i(318)+"s"][o]=n[o];e[i(324)+i(318)+"s"][i(312)+i(323)+i(328)+"e"]=!0,cc._RF.pop()}function a(){var t=["__e","ewo","der","Ana","ram","lyt","ort","bvf","get","uil","Hel","sMo","exp","ics","isB","per","dul"];return(a=function(){return t})()}},{}],AppStateMachine:[function(t,e,i){"use strict";if(!cc._RF.push(e,"2fbafWC5etFwLhRPq7HVoXd","AppStateMachine")){Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){this._states=[],this._bindedEvaluateState=this.evaluateState.bind(this)}return t.prototype.evaluateState=function(t){var e=this,i=this._states,n=t.from,o=new(0,i[t.to]),a=function(){e._currentRuningState.onEnterState()},s={from:n,readyCallback:function(){var t=e._currentRuningState;e._currentRuningState=o,t?t.onExitState():a()},completeCallback:this._bindedEvaluateState,exitCallback:a};o.onPrepareState(s)},t.prototype.setupAppState=function(t){this._states=t},t.prototype.eventBroadcaster=function(t,e){var i=this._currentRuningState;i.eventDispatcher&&i.eventDispatcher(t,e)},t}();i.default=n,cc._RF.pop()}},{}],AppState:[function(t,e,i){"use strict";if(!cc._RF.push(e,"f2c3eUsMpNAwKEilgK+gR6Q","AppState")){Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){this.stateName="",this.receiveEvent=!0}return t.prototype.onPrepareState=function(t){this.previousState=t.from,this._completeCallback=t.completeCallback,this._exitCallback=t.exitCallback,this.onPrepare(t.readyCallback)},t.prototype.onPrepare=function(t){t&&t()},t.prototype.onEnterState=function(){this.onEnter(this._onStateComplete.bind(this))},t.prototype.onEnter=function(t){t&&t()},t.prototype._onStateComplete=function(){if(!this._completeCallback)throw Error(this.stateName+":: onStateComplete : No State Complete Action!");var t=this.getEndStateConfig(),e=this._completeCallback;this._completeCallback=void 0,e(t)},t.prototype.getEndStateConfig=function(){throw Error(this.stateName+":: getEndStateConfig : Must be overwritte")},t.prototype.onExitState=function(){if(!this._exitCallback)throw Error(this.stateName+" :: onExitState: No Exit Complete Action!");var t=this._exitCallback;this._exitCallback=void 0,this.onExit(t)},t.prototype.onExit=function(t){t()},t.prototype.eventDispatcher=function(t,e){this.receiveEvent&&this.stateEventDispatcher(t,e)},t}();i.default=n,cc._RF.pop()}},{}],Appearance:[function(t,e){"use strict";cc._RF.push(e,"dec3c3clmFKpaYEDuWXqsW2","Appearance")||cc._RF.pop()},{}],AssetBundleUtils:[function(t,e,i){"use strict";if(!cc._RF.push(e,"79425g3EuJNWZMcNH8IYx7s","AssetBundleUtils")){Object.defineProperty(i,"__esModule",{value:!0}),i.generateAudioObject=i.loadResourceMethodWrapper=void 0;var n=t("ResRC"),o=t("ResourceQualifierHelper");i.loadResourceMethodWrapper=function(t,e,i){return void 0===i&&(i=!1),function(a){i?n.load(o.getResourceURL(t,e),e,a):n.load(t,e,a)}},i.generateAudioObject=function(t,e,i){void 0===e&&(e=!1);var n=Object.create(null);return n.path=t,n.isMusic=e,n.sprite=i,n},cc._RF.pop()}},{ResRC:"ResRC",ResourceQualifierHelper:"ResourceQualifierHelper"}],AssetManager:[function(t,e,i){"use strict";if(!cc._RF.push(e,"bca86NE3uZOn5Iq7hbWcYaT","AssetManager")){Object.defineProperty(i,"__esModule",{value:!0}),i.ObjectBundle=i.AudioBundle=i.ResourceBundle=i.BaseAssetBundle=i.assetManager=void 0;var n=t("ErrorHandler"),o=t("QuitGameWithEvent"),a=t("AnalyticsHelper"),s=(t("NoSoundAdapter"),t("Loader")),r=t("ResRC");i.BaseAssetBundle=function(){};var c=function(){};i.ResourceBundle=c;var l=function(){};i.AudioBundle=l;var h,u=function(){};i.ObjectBundle=u,function(t){t[t.RESOURCE=0]="RESOURCE",t[t.AUDIO=1]="AUDIO",t[t.OTHER=2]="OTHER"}(h||(h={}));var d={},p=new(function(){function t(){this._isLaunch=!0,this._isloadOnGoing=!1,this._audioAdapter=void 0,this._bundlesToLoad=[],this._loadCompleteCallback=void 0,this._loaderInstance=void 0}return Object.defineProperty(t.prototype,"loader",{get:function(){var t=this._loaderInstance;return t||(t=this._loaderInstance=this._generateLoader()),t},set:function(t){this._loaderInstance=t},enumerable:!1,configurable:!0}),t.prototype._generateLoader=function(){var t=shell.Error,e=shell.ClientError,i=new t(e.Domain,e.GameLoadResourceError);return new s.default(this._loaderRetryErrorCallbackWrapper(),this._loaderErrorHandlerWrapper(i,function(){return loader.startLoad()}),this._loaderSuccessCallbackWrapper())},t.prototype._loaderRetryErrorCallbackWrapper=function(){return function(t){var e=t||void 0;a.sendLoadFailReport(e)}},t.prototype._loaderErrorHandlerWrapper=function(t,e){var i=this;return function(){var a=i._isLaunch?n.ErrContext.Launch:n.ErrContext.Preload;n.showError(t,a,function(t){switch(t){case n.ErrAction.Retry:e();break;case n.ErrAction.Quit:o.quitGameWithEvent("Load resource fail")()}})}},t.prototype._loaderSuccessCallbackWrapper=function(){var t=this;return function(){var e=t._loadCompleteCallback;t._loadCompleteCallback=void 0,t._onLoadComplete(e)}},t.prototype.setAudioAdapter=function(t){this._audioAdapter=t},t.prototype.getBundlesToLoad=function(){return this._bundlesToLoad},t.prototype.launchComplete=function(){this._isLaunch=!1},t.prototype.addAsset=function(){for(var t,e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];(t=this._bundlesToLoad).push.apply(t,__spread(e))},t.prototype.loadAsset=function(t,e){if(!this._isloadOnGoing){var i=this._bundlesToLoad;this._bundlesToLoad=[];for(var n=0,o=0,a=function(){o++,t&&t(o,n)},s=0,r=i.length;s<r;s++){var c=i[s];n+="function"==typeof c?this._addLoadTask(new c(!0),a):this._addLoadTask(c,a)}0!==n?(this._loadCompleteCallback=e,this._isloadOnGoing=!0,t&&t(0,n),this.loader.startLoad()):this._onLoadComplete(e)}},t.prototype.releaseAsset=function(){for(var t=[],e=0;e<arguments.length;e++)t[e]=arguments[e];for(var i=0,n=t.length;i<n;i++){var o=void 0;o="function"==typeof t[i]?new t[i]:t[i];var a=this._getAssetType(o),s=d[this._getClassName(o)],c=Object.keys(o),l=void 0;switch(a){case h.RESOURCE:l=r.release.bind(r);break;case h.AUDIO:l=function(t){return t.unload}}if(l)for(var u=0,p=c.length;u<p;u++){var f=s[c[u]];f&&!0!==f&&l(f)}d[this._getClassName(o)]=void 0}},t.prototype.getAsset=function(t){var e;e="function"==typeof t?new t:t;var i=d[this._getClassName(e)];if(!i)throw this._getAssetType(e),Error("AssetManager :: getAsset : asset bundle not load - "+this._getClassName(e));return i},t.prototype._addLoadTask=function(t,e){var i,n,o,a,s,r,c=this._getAssetType(t),l=d[this._getClassName(t)]=Object.create(null),u=Object.keys(t),p=this.loader,f=this._audioAdapter,_=0;switch(c){case h.OTHER:try{for(var m=__values(u),g=m.next();!g.done;g=m.next()){var y=g.value;l[y]=t[y]}}catch(T){i={error:T}}finally{try{g&&!g.done&&(n=m.return)&&n.call(m)}finally{if(i)throw i.error}}break;case h.RESOURCE:var v=function(i){var n=t[i];p.addMethodLoadTask(n,function(t){l[i]=t||!0,e()}),_++};try{for(var b=__values(u),S=b.next();!S.done;S=b.next())v(y=S.value)}catch(P){o={error:P}}finally{try{S&&!S.done&&(a=b.return)&&a.call(b)}finally{if(o)throw o.error}}break;case h.AUDIO:var C=function(i){var n=t[i],o=new f({preload:!1,src:n.path,sprite:n.sprite},n.isMusic);p.addMethodLoadTask(A._loadAudioMethodWrapper(o),function(){l[i]=o,e()}),_++},A=this;try{for(var E=__values(u),M=E.next();!M.done;M=E.next())C(y=M.value)}catch(I){s={error:I}}finally{try{M&&!M.done&&(r=E.return)&&r.call(E)}finally{if(s)throw s.error}}}return _},t.prototype._getClassName=function(t){return Object.getPrototypeOf(t).__classname__},t.prototype._getAssetType=function(t){if(t instanceof c)return h.RESOURCE;if(t instanceof l)return h.AUDIO;if(t instanceof u)return h.OTHER;throw Error("Invalid Type"+t)},t.prototype._loadAudioMethodWrapper=function(t){return function(e){var i=function(){t.off("loaderror",n),e&&e(void 0)},n=function(n,o){t.off("load",i),e&&e(o,n)};t.once("load",i),t.once("loaderror",n),t.load()}},t.prototype._onLoadComplete=function(t){this.loader=void 0,this._isloadOnGoing=!1,t&&t()},t.prototype.debug=function(){},t}());i.assetManager=p,cc._RF.pop()}},{AnalyticsHelper:"AnalyticsHelper",ErrorHandler:"ErrorHandler",Loader:"Loader",NoSoundAdapter:"NoSoundAdapter",QuitGameWithEvent:"QuitGameWithEvent",ResRC:"ResRC"}],AudioAdapterConstant:[function(t,e,i){"use strict";cc._RF.push(e,"a20c0AJc1VFmKnv1lBJKugX","AudioAdapterConstant")||(Object.defineProperty(i,"__esModule",{value:!0}),i.MAX_INSTANCE_NUMBER=i.MAX_STACK_SOUND=i.DEFAULT_SPRITE=i.AUDIO_ADAPTER_STATE=i.AUDIO_ADAPTER_EVENT=void 0,i.AUDIO_ADAPTER_EVENT={LOADED:"load",LOAD_ERROR:"loaderror",PLAY:"play",STOP:"stop",END:"end",PAUSE:"pause",RESUME:"resume",FADED:"fade",SEEK:"seek",PLAY_ERROR:"playerror",RATE:"rate",VOLUME:"volume",MUTE:"mute"},i.AUDIO_ADAPTER_STATE={UNLOADED:"unloaded",LODING:"loading",LOADED:"loaded"},i.DEFAULT_SPRITE="__default",i.MAX_STACK_SOUND=50,i.MAX_INSTANCE_NUMBER=24,cc._RF.pop())},{}],AudioAdapter:[function(t,e,i){"use strict";if(!cc._RF.push(e,"5c3d2SrYLxJYqXl2p30apID","AudioAdapter")){Object.defineProperty(i,"__esModule",{value:!0});var n,o,a=t("ResRC"),s=t("AudioAdapterConstant"),r=t("AdapterEventEmitter"),c=t("AudioFactory"),l=(n=0,function(){return++n});(function(t){t._audio="_audio"})(o||(o={}));var h={load:a.load,unload:a.release},u=function(){function t(t){var e=this;this._paused=!1,this._sounds=Object.create(null),this._numberOfInstance=0,this._state=s.AUDIO_ADAPTER_STATE.UNLOADED,this._pendingUnload=!1,this.maxInstance=s.MAX_INSTANCE_NUMBER,this._src=t.src,this._volume="number"==typeof t.volume?t.volume:1,this._rate="number"==typeof t.rate?t.rate:1,this._mute=!!t.mute,this._loop=!!t.loop,this._sprite=t.sprite,this._loader=t.loader||h,this.factory=t.soundFactory||new c.default;var i=t.eventEmitter||new r.default;this.on=function(t,n,o,a){null!=o&&o in e._sounds==0||i.on(t,n,o,a)},this.off=i.off.bind(i),this.once=function(t,n,o){null!=o&&o in e._sounds==0||i.once(t,n,o)},this._emit=i.emit.bind(i),t.preload&&setTimeout(this.load.bind(this),0)}return t.prototype.load=function(){this._state!==s.AUDIO_ADAPTER_STATE.LOADED&&this._state!==s.AUDIO_ADAPTER_STATE.LODING&&(this._loader.load(this._src,this._onLoadComplete.bind(this)),this._state=s.AUDIO_ADAPTER_STATE.LODING)},t.prototype._onLoadComplete=function(t,e){t?(this._emit(s.AUDIO_ADAPTER_EVENT.LOAD_ERROR,void 0,t.message||t),this._pendingUnload=!1,this._state=s.AUDIO_ADAPTER_STATE.UNLOADED):(this._state=s.AUDIO_ADAPTER_STATE.LOADED,e&&(this._clip=e[o._audio]),this._emit(s.AUDIO_ADAPTER_EVENT.LOADED),this._pendingUnload&&this.unload())},t.prototype.unload=function(){this._state!==s.AUDIO_ADAPTER_STATE.UNLOADED&&(this._state!==s.AUDIO_ADAPTER_STATE.LODING?(0!==this._numberOfInstance&&this.stop(),this._clip=void 0,this._loader.unload(this._src),this._pendingUnload=!1,this._state=s.AUDIO_ADAPTER_STATE.UNLOADED):this._pendingUnload=!0)},t.prototype.play=function(t){var e=this;if(this._state!==s.AUDIO_ADAPTER_STATE.LOADED)throw Error("Audio Adapter:: play : audio not yet loaded!");var i="number"==typeof t,n=!i&&"string"==typeof t;if(this._paused||i)return this.resume(t),i?t:-1;var o=this._sounds;if(this._numberOfInstance>=this.maxInstance){var a=void 0;for(var r in o){a=r;break}var c=this._sounds[a];c.stop(),delete this._sounds[a],this._numberOfInstance--,this.off(a),this.addAudioToPool(c)}var h=this.getAudioFromPool();h.reset({loop:this._loop,muted:this._mute,volume:this._volume,rate:this._rate});var u=n&&this._sprite?this._sprite[t]:void 0,d=0,p=0;u&&(d=u.from,p=u.to-d);var f=l();return h.play(d,p),h.once(shell.WebAudioEvent.ENDED,function(){if(!e._sounds[f])throw Error("AudioAdapter :: play : audio doesn't exist on this adapter anymore");delete e._sounds[f],e._numberOfInstance--,e._emit(s.AUDIO_ADAPTER_EVENT.END,f,void 0,!0),e.addAudioToPool(h)}),o[f]=h,this._numberOfInstance++,this._emit(s.AUDIO_ADAPTER_EVENT.PLAY,f),f},t.prototype.stop=function(t){if(this._state!==s.AUDIO_ADAPTER_STATE.LOADED)throw Error("Audio Adapter :: stop : Attemp to stop not loaded audio!");if(0!==this._numberOfInstance)if("number"==typeof t)(i=this._sounds[t])&&(delete this._sounds[t],this._numberOfInstance--,i.stop(),this._emit(s.AUDIO_ADAPTER_EVENT.STOP,t,void 0,!0),this.addAudioToPool(i));else{for(var e in this._sounds){var i;(i=this._sounds[e]).stop(),this._emit(s.AUDIO_ADAPTER_EVENT.STOP,+e,void 0,!0),this.addAudioToPool(i)}this._sounds=Object.create(null),this._numberOfInstance=0}},t.prototype.pause=function(t){if("number"==typeof t)(i=this._sounds[t])&&i.playing&&(i.pause(),this._emit(s.AUDIO_ADAPTER_EVENT.PAUSE,t));else{if(this._paused=!0,0===this._numberOfInstance)return;for(var e in this._sounds){var i;(i=this._sounds[e]).playing&&(i.pause(),this._emit(s.AUDIO_ADAPTER_EVENT.PAUSE,+e))}}},t.prototype.resume=function(t){if("number"==typeof t)(i=this._sounds[t])&&i.paused&&(i.resume(),this._emit(s.AUDIO_ADAPTER_EVENT.RESUME,t));else{if(this._paused=!1,0===this._numberOfInstance)return;for(var e in this._sounds){var i;(i=this._sounds[e]).paused&&(i.resume(),this._emit(s.AUDIO_ADAPTER_EVENT.RESUME,+e))}}},t.prototype.setMute=function(t,e){if("number"==typeof e)(n=this._sounds[e])&&n.muted!==t&&(n.muted=t,this._emit(s.AUDIO_ADAPTER_EVENT.MUTE,e));else{if(this._mute=t,0===this._numberOfInstance)return;for(var i in this._sounds){var n;(n=this._sounds[i]).muted!==t&&(n.muted=t,this._emit(s.AUDIO_ADAPTER_EVENT.MUTE,+i))}}},t.prototype.isMute=function(t){if("number"==typeof t){var e=this._sounds[t];return!!e&&e.muted}return this._mute},t.prototype.setVolume=function(t,e){if("number"==typeof e)(n=this._sounds[e])&&n.volume!==t&&(n.volume=t,this._emit(s.AUDIO_ADAPTER_EVENT.VOLUME,e));else{if(this._volume=t,0===this._numberOfInstance)return;for(var i in this._sounds){var n;(n=this._sounds[i]).volume!==t&&(n.volume=t,this._emit(s.AUDIO_ADAPTER_EVENT.VOLUME,+i))}}},t.prototype.getVolume=function(t){if("number"==typeof t){var e=this._sounds[t];return e?e.volume:0}return this._volume},t.prototype.getInstantVolume=function(t){var e=this._sounds[t];return e?e.instantVolume:0},t.prototype.fade=function(t,e,i,n){var o=this;if(this._state!==s.AUDIO_ADAPTER_STATE.LOADED)throw Error("Audio Adpater :: fade : Audio not loaded!");if(0!==this._numberOfInstance)if("number"==typeof n){var a=this._sounds[n];a&&(a.off(shell.WebAudioEvent.FADED),a.once(shell.WebAudioEvent.FADED,function(){o._emit(s.AUDIO_ADAPTER_EVENT.FADED,n)}),a.fade(t,e,i))}else{this._volume=e;var r=function(n){var a=c._sounds[n];a.off(shell.WebAudioEvent.FADED),a.once(shell.WebAudioEvent.FADED,function(){o._emit(s.AUDIO_ADAPTER_EVENT.FADED,+n)}),a.fade(t,e,i)},c=this;for(var l in this._sounds)r(l)}},t.prototype.setLoop=function(t,e){if("number"==typeof e)(n=this._sounds[e])&&(n.loop=t);else{if(this._loop=t,0===this._numberOfInstance)return;for(var i in this._sounds){var n;(n=this._sounds[i]).loop=t}}},t.prototype.isLoop=function(t){if("number"==typeof t){var e=this._sounds[t];return!!e&&e.loop}return this._loop},t.prototype.setRate=function(t,e){if("number"==typeof e)(n=this._sounds[e])&&(n.rate=t);else{if(this._rate=t,0===this._numberOfInstance)return;for(var i in this._sounds){var n;(n=this._sounds[i]).rate=t}}},t.prototype.getRate=function(t){if("number"==typeof t){var e=this._sounds[t];if(e)return e.rate}return this._rate},t.prototype.isPlaying=function(t){if("number"==typeof t){var e=this._sounds[t];return void 0!==e&&e.playing}return this._numberOfInstance>0&&!1===this._paused},t.prototype.getDuration=function(t){if("number"==typeof t){var e=this._sounds[t];if(e)return e.duration}else if(this._clip)return this._clip.duration;return 0},t.prototype.getState=function(){return this._state},t.prototype.getCurrentTime=function(t){var e=this._sounds[t];return e?e.currentTime:0},t.prototype.seek=function(t,e){var i=this;if(this._state!==s.AUDIO_ADAPTER_STATE.LOADED)throw Error("Audio Adapter:: seek : audio not yet loaded!");if(0!==this._numberOfInstance)if("number"==typeof e){var n=this._sounds[e];n&&(n.once(shell.WebAudioEvent.SEEK,function(){i._emit(s.AUDIO_ADAPTER_EVENT.SEEK,e)}),n.seek(t),n.off(shell.WebAudioEvent.SEEK))}else{if(0===this._numberOfInstance)return;this._paused=!1;var o=__assign({},this._sounds),a=function(e){var n=o[e];n.once(shell.WebAudioEvent.SEEK,function(){i._emit(s.AUDIO_ADAPTER_EVENT.SEEK,+e)}),n.seek(t),n.off(shell.WebAudioEvent.SEEK)};for(var r in o)a(r)}},t.prototype.getAudioFromPool=function(){return this.factory.get()||new shell.WebAudio(this._clip)},t.prototype.addAudioToPool=function(t){t.reset(),t.removeAll(),this.factory.put(t)||t.destroy()},t.prototype.stereo=function(){},t.getNewId=l,t}();i.default=u,cc._RF.pop()}},{AdapterEventEmitter:"AdapterEventEmitter",AudioAdapterConstant:"AudioAdapterConstant",AudioFactory:"AudioFactory",ResRC:"ResRC"}],AudioFactory:[function(t,e,i){"use strict";if(!cc._RF.push(e,"bf4b5cdVNdI7rQp2MPM3CWN","AudioFactory")){Object.defineProperty(i,"__esModule",{value:!0});var n=t("AudioAdapterConstant"),o=function(){function t(){this.maxStackSound=n.MAX_STACK_SOUND,this._pool=[]}return t.prototype.put=function(t){return this._pool.length<this.maxStackSound&&(this._pool.push(t),!0)},t.prototype.get=function(){return this._pool.pop()},t.prototype.size=function(){return this._pool.length},t.prototype.destroy=function(){this._pool.forEach(function(t){t.destroy()}),this._pool=[]},t}();i.default=o,cc._RF.pop()}},{AudioAdapterConstant:"AudioAdapterConstant"}],AudioLibrary:[function(t,e,i){"use strict";if(!cc._RF.push(e,"269b3Iv3gdEvLpSAt3nuW2C","AudioLibrary")){i.__esModule=!0,i.default=void 0;var n=t("AudioAdapterConstant"),o=new(cc.Class({extends:cc.Object,name:"AudioLibrary",playMusic:function(t,e,i,o,a){void 0===e&&(e=!0),void 0===i&&(i=1),void 0===o&&(o=!0),this._currentMusic&&this.stopMusic();var s=t;if(s){var r=o?0:i;s.setVolume(r),s.setLoop(e);var c=s.play();o&&s.fade(r,1,1,c),this._currentMusic={id:c,adapter:s},a&&s.once(n.AUDIO_ADAPTER_EVENT.END,a,c)}},stopMusic:function(t){if(void 0===t&&(t=!0),this._currentMusic&&this._currentMusic.adapter.getState()===n.AUDIO_ADAPTER_STATE.LOADED){var e=this._currentMusic.id,i=this._currentMusic.adapter;if(t){var o=i.getVolume(e);i.once(n.AUDIO_ADAPTER_EVENT.FADED,function(){i.stop(e)},e),i.fade(o,0,1,e)}else i.stop(e);this._currentMusic=void 0}},playEffect:function(t,e,i){void 0===e&&(e=!1),void 0===i&&(i=1);var n=t;if(n)return n.setVolume(i),n.setLoop(e),n.play()},stopEffect:function(t,e){e.stop(t)},fadeOutMusic:function(t){if(void 0===t&&(t=1),this._currentMusic&&this.isMusicOn){var e=this._currentMusic.id,i=this._currentMusic.adapter,n=i.getVolume(e);i.fade(n,0,t,e)}},fadeInMusic:function(t){if(void 0===t&&(t=1),this._currentMusic&&this.isMusicOn){var e=this._currentMusic.id,i=this._currentMusic.adapter,n=i.getVolume(e);i.fade(n,1,t,e)}}}));i.default=o,e.exports=i.default,cc._RF.pop()}},{AudioAdapterConstant:"AudioAdapterConstant"}],AudioManager:[function(t,e,i){"use strict";if(!cc._RF.push(e,"51d7be3dsJCapPTiGi13+D/","AudioManager")){Object.defineProperty(i,"__esModule",{value:!0}),i.updatePlayRate=i.unregisterAudio=i.registerAudio=i.crossFadeAudio=i.fadeChannel=i.toggleChannelMuted=i.AUDIO_TYPE=i.init=void 0;var n=t("SettingMenuHelper"),o=Object.create(null),a={SOUND:0,MUSIC:1};i.AUDIO_TYPE=a;var s=!1,r=[],c=1;i.init=function(){cc.game.on(cc.game.EVENT_HIDE,l),cc.game.on(cc.game.EVENT_SHOW,h)},i.registerAudio=function(t,e){var i=e?a.MUSIC:a.SOUND,s=!n.settingMenuHelper.soundEnable;return o[i]||(o[i]=[]),o[i].push(t),t.setMute(s),t.setRate(c),i},i.unregisterAudio=function(t,e){var i=o[e],n=i.indexOf(t);if(-1===n)throw Error("Audio Manager :: unRegisterAudio :");i.splice(n,1)},i.toggleChannelMuted=function(t,e){void 0===e&&(e=!1);var i=o[t];i&&i.map(function(t){t.setMute(e)})},i.fadeChannel=function(t,e,i,n){var a=o[n];a&&(0===i&&(i=.001),a.map(function(n){n.fade(t,e,i)}))},i.crossFadeAudio=function(t,e){e.setVolume(0),e.play(),e.fade(0,1,1e3),t.fade(1,0,1e3),t.once("fade",function(){t.stop()})},i.updatePlayRate=function(t){for(var e in o)if(o[e])for(var i=o[e],n=0,a=i.length;n<a;n++)i[n].setRate(t);c=t},cc._RF.pop()}function l(){if(!s)for(var t in s=!0,o)if(o[t])for(var e=o[t],i=0,n=e.length;i<n;i++)e[i].isPlaying()&&(e[i].pause(),r.push(e[i]))}function h(){var t,e;if(s){s=!1;try{for(var i=__values(r),n=i.next();!n.done;n=i.next())n.value.play()}catch(o){t={error:o}}finally{try{n&&!n.done&&(e=i.return)&&e.call(i)}finally{if(t)throw t.error}}r.length=0}}},{SettingMenuHelper:"SettingMenuHelper"}],AutomationConstant:[function(t,e,i){"use strict";cc._RF.push(e,"6e430DWnOtAZJCK3A7iF2CA","AutomationConstant")||(Object.defineProperty(i,"__esModule",{value:!0}),i.AUTOMATION_CUSTOM_EVENT=i.AUTOMATION_NODE=i.AUTOMATION_DISPLAY_STATE=i.AUTOMATION_EVENT=void 0,i.AUTOMATION_EVENT={BIG_WIN:"BigWin",TOTAL_WIN:"TotalWin",SPIN_BUTTON_INTERACTIVITY:"SpinButtonInteractivity",REQUEST_SENT:"RequestSent",REQUEST_RECEIVED:"RequestReceived",WIN_HIGHLIGHT_SHOWN:"WinHighlightShown",SYMBOL_SHAKE:"SymbolShake",SYMBOL_BREAK:"SymbolBreak",SYMBOL_DROP:"SymbolDrop",GAME_STATE_UPDATED:"GameStateUpdated"},i.AUTOMATION_DISPLAY_STATE={SKIP_NUMBER_ROLL_ENABLED:"SkipNumberRollEnabled",SKIP_ANIMATION_ENABLED:"SkipAnimationEnabled",TOTAL_WIN_COLLECT_BUTTON_SHOWN:"CollectButtonShown"},i.AUTOMATION_NODE={REEL_AREA:"reel_area",SPIN_BUTTON:"spin_button",TOTAL_WIN_COLLECT_BUTTON:"total_win_collect_button",TOTAL_WIN_SKIP_BUTTON:"total_win_skip_button",BIG_WIN_SKIP_BUTTON:"big_win_skip_button",BONUS_LOADING_START_BUTTON:"bonus_loading_start_button",STORY_SKIP_BUTTON:"story_skip_button"},i.AUTOMATION_CUSTOM_EVENT={ENTER_TRANSITION_TO_FREE_SPIN:"EnterTransitionToFreeSpin",EXIT_TRANSITION_TO_FREE_SPIN:"ExitTransitionToFreeSpin",ENTER_BONUS_LOADING:"EnterBonusLoading",BONUS_LOADING_START:"BonusLoadingStart",BONUS_LOADING_COMPLETE:"BonusLoadingComplete",BONUS_LOADING_BUTTON_ENABLED:"StartButtonEnable",EXIT_BONUS_LOADING:"ExitBonusLoading",ENTER_FREE_SPIN:"EnterFreeSpin",EXIT_FREE_SPIN:"ExitFreeSpin",ENTER_TRANSITION_TO_NORMAL_GAME:"EnterTransitionToNormalGame",EXIT_TRANSITION_TO_NORMAL_GAME:"ExitTransitionToNormalGame",ENTER_TOTAL_WIN:"EnterTotalWin",TOTAL_WIN_BUTTON_ENABLED:"TotalWinButtonEnabled",TOTAL_WIN_COLLECTED:"TotalWinCollected",EXIT_TOTAL_WIN:"TotalWinExit",REQUEST_API:"RequestAPI",STORY:"Story"},cc._RF.pop())},{}],AutomationDecorator:[function(t,e,i){"use strict";cc._RF.push(e,"607a1pUyWBLsphZz1avN+BH","AutomationDecorator")||(Object.defineProperty(i,"__esModule",{value:!0}),i.automationDec=void 0,i.automationDec=function(t){return function(e,i,n){if(!n)return n;var o=n.value;return n.value=function(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=System.get("automation");n&&t.func.apply(t,__spread(e));var a=o.apply(this,e);return a},n}},cc._RF.pop())},{}],BACKUP_DATA:[function(t,e,i){"use strict";if(!cc._RF.push(e,"4dc392lxVJArKflo+rU3j23","BACKUP_DATA")){Object.defineProperty(i,"__esModule",{value:!0});var n=new cc.Color(255,200,36,255),o=new cc.Color(255,255,255,255),a=Object.freeze({game:{theme_color:n,theme_font_family:"Arial",white_color:o},game_title:{default_font:"Arial"},setting:{theme_color:n,theme_font:"Arial",slider_switch_color:{false:new cc.Color(144,144,150,255),true:n},slider_line_color:{false:new cc.Color(144,144,150,20),true:n},label_switch_color_a:{false:o,true:n},label_switch_color_b:{false:new cc.Color(144,144,150,82),true:n},label_switch_color_c:{false:new cc.Color(255,255,255,30),true:n},button_switch_color_a:{false:new cc.Color(o.r,o.g,o.b,79),true:n},color_button_transition_a:{normal:n,pressed:new cc.Color(n.r,n.g,n.b,128),hover:n,disabled:new cc.Color(n.r,n.g,n.b,66)},white_button_transition_a:{normal:o,pressed:new cc.Color(o.r,o.g,o.b,128),hover:o,disabled:new cc.Color(o.r,o.g,o.b,66)},grey_button_transition_a:{normal:new cc.Color(o.r,o.g,o.b,153),pressed:new cc.Color(133,133,133,153),hover:new cc.Color(o.r,o.g,o.b,153),disabled:new cc.Color(133,133,133,153)},spin_start_label:new cc.Color(255,255,255,201)},login:{theme_color:n,default_font:"Arial"},history:{grey_button_transition_b:{normal:o,pressed:new cc.Color(133,133,133),hover:o,disabled:new cc.Color(133,133,133)},white_button_transition_a:{normal:o,pressed:new cc.Color(255,255,255,128),hover:o,disabled:new cc.Color(255,255,255,66)},calendar_title_select:{true:n,false:new cc.Color(255,255,255,77)},calendar_selection_line:new cc.Color(40,40,52,235),calendar_title_bg:new cc.Color(48,48,60,255),calendar_content_bg:new cc.Color(40,40,52,235),calendar_custom_bg:new cc.Color(48,48,60,255),calendar_custom_line_bg:new cc.Color(48,48,60,255),calendar_custom_title:new cc.Color(255,255,255,153),calendar_custom_dot:new cc.Color(255,255,255,255),calendar_custom_btn:{normal:n,pressed:new cc.Color(119,119,119,255),hover:n,disabled:new cc.Color(87,87,87,255)},calendar_datepicker_default_font:new cc.Color(255,255,255,77),calendar_datepicker_highlight_font:n,calendar_datepicker_highlight_bg:new cc.Color(48,48,60,255),calendar_datepicker_line:new cc.Color(40,40,52,255),theme_color:n,theme_font:"Arial",color_theme_opacity_a:new cc.Color(n.r,n.g,n.b,153),navigator_bg:new cc.Color(48,48,60),navigator_bar_bg:new cc.Color(40,40,52),history_bar_item_bg:{normal:new cc.Color(48,48,60),pressed:new cc.Color(57,57,75,60),hover:new cc.Color(48,48,60),disabled:new cc.Color(40,40,52)},history_bar_item_font_bg:{false:o,true:n},history_main_title:new cc.Color(241,186,91,255),history_list_item_arrow:new cc.Color(255,255,255,64),history_list_item_bg_odd:new cc.Color(40,40,52),history_list_item_bg_even:new cc.Color(45,45,57),history_list_item_bg_pressed:new cc.Color(60,60,70),history_list_item_special_font:n,history_list_item_value_font:new cc.Color(255,255,255,153),history_list_item_date_time_font:new cc.Color(255,255,255,153),history_list_item_line:new cc.Color(255,255,255,0),history_list_item_free_games_icon:n,history_list_header_bg:new cc.Color(40,40,52,255),history_list_header_title_font:new cc.Color(255,255,255,77),history_list_bg:new cc.Color(48,48,60,255),history_list_bottom_circle_loading:o,history_list_middle_circle_loading:new cc.Color(255,255,255,77),history_list_bottom_label_color:o,history_list_middle_label_color:new cc.Color(255,255,255,77),history_list_retry:n,history_list_message_title:new cc.Color(220,220,220,153),history_list_message_message:new cc.Color(220,220,220,77),history_list_title_date:new cc.Color(255,255,255,153),history_list_middle_loading_front:n,history_list_middle_loading_back:new cc.Color(.5*n.r,.5*n.g,.5*n.b),history_list_middle_loading_font_color:n,history_list_bottom_loading_front:n,history_list_bottom_loading_back:new cc.Color(.5*n.r,.5*n.g,.5*n.b),history_summary_bg:new cc.Color(40,40,52,255),history_summary_title_font:n,history_summary_record_font:new cc.Color(255,255,255,153),history_summary_amount_font:o,history_detail_header_title_font:n,history_detail_header_value_font:new cc.Color(120,120,120,255),history_detail_header_bg:new cc.Color(40,40,52,255),history_detail_down_arrow:n,history_detail_line:new cc.Color(40,40,52,255),history_detail_payout_font:new cc.Color(255,255,255,66),history_detail_win_line_value_font:o,history_detail_content_bg:new cc.Color(48,48,60),history_detail_no_win_combination_font:new cc.Color(255,255,255,204),history_detail_title_font:o,history_detail_page_arrow:n,history_detail_page_arrow_bg:new cc.Color(0,0,0,100),history_bar_close_font:new cc.Color(255,255,255,204),history_bar_bg:new cc.Color(48,48,60,255)},alert:{default_title_color:o,default_message_color:o,default_button_title_color:o,default_button_color:n,default_font:"Arial"},free_game:{theme_color:n,theme_font:"Arial"},bonus_wallet:{theme_color:n,theme_font:"Arial"},setting_rules:{title_color:new cc.Color(255,255,255),desc_color:new cc.Color(204,204,204),font_style:"Arial"},setting_payout:{title_color:new cc.Color(255,255,255),value_color:new cc.Color(255,255,255),value_color_red:new cc.Color(192,38,48),desc_color:new cc.Color(204,204,204),font_style:"Arial"},loading:{front_icon_color:n,back_icon_color:new cc.Color(.5*n.r,.5*n.g,.5*n.b),background_color:new cc.Color(0,0,0,0),font_color:n,font_style:"Arial"}});i.default=a,cc._RF.pop()}},{}],BVFrameworkEnum:[function(t,e){"use strict";if(!cc._RF.push(e,"b1bf2Qrw2FBSIUTOSllntH7","BVFrameworkEnum")){var i=function(t,e){var i=a();return function(t){return i[t-=304]}(t,e)},n=System[i(307)](i(310)+i(308)+i(315)+"rk")[i(318)+i(308)+i(315)+i(304)+i(311)];for(var o in{}[i(307)]=function(){return 0},n)e[i(305)+i(317)+"s"][o]=n[o];e[i(305)+i(317)+"s"][i(309)+i(313)+i(306)+"e"]=!0,cc._RF.pop()}function a(){var t=["rkE","exp","dul","get","ram","__e","bvf","num","isB","sMo","der","ewo","uil","ort","BVF"];return(a=function(){return t})()}},{}],BVFramework:[function(t,e){"use strict";if(!cc._RF.push(e,"e7ddf9BufBHUKNDG+75Wm/s","BVFramework")){var i=function(t,e){var i=o();return function(t){return i[t-=438]}(t,e)},n=System[i(439)](i(442)+i(449)+i(451)+"rk")[i(439)+i(452)+i(447)+i(444)+"xt"];e[i(453)+i(438)+"s"][i(439)+i(452)+i(447)+i(444)+"xt"]=n,e[i(453)+i(438)+"s"][i(445)+i(457)+i(462)+"e"]=!0,cc._RF.pop()}function o(){var t=["ort","get","umm","aks","bvf","sIn","nte","__e","y 1","eCo","Mod","ram","0.2","ewo","Gam","exp","ule","pus","der","sMo","BVF","rkD","uil","twe","dul","isB"];return(o=function(){return t})()}},{}],BaseActor:[function(t,e,i){"use strict";if(!cc._RF.push(e,"44962rugTNDrK66VbhURkXd","BaseActor")){i.__esModule=!0,i.default=void 0;var n=t("Enum"),o=t("Utils"),a=cc.v2(102,30),s=cc.Class({extends:cc.Component,properties:{speed:0,maxHp:0},init:function(t){this._data=t,this._inAttackPosition=!1,this.setMaxHP(t.maxHp),this.setHP(this._data.currentHp)},updateData:function(t){this._data=t},getData:function(){return this._data},onEnable:function(){this._actorState=void 0,this.restoreActorState()},setMaxHP:function(t){this.maxHp=t,this._hp>this.maxHp&&this.setHP(this.maxHp)},getActorState:function(){return this._actorState},getChangeInHp:function(){return this._data.hpChange},getApproachRange:function(){return 600},attack:function(t,e,i){this._executeAttack(t,e,function(){i&&i()})},getForwardEventName:function(){throw"method requires to be overriden"},getBackwardEventName:function(){throw"method requires to be overriden"},getAttackEventName:function(){throw"method requires to be overriden"},getBackwardStopEventName:function(){throw"method requires to be overriden"},move:function(){throw"method requires to be overriden"},idle:function(){throw"method requires to be overriden"},isDead:function(){return this._hp<=0&&this._data.currentHp<=0},isBoss:function(){return!1},damaged:function(t,e){var i=this;void 0===e&&(e=n.AttackType.Normal);var a=this._hp-t;this.executeDamagedAnimation(),(0,o.sequenceCallback)(function(t){i.playDamagedEffect(e),t()})(function(){i.setHP(a)})},setHP:function(){throw"method requires to be overriden"},executeDamagedAnimation:function(){},playDamagedEffect:function(t,e){void 0===e&&(e=void 0);var i=this.extraEffectPlayer;t===n.AttackType.Normal?i.playSlashEffect(this.node.position,this.node.parent,e):t===n.AttackType.Magic&&(i.playMagicEffect(this.node.position,cc.color(115,27,185),this.node.parent,e),i.playBrightEffect(this.node.position,this.node.parent))},_getEmoticonPosition:function(){throw"method requires to be overriden"},playEmoticonEffect:function(t,e){void 0===e&&(e=void 0);var i=t,o=this._getEmoticonPosition(i),a=this.emoticonEffectPlayer;switch(i){case n.EmoticonStyle.Sweat:a.playSweatEffect(o,this.node,e);break;case n.EmoticonStyle.Shock:a.playShockFlickerEffect(o,this.node,e);break;case n.EmoticonStyle.ShockExpMarkLv1:a.playShockExclamationMarkEffect(o,this.node,e);break;case n.EmoticonStyle.ShockExpMarkLv2:a.playShockExclamationMarkEffect2(o,this.node,e);break;case n.EmoticonStyle.ShockExpMarkLv3:a.playShockExclamationMarkEffect3(o,this.node,e)}},stopAllEmoticonEffect:function(){this.emoticonEffectPlayer.stopAllEmoticonEffect()},_executeAttack:function(){throw"method requires to be overriden"},invalidateActor:function(){this._data&&this.setHP(this._data.currentHp)},restoreActorState:function(){},spriteAttack:function(t,e,i){var n=this,o=this.sprite;if(o){var a=i.moveSpeedIn,s=i.moveSpeedOut,r=i.minDistance,c=i.maxPositionX,l=i.animFunc;o.didAnimForward=function(){n.moveIntoAttackPosition(e,r,a,c)},o.didAnimBackward=function(){n.exitAttackPosition(s)},l()}},spineAttack:function(t,e,i,n){var o=this,a=this.spine;if(a){var s=.7*i.moveSpeedIn,r=.7*i.moveSpeedOut,c=i.attackHits,l=i.minDistance,h=i.animFunc;a.setEventListener(function(i,h){var u=h.data.name,d=o.getForwardEventName(),p=o.getBackwardEventName(),f=o.getAttackEventName(),_=o.getBackwardStopEventName();switch(u){case d:o.moveIntoAttackPosition(e,l,s);break;case p:o.exitAttackPosition(r);break;case f:o.attackTargetActors(t,c);break;case _:a.timeScale=1,a.setEventListener(void 0),n&&n()}}),a.timeScale=1.3,h()}},attackTargetActors:function(){throw"method requires to be overriden"},shouldMove:function(t,e){return t.x-this.node.x>=e},moveIntoAttackPosition:function(t,e,i,n){var o=this,a=this.shouldMove(t,e);!this._inAttackPosition&&a&&(n&&t.x>n&&(t=cc.v2(n,t.y)),this._inAttackPosition=!0,this._defaultXPosition=this.node.x,this.node.runAction(cc.sequence([cc.moveTo(i,cc.v2(t.x,this.node.y)),cc.callFunc(function(){o.node.x=t.x})])))},exitAttackPosition:function(t){var e=this;this._inAttackPosition&&(this._inAttackPosition=!1,this.node.runAction(cc.sequence([cc.moveTo(t,cc.v2(this._defaultXPosition,this.node.y)),cc.callFunc(function(){e.node.x=e._defaultXPosition})])))},displayBubbleChat:function(t,e,i){var o=this;if(void 0===e&&(e=n.BubbleType.Normal),void 0===i&&(i=2),t){var s=t,r=e,c=this.chatBubbleGenerator;c.getChatBubbleWithMessage(r,this.node,s,n.BubbleDirection.bottomLeft,a,function(t){o.stopBubbleChat(),o.chatBubbleBox={obj:t,bubbleType:r},t.opacity=0,t.runAction(cc.sequence([cc.fadeIn(.25),cc.delayTime(i),cc.fadeOut(.3),cc.callFunc(function(){o.chatBubbleBox&&(c.recycleChatBubble(r,t),o.chatBubbleBox=void 0)})]))},!1,200)}},stopBubbleChat:function(){if(this.chatBubbleBox){var t=this.chatBubbleBox.obj,e=this.chatBubbleBox.bubbleType;this.chatBubbleGenerator.recycleChatBubble(e,t),this.chatBubbleBox=void 0}},_callShakeScreenEffect:function(){this.callShakeScreenEffect&&this.callShakeScreenEffect()},_delayAction:function(t,e){this.node.runAction(cc.sequence([cc.delayTime(t),cc.callFunc(e)]))},destroy:function(){this.stopBubbleChat(),this._super()}});i.default=s,e.exports=i.default,cc._RF.pop()}},{Enum:"Enum",Utils:"Utils"}],BaseEffect:[function(t,e,i){"use strict";if(!cc._RF.push(e,"7f371fEf09Gx6pZ/JC+vdQB","BaseEffect")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Component,properties:{sprite:cc.Sprite,spriteAnim:cc.Animation,sprites:[cc.Sprite],spriteAnimName:"String"},onLoad:function(){this.sprite&&(this.sprite.animDidEnd=this.didAnimEnd.bind(this))},playEffect:function(){this.spriteAnim.play(this.spriteAnimName)},stopEffect:function(){this.spriteAnim.stop()},didAnimEnd:function(){this.effectDidEnd&&this.effectDidEnd(this)},onDestroy:function(){this.sprite&&(this.sprite.animDidEnd=void 0),this.effectDidEnd=void 0}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],BaseEnemyActor:[function(t,e,i){"use strict";if(!cc._RF.push(e,"4517d+jqL9CEK6A6hyhl76j","BaseEnemyActor")){i.__esModule=!0,i.default=void 0;var n=_(t("BaseActor")),o=_(t("HpState")),a=_(t("ElecSprite")),s=_(t("BaseEffect")),r=_(t("GetHitSprite")),c=t("Enum"),l=_(t("AudioLibrary")),h=t("AssetManager"),u=t("GeneralBundle"),d=t("Utils"),p=cc.v2(-250,190),f=cc.Class({extends:n.default,properties:{spine:sp.Skeleton,elecSprite:a.default,enemyState:o.default,getHitSprite:r.default,frontDizzy:s.default,backDizzy:s.default},statics:{_meetMonster:["CatDialog.EncounteredMonsterSpeechUglyLook","CatDialog.EncounteredMonsterSpeechIdentical","CatDialog.EncounteredMonsterSpeechGotStolen","CatDialog.EncounteredMonsterSpeechIntimidate","CatDialog.EncounteredMonsterSpeechGemPower","CatDialog.EncounteredMonsterSpeechMetWeaklings","CatDialog.EncounteredMonsterSpeechPowerStrike","CatDialog.EncounteredMonsterSpeechEradicate"]},onLoad:function(){var t=h.assetManager.getAsset(u.GeneralGameAudioBundle);this.dizzySound=t.dizzyLoop,this.dropPrizeSound=t.monsterCoinDrop,this.node.y+=this.node.height/2,this._setupElecSprite(),this._setupGetHitSprite(),this._setupDizzyEffect(),this._setupSpineListeners()},_setupSpineListeners:function(){var t=this,e=this.spine;e&&(e.setStartListener(function(i){i&&(i.animation?i.animation.name:"")===t.getHitAnim()&&(e.timeScale=1.8)}),e.setCompleteListener(function(i){i&&(i.animation?i.animation.name:"")===t.getHitAnim()&&(e.timeScale=1,e.clearTrack(0),t.spine.setAnimation(0,t.getIdleAnim(),!0,0))}))},_setupElecSprite:function(){this.elecSprite&&(this.elecSprite.node.active=!1)},_setupGetHitSprite:function(){this.getHitSprite&&(this.getHitSprite.node.active=!1,this.getHitSprite.didAnimEnd=this._hitSpriteAnimEnd.bind(this))},_setupDizzyEffect:function(){this.frontDizzy&&(this.frontDizzy.node.active=!1),this.backDizzy&&(this.backDizzy.node.active=!1)},init:function(t){this._super(t),this._isDizzy=t.isDizzy,this._isDizzy?this._isAlive=!0:this._isAlive=t.currentHp>0,this._dropPrize=this._isAlive,this._isAlive?this.node.zIndex=3:this.node.active=!1},setHP:function(t){var e=this.enemyState;this._hp=t;var i=this._hp/this.maxHp;e.setBlood(i),this._data.isDizzy&&(this._isDizzy=!0),this._isDizzy||(this._isAlive=this._hp>0)},isDead:function(){return!this._isAlive},isDizzy:function(){return this._isDizzy},attack:function(t,e,i){this.node.zIndex=3;var n=function(){i&&i()};this._isDizzy?n():this._executeAttack(t,e,n)},attackTargetActors:function(t,e){var i=this,n=e;t.forEach(function(t){var e=i._data.damage;e/=n,t.damaged(e)})},damaged:function(t,e,i){var n=this;if(void 0===e&&(e=c.AttackType.Normal),void 0===i&&(i=!1),!this.isDead()){var o=i?this._data.currentHp:this._hp-t;this.stopDizzy(),i&&(this._isDizzy=this._data.isDizzy),(o>0||this.isDizzy())&&e!==c.AttackType.Lightning&&this.executeDamagedAnimation(),(0,d.sequenceCallback)(function(t){n.playDamagedEffect(e),t()})(function(){n.setHP(o)})}},stopAllEmoticonAnim:function(){this.stopAllEmoticonEffect()},playGetHitAnim:function(){this.spine.node.active=!1,this.getHitSprite.playGetHitAnim()},stopGetHitAnim:function(){this.spine.node.active=!0,this.getHitSprite.stopGetHitAnim()},_hitSpriteAnimEnd:function(){this.stopGetHitAnim(),this.spine.clearTrack(0),this.spine.setAnimation(0,this.getHitAnim(),!1)},playElectrocuted:function(){this.elecSprite.playElectrocuted(),this.spine.node.active=!1},stopElectrocuted:function(){this.spine.node.active=!0,this.elecSprite.stopElectrocuted(),this.spine.setAnimation(0,this.getIdleAnim(),!0)},getIdleAnim:function(){throw"required to be overriden"},getDeflectAnim:function(){return"Deflect"},getHitAnim:function(){throw"required to be overriden"},getDieAnim:function(){throw"required to be overriden"},_getEnemyType:function(){throw"required to be overriden"},onEnable:function(){this._super(),this.showEnemyState()},idle:function(){if(this._actorState!==c.ActorState.idling){this._actorState=c.ActorState.idling;var t=this.spine,e=t.animation,i=this.getIdleAnim();e!==i&&(t.clearTrack(0),t.setAnimation(0,i,!0))}},die:function(){var t=this.spine,e=t.animation,i=this.getDieAnim();e!==i&&(t.clearTrack(0),t.setAnimation(0,i,!1),t.setCompleteListener(this._spineEnd.bind(this)),this.hideEnemyState(),this.stopDizzy(),this.dropPrize(),this._playDieSound())},dizzy:function(){this._switchDizzy(!0),this._dizzyLoop||(this._dizzyLoop=l.default.playEffect(this.dizzySound,!0))},stopDizzy:function(){this._dizzyLoop&&(l.default.stopEffect(this._dizzyLoop,this.dizzySound),this._dizzyLoop=void 0),this._switchDizzy(!1)},_switchDizzy:function(t){t?(this.frontDizzy.node.active=!0,this.backDizzy.node.active=!0,this.frontDizzy.playEffect(),this.backDizzy.playEffect()):(this.frontDizzy.stopEffect(),this.backDizzy.stopEffect(),this.frontDizzy.node.active=!1,this.backDizzy.node.active=!1)},hideEnemyState:function(){var t=this.enemyState;t&&t.hide()},dropPrize:function(){this._dropPrize&&(this.itemGenerator.generateMonsterCoins(this._getEnemyType(),cc.v2(this.node.x,this.node.y),this.node.parent,this.followActor.node,void 0),this._dropPrizeSoundId=l.default.playEffect(this.dropPrizeSound))},showEnemyState:function(){var t=this.enemyState;t&&t.show()},move:function(){},shouldMove:function(t,e){return this.node.x-t.x>=e},getForwardEventName:function(){return"Forward"},getBackwardEventName:function(){return"Back"},getAttackEventName:function(){return"Forward_Stop"},getBackwardStopEventName:function(){return"Back_Stop"},getDeflectStopEventName:function(){return"deflection_Back_Stop"},enterBattlefield:function(t){t&&t()},exitBattlefield:function(t){t&&t()},_spineEnd:function(){var t=this,e=this.spine;e.timeScale=1,this.isDead()&&(this.node.zIndex=-1,this.node.runAction(cc.sequence([cc.fadeOut(.3),cc.callFunc(function(){t.node.opacity=255,e.setCompleteListener(void 0),t.node.active=!1})])))},executeDamagedAnimation:function(){this.playGetHitAnim()},testDamagedAnimation:function(){this.playGetHitAnim()},witchDisplayBubbleChat:function(t,e){var i=this;if(void 0===e&&(e=c.BubbleType.Normal),t){var n=t,o=e,a=this.chatBubbleGenerator;a.getChatBubbleWithMessage(o,this.node,n,c.BubbleDirection.bottomRight,p,function(t){i.stopBubbleChat(),i.chatBubbleBox={obj:t,bubbleType:o},t.opacity=0,t.runAction(cc.sequence([cc.fadeIn(.3),cc.delayTime(2),cc.fadeOut(1),cc.callFunc(function(){a.recycleChatBubble(o,t),i.chatBubbleBox=void 0})]))},!0,200)}},getEncounterDialog:function(){return!1},encounterOpponent:function(){},defeatedByOpponent:function(){},getCounterAttackDialogCat:function(){},getMeetDialogCat:function(){},_playDieSound:function(){},spriteAttack:function(t,e,i){var n=this,o=this.sprite;if(o){var a=i.moveSpeedIn,s=i.moveSpeedOut,r=i.minDistance,c=i.maxPositionX,l=i.animFunc;o.didAnimForward=function(){n.moveIntoAttackPosition(e,r,a,c)},o.didAnimBackward=function(){t.isDead()&&t.playDeflectSound(),n.exitAttackPosition(s)},l()}},spineAttack:function(t,e,i,n){var o=this,a=this.spine;if(a){var s=t[0].isDead(),r=.7*i.moveSpeedIn,c=.7*i.moveSpeedOut,l=.7*i.moveDeflectSpeedOut||c,h=i.attackHits,u=i.minDistance,d=i.animFunc;a.setEventListener(function(i,d){var p=d.data.name,f=o.getForwardEventName(),_=o.getBackwardEventName(),m=o.getAttackEventName(),g=o.getBackwardStopEventName(),y=o.getDeflectStopEventName();switch(p){case f:o.moveIntoAttackPosition(e,u,r);break;case _:o.exitAttackPosition(c);break;case m:s?(o._cancelEffects(),a.setAnimation(0,o.getDeflectAnim(),!1),a.addAnimation(0,o.getIdleAnim(),!0,0),o.exitAttackPosition(l),t.forEach(function(t){t.playDeflectSound()})):o.attackTargetActors(t,h);break;case g:case y:a.timeScale=1,a.setEventListener(void 0),n&&n()}}),a.timeScale=1.3,d()}},_cancelEffects:function(){},destroy:function(){this._dropPrizeSoundId&&(l.default.stopEffect(this._dropPrizeSoundId,this.dropPrizeSound),this._dropPrizeSoundId=void 0),this._targetActor=void 0,this._attackCallback=void 0,this.cleanUpSpine(),this._super()},cleanUpSpine:function(){var t=this.spine;t&&(t.setStartListener(void 0),t.setEventListener(void 0),t.setCompleteListener(void 0))}});i.default=f,e.exports=i.default,cc._RF.pop()}function _(t){return t&&t.__esModule?t:{default:t}}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",BaseActor:"BaseActor",BaseEffect:"BaseEffect",ElecSprite:"ElecSprite",Enum:"Enum",GeneralBundle:"GeneralBundle",GetHitSprite:"GetHitSprite",HpState:"HpState",Utils:"Utils"}],BaseListViewCell:[function(t,e,i){"use strict";if(!cc._RF.push(e,"24d8a0AiVJMa4yCegaay2ry","BaseListViewCell")){Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator,o=n.ccclass,a=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=void 0,e.sprite=void 0,e.selectedBackgroundColor=void 0,e.normalBackgroundColor=void 0,e.endPos=void 0,e}return __extends(e,t),e.prototype.onLoad=function(){this.setupTouchAction()},e.prototype.setupTouchAction=function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnd,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this),this.node.on(cc.Node.EventType.MOUSE_ENTER,this._onMouseEnter,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this._onMouseLeave,this)},e.prototype.removeTouchAction=function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchStart,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnd,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this),this.node.off(cc.Node.EventType.MOUSE_ENTER,this._onMouseEnter,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this._onMouseLeave,this)},e.prototype._onMouseEnter=function(t){this.mouseEnterAction&&this.mouseEnterAction(t)},e.prototype._onMouseLeave=function(t){this.mouseLeaveAction&&this.mouseLeaveAction(t)},e.prototype._onTouchStart=function(t){var e=t.touch,i=cc.v2(e.getLocation().x,e.getLocation().y);this.startPos=i,this.node.color=this.selectedBackgroundColor,this.touchStartAction&&this.touchStartAction(t)},e.prototype._onTouchMoved=function(t){this.node.color=this.normalBackgroundColor,this.touchMoveAction&&this.touchMoveAction(t)},e.prototype._onTouchEnd=function(t){var e=t.touch,i=cc.v2(e.getLocation().x,e.getLocation().y);this.endPos=i,this.node.color=this.normalBackgroundColor,t.stopPropagationImmediate(),this.touchEndAction&&this.touchEndAction(t)},e.prototype._onTouchCancel=function(t){var e=t.touch,i=cc.v2(e.getLocation().x,e.getLocation().y);this.endPos=i,this.node.color=this.normalBackgroundColor,t.stopPropagationImmediate(),this.touchCancelAction&&this.touchCancelAction(t)},e.prototype.destroy=function(){this.removeTouchAction(),t.prototype.destroy.call(this)},__decorate([a(cc.Label)],e.prototype,"label",void 0),__decorate([a(cc.Sprite)],e.prototype,"sprite",void 0),__decorate([a(cc.Color)],e.prototype,"selectedBackgroundColor",void 0),__decorate([a(cc.Color)],e.prototype,"normalBackgroundColor",void 0),__decorate([o],e)}(cc.Component);i.default=s,cc._RF.pop()}},{}],BaseState:[function(t,e,i){"use strict";if(!cc._RF.push(e,"35a60kdo8JCBbJ3LelTcNpm","BaseState")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Object,getName:function(){throw"method needs to be overriden by sub class"},willEnterState:function(){throw"method needs to be overriden by sub class"},willLeaveState:function(){throw"method needs to be overriden by sub class"},executeAction:function(){throw"method needs to be overriden by sub class"}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],BatSprite:[function(t,e,i){"use strict";if(!cc._RF.push(e,"527e6/zZsROTI2dFM8IgrtQ","BatSprite")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Component,onLoad:function(){this._spriteAnim=this.getComponent(cc.Animation),this._sprite=this.getComponent(cc.Sprite)},attack1:function(){this._spriteAnim.play("bat_attack_1")},attack2:function(){this._spriteAnim.play("bat_attack_2")},idle:function(){this._spriteAnim.play("bat_idle")},die:function(){this._spriteAnim.play("bat_die")},stopBatAnim:function(){this._spriteAnim.stop()},spriteAnimForward:function(t){this.didAnimForward&&this.didAnimForward(t)},spriteAnimBackward:function(t){this.didAnimBackward&&this.didAnimBackward(t)},spriteAnimEnded:function(t){this.didAnimEnd&&this.didAnimEnd(t)},spriteAnimHit:function(){this.didAnimHit&&this.didAnimHit()}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],Bat:[function(t,e,i){"use strict";if(!cc._RF.push(e,"c71a6EdB/NGRKt/faIx00kL","Bat")){i.__esModule=!0,i.default=void 0;var n=d(t("BaseEnemyActor")),o=d(t("BatSprite")),a=t("Enum"),s=d(t("AudioLibrary")),r=t("AssetManager"),c=t("ObstacleBundle"),l=t("Utils"),h=shell.I18n,u=cc.Class({extends:n.default,properties:{sprite:o.default},onLoad:function(){var t=r.assetManager.getAsset(c.BatAudioBundle);this.atk1Sound=t.batNormalAttack,this.atk2Sound=t.batComboAttack,this.dieSound=t.batDie,this._super(),this._targetActor=void 0,this._attackCallback=void 0,this.sprite.didAnimEnd=this.didAnimEnd.bind(this),this.sprite.didAnimHit=this.didAnimHit.bind(this),this._switchToSprite(!0),this._meetCat=[]},idle:function(){this._switchToSprite(!0),this.sprite.idle()},die:function(){this._playDieSound(),this._switchToSprite(!0),this.sprite.die(),this.dropPrize(),this.hideEnemyState()},_getEnemyType:function(){return a.EnemyType.bat},_getEmoticonPosition:function(t){var e;switch(t){case a.EmoticonStyle.Sweat:e=cc.v2(.25*this.node.getContentSize().width,.1*this.node.getContentSize().height);break;case a.EmoticonStyle.Shock:e=cc.v2(.55*this.node.getContentSize().width,.3*this.node.getContentSize().height);break;case a.EmoticonStyle.ShockExpMarkLv1:case a.EmoticonStyle.ShockExpMarkLv2:case a.EmoticonStyle.ShockExpMarkLv3:e=cc.v2(-.8*this.node.getContentSize().width,.1*this.node.getContentSize().height)}return e},playGetHitAnim:function(){this.sprite.node.active=!1,this.getHitSprite.playGetHitLongAnim()},stopGetHitAnim:function(){this.sprite.node.active=!0,this.getHitSprite.stopGetHitAnim()},_hitSpriteAnimEnd:function(){this.stopGetHitAnim()},playElectrocuted:function(){this.sprite.node.active=!1,this.elecSprite.playElectrocuted()},stopElectrocuted:function(){this.sprite.node.active=!0,this.elecSprite.stopElectrocuted(),this.sprite.idle()},_switchToSprite:function(t){this.sprite.node.active=t,this._isAnimating=t},didAnimEnd:function(t){var e=this;"die"!==t?(this.idle(),this._attackCallback&&this._attackCallback()):(this.node.zIndex=-1,this.node.runAction(cc.sequence([cc.fadeOut(.3),cc.callFunc(function(){e.node.opacity=255,e.node.active=!1})])))},didAnimHit:function(){this._targetActor&&this._targetActor.damaged(this._hitDamage)},_executeAttack:function(t,e,i){if(t.isDead())this.attack1(t,i);else if(e){var n=(0,l.randomInt)(0,1);0===n?this.attack1(t,i):1===n&&this.attack2(t,i)}else this.attack1(t,i)},attack1:function(t,e){this._targetActor=t,this._attackCallback=e;var i=t.node,n=t.isDead()?i.x+i.width/2+50+100:i.x+i.width/2+50,o=cc.v2(n,i.y),a={moveSpeedIn:.2,moveSpeedOut:.25,minDistance:50,animFunc:this._attack1Anim.bind(this)};this.spriteAttack(t,o,a),s.default.playEffect(this.atk1Sound)},_attack1Anim:function(){this._switchToSprite(!0),this._data&&(this._hitDamage=this._data.damage),this.sprite.attack1()},attack2:function(t,e){this._targetActor=t,this._attackCallback=e;var i=t.node,n=cc.v2(i.x+i.width/2+50,i.y),o={moveSpeedIn:.275,moveSpeedOut:.225,minDistance:50,animFunc:this._attack2Anim.bind(this)};this.spriteAttack(t,n,o),s.default.playEffect(this.atk2Sound)},_attack2Anim:function(){this._data&&(this._hitDamage=(this._data.damage/3).toFixed(1)),this._switchToSprite(!0),this.sprite.attack2()},getMeetDialogCat:function(){var t=this._meetCat.concat(n.default._meetMonster),e=(0,l.randomInt)(0,t.length-1);return h.t(t[e])},_playDieSound:function(){s.default.playEffect(this.dieSound)},destroy:function(){this.sprite.didAnimEnd=void 0,this.sprite.didAnimHit=void 0,this._super()}});i.default=u,e.exports=i.default,cc._RF.pop()}function d(t){return t&&t.__esModule?t:{default:t}}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",BaseEnemyActor:"BaseEnemyActor",BatSprite:"BatSprite",Enum:"Enum",ObstacleBundle:"ObstacleBundle",Utils:"Utils"}],BetCalculator:[function(t,e,i){"use strict";if(!cc._RF.push(e,"7aca93cR71C4bpLvaHT4Kq0","BetCalculator")){Object.defineProperty(i,"__esModule",{value:!0}),i.setCustomCalculateBet=i.defaultCalculateBet=i.calculateBet=void 0;var n,o=t("Utils"),a=function(t,e,i){return o.toDecimalWithExp(t*e*i,2)};i.defaultCalculateBet=a,i.calculateBet=function(t,e,i){return n?n(t,e,i):a(t,e,i)},i.setCustomCalculateBet=function(t){t&&(n=t)},cc._RF.pop()}},{Utils:"Utils"}],BetOptionsButton:[function(t,e,i){"use strict";if(!cc._RF.push(e,"eee5eIua5RLfq1WHQ5CQAQT","BetOptionsButton")){Object.defineProperty(i,"__esModule",{value:!0});var n=t("GenericSettingButton"),o=t("Utils"),a=cc._decorator,s=a.ccclass,r=a.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.layoutNode=void 0,e.betTitle=void 0,e.betNumValue=void 0,e.maxWidth=230,e}return __extends(e,t),e.prototype.updateBetValueLabel=function(t){var e=this;if(this.betNumValue.string=t,this.maxWidth>0){var i=this.layoutNode.getComponent("cc.Layout");i.type=cc.Layout.Type.HORIZONTAL,this.betTitle.node.y=this.betNumValue.node.y=0,i.updateLayout(),o.delayCallback(.1)(function(){e.layoutNode.width>e.maxWidth&&(i.type=cc.Layout.Type.VERTICAL,e.betTitle.node.x=e.betNumValue.node.x=0)})}},__decorate([r(cc.Node)],e.prototype,"layoutNode",void 0),__decorate([r(cc.Label)],e.prototype,"betTitle",void 0),__decorate([r(cc.Label)],e.prototype,"betNumValue",void 0),__decorate([r(cc.Float)],e.prototype,"maxWidth",void 0),__decorate([s],e)}(n.default);i.default=c,cc._RF.pop()}},{GenericSettingButton:"GenericSettingButton",Utils:"Utils"}],BookView:[function(t,e,i){"use strict";if(!cc._RF.push(e,"46ec0uZUDVPMZDgV9Idp1EN","BookView")){Object.defineProperty(i,"__esModule",{value:!0});var n=t("ScrollViewEx"),o=cc.Enum({LEFT:1,RIGHT:2,NULL:3}),a=function(t,e){return t.sub(e)},s=cc._decorator,r=s.ccclass,c=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._nodePools={},e._templates={},e._dataSource=void 0,e}return __extends(e,t),Object.defineProperty(e.prototype,"nodePools",{get:function(){return this._nodePools},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"templates",{get:function(){return this._templates},enumerable:!1,configurable:!0}),e.prototype.register=function(t,e,i){if(this._nodePools[t]);else if(e){var n;n=i?new cc.NodePool(i):new cc.NodePool,this._templates[t]=e,this._nodePools[t]=n}},e.prototype.setDataSource=function(t){t!==this._dataSource&&(this._dataSource=t)},e.prototype.reloadData=function(){this._unbindListener(),this.init(this._sectionIndex)},e.prototype._createContentOuterCell=function(){for(this.contentChildsLayout=[];this.content.children.length<3;){var t=this.node.width,e=this.node.height,i=new cc.Node,n=i.addComponent(cc.Layout);n.type=cc.Layout.Type.VERTICAL,i.setContentSize(t,e),this.content.addChild(i),this.contentChildsLayout.push(n)}},e.prototype._onSizeChanged=function(){for(var t=this.node.width,e=this.node.height,i=0;i<this.content.children.length;i++)this.content.children[i].setContentSize(t,e);this.cellSize=t,this.maxScrollArea=cc.v2(0*-this.cellSize,2*-this.cellSize);var n=this._totalLength>=this.content.children.length?this.content.children.length:this._totalLength;this.distance=this.cellSize;var o=this.contentLayout.spacingX/n;this.distance+=o,this._changeTo(this.currIndex)},e.prototype._bindListener=function(){this.node.on("size-changed",this._onSizeChanged,this)},e.prototype._unbindListener=function(){this.node.off("size-changed",this._onSizeChanged,this)},e.prototype.init=function(t){this._bindListener(),this._createContentOuterCell(),this.contentLayout=this.content.getComponent(cc.Layout),this.cellSize=this.node.width,this.target=0,this.originalSpeed=this.speed,this.freeCells=[],this.dir=o.NULL,this.selected=!0,this._sectionIndex=t,this._totalLength=0,this.constChildList=[],this.middleIndex=Math.floor(this.content.children.length/2),this.currIndex=0,this.itemOffSet=0,this.snapPause=!1,this.maxScrollArea=cc.v2(0*-this.cellSize,2*-this.cellSize),this._totalLength=this._dataSource.getCount(this,t);for(var e=0;e<this.content.children.length;e++){var i=void 0;e<=this._totalLength-1?this.content.children[e].children.length?(this._enqueueReusableItem(this.content.children[e].children[0]),(i=this._dataSource.getItem(this,e,t)).parent=this.content.children[e],this.content.children[e].zIndex=e,i.cellIndex=e%this._totalLength,this.content.children[e].slotID=e,this.constChildList.push(i)):(this.content.children[e].zIndex=e,(i=this._dataSource.getItem(this,e,t)).parent=this.content.children[e],this._bindTouchListener(i),i.cellIndex=e%this._totalLength,this.content.children[e].slotID=e,this.constChildList.push(i)):(this.content.children[e].zIndex=e,this.content.children[e].slotID=e),this._totalLength-1>=e?this.content.children[e].active=!0:this.content.children[e].active=!1}this._totalLength>=this.content.children.length?this.totalItems=this.content.children.length-1:this.totalItems=this._totalLength-1;var n=this._totalLength>=this.content.children.length?this.content.children.length:this._totalLength;this.distance=this.cellSize;var a=this.contentLayout.spacingX/n;this.distance+=a,this._changeTo(this.currIndex)},e.prototype.toLeftItem=function(){var t=this.content.children[0].children[0].cellIndex-1;if(2===this.currIndex)return this.currIndex-=1,this._changeTo(this.currIndex),void(this.nextAppearTarget&&this.nextAppearTarget(this.constChildList[this.content.children[this.currIndex].slotID].cellIndex));if(t<0)0===this.currIndex?(this.closeFromLeft&&this.closeFromLeft(),this._changeTo(this.currIndex)):(this.currIndex=0,this._changeTo(this.currIndex),this.cancelCloseBook&&this.cancelCloseBook(),this.nextAppearTarget&&this.nextAppearTarget(this.constChildList[this.content.children[this.currIndex].slotID].cellIndex));else{for(var e=0;e<this.content.children.length;e++)if(e===this.content.children.length-1){t<0&&(t=this._totalLength-1),this._enqueueReusableItem(this.content.children[e].children[0]);var i=this._dataSource.getItem(this,t,this._sectionIndex);this.constChildList[this.content.children[e].slotID]=i,this.constChildList[this.content.children[e].slotID].cellIndex=t,this.content.children[e].zIndex=0,i.parent=this.content.children[e]}else this.content.children[e].zIndex+=1;this.resetLayout=!0,this.changeIndexTo=0,this.currIndex-=1,this.nextAppearTarget&&this.nextAppearTarget(this.constChildList[this.content.children[this.currIndex].slotID].cellIndex),this.contentLayout.updateLayout(),this.content.x=this.content.x+this.itemOffSet,this.snapDone=!1,this.currIndex=this.middleIndex}},e.prototype.toRightItem=function(){var t=this.content.children[this.totalItems].children[0].cellIndex+1;if(0===this.currIndex&&this.currIndex<this.totalItems)return this.currIndex+=1,this._changeTo(this.currIndex),void(this.nextAppearTarget&&this.nextAppearTarget(this.constChildList[this.content.children[this.currIndex].slotID].cellIndex));if(t>this._totalLength-1)this.currIndex===this.totalItems?(this.closeFromRight&&this.closeFromRight(),this._changeTo(this.currIndex)):(this.currIndex=this.totalItems,this._changeTo(this.currIndex),this.cancelCloseBook&&this.cancelCloseBook(),this.nextAppearTarget&&this.nextAppearTarget(this.constChildList[this.content.children[this.currIndex].slotID].cellIndex));else{for(var e=this.content.children.length-1;e>=0;e--)if(0===e){t>=this._totalLength&&(t=0),this._enqueueReusableItem(this.content.children[e].children[0]);var i=this._dataSource.getItem(this,t,this._sectionIndex);this.constChildList[this.content.children[e].slotID]=i,this.constChildList[this.content.children[e].slotID].cellIndex=t,this.content.children[e].zIndex=this.content.children.length-1,i.parent=this.content.children[e]}else this.content.children[e].zIndex-=1;this.resetLayout=!0,this.changeIndexTo=2,this.currIndex+=1,this.nextAppearTarget&&this.nextAppearTarget(this.constChildList[this.content.children[this.currIndex].slotID].cellIndex),this.contentLayout.updateLayout(),this.content.x=this.content.x+this.itemOffSet,this.snapDone=!1,this.currIndex=this.middleIndex}},e.prototype.setElasticLeft=function(t){this.elasticLeft=t},e.prototype.setElasticRight=function(t){this.elasticRight=t},e.prototype.setClosingFromLeft=function(t){this.closingFromLeft=t},e.prototype.setCloseFromLeft=function(t){this.closeFromLeft=t},e.prototype.setClosingFromRight=function(t){this.closingFromRight=t},e.prototype.setCloseFromRight=function(t){this.closeFromRight=t},e.prototype.setCancelCloseBook=function(t){this.cancelCloseBook=t},e.prototype.setStartScrolling=function(t){this.startScrolling=t},e.prototype.getAllItems=function(){var t=[];return this.content.children.forEach(function(e){e.children.length&&t.push(e.children[0])}),t},e.prototype.scrollTo=function(t){if(this.snapDone&&!this.snapPause){var e=this.content.children[this.currIndex].children[0].cellIndex;if(e!==t&&!(t>this._totalLength-1||t<0))if(t>e)if(t===e+1)0===this.currIndex?this.toRightItem():(this.dir=o.RIGHT,this.itemOffSet=this.cellSize,this._recycleItem());else if(0===this.currIndex){var i=this.content.children.length-1;this._enqueueReusableItem(this.content.children[i].children[0]);var n=this._dataSource.getItem(this,t,this._sectionIndex);this.constChildList[this.content.children[i].slotID]=n,this.constChildList[this.content.children[i].slotID].cellIndex=t,n.parent=this.content.children[i],this.speed=10,this.currIndex=2,this.reloadCells=!0,this._changeTo(this.currIndex)}else{for(var a=t,s=this.content.children.length-1;s>=0;s--)0===s?(this.content.children[s].zIndex=2,this._enqueueReusableItem(this.content.children[s].children[0]),n=this._dataSource.getItem(this,a,this._sectionIndex),this.constChildList[this.content.children[s].slotID]=n,this.constChildList[this.content.children[s].slotID].cellIndex=a,n.parent=this.content.children[s]):this.content.children[s].zIndex=1===s?0:1;this.currIndex=0,this.changeIndexTo=2,this.changeContentPos=!0}else if(t===e-1)2===this.currIndex?this.toLeftItem():(this.dir=o.LEFT,this.itemOffSet=-this.cellSize,this._recycleItem());else if(this.currIndex===this.content.children.length-1)a=0,this._enqueueReusableItem(this.content.children[a].children[0]),n=this._dataSource.getItem(this,t,this._sectionIndex),this.constChildList[this.content.children[a].slotID]=n,this.constChildList[this.content.children[a].slotID].cellIndex=t,n.parent=this.content.children[a],this.speed=10,this.currIndex=0,this.reloadCells=!0,this._changeTo(this.currIndex);else{for(i=t,s=this.content.children.length-1;s>=0;s--)2===s?(this.content.children[s].zIndex=0,this._enqueueReusableItem(this.content.children[s].children[0]),n=this._dataSource.getItem(this,i,this._sectionIndex),this.constChildList[this.content.children[s].slotID]=n,this.constChildList[this.content.children[s].slotID].cellIndex=i,n.parent=this.content.children[s]):this.content.children[s].zIndex=1===s?2:1;this.currIndex=2,this.changeIndexTo=0,this.changeContentPos=!0}}},e.prototype.dequeueReusableItem=function(t){var e,i=this._nodePools[t];if(i){if(!(e=i.get())){var n=this._templates[t];e=cc.instantiate(n)}e.lv_type=t}return e},e.prototype._enqueueReusableItem=function(t){var e,i=t.lv_type;i&&(e=this._nodePools[i]),e&&e.put(t)},e.prototype._reloadCellsData=function(){var t=this.content.children[this.currIndex].children[0].cellIndex;if(t===this._totalLength-1)for(var e=t-2,i=t-1,n=this.content.children.length-1;n>=0;n--)if(0===n){this._enqueueReusableItem(this.content.children[n].children[0]);var o=this._dataSource.getItem(this,e,this._sectionIndex);this.constChildList[this.content.children[n].slotID]=o,this.constChildList[this.content.children[n].slotID].cellIndex=e,o.parent=this.content.children[n]}else 1===n&&(this._enqueueReusableItem(this.content.children[n].children[0]),o=this._dataSource.getItem(this,i,this._sectionIndex),this.constChildList[this.content.children[n].slotID]=o,this.constChildList[this.content.children[n].slotID].cellIndex=i,o.parent=this.content.children[n]);else if(0===t){i=t+1;var a=t+2;for(n=this.content.children.length-1;n>=0;n--)1===n?(this._enqueueReusableItem(this.content.children[n].children[0]),o=this._dataSource.getItem(this,i,this._sectionIndex),this.constChildList[this.content.children[n].slotID]=o,this.constChildList[this.content.children[n].slotID].cellIndex=i,o.parent=this.content.children[n]):2===n&&(this._enqueueReusableItem(this.content.children[n].children[0]),o=this._dataSource.getItem(this,a,this._sectionIndex),this.constChildList[this.content.children[n].slotID]=o,this.constChildList[this.content.children[n].slotID].cellIndex=a,o.parent=this.content.children[n])}else if(0===this.currIndex){for(i=t+1,a=t-1,n=this.content.children.length-1;n>=0;n--)1===n?(this.content.children[n].zIndex=2,this._enqueueReusableItem(this.content.children[n].children[0]),o=this._dataSource.getItem(this,i,this._sectionIndex),this.constChildList[this.content.children[n].slotID]=o,this.constChildList[this.content.children[n].slotID].cellIndex=i,o.parent=this.content.children[n]):2===n?(this.content.children[n].zIndex=0,this._enqueueReusableItem(this.content.children[n].children[0]),o=this._dataSource.getItem(this,a,this._sectionIndex),this.constChildList[this.content.children[n].slotID]=o,this.constChildList[this.content.children[n].slotID].cellIndex=a,o.parent=this.content.children[n]):this.content.children[n].zIndex=1;this.resetContentPos=!0}else{for(e=t+1,i=t-1,n=this.content.children.length-1;n>=0;n--)0===n?(this.content.children[n].zIndex=2,this._enqueueReusableItem(this.content.children[n].children[0]),o=this._dataSource.getItem(this,e,this._sectionIndex),this.constChildList[this.content.children[n].slotID]=o,this.constChildList[this.content.children[n].slotID].cellIndex=e,o.parent=this.content.children[n]):1===n?(this.content.children[n].zIndex=0,this._enqueueReusableItem(this.content.children[n].children[0]),o=this._dataSource.getItem(this,i,this._sectionIndex),this.constChildList[this.content.children[n].slotID]=o,this.constChildList[this.content.children[n].slotID].cellIndex=i,o.parent=this.content.children[n]):this.content.children[n].zIndex=1;this.resetContentPos=!0}},e.prototype._changeTo=function(t){t>this.totalItems||t<0||(this.currIndex=t,this.target=-this.currIndex*this.distance,this.snapDone=!1)},e.prototype._recycleItem=function(){this.dir===o.LEFT&&this.content.x>this.maxScrollArea.y?this.toLeftItem():this.dir===o.RIGHT&&this.content.x<this.maxScrollArea.x&&this.toRightItem(),this.dir=o.NULL},e.prototype.update=function(t){var e=this;this.snapDone||this.snapPause?this.changeContentPos&&(this.changeContentPos=!1,this.target=-this.currIndex*this.distance,this.content.x=-this.currIndex*this.distance,this._changeTo(this.changeIndexTo),this.reloadCells=!0):(this.content.x=this._lerp1D(this.content.x,this.target,t,this.speed,function(){e.snapFinish&&e.snapFinish(e.constChildList[e.content.children[e.currIndex].slotID].cellIndex),e.reloadCells&&(e.reloadCells=!1,e.speed=e.originalSpeed,e._reloadCellsData())}),this.resetContentPos&&(this.resetContentPos=!1,this.currIndex=this.middleIndex,this.target=-this.currIndex*this.distance,this.content.x=-this.currIndex*this.distance),this.content.sortAllChildren())},e.prototype._onTouchBegan=function(t,e){if(!this.reloadCells&&this.content.children.length){this.snapPause=!0;var i=t.touch,n=cc.v2(i.getLocation().x,i.getLocation().y);this.startPos=n,this._onBegan(t,e)}else this.startPos=null},e.prototype._onTouchMoved=function(t,e){var i=t.touch,n=cc.v2(i.getLocation().x,i.getLocation().y);this.startPos&&this.content.children.length&&(this.startPos.x<n.x?(null!=this.elasticLeft&&(this.elastic=this.elasticLeft),0===this.content.children[0].children[0].cellIndex&&0===this.currIndex?(this.selected&&this.closingFromLeft&&this.closingFromLeft(this.startPos.x,n.x),0!==this.content.x&&this.selected&&this._onMove(t,e)):this.selected&&this._onMove(t,e)):(null!=this.elasticRight&&(this.elastic=this.elasticRight),this.content.children[this.totalItems].children[0].cellIndex+1===this._totalLength&&this.currIndex===this.totalItems?(this.selected&&this.closingFromRight&&this.closingFromRight(this.startPos.x,n.x),this.content.x!==this.content.width&&this.selected&&this._onMove(t,e)):this.selected&&this._onMove(t,e)),this.content.x>0&&null!=this.elasticLeft?this.elastic=this.elasticLeft:this.content.x>-this.content.width&&null!=this.elasticRight&&(this.elastic=this.elasticRight))},e.prototype._onTouchEnded=function(t,e){if(!this.reloadCells&&this.content.children.length){this.dragElastic=!1;var i=t.touch,n=cc.v2(i.getLocation().x,i.getLocation().y);this.currentPos=n,this.startPos&&(this._touchMinDistance(this.startPos.x,this.currentPos.x)&&this.selected?this.dir!=o.RIGHT&&this.startPos.x>this.currentPos.x?(this.dir=o.RIGHT,this.itemOffSet=this.cellSize,this._recycleItem(),this.cancelCloseBook&&this.cancelCloseBook()):this.dir!=o.LEFT&&this.startPos.x<this.currentPos.x?(this.dir=o.LEFT,this.itemOffSet=-this.cellSize,this._recycleItem()):(this._changeTo(this.currIndex),this.cancelCloseBook&&this.cancelCloseBook()):(this._changeTo(this.currIndex),this.cancelCloseBook&&this.cancelCloseBook()),this.snapPause=!1,this._onEnded(t,e))}},e.prototype._onTouchCancelled=function(t,e){if(!this.reloadCells&&this.content.children.length){this.dragElastic=!1;var i=t.touch,n=cc.v2(i.getLocation().x,i.getLocation().y);this.currentPos=n,this.startPos&&(this._touchMinDistance(this.startPos.x,this.currentPos.x)&&this.selected?this.dir!=o.RIGHT&&this.startPos.x>this.currentPos.x?(this.dir=o.RIGHT,this.itemOffSet=this.cellSize,this._recycleItem(),this.cancelCloseBook&&this.cancelCloseBook()):this.dir!=o.LEFT&&this.startPos.x<this.currentPos.x?(this.dir=o.LEFT,this.itemOffSet=-this.cellSize,this._recycleItem()):(this._changeTo(this.currIndex),this.cancelCloseBook&&this.cancelCloseBook()):(this._changeTo(this.currIndex),this.cancelCloseBook&&this.cancelCloseBook()),this.snapPause=!1,this._onCancelled(t,e))}},e.prototype._onBegan=function(t){if(this.clickBegan=!0,this.enabledInHierarchy){var e=t.touch;this.content&&this._handlePressLogic(e),this._touchMoved=!1,this._stopPropagationIfTargetIsMe(t)}},e.prototype._onMove=function(t){if(this.clickBegan&&(this.clickBegan=!1,this.startScrolling&&this.startScrolling()),this.enabledInHierarchy){var e=t.touch;if(this.content&&this._handleMoveLogic(e),this.cancelInnerEvents){var i,n=(i=e.getLocation(),e.getStartLocation(),i.mag());if(a(n)>7&&!this._touchMoved&&t.target!==this.node){var o=new cc.Event.EventTouch(t.getTouches(),t.bubbles);o.type=cc.Node.EventType.TOUCH_CANCEL,o.touch=t.touch,o.simulate=!0,t.target.dispatchEvent(o),this._touchMoved=!0}this._stopPropagationIfTargetIsMe(t)}}},e.prototype._onEnded=function(t){if(this.clickBegan=!1,this.enabledInHierarchy){var e=t.touch;this.content&&this._handleReleaseLogic(e),this._dispatchEvent("touch-up"),this._touchMoved?t.stopPropagation():this._stopPropagationIfTargetIsMe(t)}},e.prototype._onCancelled=function(t){if(this.clickBegan=!1,this.enabledInHierarchy){if(!t.simulate){var e=t.touch;this.content&&this._handleReleaseLogic(e)}this._stopPropagationIfTargetIsMe(t)}},e.prototype._mouseWheelHorizontal=function(){this._mouseWheelEvent&&this._mouseWheelEvent.getScrollY()>0?this.dir=o.RIGHT:this._mouseWheelEvent&&this._mouseWheelEvent.getScrollY()<0&&(this.dir=o.LEFT)},e.prototype._onMouseWheelStart=function(){this.snapPause=!0,this.snapDone=!0},e.prototype._onMouseWheelEnd=function(){this.itemOffSet=this.cellSize,this._recycleItem(),this.snapPause=!1,this._mouseWheelEvent=void 0},e.prototype._onMouseWheel=function(t){if(this.content.children.length&&this.enabledInHierarchy){this._mouseWheelEvent=t;var e=cc.v2(0,0);this.vertical?e=cc.v2(0,-.1*t.getScrollY()):this.horizontal&&(e=cc.v2(-.1*t.getScrollY(),0),this._mouseWheelHorizontal()),this._mouseWheelEventElapsedTime=0,this._processDeltaMove(e),this._stopMouseWheel||(this._handlePressLogic(),this.schedule(this._checkMouseWheel,1/60),this._stopMouseWheel=!0,this._onMouseWheelStart()),this._stopPropagationIfTargetIsMe(t)}},e.prototype._checkMouseWheel=function(t){var e,i;if(e=this._getHowMuchOutOfBoundary(),i=cc.v2(0,0),1e-4,!e.fuzzyEquals(i,1e-4))return this._processInertiaScroll(),this.unschedule(this._checkMouseWheel),this._stopMouseWheel=!1,void this._onMouseWheelEnd();this._mouseWheelEventElapsedTime+=t,this._mouseWheelEventElapsedTime>.1&&(this._onScrollBarTouchEnded(),this.unschedule(this._checkMouseWheel),this._stopMouseWheel=!1,this._onMouseWheelEnd())},__decorate([r],e)}(n.default));i.default=c,cc._RF.pop()}},{ScrollViewEx:"ScrollViewEx"}],BreakPointGenerator:[function(t,e,i){"use strict";if(!cc._RF.push(e,"16a92gU80lPS78x4K9pSaRj","BreakPointGenerator")){i.__esModule=!0,i.default=void 0;var n=t("Utils"),o=cc.Class({extends:cc.Object,ctor:function(){this._numberContainerPool=new cc.NodePool,this.worldLayer=void 0,this.numberContainer=void 0,this._digitWidth=50,this._digitHeight=50,this._count=0,this._containerNodeDic={},this._destroyIndex=0},generateNumbers:function(t,e,i,o){if(0!==t){var a=(0,n.formatCurrency)(t,"",""),s=this._dequeueReusableItem();s||(s=cc.instantiate(this.numberContainer)),this._containerNodeDic[i]=s,this._isCounting||(this._count=0,this._reachCount=0,this._isCounting=!0),this._count++,this._count==o?this._isCounting=!1:this._count==Math.round(o/2)&&(this._destroyIndex=i),s.x=e.x,s.y=e.y,s.opacity=255,s._money=t,s.getComponent(cc.Label).string=a,this.worldLayer.addChild(s,99),s.opacity=0,s.runAction(cc.spawn([cc.callFunc(function(){var t=s.width,e=170/t,i=t*s.scaleX;isFinite(e)&&Math.round(i)>170&&(s.scale=e)}),cc.fadeIn(.2),cc.sequence([cc.moveBy(.2,cc.v2(0,25)),cc.scaleBy(.2,1.1),cc.scaleBy(.3,1/1.1)])]))}},moveToInfoBoard:function(t){var e=this,i=this._containerNodeDic[t];if(i){var n=this.worldLayer.width/2,o=[],a=i.x,s=i.y,r=n-a,c=60-(s+40),l=r/372*20,h=c/840*-40*(t>17?1:-1);o.push(cc.v2(a,s+40)),o.push(cc.v2(a+.1*r,s+40+.4*c)),o.push(cc.v2(a+.3*r,s+40+.8*c)),o.push(cc.v2(a+.8*r,s+40+.95*c)),o.push(cc.v2(a+.95*r,s+40+.99*c)),o.push(cc.v2(n,60));var u=Math.sqrt(Math.pow(r,2)+Math.pow(c,2))/918.6860181803139;i.scaleX=i.scaleY=1,i.runAction(cc.sequence(cc.spawn([cc.skewTo(u,l,h),cc.fadeOut(.85*u),cc.cardinalSplineTo(u,o,0)]),cc.callFunc(function(){i.skewX=i.skewY=0,e._removeContainer(i,t),e._reachCount++,e.reachInfoBoard&&e.reachInfoBoard(i._money,e._reachCount==e._count,1==e._reachCount)})))}},simpleMoveToInfoBoard:function(t){var e=this,i=this._containerNodeDic[t];if(i){var n=this.worldLayer.width/2,o=[],a=i.x,s=i.y,r=n-a,c=60-(s+40);o.push(cc.v2(a,s+40)),o.push(cc.v2(a+.1*r,s+40+.4*c)),o.push(cc.v2(a+.3*r,s+40+.8*c)),o.push(cc.v2(a+.8*r,s+40+.95*c)),o.push(cc.v2(a+.95*r,s+40+.99*c)),o.push(cc.v2(n,60));var l=Math.sqrt(Math.pow(r,2)+Math.pow(c,2))/918.6860181803139;i.scaleX=i.scaleY=1,i.runAction(cc.sequence(cc.spawn([cc.fadeOut(.85*l),cc.cardinalSplineTo(l,o,0)]),cc.callFunc(function(){i.skewX=i.skewY=0,e._removeContainer(i,t),e._reachCount++,e.reachInfoBoard&&e.reachInfoBoard(i._money,e._reachCount==e._count,1==e._reachCount)})))}},_removeContainer:function(t,e){t.stopAllActions(),t.scaleX=t.scaleY=1,t.removeFromParent(),this._numberContainerPool.put(t),delete this._containerNodeDic[e]},_dequeueReusableItem:function(){return this._numberContainerPool.get()}});i.default=o,e.exports=i.default,cc._RF.pop()}},{Utils:"Utils"}],ButtonHitTest:[function(t,e,i){"use strict";if(!cc._RF.push(e,"95aac3PHb1J8pXlbPzijfq9","ButtonHitTest")){i.__esModule=!0,i.buttonHitTest=function(t){var e=cc.EventListener.ListenerID.TOUCH_ONE_BY_ONE;cc.internal.eventManager[n._sortListenersOfSceneGraphPriority](e,cc.director.getScene());var i=cc.internal.eventManager[n._getListeners](e);if(!i)return!1;for(var o,a=i[n._sceneGraphListeners],s=t.parent.convertToWorldSpaceAR(t.getPosition()),r=0;r<a.length;++r)if(a[r].owner[n._hitTest](s,a[r])){o=a[r].owner;break}return o&&o===t};var n=cc.Enum({_sortListenersOfSceneGraphPriority:"_sortListenersOfSceneGraphPriority",_getListeners:"_getListeners",_hitTest:"_hitTest",_sceneGraphListeners:"_sceneGraphListeners"});cc._RF.pop()}},{}],ButtonTheme:[function(t,e,i){"use strict";if(!cc._RF.push(e,"2a5d1nUeQZE9KCVbljwPCZP","ButtonTheme")){i.__esModule=!0,i.default=void 0;var n=t("UIAppearanceHelper"),o=cc.Enum({NONE:0,COLOR:1,SPRITE:2,SCALE:3}),a=cc.Class({extends:cc.Component,ctor:function(){},editor:!1,properties:{transition:{default:o.NONE,tooltip:!1,type:o,animatable:!1,notify:function(){this._updateButtonTransitionSelection()}},domainKey:{tooltip:!1,default:""},colorKey:{tooltip:!1,default:"",notify:function(){this._updateButtonColorTransition()}}},onLoad:function(){this._button=this.node.getComponent(cc.Button),this._updateButtonTransitionSelection(),this._updateButtonColorTransition()},_updateButtonTransitionSelection:function(){var t=this._button;t&&(t.transition=this.transition)},_updateButtonColorTransition:function(){var t=this._button;if(t&&this.transition==o.COLOR){this.domainKey,this.colorKey;var e=n.uiAppearanceHelper.v(this.domainKey+"."+this.colorKey+".normal"),i=n.uiAppearanceHelper.v(this.domainKey+"."+this.colorKey+".pressed"),a=n.uiAppearanceHelper.v(this.domainKey+"."+this.colorKey+".hover"),s=n.uiAppearanceHelper.v(this.domainKey+"."+this.colorKey+".disabled");e&&(t.node.opacity=e.getA(),t.normalColor=e,t.pressedColor=i,t.hoverColor=a,t.disabledColor=s)}}});i.default=a,e.exports=i.default,cc._RF.pop()}},{UIAppearanceHelper:"UIAppearanceHelper"}],Button:[function(t,e,i){"use strict";if(!cc._RF.push(e,"0a573tIV9xKS4qfPLe+tVuo","Button")){Object.defineProperty(i,"__esModule",{value:!0});var n=cc.Enum({_transitionFinished:"_transitionFinished",_fromColor:"_fromColor",_toColor:"_toColor",_fromScale:"_fromScale",_toScale:"_toScale",_pressed:"_pressed"}),o=cc._decorator,a=o.ccclass,s=o.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.targetCascadeOpacity=!1,e._touchBeganPosition=void 0,e}return __extends(e,t),e.prototype.update=function(t){var e=this.target;if(!this[n._transitionFinished]&&(this.transition===cc.Button.Transition.COLOR||this.transition===cc.Button.Transition.SCALE)){this.time+=t;var i,o,a,s=1;if(this.duration>0&&(s=this.time/this.duration),s>=1&&(s=1,this[n._transitionFinished]=!0),this.transition===cc.Button.Transition.COLOR){this[n._fromColor].a=e.opacity;var r=this[n._fromColor].lerp(this[n._toColor],s);e.opacity=r.a,r.a=255,e.color=r}else this.transition===cc.Button.Transition.SCALE&&(e.scale=(i=this[n._fromScale],o=this[n._toScale],a=s,cc.misc.lerp(i,o,a)))}},e.prototype._onTouchBegan=function(e){this._touchBeganPosition=this.node.parent.convertToWorldSpaceAR(e.touch.getLocation()),t.prototype._onTouchBegan.call(this,e)},e.prototype._onTouchMove=function(e){var i;this[n._pressed]?(i=this.node.parent.convertToWorldSpaceAR(e.touch.getLocation()),this._touchBeganPosition.sub(i).mag()>50&&(this[n._pressed]=!1,this._touchBeganPosition=void 0)):this._touchBeganPosition=void 0;t.prototype._onTouchMove.call(this,e)},__decorate([s(cc.Boolean)],e.prototype,"targetCascadeOpacity",void 0),__decorate([a],e)}(cc.Button);i.default=r,cc._RF.pop()}},{}],CallbackEffect:[function(t,e,i){"use strict";if(!cc._RF.push(e,"7fd86c+mUxL5Ls86unhtMHs","CallbackEffect")){i.__esModule=!0,i.default=void 0;var n,o=(n=t("BaseEffect"))&&n.__esModule?n:{default:n},a=cc.Class({extends:o.default,onLoad:function(){this._super(),this.sprite.didCallback=this.didCallback.bind(this)},didCallback:function(){this.executeCallback&&this.executeCallback(this)},onDestroy:function(){this.executeCallback=void 0,this.sprite.didCallback=void 0,this._super()}});i.default=a,e.exports=i.default,cc._RF.pop()}},{BaseEffect:"BaseEffect"}],Camera:[function(t,e){"use strict";cc._RF.push(e,"131fcAHM/RGbYo5T0xKtpfY","Camera")||cc._RF.pop()},{}],CanvasResizeBroadcaster:[function(t,e){"use strict";if(!cc._RF.push(e,"73669Sw/iJAJbjCyFUlnrmZ","CanvasResizeBroadcaster")){var i=function(t,e){var i=o();return function(t){return i[t-=216]}(t,e)},n=System[i(224)](i(230)+i(232))[i(222)+i(226)+i(218)+i(221)+i(234)+i(229)+i(233)+"er"];e[i(216)+i(235)+"s"][i(231)+i(223)+"t"]=n,e[i(216)+i(235)+"s"][i(219)+i(217)+i(227)+"e"]=!0,cc._RF.pop()}function o(){var t=["exp","sMo","Res","__e","der","ize","Can","aul","get","uil","vas","dul","isB","adc","com","def","mon","ast","Bro","ort"];return(o=function(){return t})()}},{}],CatSprite:[function(t,e,i){"use strict";if(!cc._RF.push(e,"9d199G6BjRJRby3Na1RKa8K","CatSprite")){i.__esModule=!0,i.default=void 0;var n=cc.v2(0,0),o=cc.v2(19.5,-19.5),a=cc.v2(78.5,-19.5),s=cc.v2(11.5,19),r=cc.Class({extends:cc.Component,properties:{defaultFrame:cc.SpriteFrame,defaultStartGrabFrame:cc.SpriteFrame,defaultGrabFrame:cc.SpriteFrame,defaultFlyDownFrame:cc.SpriteFrame,defaultProtectFrame:cc.SpriteFrame,directFlyFrame:cc.SpriteFrame,defaultVictoryFrame:cc.SpriteFrame},onLoad:function(){this.node.zIndex=10,this._spriteAnim=this.getComponent(cc.Animation),this._sprite=this.getComponent(cc.Sprite)},idle:function(){this._sprite.spriteFrame=this.defaultFrame,this._sprite.node.position=n,this._spriteAnim.play("cat_idle")},startGrab:function(){this._sprite.spriteFrame=this.defaultStartGrabFrame,this._sprite.node.position=o,this._spriteAnim.play("cat_start_grab")},grab:function(){this._sprite.spriteFrame=this.defaultGrabFrame,this._sprite.node.position=n,this._spriteAnim.play("cat_grab")},flyDown:function(){this._sprite.spriteFrame=this.defaultFlyDownFrame,this._sprite.node.position=n,this._spriteAnim.play("cat_fly_down")},directFlyDown:function(){this._sprite.node.position=n,this._sprite.spriteFrame=this.directFlyFrame},protect:function(){this._sprite.spriteFrame=this.defaultProtectFrame,this._sprite.node.position=a,this._spriteAnim.play("cat_protect")},stopAnimation:function(){this._spriteAnim.stop()},victory:function(){this._sprite.spriteFrame=this.defaultVictoryFrame,this._sprite.node.position=s,this._spriteAnim.play("cat_victory")},spriteAnimEnded:function(t){"StartGrab"===t?this.didEndStartGrab&&this.didEndStartGrab():"Victory"===t?this.didEndVictory&&this.didEndVictory():"Grab"===t?this.didEndGrab&&this.didEndGrab():"FlyDown"===t?this.didEndFlyDown&&this.didEndFlyDown():"CatProtectRealEnd"===t?(this._sprite.node.position=n,this.didRealEndProtect&&this.didRealEndProtect()):this.didEndProtect&&this.didEndProtect()}});i.default=r,e.exports=i.default,cc._RF.pop()}},{}],Cat:[function(t,e,i){"use strict";if(!cc._RF.push(e,"5ee37XZmoVHTqe7KtM7WOc8","Cat")){i.__esModule=!0,i.default=void 0;var n=l(t("CatSprite")),o=l(t("BaseActor")),a=t("Enum"),s=t("Utils"),r=shell.I18n,c=cc.Class({extends:o.default,properties:{sprite:n.default,particle:cc.Node,particleSystem:cc.ParticleSystem},onLoad:function(){this.sprite.didEndStartGrab=this.didEndStartGrab.bind(this),this.sprite.didEndGrab=this.didEndGrab.bind(this),this.sprite.didEndFlyDown=this.didEndFlyDown.bind(this),this.sprite.didRealEndProtect=this.didRealEndProtect.bind(this),this.sprite.didEndProtect=this.didEndProtect.bind(this),this.sprite.didEndVictory=this.didEndVictory.bind(this),this._everytimeLoginDialog=["CatDialog.EverytimeLoginHello","CatDialog.EverytimeLoginTogether","CatDialog.EverytimeLoginComeBackToMe","CatDialog.EverytimeLoginMissYou"],this._heroIdleDialog=["CatDialog.IdleEnemyComing","CatDialog.IdleChaseIt","CatDialog.IdlePowerUp","CatDialog.IdleShowTime","CatDialog.IdleRespinSkill","CatDialog.IdleUltraHighDamage","CatDialog.IdleSilent","CatDialog.IdleExcellent"],this._openTreasureDialog=["CatDialog.OpenTreasureFantastic","CatDialog.OpenTreasureLuckyDay","CatDialog.OpenTreasureLuckyAura"],this._afterBattleDialog=["CatDialog.AfterBattleWonderful","CatDialog.AfterBattleFantastic","CatDialog.AfterBattleIncredible","CatDialog.AfterBattleToughestFight","CatDialog.AfterBattleAwesome"]},isHDVersion:function(t){t||(this.particle.active=!1)},setPosition:function(t){this.node.position=t},setRotation:function(t){this.node.angle=-t,this.particle.angle=t},idle:function(){this.sprite.idle()},startGrab:function(){this.sprite.startGrab()},grab:function(){this.sprite.grab()},flyDown:function(){this.sprite.flyDown()},directFlyDown:function(){this.sprite.stopAnimation(),this.sprite.directFlyDown()},protect:function(t){this._protectCallback=t,this.sprite.protect()},victory:function(t){this._victoryCallback=t,this.sprite.victory()},didEndStartGrab:function(){this.didFinishStartGrab&&this.didFinishStartGrab()},didEndGrab:function(){this.didFinishEndGrab&&this.didFinishEndGrab()},didEndFlyDown:function(){this.didFinishFlyDown&&this.didFinishFlyDown()},didEndProtect:function(){var t=this._protectCallback;t&&(this._protectCallback=void 0,t())},didRealEndProtect:function(){this.idle()},didEndVictory:function(){this._victoryCallback&&this._victoryCallback(),this._victoryCallback=void 0,this.idle()},showAfterStory:function(){this.displayBubbleChat(r.t("CatDialog.AfterStory"))},showGetMapMsgDialog:function(){this.displayBubbleChat(r.t("CatDialog.ObtainedMap"))},showGetKeyMsgDialog:function(){this.displayBubbleChat(r.t("CatDialog.ObtainedKey"))},showEverytimeLoginDialog:function(){var t=(0,s.randomInt)(0,this._everytimeLoginDialog.length-1);this.displayBubbleChat(r.t(this._everytimeLoginDialog[t]))},showOpenTreasureDialog:function(){var t=(0,s.randomInt)(0,this._openTreasureDialog.length-1);this.displayBubbleChat(r.t(this._openTreasureDialog[t]))},showAfterBattleDialog:function(){var t=(0,s.randomInt)(0,this._afterBattleDialog.length-1);this.displayBubbleChat(r.t(this._afterBattleDialog[t]),a.BubbleType.Normal,1)},showHeroIdleDialog:function(){var t=(0,s.randomInt)(0,this._heroIdleDialog.length-1);this.displayBubbleChat(r.t(this._heroIdleDialog[t]))},showLightningAppearDialog:function(){this.displayBubbleChat(r.t("CatDialog.CursingWhenLightningAtk"),a.BubbleType.Surprised)}});i.default=c,e.exports=i.default,cc._RF.pop()}function l(t){return t&&t.__esModule?t:{default:t}}},{BaseActor:"BaseActor",CatSprite:"CatSprite",Enum:"Enum",Utils:"Utils"}],ChatBubbleGenerator:[function(t,e,i){"use strict";if(!cc._RF.push(e,"01613jdZwNG57ysr/p/1mad","ChatBubbleGenerator")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Object,ctor:function(){this._chatPool=new cc.NodePool,this.chatLayer=void 0,this.chatBubblePrefab=void 0},getChatBubbleWithMessage:function(t,e,i,n,o,a,s,r){void 0===s&&(s=!1),void 0===r&&(r=0);var c=this._chatPool,l=this.chatBubblePrefab,h=c.get();h||(h=cc.instantiate(l)),this.chatLayer.addChild(h);var u=h.getComponent("ChatBubble");u.setParent(e),u.setMessage(i,r,t,o),u.setScale(n),s&&u.updatePosition(),a(h)},getResizedChatBubbleWithMessage:function(t,e,i,n,o,a,s){this.getChatBubbleWithMessage(e,i,n,o,a,s,t)},recycleChatBubble:function(t,e){e.getComponent("ChatBubble").clear(),e.removeFromParent(),e.scaleX=1,e.scaleY=1,this._chatPool?this._chatPool.put(e):e.destroy()},destroy:function(){this._chatPool.clear(),this._chatPool=void 0,this.chatBubblePrefab=void 0,this._super()}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],ChatBubble:[function(t,e,i){"use strict";if(!cc._RF.push(e,"0d591Vnv5xKM6VTTknRKpO4","ChatBubble")){i.__esModule=!0,i.default=void 0;var n=t("Enum"),o=cc.Class({extends:cc.Component,properties:{messageLabel:cc.Label,container:cc.Node,containerImage:cc.Sprite,bubbleImages:[cc.SpriteFrame]},setMessage:function(t,e,i,o){i===n.BubbleType.Normal?this.containerImage.spriteFrame=this.bubbleImages[0]:i!==n.BubbleType.Surprised&&i!==n.BubbleType.SurprisedForStory||(this.containerImage.spriteFrame=this.bubbleImages[1]),this.messageLabel.string=t,this._posOffset=o,e>0&&(this.messageLabel.node.width=e),i!==this._bubbleType&&(this._bubbleType=i,this._adjustComponets())},setScale:function(t){var e,i,o,a=this.messageLabel,s=this.container;t===n.BubbleDirection.topLeft?(e=1,i=-1,o=1):t===n.BubbleDirection.bottomLeft?(e=1,i=1,o=0):t===n.BubbleDirection.topRight?(e=-1,i=-1,o=1):(e=-1,i=1,o=0),s.scaleX=3*e,s.scaleY=3*i,a.node.anchorY=o,a.node.scaleX=e,a.node.scaleY=i},setParent:function(t){this._characterParent=t,t.on("position-changed",this.updatePosition,this),this.messageLabel.node.on("size-changed",this._adjustComponets,this)},clear:function(){this._characterParent.off("position-changed",this.updatePosition,this),this.messageLabel.node.off("size-changed",this._adjustComponets,this)},_adjustComponets:function(){var t=this._bubbleType,e=this.messageLabel.node.width,i=this.messageLabel.node.height;t===n.BubbleType.Normal?this.container.setContentSize(e+156*.4,i+52.5):t===n.BubbleType.Surprised?this.container.setContentSize(e+40,i+65):t===n.BubbleType.SurprisedForStory&&this.container.setContentSize(e+200,i+63),this.updatePosition()},updatePosition:function(){var t=this.node.parent.convertToNodeSpaceAR(this._characterParent.convertToWorldSpaceAR(this._posOffset));this.node.setPosition(t)}});i.default=o,e.exports=i.default,cc._RF.pop()}},{Enum:"Enum"}],ChestGuy:[function(t,e,i){"use strict";if(!cc._RF.push(e,"054c99iyelCK7C0izvSKK15","ChestGuy")){i.__esModule=!0,i.default=void 0;var n=u(t("BaseEnemyActor")),o=t("Enum"),a=u(t("AudioLibrary")),s=t("AssetManager"),r=t("ObstacleBundle"),c=t("Utils"),l=shell.I18n,h=cc.Class({extends:n.default,properties:{atk1Animation:cc.Animation,atk2Animation:cc.Animation},onLoad:function(){var t=s.assetManager.getAsset(r.MimicAudioBundle);this.atk1Sound=t.chestGuyAttack,this.atk2Sound=t.chestGuyJumpAttack,this.dieSound=t.chestGuyDie,this._super(),this._setupAnimations(),this._meetCat=["CatDialog.EncounteredMimicSpeechQuestioning","CatDialog.EncounteredMimicSpeechCuriosity"]},_getEnemyType:function(){return o.EnemyType.chest_guy},_getEmoticonPosition:function(t){var e;switch(t){case o.EmoticonStyle.Sweat:e=cc.v2(.35*this.node.getContentSize().width,.3*this.node.getContentSize().height);break;case o.EmoticonStyle.Shock:e=cc.v2(.55*this.node.getContentSize().width,.45*this.node.getContentSize().height);break;case o.EmoticonStyle.ShockExpMarkLv1:case o.EmoticonStyle.ShockExpMarkLv2:case o.EmoticonStyle.ShockExpMarkLv3:e=cc.v2(-.8*this.node.getContentSize().width,.3*this.node.getContentSize().height)}return e},_setupAnimations:function(){this._atk1AnimNode=this.atk1Animation.node,this._atk1AnimNode.active=!1,this._atk2AnimNode=this.atk2Animation.node,this._atk2AnimNode.active=!1},getIdleAnim:function(){return"Idle"},getHitAnim:function(){return"Hit"},getDieAnim:function(){return"Death"},getDeflectAnim:function(){return"Deflect"},_executeAttack:function(t,e,i){t.isDead()?this.attack1(t,i):0===(0,c.randomInt)(0,1)?this.attack1(t,i):this.attack2(t,i)},_cancelEffects:function(){this.atk1Animation.stop(),this._atk1AnimNode.active=!1},attack1:function(t,e){var i=this,n=t.node,o=t.isDead()?n.x+n.width/2+200:n.x+n.width/2,s=cc.v2(o,n.y),r={moveSpeedIn:.4,moveSpeedOut:.5,moveDeflectSpeedOut:.2,minDistance:50,attackHits:1,animFunc:this._attack1Anim.bind(this)};this.spineAttack([t],s,r,function(){i._atk1AnimNode.active=!1,i.atk1Animation.stop(),e&&e()}),a.default.playEffect(this.atk1Sound)},_attack1Anim:function(){var t=this.spine;"Attack_01"!==t.animation&&(this._atk1AnimNode.active=!0,this.atk1Animation.play("mimic_atk_1"),t.setAnimation(0,"Attack_01",!1),t.addAnimation(0,"Idle",!0,0))},attack2:function(t,e){var i=this,n=t.node,o=cc.v2(n.x+n.width/2,n.y),s={moveSpeedIn:.4,moveSpeedOut:.5,minDistance:50,attackHits:2,animFunc:this._attack2Anim.bind(this)};this.spineAttack([t],o,s,function(){i._atk2AnimNode.active=!1,i.atk2Animation.stop(),e&&e()}),a.default.playEffect(this.atk2Sound)},_attack2Anim:function(){var t=this.spine;"Attack_02"!==t.animation&&(this._atk2AnimNode.active=!0,this.atk2Animation.play("mimic_atk_2"),t.setAnimation(0,"Attack_02",!1),t.addAnimation(0,"Idle",!0,0))},getMeetDialogCat:function(){var t=this._meetCat.concat(n.default._meetMonster),e=(0,c.randomInt)(0,t.length-1);return l.t(t[e])},destroy:function(){this._super()},_playDieSound:function(){a.default.playEffect(this.dieSound)}});i.default=h,e.exports=i.default,cc._RF.pop()}function u(t){return t&&t.__esModule?t:{default:t}}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",BaseEnemyActor:"BaseEnemyActor",Enum:"Enum",ObstacleBundle:"ObstacleBundle",Utils:"Utils"}],Chest:[function(t,e,i){"use strict";if(!cc._RF.push(e,"ffdb840351Ns5Tt515I0pbf","Chest")){i.__esModule=!0,i.default=void 0;var n=c(t("AudioLibrary")),o=c(t("DataManager")),a=t("AssetManager"),s=t("GeneralBundle"),r=cc.Class({extends:cc.Component,properties:{defaultSpriteFrame:cc.SpriteFrame,openSpriteFrame:cc.SpriteFrame,sprite:cc.Sprite,chestGlow:cc.Node,particle:cc.ParticleSystem,glow:[cc.Node],baseGlow:cc.Node,_isHDVer:cc.Boolean},onLoad:function(){var t=a.assetManager.getAsset(s.GeneralGameAudioBundle);this.openTreasure=t.treasureOpen,this._chestAnim=this.sprite.getComponent(cc.Animation),this.sprite.chestOpened=this.chestOpened.bind(this),this.isDone=!1,this.node.zIndex=-1},onEnable:function(){this.node.y=this.node.height/1.5},playOpenChest:function(t){this.isDone=!1,this._chestAnim.play("chest_open"),n.default.playEffect(this.openTreasure),this._isHDVer=t},playShine:function(){this.chestGlow.getComponent(cc.Animation).play("chest_glow"),this._isHDVer?(this.particle.resetSystem(),this.particle.node.active=!0):(this.particle.stopSystem(),this.particle.node.active=!1)},fadeOutShine:function(){this.chestGlow.getComponent(cc.Animation).stop(),this.particle.stopSystem(),this.baseGlow.runAction(cc.tintTo(.2,0,0,0));for(var t=0,e=this.glow.length;t<e;t++)this.glow[t].runAction(cc.tintTo(.2,0,0,0));this._fadeOutSelf()},_fadeOutSelf:function(){var t=this;this.sprite.node.runAction(cc.sequence(cc.fadeOut(.2),cc.callFunc(function(){t.node.active=!1,t.destroySelf()})))},stopAnimation:function(){this._chestAnim.stop(),this.isDone=!1,this.sprite.spriteFrame=this.defaultSpriteFrame},chestOpened:function(){this.playShine(),this._generateCoins(),this.didOpenChest&&this.didOpenChest(this)},isReady:function(){return o.default.getChestIsReadyState},_generateCoins:function(){var t=this,e=this.itemGenerator,i=this.followActor.node,n=cc.v2(this.node.x,this.node.y+50);e.generateCoins(20,n,this.node.parent,i,function(){t.fadeOutShine(),t.isDone=!0})},destroySelf:function(){this.followActor=void 0,this.didEliminate&&this.didEliminate(this)}});i.default=r,e.exports=i.default,cc._RF.pop()}function c(t){return t&&t.__esModule?t:{default:t}}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",DataManager:"DataManager",GeneralBundle:"GeneralBundle"}],CoinObtainedLabelGenerator:[function(t,e,i){"use strict";if(!cc._RF.push(e,"28bb4yMRMROzZqagpMkAWas","CoinObtainedLabelGenerator")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Object,ctor:function(){this._numberContainerPool=new cc.NodePool,this.worldLayer=void 0,this._digitWidth=50,this._digitHeight=50,this.font=void 0},generateNumbers:function(t,e){var i=this,n=this._numberContainerPool,o=t.toString();t>0&&(o="+"+o);var a=n.get();if(!a){(a=new cc.Node).setAnchorPoint(.5,.5);var s=a.addComponent(cc.Label);s.HorizontalAlign=cc.Label.HorizontalAlign.CENTER,s.VerticalAlign=cc.Label.VerticalAlign.CENTER,s.fontSize=56,s.lineHeight=54,s.spacingX=2,s.overflow=cc.Label.Overflow.NONE,s.font=this.font}a.x=e.x,a.y=e.y,a.zIndex=8,a.getComponent(cc.Label).string=o,this.worldLayer.addChild(a),a.runAction(cc.sequence([cc.spawn([cc.moveBy(1,cc.v2(0,70)),cc.fadeOut(1)]),cc.callFunc(function(){i._removeContainer(a)})]))},_removeContainer:function(t){t.opacity=255,t.stopAllActions(),t.removeFromParent(),this._numberContainerPool.put(t)},destroy:function(){this._numberContainerPool.clear(),this._super()}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],Coin:[function(t,e,i){"use strict";if(!cc._RF.push(e,"bbdcbmoETNFQb6lrEUotPOW","Coin")){i.__esModule=!0,i.default=void 0;var n,o=(n=t("SpawnableItem"))&&n.__esModule?n:{default:n},a=cc.Class({extends:o.default,properties:{sprite:cc.Sprite,spriteAnim:cc.Animation},spawnItemAt:function(t,e,i,n){this._super(t,e,i,n),this.node.angle=-360*Math.random()},_didFinishSpawn:function(){this.node.angle=-340,this._super()},playFlip:function(){this.spriteAnim.play("coin_flip")},stopFlip:function(){this.spriteAnim.stop()}});i.default=a,e.exports=i.default,cc._RF.pop()}},{SpawnableItem:"SpawnableItem"}],CommonDummy:[function(t,e){"use strict";cc._RF.push(e,"fc80f75SgFN/KO/qLgM2Uqu","CommonDummy")||cc._RF.pop()},{}],CreatorTweaks:[function(t,e){"use strict";cc._RF.push(e,"a569ek937NGRIiNfWZy/vYu","CreatorTweaks")||(e.exports={},e.exports.__esModule=!0,cc._RF.pop())},{}],DataManager:[function(t,e,i){"use strict";if(!cc._RF.push(e,"ddc4fEZ/zBIGrsdrYqT20HU","DataManager")){Object.defineProperty(i,"__esModule",{value:!0});var n=t("GSApiClient"),o=t("Enum"),a=t("WalletHelper"),s=t("GSDataSource"),r=t("RequestHandler"),c=t("Utils"),l=t("SlotUtils"),h=t("TransactionStateMachineHandler"),u=cc.Enum({NONE:0,GET:1,HAS:2,OPEN:3}),d=shell.I18n,p=new(function(){function t(){this.didSpinReturned=void 0,this._nextDataCallback=void 0,this._isNextData=void 0,this._playerModel=s.gsDataSource.playerModel,this._systemModel=s.gsDataSource.systemModel,this._transactionModel=s.gsDataSource.transactionModel,this._isChargingForLightingAttack=!1,this._pendingNextData=void 0,this._currentBalance=void 0,this._nextBalance=void 0,this._currentAccumulatedWinAmount=void 0,this._nextAccumulatedWinAmount=void 0,this._currentTotalWinAmount=void 0,this._nextTotalWinAmount=void 0,this._currentTransactionId=void 0,this._nextTransactionId=void 0}return t.prototype.getCurrentBalance=function(t){void 0===t&&(t=!0);var e=this._currentBalance;return t&&(this._currentBalance=this._nextBalance,this._nextBalance=void 0),e},Object.defineProperty(t.prototype,"balance",{get:function(){return this._playerModel.balance},enumerable:!1,configurable:!0}),t.prototype.getCurrentWinAmount=function(t){void 0===t&&(t=!0);var e=this._currentAccumulatedWinAmount;return t&&(this._currentAccumulatedWinAmount=this._nextAccumulatedWinAmount,this._nextAccumulatedWinAmount=void 0),e},t.prototype.getCurrentTotalWinAmount=function(t){void 0===t&&(t=!0);var e=this._currentTotalWinAmount;return t&&(this._currentTotalWinAmount=this._nextTotalWinAmount,this._nextTotalWinAmount=void 0),e},t.prototype.getCurrentTransactionId=function(t){void 0===t&&(t=!0);var e=this._currentTransactionId;return t&&(this._currentTransactionId=this._nextTransactionId,this._nextTransactionId=void 0),e},t.prototype.updateBalanceWin=function(t){void 0===t&&(t=!1),t&&this._resetBalanceWin();var e=s.gsDataSource.playerModel.balance,i=s.gsDataSource.transactionModel.accumulatedWinAmount,n=s.gsDataSource.transactionModel.totalWinAmount,o=s.gsDataSource.transactionModel.transactionId;this._currentBalance>-1?(this._nextBalance>-1&&(this._currentBalance=this._nextBalance),this._nextBalance=e):this._currentBalance=e,this._currentAccumulatedWinAmount>-1?(this._nextAccumulatedWinAmount>-1&&(this._currentAccumulatedWinAmount=this._nextAccumulatedWinAmount),this._nextAccumulatedWinAmount=i):this._currentAccumulatedWinAmount=i,this._currentTotalWinAmount>-1?(this._nextTotalWinAmount>-1&&(this._currentTotalWinAmount=this._nextTotalWinAmount),this._nextTotalWinAmount=n):this._currentTotalWinAmount=n,this._currentTransactionId?(this._nextTransactionId&&(this._currentTransactionId=this._nextTransactionId),this._nextTransactionId=o):this._currentTransactionId=o},t.prototype._resetBalanceWin=function(){this._currentBalance=void 0,this._currentAccumulatedWinAmount=void 0,this._nextBalance=void 0,this._nextAccumulatedWinAmount=void 0,this._currentTotalWinAmount=void 0,this._nextTotalWinAmount=void 0,this._currentTransactionId=void 0,this._nextTransactionId=void 0},Object.defineProperty(t.prototype,"spinInfo",{get:function(){return s.gsDataSource.lastTransactionRawData},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"betFactor",{get:function(){return this._systemModel.maxLineNumber},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"winThreshold",{get:function(){var t=this._transactionModel,e=this._systemModel;return l.getWinThresholds(t.selectedBetLevelValue,t.selectedBetSizeValue,e.maxLineNumber,e.winThresholdFactor)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"currentSpinType",{get:function(){return this._transactionModel.stateTransitionFrom},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"nextSpinType",{get:function(){return this._transactionModel.stateTransitionTo},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"accumulatedWin",{get:function(){return this._transactionModel.accumulatedWinAmount},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"respinIndex",{get:function(){return this._transactionModel.respinIndex},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"totalBet",{get:function(){var t=this._transactionModel;return c.toDecimalWithExp(t.betSizeValue*t.betLevelValue*this._systemModel.maxLineNumber,2)},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"hasWinPosition",{get:function(){return this._transactionModel.hasWinPosition},enumerable:!1,configurable:!0}),t.prototype.hasRpgInfo=function(){return!!this._transactionModel.rpgInfo},t.prototype.hasRpgSpecialSymbolInfo=function(){return!!this._transactionModel.rpgInfo.specialSymbol},Object.defineProperty(t.prototype,"specialSymbolType",{get:function(){return this._transactionModel.rpgInfo.specialSymbol.symbolType},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getRpgSpecialSymbolAction",{get:function(){return this._transactionModel.rpgInfo.specialSymbol.actionEnum},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"specialSymbolIsReadyState",{get:function(){return this._transactionModel.rpgInfo.specialSymbol.specialExecution},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"selectedSpecialSymbol",{get:function(){return this.specialSymbolIsReadyState?this._transactionModel.rpgInfo.specialSymbol.specialExecution.symbol:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"specialSymbolPlacementPosition",{get:function(){return this.specialSymbolIsReadyState?this._transactionModel.rpgInfo.specialSymbol.specialExecution.position:void 0},enumerable:!1,configurable:!0}),t.prototype.hasRpgHeroInfo=function(){return!!this._transactionModel.rpgInfo.hero},Object.defineProperty(t.prototype,"rpgHeroCurrentHp",{get:function(){var t=this._transactionModel.rpgInfo.hero;return t&&t.currentHp},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rpgHeroMaxHp",{get:function(){var t=this._transactionModel.rpgInfo.hero;return t&&t.maxHp},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rpgHeroIsAliveState",{get:function(){var t=this._transactionModel.rpgInfo.hero;return!t||t.isAlive},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rpgHeroIsAttack",{get:function(){var t=this._transactionModel.rpgInfo.hero;return t&&t.isAttack},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rpgHeroHpChange",{get:function(){var t=this._transactionModel.rpgInfo.hero;return t&&t.hpChange},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rpgHasEnemy",{get:function(){return this._transactionModel.rpgInfo.hasEnemy},enumerable:!1,configurable:!0}),t.prototype.hasRpgObstacleInfo=function(){return!!this._transactionModel.rpgInfo.obstacle},Object.defineProperty(t.prototype,"rpgObstacleRelicList",{get:function(){return this._transactionModel.rpgInfo.obstacle.enemy[0]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rpgObstacleRelicCurrentHp",{get:function(){return this._transactionModel.rpgInfo.obstacle.enemy[0].currentHp},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rpgObstacleRelicType",{get:function(){return this._transactionModel.rpgInfo.obstacle.enemy[0].type},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rpgObstacleEnemyList",{get:function(){return this._transactionModel.rpgInfo.obstacle.enemy},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rpgObstacleEnemyIsMonster",{get:function(){return this._transactionModel.rpgInfo.obstacle?this._transactionModel.rpgInfo.obstacle.isObstacleMonsters:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isRpgObstacleSpawnRound",{get:function(){return this._transactionModel.rpgInfo.obstacle.round===o.OBSTACLE_ACTION_ROUND.SPAWN},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rpgObstacleRound",{get:function(){return this._transactionModel.rpgInfo.obstacle.round},enumerable:!1,configurable:!0}),t.prototype.getRpgObstacleEnemyCurrentHp=function(t){return this._transactionModel.rpgInfo.obstacle.enemy[t].currentHp},Object.defineProperty(t.prototype,"rpgObstacleEnemyisDizzy",{get:function(){return this._transactionModel.rpgInfo.obstacle.enemy[this._transactionModel.rpgInfo.obstacle.enemy.length-1].isDizzy},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rpgObstacleEnemyType",{get:function(){var t=[];if(this._transactionModel.rpgInfo.obstacle)for(var e=this._transactionModel.rpgInfo.obstacle.enemy,i=0;i<e.length;i++)e[i].currentHp>0&&t.push(e[i].type);return t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rpgObstacleHasTreasureChest",{get:function(){return this._transactionModel.rpgInfo.obstacle.enemy[0].type===o.RELIC_ITEM_TYPE.TREASURE_CHEST},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rpgObstacleIsFinished",{get:function(){return this._transactionModel.rpgInfo.obstacle?this._transactionModel.rpgInfo.obstacle.isFinished:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"getChestIsReadyState",{get:function(){return this._transactionModel.rpgInfo.chestBox===u.OPEN},enumerable:!1,configurable:!0}),t.prototype.hasRpgPrizeInfo=function(){return void 0!==this._transactionModel.rpgInfo.prize},Object.defineProperty(t.prototype,"rpgPrizeInfo",{get:function(){return this._transactionModel.rpgInfo.prize},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rpgIsFinalInfo",{get:function(){return this._transactionModel.rpgInfo.isFinal},enumerable:!1,configurable:!0}),t.prototype.hasRpgStageInfo=function(){return!!this._transactionModel.rpgInfo.stage},Object.defineProperty(t.prototype,"rpgCurrentStage",{get:function(){return this._transactionModel.rpgInfo.stage.currentStage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rpgChangeStage",{get:function(){return this._transactionModel.rpgInfo.stage.changeStage},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"rpgHeroEliminateCount",{get:function(){return this._rpgHeroEliminateCount},set:function(t){this._rpgHeroEliminateCount=t},enumerable:!1,configurable:!0}),t.prototype.hasKeyInfo=function(){return!!this._transactionModel.keyInfo},Object.defineProperty(t.prototype,"keyState",{get:function(){var t=this._transactionModel.keyInfo;return t?t.keyState:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keyType",{get:function(){var t=this._transactionModel.keyInfo;return t?t.keyType:void 0},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keyCurrentEliminateKeyIndexes",{get:function(){var t=this._transactionModel.keyInfo;return t&&t.currentEliminateKeyIndexes?t.currentEliminateKeyIndexes:[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"keyAllEliminateKeyIndexes",{get:function(){var t=this._transactionModel.keyInfo;return t&&t.allEliminateKeyIndexes?t.allEliminateKeyIndexes:[]},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"gemsInfo",{get:function(){return this._transactionModel.gemInfo},enumerable:!1,configurable:!0}),t.prototype.getGemWinAmount=function(t){var e=this._transactionModel.gemWinAmountList[t];return e?e[0]:0},Object.defineProperty(t.prototype,"autoSpinCount",{get:function(){return this._autoSpinCount},set:function(t){this._autoSpinCount=t},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"isChargingForLightningAttack",{get:function(){return this._isChargingForLightingAttack},set:function(t){this._isChargingForLightingAttack=t},enumerable:!1,configurable:!0}),t.prototype.requestSpinData=function(t){void 0===t&&(t=!1),this._isNextData=t,h.goToStateCallback("result",!0)(this._doAPIRequestWrapper())},t.prototype.getNextData=function(t){var e=this._pendingNextData;e?(this._pendingNextData=void 0,this._updateTransactionInfo(e,t)):this._nextDataCallback=t},t.prototype._onSpinResultReceivedWrapper=function(){var t=this;return function(e,i){if(i&&i.dt){e&&(t._autoSpinCount=0);var n=i.dt.ls?i.dt.ls.si:i.dt.si;if(t._isNextData){var o=t._nextDataCallback;o?(t._nextDataCallback=void 0,t._updateTransactionInfo(n,o)):t._pendingNextData=n}else t._updateTransactionInfo(n,t.didSpinReturned.bind(t))}}},t.prototype._updateTransactionInfo=function(t,e){c.sequenceCallback(function(e){s.gsDataSource.updateTransactionInfo(t),e()},h.transitionCompleteCallback(),function(t){h.goToStateCallback(s.gsDataSource.transactionModel.stateTransitionTo===o.SPIN_TYPE.NORMAL_SPIN?"prize":"idle",!0)(t)})(e)},t.prototype.requestGameInfoOnInitWalletHelper=function(t,e){var i=t?{wk:t}:void 0,o={name:"Get Game Info :: Wallet Helper Initialization",apiRequest:n.gsAPIClient.getGameInfo.bind(n.gsAPIClient),apiRequestParam:i,errorTitle:d.t("General.ErrorLaunchFailed"),retryMessage:d.t("General.LoadingInfoRetry")};this._apiRequestGameData(o,function(t,i){i&&i.dt&&e&&e(i)})},t.prototype.requestGameInfoOnInit=function(t){var e=Date.now(),i={name:"Get Game Info :: Game Initialization",apiRequest:n.gsAPIClient.getGameInfo.bind(n.gsAPIClient),apiRequestParam:void 0,errorTitle:d.t("General.ErrorLaunchFailed"),retryMessage:d.t("General.LoadingInfoRetry")};this._apiRequestGameData(i,function(i,n){if(n&&n.dt){var o=shell.ga;a.walletHelper.processInitGameInfo(n,function(){o.sendTiming(o.CATEGORY_QUERY,o.EVENT_READ_INFO,Date.now()-e),t&&t()})}})},t.prototype.requestGameInfoOnBetChange=function(t,e,i){var o={cs:t,ml:e},a={name:"Update Game Info :: Change World Change World On Bet Change",apiRequest:n.gsAPIClient.updateGameInfo.bind(n.gsAPIClient),apiRequestParam:o,errorTitle:d.t("General.ErrorChangeFailed"),retryMessage:d.t("General.RetryNetwork")};this._apiRequestGameData(a,function(t,e){e&&e.dt&&i&&i(e)})},t.prototype._apiRequestGameData=function(t,e){var i={name:t.name,apiRequest:t.apiRequest,apiRequestParam:t.apiRequestParam,errorTitle:t.errorTitle,retryMessage:t.retryMessage};r.doAPIRequest(i,e)},t.prototype._doAPIRequestWrapper=function(){var t=this;return function(){var e=h.getTransitionData();if(e&&e.reject)showDialog({title_message:"Error",content_message:"Spin Failed",actions:[{title:"OK",handler:t._onSpinResultReceivedWrapper()}]});else{var i={name:"Get Spin Info :: Transaction In Progress",apiRequest:n.gsAPIClient.spin.bind(n.gsAPIClient),fallbackRequest:n.gsAPIClient.retrySpin.bind(n.gsAPIClient)};r.doTransactionAPIRequest(i,s.gsDataSource,t._onSpinResultReceivedWrapper())}}},t}());i.default=p,cc._RF.pop()}},{Enum:"Enum",GSApiClient:"GSApiClient",GSDataSource:"GSDataSource",RequestHandler:"RequestHandler",SlotUtils:"SlotUtils",TransactionStateMachineHandler:"TransactionStateMachineHandler",Utils:"Utils",WalletHelper:"WalletHelper"}],DataSource:[function(t,e){"use strict";if(!cc._RF.push(e,"1982d5t8c1Dv723rlfAHDfA","DataSource")){var i=function(t,e){var i=o();return function(t){return i[t-=177]}(t,e)},n=System[i(188)](i(189)+i(181)+i(183)+"rk")[i(191)+i(184)+i(179)+"e"];e[i(193)+i(178)+"s"][i(185)+i(180)+"t"]=n,e[i(193)+i(178)+"s"][i(187)+i(186)+i(177)+"e"]=!0,cc._RF.pop()}function o(){var t=["dul","ort","urc","aul","ram","uil","ewo","aSo","def","sMo","__e","get","bvf","isB","Dat","der","exp"];return(o=function(){return t})()}},{}],Deserializer:[function(t,e){"use strict";if(!cc._RF.push(e,"054a1laxt5KoIf1ZCc/KT5D","Deserializer")){var i=function(t,e){var i=o();return function(t){return i[t-=370]}(t,e)},n=System[i(384)](i(370)+i(374))[i(375)+i(371)+i(372)+i(376)];e[i(379)+i(377)+"s"][i(375)+i(371)+i(372)+i(381)]=n,e[i(379)+i(377)+"s"][i(382)+i(373)+i(385)+"e"]=!0,cc._RF.pop()}function o(){var t=["com","eri","ali","sMo","mon","Des","ser","ort","isB","exp","der","zer","__e","uil","get","dul"];return(o=function(){return t})()}},{}],DrawLine:[function(t,e,i){"use strict";if(!cc._RF.push(e,"0b006l9a0tOS5No6bQvo8YJ","DrawLine")){Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator,o=n.ccclass,a=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.horizontal=!0,e.vertical=!1,e}return __extends(e,t),e.prototype.onLoad=function(){this.graphics=this.node.addComponent(cc.Graphics),this._drawLine(),this.node.on("size-changed",this._drawLine,this)},e.prototype._drawLine=function(){var t,e;this.graphics.clear(),this.horizontal?(t=-this.node.width*this.node.anchorX,e=this.node.width-this.node.width*this.node.anchorX,this.graphics.moveTo(t,this.node.height/2),this.graphics.lineTo(e,this.node.height/2)):(t=this.node.height*this.node.anchorX,e=this.node.height*this.node.anchorX-this.node.height,this.graphics.moveTo(this.node.width/2,t),this.graphics.lineTo(this.node.width/2,e)),this.graphics.stroke()},e.prototype.onDestroy=function(){this.node.off("size-changed",this._drawLine,this),this.graphics.clear()},__decorate([a(cc.Boolean)],e.prototype,"horizontal",void 0),__decorate([a(cc.Boolean)],e.prototype,"vertical",void 0),__decorate([o],e)}(cc.Component);i.default=s,cc._RF.pop()}},{}],Dungeon:[function(t,e,i){"use strict";if(!cc._RF.push(e,"aab87wblh5Pr6Xc8JFG64kq","Dungeon")){i.__esModule=!0,i.default=void 0;var n=c(t("GenericBackgroundObject")),o=c(t("AudioLibrary")),a=t("AssetManager"),s=t("WorldBundle"),r=cc.Class({extends:n.default,onLoad:function(){this.currentAmbientIndex=0;var t=this.backgroundMusics=[],e=a.assetManager.getAsset(s.DungeonAudioBundle);t.push(e.dungeonBgOne),t.push(e.dungeonBgTwo)},playBackgroundMusic:function(){var t=this.backgroundMusics,e=this.currentAmbientIndex,i=this._currentBackgroundMusic=t[e];o.default.playMusic(i),this.currentAmbientIndex++,this.currentAmbientIndex>t.length-1&&(this.currentAmbientIndex=0)},stopBackgroundMusic:function(t){this._currentBackgroundMusic?(o.default.stopMusic(!0),t&&t()):t&&t()}});i.default=r,e.exports=i.default,cc._RF.pop()}function c(t){return t&&t.__esModule?t:{default:t}}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",GenericBackgroundObject:"GenericBackgroundObject",WorldBundle:"WorldBundle"}],Dust:[function(t,e,i){"use strict";if(!cc._RF.push(e,"5387dkC7/FDhYQFTuB9kdNR","Dust")){i.__esModule=!0,i.default=void 0;var n=t("SettingMenuHelper"),o=[-1,1],a=[-300,-200,-150,-100,0,100,200,300,400,500,600],s=[-600,-500,-400,-300,-200,-100,0,100,200,300],r=cc.Class({extends:cc.Component,properties:{_animationisOnGoing:cc.Boolean},onLoad:function(){this._animationisOnGoing=!1},randomDustNodeProperties:function(){var t=this._getRandomInt(0,1);this.node.x=1===t?s[this._getRandomInt(0,s.length-1)]:a[this._getRandomInt(0,a.length-1)];var e=this._getRandomFloat(2,5);this.node.scaleX=o[t]*e,this.node.scaleY=this._getRandomFloat(0,.5)+e,n.settingMenuHelper.turboSpinOn?this.node.getComponent(cc.Animation).defaultClip.speed=this._getRandomFloat(.75,1):this.node.getComponent(cc.Animation).defaultClip.speed=this._getRandomFloat(.8,1.25)},playAnimation:function(){this.node.getComponent(cc.Animation).play()},setAnimationIsPlaying:function(t){this._animationisOnGoing=t},setAnimationOnFinishEvent:function(){this.node.getComponent(cc.Animation).on("finished",this._dustAnimationOnFinish,this)},setReplayDelay:function(t){return t||this._getRandomFloat(0,2.5)},_dustAnimationOnFinish:function(){var t=this;this._animationisOnGoing&&(this.randomDustNodeProperties(),this.scheduleOnce(function(){t.playAnimation()},this.setReplayDelay()))},_getRandomInt:function(t,e){return Math.round(Math.random()*(e-t)+t)},_getRandomFloat:function(t,e){return Math.random()*(e-t)+t}});i.default=r,e.exports=i.default,cc._RF.pop()}},{SettingMenuHelper:"SettingMenuHelper"}],ElecSprite:[function(t,e,i){"use strict";if(!cc._RF.push(e,"4b54aSXapJOZ4wxYQiVgASs","ElecSprite")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Component,properties:{spriteA:cc.Sprite,spriteB:cc.Sprite,elecAnim:cc.Animation},onLoad:function(){},playElectrocuted:function(){this.node.active=!0,this.elecAnim.play("electrocuted")},stopElectrocuted:function(){this.node.active=!1,this.elecAnim.stop()}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],EmoticonEffectPlayer:[function(t,e,i){"use strict";if(!cc._RF.push(e,"b88bcefa9RD9qesvm9cF259","EmoticonEffectPlayer")){i.__esModule=!0,i.default=void 0;var n=t("AssetManager"),o=t("GeneralBundle"),a=cc.Enum({SHOCK_FLICKER:"emoticon_shock_flicker",SHOCK:"emoticon_shock",SWEAT:"emoticon_sweat"}),s=Object.create(null),r=cc.Class({extends:cc.Object,ctor:function(){this._allEmoticonEffect=[]},init:function(){this.generalResourcePool=n.assetManager.getAsset(o.GeneralResourceBundle),this._effectPools=s},playSweatEffect:function(t,e,i){var n=this._getEffect(a.SWEAT,this.generalResourcePool.sweatEmoticonPrefab);return n.setScale(2.14,2.12),this._allEmoticonEffect.push(n),this._addEffectToLayer(n,t,e),this._playLoopEffect(n,i)},playShockFlickerEffect:function(t,e,i){var n=this._getEffect(a.SHOCK_FLICKER,this.generalResourcePool.shockFlickerEmoticonPrefab);n.setScale(2,1.99),this._addEffectToLayer(n,t,e),this._playCallbackEffect(n,i)},playShockExclamationMarkEffect:function(t,e,i){var n=this._getEffect(a.SHOCK,this.generalResourcePool.shockEmoticonPrefab);n.zIndex=6,n.x=t.x,n.y=t.y;var o=n.getComponent("BaseEffect");e.addChild(n),o.sprites[0].node.active=!0,o.sprites[1].node.active=!1,o.sprites[2].node.active=!1,this._playCallbackEffect(n,i)},playShockExclamationMarkEffect2:function(t,e,i){var n=this._getEffect(a.SHOCK,this.generalResourcePool.shockEmoticonPrefab);n.zIndex=6,n.x=t.x,n.y=t.y;var o=n.getComponent("BaseEffect");e.addChild(n),o.sprites[0].node.active=!0,o.sprites[1].node.active=!0,o.sprites[2].node.active=!1,this._playCallbackEffect(n,i)},playShockExclamationMarkEffect3:function(t,e,i){var n=this._getEffect(a.SHOCK,this.generalResourcePool.shockEmoticonPrefab);n.zIndex=6,n.x=t.x,n.y=t.y;var o=n.getComponent("BaseEffect");o.sprites[0].node.active=!0,o.sprites[1].node.active=!0,o.sprites[2].node.active=!0,e.addChild(n),this._playCallbackEffect(n,i)},stopAllEmoticonEffect:function(){var t=this;this._allEmoticonEffect.forEach(function(e){var i=e.getComponent("BaseEffect");t.recycleEffect(i)}),this._allEmoticonEffect.length=0},_playLoopEffect:function(t){return t.getComponent("BaseEffect").playEffect(),t},_playEffect:function(t,e){var i=this,n=t.getComponent("BaseEffect");return n.effectDidEnd=function(t){e&&e(),i.recycleEffect(t)},n.playEffect(),t},_playCallbackEffect:function(t,e){var i=this,n=t.getComponent("BaseEffect");return n.executeCallback=e,n.effectDidEnd=function(t){i.recycleEffect(t)},n.playEffect()},_addMoveToEffectToLayer:function(t,e,i,n){var o=this._getEffect(a.SHOCK,this.generalResourcePool.shockEmoticonPrefab);o.setScale(3.33,3.33),o.parent=i,o.zIndex=6,o.x=t.x,o.y=t.y,o.runAction(cc.sequence([cc.moveTo(.1,cc.v2(e.x-100,e.y-100)),cc.moveTo(.15,cc.v2(e.x,e.y)),cc.callFunc(function(){n&&n(o)})]))},_addEffectToLayer:function(t,e,i){return t.x=e.x,t.y=e.y,t.zIndex=6,i.addChild(t),t},_getEffect:function(t,e){var i=this._effectPools[t];return i?this._effectPools[t]=void 0:(i=cc.instantiate(e)).effectIndex=t,i},recycleEffect:function(t){var e=t.node;t.stopEffect(),e.removeFromParent(),this._effectPools[e.effectIndex]=e},destroy:function(){this.stopAllEmoticonEffect(),this._effectPools.forEach(function(t){t.clear()}),this._effectPools=void 0,this._super()}});i.default=r,e.exports=i.default,cc._RF.pop()}},{AssetManager:"AssetManager",GeneralBundle:"GeneralBundle"}],EmptyEnemy:[function(t,e,i){"use strict";if(!cc._RF.push(e,"1147fuLTSRN6qTFOg2Ew7iz","EmptyEnemy")){i.__esModule=!0,i.default=void 0;var n,o=(n=t("BaseActor"))&&n.__esModule?n:{default:n},a=cc.Class({extends:o.default,properties:{},init:function(t){this._type=t.type},setHP:function(){},isDead:function(){return!0},isDizzy:function(){return!1},getIdleAnim:function(){},getDeflectAnim:function(){},getHitAnim:function(){},getDieAnim:function(){},idle:function(){},die:function(){},_getEnemyType:function(){return this._type},enterBattlefield:function(t){t&&t()},exitBattlefield:function(t){t&&t()},encounterOpponent:function(){},getCounterAttackDialogCat:function(){},getMeetDialogCat:function(){}});i.default=a,e.exports=i.default,cc._RF.pop()}},{BaseActor:"BaseActor"}],EnemyAI:[function(t,e,i){"use strict";if(!cc._RF.push(e,"dea4dHPqUlL6a6pZtNJNeOm","EnemyAI")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Object,init:function(t,e){this._rpgController=t,this._enemy=e,this._currentState=void 0},getActor:function(){return this._enemy},getController:function(){return this._rpgController},setState:function(t){var e=this._currentState;e&&(e.willLeaveState(this),e.destroy()),this._currentState=t,this._currentState.willEnterState(this)},executeAction:function(t){var e=this._rpgController,i=this.getActor(),n=this._currentState;e&&i&&n&&n.executeAction(t,this)},destroy:function(){this._rpgController=void 0,this._enemy=void 0,this._currentState.destroy(),this._currentState=void 0,this._super()}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],EnemyDeadState:[function(t,e,i){"use strict";if(!cc._RF.push(e,"f62c1b9zi9BDbDQrv9GW5WN","EnemyDeadState")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Object,getName:function(){return"EnemyDead"},willEnterState:function(t){t.getActor().die()},willLeaveState:function(){},executeAction:function(){}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],EnemyDizzyState:[function(t,e,i){"use strict";if(!cc._RF.push(e,"4b4ceJbMpRNaI69aGdRyTQc","EnemyDizzyState")){i.__esModule=!0,i.default=void 0;var n,o=(n=t("EnemyDeadState"))&&n.__esModule?n:{default:n},a=cc.Class({extends:cc.Object,getName:function(){return"EnemyDizzy"},willEnterState:function(t){t.getActor().dizzy()},willLeaveState:function(){},executeAction:function(t,e){var i=e.getActor();i.isDizzy()||!i.isDead()||e.setState(new o.default)}});i.default=a,e.exports=i.default,cc._RF.pop()}},{EnemyDeadState:"EnemyDeadState"}],EnemyIdleState:[function(t,e,i){"use strict";if(!cc._RF.push(e,"00891XcT+5MeqGvWxnJLDjS","EnemyIdleState")){i.__esModule=!0,i.default=void 0;var n=s(t("EnemyDeadState")),o=s(t("EnemyDizzyState")),a=cc.Class({extends:cc.Object,getName:function(){return"EnemyIdle"},willEnterState:function(t){t.getActor().idle()},willLeaveState:function(){},executeAction:function(t,e){var i=e.getActor();i.isDizzy()?e.setState(new o.default):i.isDead()&&e.setState(new n.default)}});i.default=a,e.exports=i.default,cc._RF.pop()}function s(t){return t&&t.__esModule?t:{default:t}}},{EnemyDeadState:"EnemyDeadState",EnemyDizzyState:"EnemyDizzyState"}],EnemyLoader:[function(t,e,i){"use strict";if(!cc._RF.push(e,"92bdbmeQHRHTaVkLgF+NrUd","EnemyLoader")){i.__esModule=!0,i.default=void 0;var n=t("AssetManager"),o=t("ObstacleBundle"),a=t("Enum"),s=cc.Class({extends:cc.Object,properties:{_obstacleLoadStatus:[!1,!1,!1,!1,!1,!1,!1,!1],_enemyResourcesLoadList:[]},loadEnemies:function(t,e){var i=this._obstacleLoadStatus,s=this._enemyResourcesLoadList;this._loadPrerequisites();for(var r=0;r<t.length;r++)switch(t[r]){case a.OBSTACLE_NAME.BAT:i[a.EnemyType.bat]||(n.assetManager.addAsset(o.BatResourceBundle,o.BatAudioBundle),i[a.EnemyType.bat]=!0,s.push(o.BatResourceBundle),s.push(o.BatAudioBundle));break;case a.OBSTACLE_NAME.MIMIC:i[a.EnemyType.chest_guy]||(n.assetManager.addAsset(o.MimicResourceBundle,o.MimicAudioBundle),i[a.EnemyType.chest_guy]=!0,s.push(o.MimicResourceBundle),s.push(o.MimicAudioBundle));break;case a.OBSTACLE_NAME.GARGOYLE:i[a.EnemyType.gargoyle]||(n.assetManager.addAsset(o.GargoyleResourceBundle,o.GargoyleAudioBundle),i[a.EnemyType.gargoyle]=!0,s.push(o.GargoyleResourceBundle),s.push(o.GargoyleAudioBundle));break;case a.OBSTACLE_NAME.GOLEM:i[a.EnemyType.rock_monster]||(n.assetManager.addAsset(o.GolemResourceBundle,o.GolemAudioBundle),i[a.EnemyType.rock_monster]=!0,s.push(o.GolemResourceBundle),s.push(o.GolemAudioBundle));break;case a.OBSTACLE_NAME.SKELETON:i[a.EnemyType.skeleton]||(n.assetManager.addAsset(o.SkeletonResourceBundle,o.SkeletonAudioBundle),i[a.EnemyType.skeleton]=!0,s.push(o.SkeletonResourceBundle),s.push(o.SkeletonAudioBundle));break;case a.OBSTACLE_NAME.TREANT:i[a.EnemyType.tree_monster]||(n.assetManager.addAsset(o.TreantResourceBundle,o.TreantAudioBundle),i[a.EnemyType.tree_monster]=!0,s.push(o.TreantResourceBundle),s.push(o.TreantAudioBundle));break;case a.OBSTACLE_NAME.WEREWOLF:i[a.EnemyType.werewolf]||(n.assetManager.addAsset(o.WerewolfResourceBundle,o.WerewolfAudioBundle),i[a.EnemyType.werewolf]=!0,s.push(o.WerewolfResourceBundle),s.push(o.WerewolfAudioBundle));break;case a.OBSTACLE_NAME.WITCH:i[a.EnemyType.witch]||(n.assetManager.addAsset(o.WitchResourceBundle,o.WitchAudioBundle),i[a.EnemyType.witch]=!0,s.push(o.WitchResourceBundle),s.push(o.WitchAudioBundle))}n.assetManager.loadAsset(void 0,e)},_loadPrerequisites:function(){n.assetManager.addAsset(o.BattleSceneDefaultResourceBundle,o.BattleSceneDefaultAudioBundle)},_resetObstacleLoadStatus:function(){for(var t=this._obstacleLoadStatus,e=0;e<t.length;e++)t[e]&&(t[e]=!1)},releaseAllPrefabs:function(){var t=this._enemyResourcesLoadList;this._enemyResourcesLoadList=[],n.assetManager.releaseAsset(o.BattleSceneDefaultResourceBundle,o.BattleSceneDefaultAudioBundle),t.forEach(function(t){n.assetManager.releaseAsset(t)}),this._resetObstacleLoadStatus()},destroy:function(){this._super()}});i.default=s,e.exports=i.default,cc._RF.pop()}},{AssetManager:"AssetManager",Enum:"Enum",ObstacleBundle:"ObstacleBundle"}],Enum:[function(t,e,i){"use strict";if(!cc._RF.push(e,"ebbe9GhCFJFF5oK3PvayOeF","Enum")){i.__esModule=!0,i.cs_Launch_BET_TYPE=i.WinHistoryDetailType=i.TestState=i.SPIN_TYPE=i.SPECIAL_SYMBOL_ACTION_STATE=i.RewardsType=i.RELIC_ITEM_TYPE=i.PlayerDirection=i.PillarItemPosition=i.OBSTACLE_NAME=i.OBSTACLE_ACTION_ROUND=i.MovingStyle=i.LevelType=i.KEY_STATE=i.ItemType=i.GemDropState=i.GameState=i.EnemyType=i.EmoticonStyle=i.CommandType=i.CharacterName=i.BubbleType=i.BubbleDirection=i.AttackType=i.ActorState=void 0;var n=cc.Enum({idle:-1,scrolling:-1});i.GameState=n;var o=cc.Enum({left:-1,right:-1});i.PlayerDirection=o;var a=cc.Enum({idling:-1,battleIdling:-1,moving:-1,dead:-1});i.ActorState=a;var s=cc.Enum({spawn:-1,action:-1});i.CommandType=s;var r=cc.Enum({forest:-1,dungeon:-1});i.LevelType=r;var c=cc.Enum({rock_pillar:-1,skeleton:-1,chest_guy:-1,gargoyle:-1,rock_monster:-1,werewolf:-1,tree_monster:-1,witch:-1,bat:-1});i.EnemyType=c;var l=cc.Enum({BAT:"bat",MIMIC:"chest_guy",GARGOYLE:"gargoyle",GOLEM:"rock_monster",RELIC:"rock_pillar",SKELETON:"skeleton",TREANT:"tree_monster",WEREWOLF:"werewolf",WITCH:"witch",EMPTY_MONSTER:"empty_monster"});i.OBSTACLE_NAME=l;var h=cc.Enum({init:1,spin:2,crush:3});i.TestState=h;var u=cc.Enum({static:-1,spin:-1,crush:-1,respin:-1,respinGem:-1});i.GemDropState=u;var d=cc.Enum({None:-1,Normal:-1,Magic:-1,Lightning:-1});i.AttackType=d;var p=cc.Enum({NotMoving:-1,Moving:-1,Running:-1,RunningFaster:-1});i.MovingStyle=p;var f=cc.Enum({Top:-1,Behind:-1});i.PillarItemPosition=f;var _=cc.Enum({None:-1,Sweat:-1,Shock:-1,ShockExpMarkLv1:-1,ShockExpMarkLv2:-1,ShockExpMarkLv3:-1});i.EmoticonStyle=_;var m=cc.Enum({cat:-1,hero:-1,witch:-1,bat:-1});i.CharacterName=m;var g=cc.Enum({topLeft:-1,bottomLeft:-1,topRight:-1,bottomRight:-1});i.BubbleDirection=g;var y=cc.Enum({Normal:-1,Surprised:-1,SurprisedForStory:-1});i.BubbleType=y;var v=cc.Enum({BattleRewards:-1,TreasureRewards:-1});i.RewardsType=v;var b=cc.Enum({GemEliminate:-1,SpecialGem:-1,Respin:-1,GetMap:-1,GetKey:-1,TreasureBox:-1,MoneyBag:-1,TotalWin:-1});i.WinHistoryDetailType=b;var S=cc.Enum({Bag:-1,Map:-1,Monsterbag:-1});i.ItemType=S;var C=cc.Enum({NORMAL_SPIN:1,SUBSPIN:2,RESPIN:4,SPECIAL_SYMBOL_SPIN:5});i.SPIN_TYPE=C;var A=cc.Enum({SPAWN:0,ATTACK:1});i.OBSTACLE_ACTION_ROUND=A;var E=cc.Enum({GET_SPECIAL_SYMBOL:1,HAS_SPECIAL_SYMBOL:2,USE_SPECIAL_SYMBOL:3});i.SPECIAL_SYMBOL_ACTION_STATE=E;var M=cc.Enum({NONE:0,TREASURE_CHEST:1,MONEY_BAG:2,TREASURE_MAP:3});i.RELIC_ITEM_TYPE=M;var T=cc.Enum({NORMAL:1,TRIAL:2,TOURNAMENT:3});i.cs_Launch_BET_TYPE=T;var P=cc.Enum({GET_MAP:1,HAS_MAP:2,GET_KEY:3,HAS_KEY:4});i.KEY_STATE=P,cc._RF.pop()}},{}],ErrorHandler:[function(t,e){"use strict";if(!cc._RF.push(e,"3e4abO84aFJDI2KyxauCuDy","ErrorHandler")){var i=function(t,e){var i=a();return function(t){return i[t-=334]}(t,e)},n=System[i(340)](i(334)+i(349)+i(343)+"rk")[i(342)+i(347)+i(348)+i(336)];for(var o in n)e[i(337)+i(338)+"s"][o]=n[o];e[i(337)+i(338)+"s"][i(346)+i(335)+i(345)+"e"]=!0,cc._RF.pop()}function a(){var t=["bvf","sMo","ler","exp","ort","uil","get","der","Err","ewo","isB","dul","__e","orH","and","ram"];return(a=function(){return t})()}},{}],EventTitle:[function(t,e,i){"use strict";if(!cc._RF.push(e,"4bd2dPaJLhKDqoPM9DAm1rR","EventTitle")){i.__esModule=!0,i.default=void 0;var n,o=(n=t("AudioLibrary"))&&n.__esModule?n:{default:n},a=t("GeneralBundle"),s=t("AssetManager"),r=cc.Class({extends:cc.Component,properties:{eventTitle:cc.Sprite,eventTitleScreenNode:cc.Node,glow:cc.Node,respinGlow:cc.Color,winGlow:cc.Color,particle:cc.ParticleSystem,_respinImage:cc.SpriteFrame,_bigWinImage:cc.SpriteFrame,_megaWinImage:cc.SpriteFrame,_superMegaWinImage:cc.SpriteFrame,_isHDver:cc.Boolean},isHDVersion:function(t){this._isHDver=t,this.eventTitleScreenNode.active=!1,this.particle.node.active=!1},init:function(t,e,i,n){this._respinImage=t,this._bigWinImage=e,this._megaWinImage=i,this._superMegaWinImage=n;var o=s.assetManager.getAsset(a.GeneralGameAudioBundle);this.displayRespinSound=o.displayRespinWord,this.greatSound=o.winGreat,this.wonderfulSound=o.winWonderful,this.megaSuperWinSound=o.winSuperMega},onLoad:function(){this._anim=this.getComponent("cc.Animation")},playRespin:function(){this._setTitleImage(this._respinImage),this.glow.color=this.respinGlow,this.playAnimation(),o.default.playEffect(this.displayRespinSound)},_setTitleImage:function(t){if(this._isHDver){var e=this.eventTitleScreenNode.getComponent(cc.Mask);if(this.eventTitle.spriteFrame=t,e){e.spriteFrame=t;var i=t.getRect();this.eventTitleScreenNode.setContentSize(i.width,i.height)}}else this.eventTitle.spriteFrame=t},playBigWin:function(){this._setTitleImage(this._bigWinImage),this.glow.color=this.winGlow,this.playAnimation(),o.default.playEffect(this.greatSound)},playMegaWin:function(){this._setTitleImage(this._megaWinImage),this.glow.color=this.winGlow,this.playAnimation(),o.default.playEffect(this.wonderfulSound)},playSuperMegaWin:function(){this._setTitleImage(this._superMegaWinImage),this.glow.color=this.winGlow,this.playAnimation(),o.default.playEffect(this.megaSuperWinSound)},playAnimation:function(){this._anim.play("event_title"),this.particle.resetSystem()},stopAnim:function(){this.particle.stopSystem()}});i.default=r,e.exports=i.default,cc._RF.pop()}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",GeneralBundle:"GeneralBundle"}],ExtraEffectPlayer:[function(t,e,i){"use strict";if(!cc._RF.push(e,"45a7190qtBEm5HLWDnCpQk2","ExtraEffectPlayer")){i.__esModule=!0,i.default=void 0;var n,o=(n=t("AudioLibrary"))&&n.__esModule?n:{default:n},a=t("AssetManager"),s=t("GeneralBundle"),r=cc.Enum({BRIGHT_EXPLDOE:"bright_explode",DUST:"dust_effect",HEAL:"heal_effect",HIT:"hit_effect",MAGIC:"magic_effect",SLASH:"slash_effect",LIGHTNING:"lightning_effect",LIGHTNING_STRIKE:"lightning_strike_effect",LIGHTNING_BURST:"lightning_burst_effect",LIGHTNING_LV3:"lightning_lv3_atk",SPEEDLINE:"speed_line_effect",SWORD_CHARGE_LV2:"sword_charge_lv2",SWORD_CHARGE_LV3:"sword_charge_lv3"}),c=Object.create(null),l=cc.Class({extends:cc.Object,ctor:function(){this._bindedRecycleEffect=this.recycleEffect.bind(this)},init:function(){this.generalResourcePool=a.assetManager.getAsset(s.GeneralResourceBundle),this._effectPools=c},playHitEffect:function(t,e,i){var n=this.generalResourcePool,o=this._getEffect(r.HIT,n.hitVfxPrefab);return this._addEffectToLayer(o,t,e),this._playEffect(o,i)},playMagicEffect:function(t,e,i,n){var o=this.generalResourcePool,a=this._getEffect(r.MAGIC,o.magicVfxPrefab),s=a.getComponent("MagicEffect");return a.scaleX=a.scaleY=1.5,s.setColor(e),this._addEffectToLayer(a,t,i),this._playEffect(a,n)},playDustEffect:function(t,e,i){var n=this.generalResourcePool,o=this._getEffect(r.DUST,n.dustVfxPrefab);return this._addEffectToLayer(o,t,e),this._playEffect(o,i)},playBrightEffect:function(t,e,i){var n=this.generalResourcePool,o=this._getEffect(r.BRIGHT_EXPLDOE,n.brightExplodeVfxPrefab);return this._addEffectToLayer(o,t,e),this._playEffect(o,i)},playSlashEffect:function(t,e,i){var n=this.generalResourcePool,o=this._getEffect(r.SLASH,n.slashVfxPrefab);return this._addEffectToLayer(o,t,e),this._playEffect(o,i)},playHealEffect:function(t,e,i){var n=this.generalResourcePool,o=this._getEffect(r.HEAL,n.healVfxPrefab);return this._addEffectToLayer(o,t,e),this._playEffect(o,i)},playLightningEffect:function(t,e,i,n){var o=this.generalResourcePool,a=this._getEffect(r.LIGHTNING,o.lightningVfxPrefab);this._addEffectToLayer(a,t,e),this._playCallbackEffect(a,n,!0),i&&i()},playLightningStrikeBurstEffect:function(t,e,i,n,o){var a=this;return this.playLightningBurstEffect(t,i,n,function(){a.playLightningStrikeEffect(t,e,i,o)})},playLightningStrikeEffect:function(t,e,i,n,o){var a=this.generalResourcePool,s=this._getEffect(r.LIGHTNING_STRIKE,a.lightningStrikeVfxPrefab);this._addEffectToLayer(s,t,i);var c=s.getComponent("BaseEffect");c.executeCallback=o,c.effectDidEnd=this._bindedRecycleEffect,c.playEffect(e),n&&n()},playLightningBurstEffect:function(t,e,i,n){var o=this.generalResourcePool,a=this._getEffect(r.LIGHTNING_BURST,o.lightningBurstVfxPrefab);this._addEffectToLayer(a,t,e),this._playCallbackEffect(a,n,!0),i&&i()},playLightningAttack:function(t,e){var i=this.generalResourcePool,n=this._getEffect(r.LIGHTNING_LV3,i.lightningLv3VfxPrefab);this._addEffectToLayer(n,cc.v2(0,0),this.responsiveEffectFrontLayer),this._playCallbackEffect(n,e,!0),t&&t()},playSpeedLineEffect:function(t,e){var i=this.generalResourcePool,n=this._getEffect(r.SPEEDLINE,i.speedLineVfxPrefab);this._speedLineEffect=n,this._addEffectToLayer(n,cc.v2(0,0),this.effectLayer),this._playEffect(n,e,!0),t&&t()},stopSpeedLineEffect:function(){if(this._speedLineEffect){var t=this._speedLineEffect.getComponent("BaseEffect");this._speedLineEffect=void 0,this.recycleEffect(t)}},playChargeLoopEffect:function(){this._secondChargeLoop||(this._secondChargeLoop=this.playChargeElecLoopSound())},stopSwordChargeLoopSFX:function(){if(this._secondChargeLoop){var t=a.assetManager.getAsset(s.GeneralGameAudioBundle);o.default.stopEffect(this._secondChargeLoop,t.playerChargeLoop),this._secondChargeLoop=void 0}},playSwordSecondChargeVFX:function(t,e,i,n,o){var a=this._secondCharge;if(a)a.scaleY=1.2*t,a.scaleX=t,a.runAction(cc.scaleTo(.3,t,a.scaleY));else{n&&n();var s=this.generalResourcePool;a=this._getEffect(r.SWORD_CHARGE_LV2,s.swordChargeLv2VfxPrefab),this._secondCharge=a,this._addEffectToLayer(a,e,i),this._playEffect(a,o,!0),a.zIndex=-2,a.scaleY=1.2*t,a.scaleX=t,this.playChargeThunderSound(),a.runAction(cc.scaleTo(.3,t,a.scaleY))}},angleSecondCharge:function(){var t=this._secondCharge;t&&t.runAction(cc.spawn([cc.rotateBy(.2,-90),cc.scaleTo(.2,2,t.scaleY)]))},stopSwordSecondChargeVFX:function(){var t=this,e=this._secondCharge;e&&e.runAction(cc.sequence([cc.scaleTo(.5,0,e.scaleY),cc.callFunc(function(){var i=e.getComponent("BaseEffect");e.angle=0,t.recycleEffect(i),t._secondCharge=void 0})]))},playThirdCharge:function(t,e){var i=this.generalResourcePool,n=this._getEffect(r.SWORD_CHARGE_LV3,i.swordChargeLv3VfxPrefab);this._addEffectToLayer(n,cc.v2(0,0),this.responsiveEffectFrontLayer),this._playEffect(n,e,!0),t&&t()},_playEffect:function(t,e){var i=this,n=t.getComponent("BaseEffect");return n.effectDidEnd=function(t){e&&e(),i.recycleEffect(t)},n.playEffect(),t},_playCallbackEffect:function(t,e){var i=t.getComponent("BaseEffect");return i.executeCallback=e,i.effectDidEnd=this._bindedRecycleEffect,i.playEffect(),t},_addEffectToLayer:function(t,e,i){return t.position=e,t.zIndex=6,i.addChild(t),t},_getEffect:function(t,e){var i=this._effectPools[t];return i?this._effectPools[t]=void 0:(i=cc.instantiate(e)).effectIndex=t,i},playChargeElecLoopSound:function(){},playChargeThunderSound:function(){},recycleEffect:function(t){var e=t.node;t.stopEffect(),e.removeFromParent(),e.stopAllActions(),this._effectPools[e.effectIndex]=e},removeEffect:function(t){var e=t.node;t.stopEffect(),e.removeFromParent(),e.destroy()},destroy:function(){var t=this._secondCharge;if(t){var e=t.getComponent("BaseEffect");t.removeFromParent(),this.removeEffect(e)}this._effectPools.forEach(function(t){t.clear()}),this._effectPools=void 0,this._super()}});i.default=l,e.exports=i.default,cc._RF.pop()}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",GeneralBundle:"GeneralBundle"}],EyeLazer:[function(t,e,i){"use strict";if(!cc._RF.push(e,"e29ad3a9dhN+bf1XWg5UYPb","EyeLazer")){i.__esModule=!0,i.default=void 0;var n=cc.Enum({Extending:-1,Prolonging:-1,Collapsing:-1}),o=cc.Class({extends:cc.Component,properties:{sprite:cc.Sprite,spriteAnim:cc.Animation},onLoad:function(){this.spriteAnim.play("eye_lazer"),this._attack=!1,this._direction=void 0,this._distance=void 0,this._defaultHeight=80,this._currentPhase=void 0},attack:function(t,e){var i=this.node;this._direction=.1,i.setAnchorPoint(this._direction,.5),i.x=t.x,i.y=t.y;var o=this.sprite.node;o.setAnchorPoint(this._direction,.5),o.x=0,o.y=0,o.height=this._defaultHeight,o.width=0;var a=this._xDistance=e.x-t.x,s=this._yDistance=e.y-t.y;this._distance=Math.sqrt(Math.pow(a,2)+Math.pow(s,2))+30;var r=Math.atan2(s,a);r=r/Math.PI*180,o.angle=r,this._attack=!0,this._currentPhase=n.Extending},hitTarget:function(){this._currentPhase=n.Prolonging,this.scheduleOnce(this._toCollapsing,.2),this.didHitTarget&&this.didHitTarget(this)},_toCollapsing:function(){this._currentPhase=n.Collapsing},update:function(t){var e=this.sprite.node,i=this._distance;if(this._attack){var o=this._currentPhase;if(o!==n.Extending){if(o!==n.Prolonging){if(o===n.Collapsing)if(e.height>10){var a=4500*t,s=e.height-a;s<10&&(s=0),e.height=s}else this.animationEnd()}else if(e.height>10){var r=750*t,c=e.height-r;c<10&&(c=10),e.height=c}}else{if(e.height<1e3){var l=1500*t;e.height+=l}if(e.width<i){var h=7e3*t;e.width+=h,e.width>i&&(e.width=i+1)}else{var u=.1===this._direction?1:.1;e.setAnchorPoint(u,.5),e.x+=this._xDistance,e.y+=this._yDistance,e.height=1.7*e.height,this.hitTarget()}}}},animationEnd:function(){this.stopAnimation(),this.didAnimationEnd&&this.didAnimationEnd(this)},stopAnimation:function(){var t=this.sprite.node;t.width=0,t.x=0,t.y=0,this._defaultHeight=80,this._attack=!1,this._direction=void 0,this._distance=void 0,this._currentPhase=void 0,this._yDistance=void 0,this._xDistance=void 0}});i.default=o,e.exports=i.default,cc._RF.pop()}},{}],Forest:[function(t,e,i){"use strict";if(!cc._RF.push(e,"f7570diXVBONZJpQYJjbSbb","Forest")){i.__esModule=!0,i.default=void 0;var n=c(t("GenericBackgroundObject")),o=c(t("AudioLibrary")),a=t("AssetManager"),s=t("WorldBundle"),r=cc.Class({extends:n.default,onLoad:function(){this.currentAmbientIndex=0;var t=this.backgroundMusics=[],e=a.assetManager.getAsset(s.ForestAudioBundle);t.push(e.forestBgOne),t.push(e.forestBgTwo),t.push(e.forestBgThree)},playBackgroundMusic:function(){var t=this.backgroundMusics,e=this.currentAmbientIndex,i=this._currentBackgroundMusic=t[e];o.default.playMusic(i),this.currentAmbientIndex++,this.currentAmbientIndex>t.length-1&&(this.currentAmbientIndex=0)},stopBackgroundMusic:function(t){this._currentBackgroundMusic?(o.default.stopMusic(!0),t&&t()):t&&t()}});i.default=r,e.exports=i.default,cc._RF.pop()}function c(t){return t&&t.__esModule?t:{default:t}}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",GenericBackgroundObject:"GenericBackgroundObject",WorldBundle:"WorldBundle"}],GSApiClient:[function(t,e,i){"use strict";if(!cc._RF.push(e,"7815bcFb09IO53s7zZUXfFp","GSApiClient")){Object.defineProperty(i,"__esModule",{value:!0}),i.gsAPIClient=void 0;var n=t("GSDataSource"),o=(t("QaSpin"),t("APIClient")),a=t("APIClient.spec"),s=t("AutomationDecorator"),r=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.retrySpin=function(t,e){var i=this;return void 0===e&&(e={}),this.requestEngine("v2/GameInfo/Get",e,function(e,o){if(i.logResult("getGameInfo",o),o&&o.dt){var a=o.dt.ls.si.sid;i.print(a),n.gsDataSource.transactionModel.transactionId=a}t&&t(e,o)})},e.prototype.spin=function(t){var e=this,i=n.gsDataSource.transactionModel.transactionId,o=n.gsDataSource.playerModel.walletKey,a={id:i,cs:n.gsDataSource.transactionModel.selectedBetSizeValue,ml:n.gsDataSource.transactionModel.selectedBetLevelValue,wk:o};this._onRequestSent(),this.requestEngine("v2/spin",a,function(i,n){if(e.logResult("spin",n),n&&n.dt){var o=n.dt.si;e.print(o.sid)}e._onRequestReceived(i,n),t&&t(i,n)})},e.prototype._onRequestSent=function(){},e.prototype._onRequestReceived=function(){},__decorate([s.automationDec({func:a.onRequestSent})],e.prototype,"_onRequestSent",null),__decorate([s.automationDec({func:a.onRequestReceived})],e.prototype,"_onRequestReceived",null),e}(o.default);i.default=r;var c=new r(n.gsDataSource);i.gsAPIClient=c,cc._RF.pop()}},{APIClient:"APIClient","APIClient.spec":"APIClient.spec",AutomationDecorator:"AutomationDecorator",GSDataSource:"GSDataSource",QaSpin:"QaSpin"}],GSDataSource:[function(t,e,i){"use strict";if(!cc._RF.push(e,"c2540h61t1Kwr1BLZAyItlz","GSDataSource")){Object.defineProperty(i,"__esModule",{value:!0}),i.gsDataSource=void 0;var n=t("GSSystemModel"),o=t("GSTransactionModel"),a=t("DataSource"),s=t("PlayerModel"),r=t("RtConfig"),c=function(t){function e(){return t.call(this,{playerModel:new s.default,systemModel:new n.default(r.cs_Config),transactionModel:new o.default})||this}return __extends(e,t),e}(a.default);i.default=c;var l=new c;i.gsDataSource=l,cc._RF.pop()}},{DataSource:"DataSource",GSSystemModel:"GSSystemModel",GSTransactionModel:"GSTransactionModel",PlayerModel:"PlayerModel",RtConfig:"RtConfig"}],GSSystemModel:[function(t,e,i){"use strict";if(!cc._RF.push(e,"eccadFoD2dK86OvSjB+B+DU","GSSystemModel")){Object.defineProperty(i,"__esModule",{value:!0});var n=function(t){function e(e){return t.call(this,e)||this}return __extends(e,t),e.prototype.updateGameInfo=function(t){var e=t.cs,i=t.ml,n=t.mxl,o=t.wt;this._rawData=t,this._betSizeList=e||[],this._betLevelList=i||[],this._maxLineNumber=n,this._winThreshold=o},Object.defineProperty(e.prototype,"rawData",{get:function(){return this._rawData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"betSizeList",{get:function(){return this._betSizeList},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"betLevelList",{get:function(){return this._betLevelList},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"maxLineNumber",{get:function(){return this._maxLineNumber},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"winThresholdFactor",{get:function(){var t=this._winThreshold,e=Object.create(null);return e.mediumWin=t.mw,e.bigWin=t.bw,e.megaWin=t.mgw,e.superMegaWin=t.smgw,e},enumerable:!1,configurable:!0}),e}(t("SystemModel").default);i.default=n,cc._RF.pop()}},{SystemModel:"SystemModel"}],GSTransactionModel:[function(t,e,i){"use strict";if(!cc._RF.push(e,"48eccO20qFJq4FXeYwHEbvS","GSTransactionModel")){Object.defineProperty(i,"__esModule",{value:!0});var n=t("Enum"),o=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._hasEnemyInfo=!1,e}return __extends(e,t),Object.defineProperty(e.prototype,"transactionId",{get:function(){return this._transactionId},set:function(t){this._transactionId=t},enumerable:!1,configurable:!0}),e.prototype.updateTransactionInfo=function(t){var e=t.sid,i=t.ml,n=t.cs,o=t.rl,a=t.wp,s=t.hr,r=t.m,c=t.rlc,l=t.mk,h=t.sp,u=t.ss,d=t.sw;this._transactionId=e,this._rawData=t,this._betLevelValue=i,this._betSizeValue=n,this._gemWinAmountList=d||[],this._selectedBetLevelValue=i,this._selectedBetSizeValue=n,this._respinIndex=o.indexOf(8),this._keyInfo=l?this._processKeyInfo(l):void 0,this._rpgInfo=this._processRpgInfo(s,u,h,c,r),this._gemInfo=this._processGemInfo(a,o),this._hasWinPosition=null!==a},Object.defineProperty(e.prototype,"hasWinPosition",{get:function(){return this._hasWinPosition},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rawData",{get:function(){return this._rawData},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"betLevelValue",{get:function(){return this._betLevelValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"betSizeValue",{get:function(){return this._betSizeValue},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"gemWinAmountList",{get:function(){return this._gemWinAmountList},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"respinIndex",{get:function(){return this._respinIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectedBetLevelValue",{get:function(){return this._selectedBetLevelValue},set:function(t){this._selectedBetLevelValue=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectedBetSizeValue",{get:function(){return this._selectedBetSizeValue},set:function(t){this._selectedBetSizeValue=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"keyInfo",{get:function(){return this._keyInfo},enumerable:!1,configurable:!0}),e.prototype._processKeyInfo=function(t){return{keyType:t.kt,keyState:t.act,allEliminateKeyIndexes:t.ks,currentEliminateKeyIndexes:t.kc}},Object.defineProperty(e.prototype,"rpgInfo",{get:function(){return this._rpgInfo},enumerable:!1,configurable:!0}),e.prototype._processRpgInfo=function(t,e,i,o,a){var s,r,c=this._getHeroInfo(t),l=e?this._getSymbolInfo(e):void 0,h=this._getStageProgressionInfo(i);s=void 0,o||a?(s=o?this._obstacleInfo(o,void 0):this._obstacleInfo(void 0,a),this._hasEnemyInfo=!0):this._hasEnemyInfo=!1,r=void 0,this._hasEnemyInfo&&(r=s.overallPrize);var u=this.stateTransitionTo!==n.SPIN_TYPE.SUBSPIN,d=this._getChestBoxInfo(o);return{hero:c,obstacle:s,stage:h,specialSymbol:l,isFinal:u,hasEnemy:this._hasEnemyInfo,prize:r,chestBox:d}},Object.defineProperty(e.prototype,"gemInfo",{get:function(){return this._gemInfo},enumerable:!1,configurable:!0}),e.prototype._processGemInfo=function(t,e){return{eliminateIndexGroups:t,reels:e}},e.prototype._obstacleInfo=function(t,e){return t?{round:t.rnd,enemy:this._parseRelicData(t),isFinished:t.if,overallPrize:t.wa,isObstacleMonsters:!1}:{round:e.rnd,enemy:this._parseMonsterData(e),isFinished:e.if,overallPrize:e.pz,monsterCount:e.mc,isObstacleMonsters:!0}},e.prototype._parseRelicData=function(t){var e=[],i={type:t.rt,hpChange:1,currentHp:t.c,maxHp:t.tc,damage:0};return e.push(i),e},e.prototype._parseMonsterData=function(t){for(var e=[],i=t.mt,n=t.mhp,o=t.hp,a=t.hpc,s=t.md,r=0;r<i.length;r++){var c=!1;if(r===i.length-1){var l=t.if,h=t.hp.filter(function(t){return t>0}).length>0;c=!l&&!h}var u={type:i[r],maxHp:n[r],currentHp:o[r],hpChange:a[r],damage:s[r],isDizzy:c};e.push(u)}return e},e.prototype._getChestBoxInfo=function(t){return t?t.tca:void 0},e.prototype._getSymbolInfo=function(t){return{symbolType:t.st,actionEnum:t.act,specialExecution:t.es?this._getSpecialSymbolExecutionInfo(t.es):void 0}},e.prototype._getSpecialSymbolExecutionInfo=function(t){return{position:t.pos,symbol:t.sym}},e.prototype._getHeroInfo=function(t){var e=void 0;return null!==t&&(e={isAlive:t.al,isAttack:t.atk,hpChange:t.hpc,currentHp:t.hp,maxHp:t.mhp}),e},e.prototype._getStageProgressionInfo=function(t){return{currentStage:t.stg-1,changeStage:t.cstg}},e}(t("TransactionModel").default);i.default=o,cc._RF.pop()}},{Enum:"Enum",TransactionModel:"TransactionModel"}],GameAudioAdapter:[function(t,e,i){"use strict";if(!cc._RF.push(e,"8c0ecQgQvxM3oNottpd7IZl","GameAudioAdapter")){Object.defineProperty(i,"__esModule",{value:!0});var n=t("AudioAdapter"),o=t("AudioManager"),a=function(t){function e(e,i){var n=t.call(this,e)||this;return n._gameAudioManagerType=void 0,n._isMusic=void 0,n._isMusic=i,n}return __extends(e,t),e.prototype.load=function(){var e=this;t.prototype.load.call(this);var i=function(){e.off("loaderror",n),e._gameAudioManagerType=o.registerAudio(e,e._isMusic)},n=function(){e.off("load",i)};this.once("load",i),this.once("loaderror",n)},e.prototype.unload=function(){o.unregisterAudio(this,this._gameAudioManagerType),t.prototype.unload.call(this)},e}(n.default);i.default=a,cc._RF.pop()}},{AudioAdapter:"AudioAdapter",AudioManager:"AudioManager"}],GameEventHandler:[function(t,e){"use strict";if(!cc._RF.push(e,"78a8bBeUHlJdbN3b8mCrguv","GameEventHandler")){var i=function(t,e){var i=c();return function(t){return i[t-=260]}(t,e)},n=System[i(352)](i(320)+i(298)+i(386)+"rk")[i(355)+i(287)+i(276)+i(361)+i(380)+"r"],o={};o[i(396)+i(354)+i(399)+i(355)+i(272)+i(316)+i(299)+i(307)+i(347)+"t"]=i(396)+i(354)+i(399)+i(349)+i(264)+i(355)+i(272)+i(362)+i(347)+"t",o[i(396)+i(354)+i(399)+i(355)+i(363)+i(293)+i(367)+i(321)+i(340)+i(359)+i(374)+"nt"]=i(396)+i(354)+i(399)+i(355)+i(363)+i(293)+i(367)+i(362)+i(347)+"t",o[i(396)+i(354)+i(399)+i(355)+i(376)+i(302)+i(398)+i(260)+i(306)+i(347)+"t"]=i(396)+i(354)+i(399)+i(355)+i(376)+i(302)+i(398)+i(260)+"st",o[i(396)+i(354)+i(399)+i(355)+i(376)+i(302)+i(330)+i(317)+i(287)+i(276)]=i(396)+i(354)+i(399)+i(355)+i(376)+i(302)+i(330)+i(317)+i(315)+i(260)+"st",o[i(396)+i(354)+i(399)+i(333)+i(300)+i(351)+i(379)+i(331)+i(317)+i(287)+i(276)]=i(396)+i(354)+i(399)+i(349)+i(264)+i(333)+i(300)+i(351)+i(379)+i(287)+i(276),o[i(396)+i(354)+i(399)+i(393)+i(265)+i(277)+i(305)+i(285)+i(303)+i(288)+i(317)+i(287)+i(276)]=i(396)+i(354)+i(399)+i(294)+i(380)+i(353)+i(307)+i(347)+"t",o[i(396)+i(354)+i(399)+i(337)+i(292)+i(339)+i(289)+i(373)+i(290)+i(390)+i(278)+i(317)+i(287)+i(276)]=i(396)+i(354)+i(399)+i(337)+i(292)+i(339)+i(289)+i(373)+i(290)+i(390)+i(278)+i(317)+"e",o[i(396)+i(354)+i(399)+i(346)+i(372)+i(355)+i(382)+i(348)+i(338)+i(309)+i(378)+i(276)]=i(396)+i(354)+i(399)+i(355)+i(357)+i(381)+i(340)+i(359)+i(374)+"nt",o[i(308)+i(281)+i(266)+i(305)+i(344)+i(301)+i(364)+i(347)+"t"]=i(308)+i(281)+i(266)+i(305)+i(344)+i(301)+"e",o[i(308)+i(388)+i(324)+i(351)+i(353)+i(397)+i(327)+i(276)]=i(308)+i(388)+i(324)+i(351)+i(353)+i(397)+"d",o[i(308)+i(388)+i(324)+i(351)+i(346)+i(273)+i(327)+i(276)]=i(308)+i(388)+i(324)+i(351)+i(346)+i(273)+"d",o[i(308)+i(268)+i(314)+i(369)+i(374)+"nt"]=i(308)+i(268)+i(314)+i(369),o[i(308)+i(281)+i(341)+i(351)+i(291)+i(365)+i(304)+i(276)]=i(308)+i(269)+i(261)+i(312)+i(347)+"t",o[i(375)+i(355)+i(286)+i(370)+i(374)+i(392)+i(295)+i(336)+"k"]=i(335)+i(355)+i(286)+i(370)+i(374)+i(392)+i(295)+i(336)+"k",o[i(375)+i(355)+i(315)+i(391)+i(287)+i(276)+i(383)+i(377)+"ck"]=i(335)+i(355)+i(315)+i(391)+i(287)+i(276)+i(383)+i(377)+"ck",o[i(375)+i(389)+i(356)+i(311)+i(323)+i(284)+i(271)+i(270)+i(327)+i(276)+i(383)+i(377)+"ck"]=i(335)+i(389)+i(356)+i(311)+i(323)+i(284)+i(271)+i(270)+i(395)+i(263)+i(275),o[i(274)+i(401)+i(389)+i(356)+i(311)+i(323)+i(284)+i(271)+i(270)+i(327)+i(276)+i(383)+i(377)+"ck"]=i(274)+i(401)+i(389)+i(356)+i(311)+i(323)+i(284)+i(271)+i(270)+i(395)+i(263)+i(275),o[i(375)+i(355)+i(279)+i(319)+i(283)+i(261)+i(374)+i(392)+i(295)+i(336)+"k"]=i(335)+i(355)+i(279)+i(319)+i(283)+i(261)+i(374)+i(392)+i(295)+i(336)+"k",o[i(375)+i(393)+i(265)+i(277)+i(305)+i(387)+i(263)+i(275)]=i(335)+i(393)+i(265)+i(277)+i(305)+i(387)+i(263)+i(275),o[i(396)+i(354)+i(399)+i(343)+i(310)+i(371)+i(297)+i(268)+i(314)+i(374)+"nt"]=i(396)+i(354)+i(399)+i(337)+i(292)+i(322)+i(402)+i(280)+i(360)+i(342)+i(347)+"t",o[i(396)+i(354)+i(399)+i(343)+i(310)+i(371)+i(297)+i(403)+i(385)+i(384)+i(327)+i(276)]=i(396)+i(354)+i(399)+i(337)+i(292)+i(322)+i(402)+i(280)+i(328)+i(358)+i(329)+i(374)+"nt",o[i(396)+i(354)+i(399)+i(343)+i(310)+i(371)+i(297)+i(403)+i(385)+i(311)+i(325)+i(305)+i(318)+i(340)+i(359)+i(374)+"nt"]=i(396)+i(354)+i(399)+i(337)+i(292)+i(322)+i(402)+i(280)+i(328)+i(358)+i(368)+i(267)+i(303)+i(262)+i(260)+i(306)+i(347)+"t";var a=o,s=__assign({},n);for(var r in Object[i(296)+"s"](a)[i(394)+i(282)+"h"](function(t){s[a[t]]=s[t]}),s)e[i(350)+i(326)+"s"][r]=s[r];e[i(350)+i(326)+"s"][i(400)+i(345)+i(334)+"e"]=!0,cc._RF.pop()}function c(){var t=["que","ock","sRe","llb","ate","IId","meS","nSt","tEr","tBl","nge","Cha","eIn","ppe","rem","ack","ent","leS","tUp","ePl","ket","tGa","Eac","IBl","nfo","eSt","ePa","eEv","sUp","urr","yFo","UIB","rat","you","UII","all","key","cke","ram","pda","ioP","ang","nfi","atu","kEv","tat","stE","teE","emi","ues","sio","cti","UIE","uil","ror","eRe","foU","dat","usR","ayU","bvf","foR","ion","onI","top","onS","ort","dEv","Con","ted","gUp","eUp","isB","Aud","dul","set","bac","Ope","Req","orC","equ","meP","orE","Ses","eCh","sMo","Sto","ven","ame","Upd","exp","lay","get","Sta","scr","Gam","nsa","eNa","nec","est","Err","Han","foE","eLa","edE","loc","der","tIn","tio","Log","use","nSo","red","enc","Eve","add","eCo","lba","tEv","Rat","dle","meR","esN","Cal","cte","nne","ewo","eCa","tAu","Tra","rma","sum","ntC","InU","for","dCa","sub","rte","gRe","ibe","__e","ove","Soc","tCo"];return(c=function(){return t})()}},{}],GameHeaderHelper:[function(t,e){"use strict";if(!cc._RF.push(e,"902b11CvKxGfJXFS+8kBuNG","GameHeaderHelper")){var i=function(t,e){var i=a();return function(t){return i[t-=397]}(t,e)},n=System[i(401)](i(397)+i(411)+i(407)+"rk")[i(406)+i(404)+i(412)+i(410)+i(400)+"r"];for(var o in n)e[i(413)+i(405)+"s"][o]=n[o];e[i(413)+i(405)+"s"][i(403)+i(399)+i(402)+"e"]=!0,cc._RF.pop()}function a(){var t=["bvf","isB","sMo","lpe","get","dul","__e","eHe","ort","Gam","ewo","der","uil","rHe","ram","ade","exp"];return(a=function(){return t})()}},{}],GameInitializationHandler:[function(t,e){"use strict";if(!cc._RF.push(e,"bd993I8qkRJPZQv3SInN1vr","GameInitializationHandler")){var i=function(t,e){var i=a();return function(t){return i[t-=466]}(t,e)},n=System[i(470)](i(468)+i(473)+i(471)+"rk")[i(485)+i(472)+i(467)+i(477)+i(479)+i(480)+i(476)+i(469)+"r"];for(var o in n)e[i(478)+i(474)+"s"][o]=n[o];e[i(478)+i(474)+"s"][i(481)+i(483)+i(482)+"e"]=!0,cc._RF.pop()}function a(){var t=["isB","iti","bvf","dle","get","ewo","eIn","ram","ort","der","Han","ali","exp","zat","ion","__e","dul","sMo","uil","Gam"];return(a=function(){return t})()}},{}],GameLayout:[function(t,e,i){"use strict";cc._RF.push(e,"d38afnrnWVDxbp6m/niYljG","GameLayout")||(Object.defineProperty(i,"__esModule",{value:!0}),i.gameLayout=void 0,i.gameLayout={uiFreeSpace:{position:{x:0,y:900},size:{width:1080,height:560}},uiSettingMenu:{position:{x:0,y:-610},size:{width:1080,height:560}}},cc._RF.pop())},{}],GameMaintenanceHandler:[function(t,e){"use strict";if(!cc._RF.push(e,"31965J3U45Iwb/2UCD23guQ","GameMaintenanceHandler")){var i=function(t,e){var i=a();return function(t){return i[t-=448]}(t,e)},n=System[i(463)](i(452)+i(457)+i(453)+"rk")[i(464)+i(458)+i(466)+i(461)+i(454)+i(451)+i(449)+"r"];for(var o in n)e[i(450)+i(459)+"s"][o]=n[o];e[i(450)+i(459)+"s"][i(448)+i(455)+i(456)+"e"]=!0,cc._RF.pop()}function a(){var t=["__e","dle","exp","Han","bvf","ewo","nce","sMo","dul","ram","eMa","ort","uil","ena","isB","get","Gam","der","int"];return(a=function(){return t})()}},{}],GameMaintenanceModel:[function(t,e){"use strict";if(!cc._RF.push(e,"b3bffHUvTlMvICHiMazfpmq","GameMaintenanceModel")){var i=function(t,e){var i=a();return function(t){return i[t-=154]}(t,e)},n=System[i(159)](i(165)+i(166)+i(157)+"rk")[i(168)+i(162)+i(161)+i(169)+i(160)+i(163)+"el"];for(var o in n)e[i(158)+i(154)+"s"][o]=n[o];e[i(158)+i(154)+"s"][i(171)+i(170)+i(156)+"e"]=!0,cc._RF.pop()}function a(){var t=["ort","isB","dul","ewo","exp","get","nce","int","eMa","Mod","der","bvf","ram","uil","Gam","ena","sMo","__e"];return(a=function(){return t})()}},{}],GamePluginModel:[function(t,e){"use strict";if(!cc._RF.push(e,"f4312/DNfZPRKE0yOt1btpf","GamePluginModel")){var i=function(t,e){var i=o();return function(t){return i[t-=134]}(t,e)},n=System[i(138)](i(137)+i(145)+i(139)+"rk")[i(140)+i(141)+i(144)+i(143)+i(148)];e[i(149)+i(146)+"s"][i(147)+i(135)+"t"]=n,e[i(149)+i(146)+"s"][i(136)+i(150)+i(152)+"e"]=!0,cc._RF.pop()}function o(){var t=["isB","aul","__e","bvf","get","ewo","Gam","ePl","der","nMo","ugi","ram","ort","def","del","exp","sMo","uil","dul"];return(o=function(){return t})()}},{}],GamePreference:[function(t,e,i){"use strict";if(!cc._RF.push(e,"56e00NsEfpE75veL0dJGVrn","GamePreference")){i.__esModule=!0,i.globalPreference=i.gamePreference=void 0;var n,o,a=t("RtConfig"),s=t("Preference");i.globalPreference=o,i.gamePreference=n,i.gamePreference=n=(0,s.getPreference)(a.cs_Config.bundleId),i.globalPreference=o=(0,s.getPreference)(a.cs_Config.globalDomain),n.defineItem("story",!1),n.defineItem("meetMapOrMoney",!1),n.defineItem("meetTreasureBehind",!1),n.defineItem("reachedGate",!1),cc._RF.pop()}},{Preference:"Preference",RtConfig:"RtConfig"}],GameTitle:[function(t,e){"use strict";if(!cc._RF.push(e,"43f47D7qEZEqq9XHl3b2xNt","GameTitle")){var i=function(t,e){var i=a();return function(t){return i[t-=103]}(t,e)},n=System[i(112)](i(104)+i(116)+i(108)+"rk")[i(106)+i(105)+i(111)];for(var o in n)e[i(103)+i(110)+"s"][o]=n[o];e[i(103)+i(110)+"s"][i(107)+i(113)+i(109)+"e"]=!0,cc._RF.pop()}function a(){var t=["exp","bvf","eTi","Gam","__e","ewo","dul","ort","tle","get","sMo","der","isB","ram","uil"];return(a=function(){return t})()}},{}],GameUtils:[function(t,e){"use strict";if(!cc._RF.push(e,"7d413hBAk5LJZLN+zJRbW97","GameUtils")){var i=function(t,e){var i=a();return function(t){return i[t-=282]}(t,e)},n=System[i(286)](i(285)+i(294)+i(296)+"rk")[i(289)+i(284)+i(293)];for(var o in n)e[i(290)+i(291)+"s"][o]=n[o];e[i(290)+i(291)+"s"][i(287)+i(282)+i(283)+"e"]=!0,cc._RF.pop()}function a(){var t=["sMo","dul","eUt","bvf","get","__e","uil","Gam","exp","ort","isB","ils","ram","der","ewo"];return(a=function(){return t})()}},{}],GargoyleSprite:[function(t,e,i){"use strict";if(!cc._RF.push(e,"caf23EiY4NAp5eswP3iCc4A","GargoyleSprite")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Component,properties:{defaultSprite:cc.SpriteFrame,defaultAttackSprite:cc.SpriteFrame},onLoad:function(){this._spriteAnim=this.getComponent(cc.Animation),this._sprite=this.getComponent(cc.Sprite),this._attackPosition=cc.v2(-1004,360),this._deathPosition=cc.v2(-402,271)},die:function(){this._spriteAnim&&(this._sprite.spriteFrame=this.defaultSprite,this.node.position=this._deathPosition,this._spriteAnim.play("gargoyle_death"))},attack2:function(){this._spriteAnim&&(this._sprite.spriteFrame=this.defaultAttackSprite,this.node.position=this._attackPosition,this._spriteAnim.play())},playDust:function(){this.playingDust&&this.playingDust()},spriteAnimEnded:function(t){this.didAnimEnd&&this.didAnimEnd(t)},spriteAnimHit:function(){this.didAnimHit&&this.didAnimHit()}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],Gargoyle:[function(t,e,i){"use strict";if(!cc._RF.push(e,"5a6acvzRPJGM6vDX3VYmh8+","Gargoyle")){i.__esModule=!0,i.default=void 0;var n=d(t("GargoyleSprite")),o=d(t("BaseEnemyActor")),a=t("Enum"),s=d(t("AudioLibrary")),r=t("AssetManager"),c=t("ObstacleBundle"),l=t("Utils"),h=shell.I18n,u=cc.Class({extends:o.default,properties:{sprite:n.default,atk1Animation:cc.Animation},onLoad:function(){var t=r.assetManager.getAsset(c.GargoyleAudioBundle);this.atk1Sound=t.gargoyleNormalAttack,this.atk2Sound=t.gargoyleComboAttack,this.dieSound=t.gargoyleDie,this._super(),this._targetActor=void 0,this._attackCallback=void 0,this.node.y+=50,this.sprite.didAnimEnd=this.didAnimEnd.bind(this),this.sprite.didAnimHit=this.didAnimHit.bind(this),this.sprite.playingDust=this.playingDust.bind(this),this._setupAnimations(),this._meetCat=["CatDialog.EncounteredGargoyleSpeech"]},_getEnemyType:function(){return a.EnemyType.gargoyle},_getEmoticonPosition:function(t){var e;switch(t){case a.EmoticonStyle.Sweat:e=cc.v2(0*this.node.getContentSize().width,.1*this.node.getContentSize().height);break;case a.EmoticonStyle.Shock:e=cc.v2(.1*this.node.getContentSize().width,.15*this.node.getContentSize().height);break;case a.EmoticonStyle.ShockExpMarkLv1:case a.EmoticonStyle.ShockExpMarkLv2:case a.EmoticonStyle.ShockExpMarkLv3:e=cc.v2(-.5*this.node.getContentSize().width,.1*this.node.getContentSize().height)}return e},_setupAnimations:function(){this._atk1AnimNode=this.atk1Animation.node,this._atk1AnimNode.active=!1},getIdleAnim:function(){return"Idle_01"},getHitAnim:function(){return"hit"},getDieAnim:function(){return"Death"},getDeflectAnim:function(){return"Deflect"},getApproachRange:function(){return 650},_cancelEffects:function(){this.atk1Animation.stop(),this._atk1AnimNode.active=!1},die:function(){this._playDieSound(),this._switchToSprite(!0),this.sprite.die(),this.dropPrize(),this.hideEnemyState()},_switchToSprite:function(t){this.sprite.node.active=t,this.spine.node.active=!t,this._isAnimating=t},didAnimEnd:function(t){var e=this;"die"!==t?(this._switchToSprite(!1),this.spine.setAnimation(0,"Idle_01",!0),this._attackCallback&&this._attackCallback()):(this.node.zIndex=-1,this.node.runAction(cc.sequence([cc.fadeOut(.3),cc.callFunc(function(){e.node.opacity=255,e.node.active=!1})])))},didAnimHit:function(){this._targetActor&&this._targetActor.damaged(this._hitDamage)},playingDust:function(){this.extraEffectPlayer.playDustEffect(cc.v2(this.node.x,0),this.node.parent)},_executeAttack:function(t,e,i){t.isDead()?this.attack1(t,i):e?0===(0,l.randomInt)(0,1)?this.attack1(t,i):this.attack2(t,i):this.attack1(t,i)},getAttackEventName:function(){return"Stop_Forward"},getBackwardStopEventName:function(){return"Stop_Back"},attack1:function(t,e){var i=this,n=t.node,o=t.isDead()?n.x+n.width/2+200:n.x+n.width/2,a=cc.v2(o,n.y),r={moveSpeedIn:.3,moveSpeedOut:.9,moveDeflectSpeedOut:.2,minDistance:50,attackHits:1,animFunc:this.attack1Anim.bind(this)};this.spineAttack([t],a,r,function(){i._atk1AnimNode.active=!1,i.atk1Animation.stop(),e&&e()}),s.default.playEffect(this.atk1Sound)},attack1Anim:function(){var t=this.spine;"Attack_01"!==t.animation&&(this._atk1AnimNode.active=!0,this.atk1Animation.play("gargoyle_atk_effect"),t.setAnimation(0,"Attack_01",!1),t.addAnimation(0,"Idle_01",!0,0))},attack2:function(t,e){this._targetActor=t,this._attackCallback=e,this._data&&(this._hitDamage=this._data.damage/2),this._switchToSprite(!0),this.sprite.attack2(),s.default.playEffect(this.atk2Sound)},restoreActorState:function(){this._super(),this._switchToSprite(!1)},getMeetDialogCat:function(){var t=this._meetCat.concat(o.default._meetMonster),e=(0,l.randomInt)(0,t.length-1);return h.t(t[e])},_playDieSound:function(){s.default.playEffect(this.dieSound)},destroy:function(){this.sprite.didAnimEnd=void 0,this.sprite.didAnimHit=void 0,this.sprite.playingDust=void 0,this._super()}});i.default=u,e.exports=i.default,cc._RF.pop()}function d(t){return t&&t.__esModule?t:{default:t}}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",BaseEnemyActor:"BaseEnemyActor",Enum:"Enum",GargoyleSprite:"GargoyleSprite",ObstacleBundle:"ObstacleBundle",Utils:"Utils"}],GemData:[function(t,e){"use strict";if(!cc._RF.push(e,"2dba1zKAVxKire+QBcruaeL","GemData")){var i=cc.Class({extends:cc.Object,properties:{type:"Gem1",canKill:!1,spriteFramePath:void 0,column:0,row:0,index:0,spriteIndex:0,nextIndex:void 0,nextColumn:void 0,nextRow:void 0,eliminateCountInColumn:void 0}});e.exports={Gem:i},cc._RF.pop()}},{}],GemPiecesGenerator:[function(t,e,i){"use strict";if(!cc._RF.push(e,"eb319XSVfRIErwvJoZKVGVJ","GemPiecesGenerator")){i.__esModule=!0,i.default=void 0;var n=t("GemsManager"),o=cc.Class({extends:cc.Component,properties:{inertia:cc.v2(15,16),gravity:.8,frictionX:.02,scaleVarient:1.2,scaleRange:.5,gemContainer:cc.Node,piecePrefab:cc.Prefab,shineParticle:cc.Prefab,gem1Pieces:[cc.SpriteFrame],gem2Pieces:[cc.SpriteFrame],gem3Pieces:[cc.SpriteFrame],gem4Pieces:[cc.SpriteFrame],gem5Pieces:[cc.SpriteFrame],gem6Pieces:[cc.SpriteFrame],gem7Pieces:[cc.SpriteFrame],gem8Pieces:[cc.SpriteFrame],_isHDVer:cc.Boolean},init:function(){this._pieces=[],this._piecePool=new cc.NodePool,this._particlePool=new cc.NodePool;var t=this._colorPieces=[,,,,,,,,];t[0]=this.gem1Pieces,t[1]=this.gem2Pieces,t[2]=this.gem3Pieces,t[3]=this.gem4Pieces,t[4]=this.gem5Pieces,t[5]=this.gem6Pieces,t[6]=this.gem7Pieces,t[7]=this.gem8Pieces},isHDVersion:function(t){this._isHDVer=t},setBreakPointGenerator:function(t){this.generator=t,t.reachInfoBoard=this._numberReachInfoBoard.bind(this),t.worldLayer=this.gemContainer},update:function(){for(var t=this._pieces,e=this.gravity,i=t.length-1;i>=0;i--)for(var n=t[i].length-1;n>=0;n--){var o=t[i][n];Math.abs(o.inertiaX)>.1?(o.inertiaX-=.1*Math.sign(o.inertiaX),o.x-=o.inertiaX):o.inertiaX=0,o.inertiaY-=e,o.y=o.y+o.inertiaY*o.scaleX}},testBreakGems:void 0,showBreakPoint:function(t,e,i,n){this.generator.generateNumbers(t,e,i,n)},breakGems:function(t,e,i){var o=this,a=[],s=this._isHDVer?8:2,r=this._dequeueReusableParticle();this.enabled||(this.enabled=!0);for(var c=0;c<s;c++){var l=this._createPiece(c,t,e);a.push(l);var h=cc.spawn([cc.fadeOut(.7).easing(cc.easeIn(3)),cc.scaleTo(.9,0).easing(cc.easeIn(3)),cc.rotateBy(.9,540*(.5+Math.random()))]);c===s-1?l.runAction(cc.sequence(h,cc.callFunc(function(){for(var t=0,e=a.length;t<e;t++){var i=a[t];i.removeFromParent(),o._piecePool.put(i)}if(o._pieces.pop(),0===o._pieces.length&&(o.enabled=!1),o._isHDVer){var n=r.getComponent(cc.ParticleSystem);n.resetSystem(),n.stopSystem(),r.removeFromParent(),o._particlePool.put(r)}}))):l.runAction(h)}if(this._pieces.unshift(a),this._isHDVer){r||(r=cc.instantiate(this.shineParticle)),r.x=e.x,r.y=e.y,this.gemContainer.addChild(r);var u=r.getComponent(cc.ParticleSystem),d=r.getComponent(cc.Animation),p=r.children[0];u.startColor=p.color=n.GEM_COLOR[t],u.resetSystem(),d.play(),this.generator.moveToInfoBoard(i)}else this.generator.simpleMoveToInfoBoard(i)},_createPiece:function(t,e,i){var n=this.inertia,o=this._dequeueReusableItem();o||(o=cc.instantiate(this.piecePrefab)),o.getComponent(cc.Sprite).spriteFrame=this._colorPieces[e][t%5],this.gemContainer.addChild(o);var a=Math.random(),s=Math.random(),r=t>4?1:-1;return o.scaleX=o.scaleY=this.scaleVarient-a*this.scaleRange,o.opacity=255,o.angle=-360*s,o.x=i.x+30*a*r,o.y=i.y+30*(s-.5),o.inertiaX=n.x*s*r,o.inertiaY=n.y/2+(a-.5)*n.y,o},_numberReachInfoBoard:function(t,e,i){this.delegate.addWinAmount(t,!1,e,i)},clearPool:function(){this._isHDVer&&this._particlePool.clear(),this._piecePool.clear()},_dequeueReusableParticle:function(){var t=void 0;return this._isHDVer&&(t=this._particlePool.get()),t},_dequeueReusableItem:function(){return this._piecePool.get()}});i.default=o,e.exports=i.default,cc._RF.pop()}},{GemsManager:"GemsManager"}],GemsDataParser:[function(t,e,i){"use strict";if(!cc._RF.push(e,"d4589zOFGlNOI3CGgJSvhC1","GemsDataParser")){i.__esModule=!0,i.default=void 0;var n=["Gem1","Gem2","Gem3","Gem4","Gem5","Gem6","Gem7","Gem8"],o=t("GemData").Gem,a={gemsDataParser:new(cc.Class({extends:cc.Object,parseData:function(t){var e=[],i={},a=t.reels;if(!a)return{gemsData:i,emptyIndexes:e};var r=t.eliminateIndexGroups,c=[];if(r){for(var l=Object.keys(r),h=0,u=l.length;h<u;h++)for(var d=r[l[h]],p=0,f=d.length;p<f;p++)c=c.concat(d[p]);c.sort(s)}for(var _=this._updateEliminateIndexes(c),m=0,g=a.length;m<g;m++){var y=new o;y.type=n[a[m]],y.spriteIndex=a[m],y.canKill=!1,y.index=m;var v=parseInt(m/6),b=Math.round(m%6);y.row=b,y.column=v,i[m]=y}if(!c)return{gemsData:i,emptyIndexes:e};for(var S=0;S<c.length;S++)i[c[S]].canKill=!0;for(var C=0,A=_.length;C<A;C++){var E=_[C],M=this._getNeedUpdateGemsIndexes(E);this._getEmptyIndexesAfterCrash(E,e);for(var T=0,P=M.length;T<P;T++){var I=M[T],w=i[I],B=this._returnGreaterEliminateIndexesCount(I,_[C]);w.nextIndex=w.index+B,w.nextRow=w.row+B,w.nextColumn=w.column}}return{gemsData:i,emptyIndexes:e,eliminateIndexes:c,eliminateLength:c.length}},_updateEliminateIndexes:function(t){if(!t||t.length<=1)return[];for(var e=t[0],i=parseInt(e/6),n=[e],o=[],a=1;a<t.length;a++){var s=t[a],r=parseInt(s/6);r===i?n.push(s):(o.push(n),n=[s]),e=s,i=r}return o.push(n),o},_getNeedUpdateGemsIndexes:function(t){for(var e=[],i=t[t.length-1],n=parseInt(i/6),o=Math.round(i%6)-1;o>=0;o--){var a=6*n+o;-1===t.indexOf(a)&&e.push(a)}return e},_getEmptyIndexesAfterCrash:function(t,e){for(var i=t.length,n=t[0],o=parseInt(n/6),a=0;a<i;a++){var s={},r=6*o+a;s.index=r,s.eliminateCount=i,e[r]=s}},_returnGreaterEliminateIndexesCount:function(t,e){return e.filter(function(e){return e>t}).length}}))};i.default=a,e.exports=i.default,cc._RF.pop()}function s(t,e){return t-e}},{GemData:"GemData"}],GemsHighlight:[function(t,e,i){"use strict";if(!cc._RF.push(e,"b4805WsgzJGQ6pwlmnmah6C","GemsHighlight")){i.__esModule=!0,i.default=void 0;var n=t("GemsManager"),o=cc.Class({extends:cc.Component,properties:{effectLayout:cc.Node,highlightPrefab:cc.Prefab,cornerLine:cc.SpriteFrame,horizontalLine:cc.SpriteFrame,verticalLine:cc.SpriteFrame,outerCornerHighlight:cc.SpriteFrame,innerCornerHighlight:cc.SpriteFrame,horizontalHighlight:cc.SpriteFrame,verticalHighlight:cc.SpriteFrame,_isHDVer:cc.Boolean},onLoad:function(){this.init()},isHDVersion:function(t){this._isHDVer=t},init:function(){this._frames||(this._frames=[]),this._framePool||(this._framePool=new cc.NodePool)},setHighlight:function(t){for(var e=0,i=t.length;e<i;e++)this._addFrame(t[e],t);this._playGemAppear()},clearHightlight:function(){this.init();for(var t=this._frames,e=0,i=t.length;e<i;e++){var n=t[e];this._isHDVer&&(n.getComponent(cc.Animation).stop(),n.children[0].color=n.color=cc.Color.BLACK),n.removeFromParent(),0===e&&this._framePool.put(n)}this._frames.length=0},removeHighlight:function(){for(var t=this._frames,e=0,i=t.length;e<i;e++){var n=t[e];this._isHDVer?n.getComponent(cc.Animation).play("gem_highlight_disappear"):(n.children[0].active=!1,n.active=!1)}this.scheduleOnce(this._removeHighlight,.4)},_removeHighlight:function(){for(var t=this._frames,e=0,i=t.length;e<i;e++){var n=t[e];this._isHDVer&&(n.getComponent(cc.Animation).stop(),n.children[0].color=n.color=cc.Color.BLACK),n.removeFromParent(),0===e&&this._framePool.put(n)}this._frames.length=0},_playGemAppear:function(){for(var t=this._frames,e=0,i=t.length;e<i;e++)this._isHDVer?t[e].getComponent(cc.Animation).play("gem_highlight_appear"):(t[e].active=!0,t[e].children[0].active=!0)},_addFrame:function(t,e){var i=cc.v2((Math.floor(t/n.NUM_ROW)+.5)*n.GEM_WIDTH,-(t%n.NUM_ROW+.5)*n.GEM_HEIGHT),o=[,,,,],a=t%n.NUM_ROW!=0,s=t>=n.NUM_ROW,r=t%n.NUM_ROW!=n.NUM_ROW-1;o[0]=a&&-1!=e.indexOf(t-1),o[1]=a&&s&&-1!=e.indexOf(t-(n.NUM_ROW+1)),o[2]=s&&-1!=e.indexOf(t-n.NUM_ROW),this._setTopLeftFrame(i,o);var c=this._checkOtherCorner(t,e);return!c[0]&&(o[3]=s&&r&&-1!=e.indexOf(t-(n.NUM_ROW-1)),this._setBtmLeftFrame(i,o),!c[2]&&this._setBtmRightFrame(i)),!(c[2]||o[0]&&c[3])&&this._setTopRightFrame(i,o[0]),o},_checkOtherCorner:function(t,e){var i=[,,,,],o=t%n.NUM_ROW!=n.NUM_ROW-1,a=t<n.NUM_ROW*(n.NUM_COL-1),s=t%n.NUM_ROW!=0;return i[0]=o&&-1!=e.indexOf(t+1),i[1]=o&&a&&-1!=e.indexOf(t+(n.NUM_ROW+1)),i[2]=a&&-1!=e.indexOf(t+n.NUM_ROW),i[3]=a&&s&&-1!=e.indexOf(t+(n.NUM_ROW-1)),i},_setTopLeftFrame:function(t,e){var i=e[0],o=e[1],a=e[2],s=this._dequeueReusableItem();s||(s=this._instantiateHighlightPrefab());var r=s.getComponent(cc.Sprite),c=s.children[0],l=c.getComponent(cc.Sprite);i&&o&&a||(!i&&o&&a?(r.spriteFrame=this.cornerLine,s.scaleX=1,s.scaleY=-1,s.x=t.x,s.y=t.y+n.GEM_HEIGHT,l.spriteFrame=this.outerCornerHighlight,c.scaleX=-1,c.anchorX=0):i&&!o&&a?(r.spriteFrame=this.cornerLine,s.scaleX=-1,s.scaleY=-1,s.x=t.x-n.GEM_WIDTH,s.y=t.y+n.GEM_HEIGHT,l.spriteFrame=this.outerCornerHighlight,c.scaleX=-1,c.anchorX=0):i&&o&&!a?(r.spriteFrame=this.cornerLine,s.scaleX=-1,s.scaleY=1,s.x=t.x-n.GEM_WIDTH,s.y=t.y,l.spriteFrame=this.outerCornerHighlight,c.scaleX=-1,c.anchorX=0):i||o||!a?!i||o||a?(r.spriteFrame=this.cornerLine,s.scaleX=1,s.scaleY=1,s.position=t,l.spriteFrame=this.innerCornerHighlight,c.scaleX=1,c.anchorX=1):(r.spriteFrame=this.verticalLine,s.scaleX=1,s.scaleY=1,s.position=t,l.spriteFrame=this.verticalHighlight,c.scaleX=1,c.anchorX=1):(r.spriteFrame=this.horizontalLine,s.scaleX=1,s.scaleY=1,s.position=t,l.spriteFrame=this.horizontalHighlight,c.scaleX=1,c.anchorX=1),s.parent=this.effectLayout,this._frames.push(s))},_setBtmLeftFrame:function(t,e){var i=e[2],o=e[3],a=this._dequeueReusableItem();a||(a=this._instantiateHighlightPrefab());var s=a.getComponent(cc.Sprite),r=a.children[0],c=r.getComponent(cc.Sprite);i&&o?(s.spriteFrame=this.cornerLine,a.scaleX=1,a.scaleY=1,a.x=t.x,a.y=t.y-n.GEM_HEIGHT,c.spriteFrame=this.outerCornerHighlight,r.scaleX=-1,r.anchorX=0):i&&!o?(s.spriteFrame=this.horizontalLine,a.scaleX=1,a.scaleY=-1,a.position=t,c.spriteFrame=this.horizontalHighlight,r.scaleX=1,r.anchorX=1):(s.spriteFrame=this.cornerLine,a.scaleX=1,a.scaleY=-1,a.position=t,c.spriteFrame=this.innerCornerHighlight,r.scaleX=1,r.anchorX=1),a.parent=this.effectLayout,this._frames.push(a)},_setBtmRightFrame:function(t){var e=this._dequeueReusableItem();e||(e=this._instantiateHighlightPrefab());var i=e.children[0];e.getComponent(cc.Sprite).spriteFrame=this.cornerLine,e.scaleX=-1,e.scaleY=-1,e.position=t,i.getComponent(cc.Sprite).spriteFrame=this.innerCornerHighlight,i.scaleX=1,i.anchorX=1,e.parent=this.effectLayout,this._frames.push(e)},_setTopRightFrame:function(t,e){var i=this._dequeueReusableItem();i||(i=this._instantiateHighlightPrefab());var n=i.getComponent(cc.Sprite),o=i.children[0],a=o.getComponent(cc.Sprite);e?(n.spriteFrame=this.verticalLine,i.scaleX=-1,i.scaleY=1,i.position=t,a.spriteFrame=this.verticalHighlight,o.scaleX=1,o.anchorX=1):(n.spriteFrame=this.cornerLine,i.scaleX=-1,i.scaleY=1,i.position=t,a.spriteFrame=this.innerCornerHighlight,o.scaleX=1,o.anchorX=1),i.parent=this.effectLayout,this._frames.push(i)},_dequeueReusableItem:function(){return this._framePool.get()},_instantiateHighlightPrefab:function(){var t=void 0;return t=cc.instantiate(this.highlightPrefab),this._isHDVer||(t.color=cc.Color.WHITE,t.children[0].color=cc.Color.WHITE,t.active=!1,t.children[0].active=!1),t}});i.default=o,e.exports=i.default,cc._RF.pop()}},{GemsManager:"GemsManager"}],"GemsManager.spec":[function(t,e,i){"use strict";if(!cc._RF.push(e,"93fa7iDFfxI/4Qv0vH5BwRJ","GemsManager.spec")){Object.defineProperty(i,"__esModule",{value:!0}),i.onSymbolBreak=i.onWinHighlightShown=void 0;var n=t("AutomationConstant"),o=System.get("automation")&&System.get("automation").GameData;i.onWinHighlightShown=function(){o&&o.emit(n.AUTOMATION_EVENT.WIN_HIGHLIGHT_SHOWN)},i.onSymbolBreak=function(){o&&o.emit(n.AUTOMATION_EVENT.SYMBOL_BREAK)},cc._RF.pop()}},{AutomationConstant:"AutomationConstant"}],GemsManager:[function(t,e,i){"use strict";if(!cc._RF.push(e,"7be66b8LVdPpJot8hf5XqKX","GemsManager")){i.__esModule=!0,i.default=i.NUM_ROW=i.NUM_COL=i.GEM_WIDTH=i.GEM_HEIGHT=i.GEM_COLOR=void 0;var n,o,a,s,r,c,l,h,u,d=t("GemsDataParser"),p=t("Enum"),f=w(t("AudioLibrary")),_=t("SettingMenuHelper"),m=w(t("DataManager")),g=t("AssetManager"),y=t("GeneralBundle"),v=t("Utils"),b=t("TransactionStateMachineHandler"),S=t("AutomationDecorator"),C=t("GemsManager.spec");i.NUM_COL=6,i.NUM_ROW=6,i.GEM_HEIGHT=168,i.GEM_WIDTH=186;var A=[cc.Color.WHITE,new cc.Color(249,172,58),cc.Color.RED,new cc.Color(255,96,164),new cc.Color(255,137,74),new cc.Color(63,188,177),new cc.Color(48,78,150),new cc.Color(92,187,77)];i.GEM_COLOR=A;var E=[[0],[1,6],[2,7,12],[3,8,13,18],[4,9,14,19,24],[5,10,15,20,25,30],[11,16,21,26,31],[17,22,27,32],[23,28,33],[29,34],[35]],M=cc._decorator,T=M.ccclass,P=M.property,I=(n=P([cc.Node]),o=P(cc.Node),a=P(cc.Node),s=(0,S.automationDec)({func:C.onSymbolBreak}),T((c=function(t){var e,i;function n(){for(var e,i=arguments.length,n=Array(i),o=0;o<i;o++)n[o]=arguments[o];return B(e=t.call.apply(t,[this].concat(n))||this,"dustAnimations",l,R(e)),B(e,"dustParticleLayer",h,R(e)),B(e,"rockParticles",u,R(e)),e._isHDVer=!0,e}i=t,(e=n).prototype=Object.create(i.prototype),e.prototype.constructor=e,k(e,i);var o=n.prototype;return o.onLoad=function(){this._gems=[],this._breakCombo=0,this._gemsPool=new cc.NodePool("GemsTemplate"),this.dustParticleLayer.zIndex=98,this.rockParticles.getComponent(cc.ParticleSystem).stopSystem(),this._bindedSpecialGemDestroy=this._specialGemDestroy.bind(this),this._bindedGemFinishEliminate=this._gemFinishEliminate.bind(this),this._bindedOnRespinRemoveGem=this._onRespinRemoveGem.bind(this),this._bindedReadyRequestNextData=this._readyRequestNextData.bind(this),this._bindedGemsStartEliminate=this._gemsStartEliminate.bind(this),this._bindedDropNewGems=this._dropNewGems.bind(this),this._bindedPlayDropSound=this._playDropSound.bind(this),this._bindedLightningEnded=this._lightningEnded.bind(this),this._bindedLightningStart=this._lightningStart.bind(this)},o.isHDVersion=function(t){this._isHDVer=t},o.shaderIsEnabled=function(t){this._shaderEnabled=t},o.setGemTemplate=function(t){this._gemTemplate=t},o.init=function(t){var e=m.default.gemsInfo,i=d.gemsDataParser.parseData(e);this._currentDataSource=i.gemsData,this._currentEmptyGems=i.emptyIndexes,this._currentEliminateLength=i.eliminateLength,this._currentEliminateGroups=e.eliminateIndexGroups,this._currentEliminate=i.eliminateIndexes;var n=g.assetManager.getAsset(y.GeneralGameAudioBundle);if(this.gemsBreakSound=n.gemsBreak,this.gemsHighlight=n.gemsHighlight,this.gemsRespinSound=n.gemsRespin,this.dropSound=n.gemDrop,this.gemsCombo2=n.gemsCombo2,this.gemsCombo3=n.gemsCombo3,this.gemsCombo4=n.gemsCombo4,this.gemsCombo5=n.gemsCombo5,this.gemsCombo6=n.gemsCombo6,this.gemsCombo7=n.gemsCombo7,this.gemsCombo8=n.gemsCombo8,this.specialGemMatch=n.specialGemMatch,this._currentEliminateLength)for(var o=this._currentEliminate,a=this._notCrushGem=[],s=this._gems=[],r=0;r<36;r++)-1===o.indexOf(r)&&(this._requestGem(r,p.GemDropState.static),a.push(s[r]));else for(var c=0;c<36;c++)this._requestGem(c,p.GemDropState.static);t||this.delegate.updateKeyTileState();var l=cc.instantiate(this.specialGemPrefab);this.node.addChild(l,99);var h=this._specialGemEffect=l.getComponent("SpecialGemEffect");h.lightningEnded=this._bindedLightningEnded,h.lightningStart=this._bindedLightningStart},o.initCheckElimination=function(){return!!this._currentEliminateLength&&(this.delegate.requestNextData(),this._gemFinishEliminate(),!0)},o.didSpinReturned=function(t){var e=m.default.gemsInfo;this._nextDataSource=void 0,this._nextEmptyGems=void 0;var i=d.gemsDataParser.parseData(e);this._currentDataSource=i.gemsData,this._currentEmptyGems=i.emptyIndexes,this._currentEliminateLength=i.eliminateLength,this._currentEliminateGroups=e.eliminateIndexGroups,this._currentEliminate=i.eliminateIndexes,t===p.SPIN_TYPE.NORMAL_SPIN&&(this._canDropNewGem?this._dropNewGems():this._spinDidReturned=!0)},o.onSpin=function(){this._playPreGemDropAnimation()},o.playGemDropAnimation=function(t){var e=this;(0,v.sequenceCallback)(function(t){e._stopGemShakeAnimation(t)})(function(){e._gemsDropAnimation(t)})},o._playPreGemDropAnimation=function(){var t=this.dustAnimations,e=this._gems;this._stopGemsBreakComboSound(),this.rockParticles.getComponent(cc.ParticleSystem).resetSystem();for(var i=0;i<e.length;i++){var n=Math.random();e[i].getComponent(cc.Animation).play("awaiting_data_gem_shake",n)}for(var o=0;o<t.length;o++){var a=t[o].getComponent("Dust");a.randomDustNodeProperties(),a.setAnimationOnFinishEvent(),a.playAnimation(),a.setAnimationIsPlaying(!0)}},o._stopGemShakeAnimation=function(t){for(var e=this.dustAnimations,i=this._gems,n=0;n<i.length;n++)i[n].getComponent(cc.Animation).stop("awaiting_data_gem_shake"),n===i.length-1&&t&&t();for(var o=0;o<e.length;o++)e[o].getComponent("Dust").setAnimationIsPlaying(!1);this.rockParticles.getComponent(cc.ParticleSystem).stopSystem()},o._gemsDropAnimation=function(t){this._dropAllOldGems(),_.settingMenuHelper.turboSpinOn?this.scheduleOnce(this._bindedDropNewGems,.03):this.scheduleOnce(this._bindedDropNewGems,.32),this._canDropNewGem=!1,this._spinDidReturned=!1,t||this._shaderEnabled&&this._stopIdleLight()},o._dropNewGems=function(){for(var t=0;t<this._gems.length;t++)this._requestGem(t,p.GemDropState.spin);this.scheduleOnce(this._bindedPlayDropSound,.22)},o._dropAllOldGems=function(){this._lastGem=30;for(var t=0;t<this._gems.length;t++)this._gems[t].removeDropGem()},o.getNextData=function(){var t=m.default.gemsInfo,e=d.gemsDataParser.parseData(t);this._nextDataSource=e.gemsData,this._nextEmptyGems=e.emptyIndexes,this._nextEliminateLength=e.eliminateLength,this._nextEliminate=e.eliminateIndexes,this._nextEliminateGroups=t.eliminateIndexGroups,this._waitingNetwork&&(this._waitingNetwork=!1,this._gemFinishEliminate())},o.resumeDropAction=function(){this._dropFinishActions()},o._initGem=function(t,e){var i=this._currentDataSource[t],n=this._currentEmptyGems[t];n&&(i.eliminateCountInColumn=n.eliminateCount),this._gems[t].init(i,e)},o._requestGem=function(t,e){var i,n;Object.keys(this._currentDataSource)&&this._currentDataSource[t]&&(this._gemsPool.size()<=0?((n=(i=cc.instantiate(this._gemTemplate)).getComponent("GemsTemplate")).delegate=this,n.gemsNodePool=this._gemsPool,i.parent=this.node,n.isHDVersion(this._isHDVer),this._isHDVer&&n.shaderIsEnabled(this._shaderEnabled)):(n=(i=this._gemsPool.get(this)).getComponent("GemsTemplate"),i.parent=this.node),this._gems[t]=n,this._initGem(t,e),i.bounceX=i.bounceY=0)},o.dropFinish=function(t){var e=this.delegate;if(!this._pendingEliminate&&t===this._lastGem){this._isRespin=!1;var i=Object.keys(this._currentEmptyGems).length>0;e.canContinueDrop(i)&&this._dropFinishActions()}},o._dropFinishActions=function(t){void 0===t&&(t=!1),this._isSpecialGem=t;var e=this.delegate;Object.keys(this._currentEmptyGems).length>0?(this._pendingEliminate=!0,this.scheduleOnce(this._bindedGemsStartEliminate,.4)):e.gemsDropFinish()},o._readyRequestNextData=function(){var t=this;(0,b.transitionCompleteCallback)()(function(){t.delegate.requestNextData()})},o._gemsStartEliminate=function(){this._stopGemsBreakSound(),this._pendingEliminate=!1;var t=this.delegate,e=this._specialIndex,i=e>-1;this.scheduleOnce(this._bindedReadyRequestNextData,.6),t.willEliminate(i);for(var n=this._notCrushGem=[],o=this._currentEliminateGroups,a=Object.keys(o),s=0,r=a.length;s<r;s++)for(var c=o[a[s]],l=0,h=c.length;l<h;l++)this._isSpecialGem?this._playSpecialGemMatchSound():this._playHighlightSound(),t.gemsTileHighlight(c[l]);var u,d=this._currentEliminate,p=-1;if(i){u=[],this._specialGemEffect.playLightning();for(var f=Math.floor(e/6),_=e%6,m=0,g=d.length;m<g;m++){var y=d[m],v=y%6,b=Math.abs(Math.floor(y/6)-f),S=Math.abs(v-_),C=b+S;u.push(b+S),C>p&&(p=C,this._lastEliminate=y)}}else p=this._currentEliminateLength-1,this._lastEliminate=d[p];var A=this._gems;this._hasBouncedCol=[!1,!1,!1,!1,!1,!1],this._hasBouncedRow=[!1,!1,!1,!1,!1,!1],this._firstEliminated=!1;for(var E=0,M=A.length;E<M;E++){var T=A[E],P=d.indexOf(E);if(-1!==P){P=i?u[P]:0,T.startEliminate(P,i);for(var I=Math.floor(E/6),w=E%6,B=6*I,R=6*I+6;B<R;B++){var k=this._gems[B].node;-1===d.indexOf(B)&&(k.bounceY+=E-B)}for(var x=w,D=w+36;x<D;x+=6){var L=this._gems[x].node;-1===d.indexOf(x)&&(L.bounceX+=(x-E)/6)}}else n.push(T)}},o._gemFinishEliminate=function(){if(this.delegate.getNextData(),this._nextDataSource){this._currentEliminate=this._nextEliminate,this._currentEliminateGroups=this._nextEliminateGroups,this._currentEliminateLength=this._nextEliminateLength,this._currentDataSource=this._nextDataSource,this._nextDataSource=void 0;for(var t=this._notCrushGem,e=0,i=t.length;e<i;e++)t[e].dropToNewPosition();for(var n=this._currentEmptyGems,o=Object.keys(n),a=o.length,s=0,r=0;r<a;r++){var c=n[o[r]],l=c.index;this._requestGem(l,p.GemDropState.crush);var h=c.eliminateCount-c.index%6;h>=s&&(this._lastGem=l,s=h)}var u=this._nextEmptyGems;Object.keys(u).length>0?(this._currentEmptyGems=u,this._nextEmptyGems={}):this._currentEmptyGems={}}else this._waitingNetwork=!0},o._playDropSound=function(){f.default.playEffect(this.dropSound)},o._playGemsBreakSound=function(){this._gemsBreakSound||(this._gemsBreakSound=f.default.playEffect(this.gemsBreakSound),this._breakCombo++);var t=this._breakCombo;t>7?this._gemsBreakCombo7||(this._gemsBreakCombo7=f.default.playEffect(this.gemsCombo8)):t>6?this._gemsBreakCombo6||(this._gemsBreakCombo6=f.default.playEffect(this.gemsCombo7)):t>5?this._gemsBreakCombo5||(this._gemsBreakCombo5=f.default.playEffect(this.gemsCombo6)):t>4?this._gemsBreakCombo4||(this._gemsBreakCombo4=f.default.playEffect(this.gemsCombo5)):t>3?this._gemsBreakCombo3||(this._gemsBreakCombo3=f.default.playEffect(this.gemsCombo4)):t>2?this._gemsBreakCombo2||(this._gemsBreakCombo2=f.default.playEffect(this.gemsCombo3)):t>1&&(this._gemsBreakCombo1||(this._gemsBreakCombo1=f.default.playEffect(this.gemsCombo2)))},o._stopGemsBreakSound=function(){this._gemsBreakSound&&(f.default.stopEffect(this._gemsBreakSound,this.gemsBreakSound),this._gemsBreakSound=void 0)},o._stopGemsBreakComboSound=function(){this._breakCombo=0,this._gemsBreakCombo1&&(f.default.stopEffect(this._gemsBreakCombo1,this.gemsCombo2),this._gemsBreakCombo1=void 0),this._gemsBreakCombo2&&(f.default.stopEffect(this._gemsBreakCombo2,this.gemsCombo3),this._gemsBreakCombo2=void 0),this._gemsBreakCombo3&&(f.default.stopEffect(this._gemsBreakCombo3,this.gemsCombo4),this._gemsBreakCombo3=void 0),this._gemsBreakCombo4&&(f.default.stopEffect(this._gemsBreakCombo4,this.gemsCombo5),this._gemsBreakCombo4=void 0),this._gemsBreakCombo5&&(f.default.stopEffect(this._gemsBreakCombo5,this.gemsCombo6),this._gemsBreakCombo5=void 0),this._gemsBreakCombo6&&(f.default.stopEffect(this._gemsBreakCombo6,this.gemsCombo7),this._gemsBreakCombo6=void 0),this._gemsBreakCombo7&&(f.default.stopEffect(this._gemsBreakCombo7,this.gemsCombo8),this._gemsBreakCombo7=void 0)},o.spinRespinGem=function(t){this._gems[t].spinRespinGem()},o._playGemsRespin=function(){f.default.playEffect(this.gemsRespinSound)},o._playHighlightSound=function(){f.default.playEffect(this.gemsHighlight)},o._playSpecialGemMatchSound=function(){f.default.playEffect(this.specialGemMatch)},o.getGemWorldPosition=function(t){return this.node.convertToWorldSpaceAR(this._gems[t].getMiddlePoint())},o.updateGemData=function(t,e){return this._gems[t]=e,this._currentDataSource[t]},o.onSpinRemoveGem=function(t){this._requestGem(t,p.GemDropState.spin)},o.removeRespin=function(t){this._gems[t].recycleRespinGem()},o.gemsRespin=function(t){var e=this._gems;this._lastGem=t;for(var i=0,n=e.length;i<n;i++)i!==t&&e[i].removeRespin();this.scheduleOnce(this._bindedOnRespinRemoveGem,1.8),this._playGemsRespin(),this._isRespin=!0},o._onRespinRemoveGem=function(){var t=this._lastGem;this._requestGem(t,p.GemDropState.respinGem);for(var e=0,i=this._gems.length;e<i;e++)e!==t&&this._initGem(e,p.GemDropState.respin)},o.update=function(t){if(this._isRespin)for(var e=this._gems,i=0,n=e.length;i<n;i++)e[i]&&e[i].updateGem(t)},o.gemBeginShake=function(t,e,i){this.delegate.gemBeginShake(t,e,i,this._currentEliminateLength)},o.onGemsCrushed=function(t,e,i){this._playGemsBreakSound(),this.delegate.breakGems(t,e,i);var n=Math.floor(i/6),o=i%6,a=Math.floor(this._lastEliminate/6),s=this._gems;if(!this._hasBouncedCol[n]){if(this._isHDVer)for(var r=6*n,c=6*n+6;r<c;r++){var l=s[r].node,h=l.bounceY;if(h){var u=h/Math.abs(h)*80;l.runAction(cc.sequence([cc.delayTime(.02*Math.abs(h)),cc.moveBy(.15,0,u).easing(cc.easeOut(2)),cc.moveBy(.15,0,-u).easing(cc.easeIn(2))])),l.bounceY=0}}if(this._hasBouncedCol[n]=!0,a===n){var d=this.delegate;d.isMapAppear()||d.isKeyObtained()||d.updateKeyTileState(),this.scheduleOnce(this._bindedGemFinishEliminate,.656)}if(!this._firstEliminated){if(this.delegate.startEliminate(this._currentEliminateLength),this._specialIndex>-1)this._isHDVer&&this.delegate.playShockWave(this._specialSymbolType,this._specialSymbolPos),this._specialLightningPlayed?this._specialIndex=-1:this._specialShockWavePlayed=!0;else for(var p=this._currentEliminateGroups,f=Object.keys(p),_=0,m=f.length;_<m;_++)for(var g=p[f[_]],y=0,v=g.length;y<v;y++){for(var b=g[y],S=this._gems[b[0]].getSpriteIndex(),C=0,A=0,E=b.length,M=0;M<E;M++){var T=b[M];C+=Math.floor(T/6),A+=T%6}var P=C/E+.5,I=A/E+.5;this._isHDVer&&this.delegate.playShockWave(S,cc.v2(186*P,168*-I))}this._firstEliminated=!0}}if(!this._hasBouncedRow[o]){if(this._isHDVer)for(var w=o,B=o+36;w<B;w+=6){var R=s[w].node,k=R.bounceX;if(k){var x=k/Math.abs(k)*80;R.runAction(cc.sequence([cc.delayTime(.02*Math.abs(k)),cc.moveBy(.15,x,0).easing(cc.easeOut(2)),cc.moveBy(.15,-x,0).easing(cc.easeIn(2))])),R.bounceX=0}}this._hasBouncedRow[o]=!0}},o.setSpecialGem=function(){var t=this._specialGemEffect.node,e=this._specialGemEffect,i=this._gems,n=this._specialType=m.default.specialSymbolType,o=this._specialIndex=m.default.specialSymbolPlacementPosition;this._specialLightningPlayed=!1,this._specialShockWavePlayed=!1;var a=this._specialSymbolType=m.default.selectedSpecialSymbol,s=o%6+.5,r=Math.floor(o/6)+.5,c=this._specialSymbolPos=cc.v2(186*r,-168*s);t.position=c,e.setSpecialGem(n,a),this._unaffectedGems=[];var l=[],h=[],u=[];switch(n){case 1:this._getSpecialHorizontalWave(o,l,h,u);break;case 2:this._getSpecialVerticalWave(o,l,h,u);break;case 3:this._getSpecialAreaWave(o,l,h);break;case 4:this._getSpecialHorizontalWave(o,l,h,u),this._getSpecialVerticalWave(o,l,h,u)}for(var d=this._currentEliminate,f=0,_=i.length;f<_;f++)if(-1===d.indexOf(f)){var g=i[f];this._unaffectedGems.push(g),this._isHDVer&&g.darken(),this._initGem(f,p.GemDropState.static)}else-1===l.indexOf(f)&&-1===h.indexOf(f)&&-1===u.indexOf(f)&&this._initGem(f,p.GemDropState.static);this._lastGem=l[0],this._isHDVer&&this.delegate.playShockWave(a,c),e.playShockWave();for(var y=0,v=l.length;y<v;y++)i[l[y]].playGemChangeFirstWave(a);for(var b=0,S=h.length;b<S;b++)i[h[b]].playGemChangeSecondWave(a);for(var C=0,A=u.length;C<A;C++)i[u[C]].playGemChangeFinalWave(a)},o._lightningStart=function(){this.delegate.specialLightningCharge(this._specialIndex),this._specialShockWavePlayed?this._specialIndex=-1:this._specialLightningPlayed=!0},o.onSpecialSwapGem=function(t){this._initGem(t,p.GemDropState.static),t===this._lastGem&&this._dropFinishActions(!0)},o._lightningEnded=function(){var t=this._unaffectedGems;if(this._isHDVer)for(var e=0,i=t.length;e<i;e++)t[e].brighten();this.scheduleOnce(this._bindedSpecialGemDestroy,.1)},o._specialGemDestroy=function(){this.delegate.specialGemEnd()},o._getSpecialHorizontalWave=function(t,e,i,n){for(var o=t%6;o<36;o+=6)o!==t&&(6===Math.abs(t-o)?e.push(o):12===Math.abs(t-o)?i.push(o):n.push(o))},o._getSpecialVerticalWave=function(t,e,i,n){for(var o=6*Math.floor(t/6),a=o+6,s=o;s<a;s++)s!==t&&(1===Math.abs(t-s)?e.push(s):2===Math.abs(t-s)?i.push(s):n.push(s))},o._getSpecialAreaWave=function(t,e,i){var n=Math.floor(t/6),o=t%6;n>0&&(e.push(t-6),o>0&&i.push(t-6-1),o<5&&i.push(t-6+1)),n<5&&(e.push(t+6),o>0&&i.push(t+6-1),o<5&&i.push(t+6+1)),o>0&&e.push(t-1),o<5&&e.push(t+1)},o.playIdleLight=function(){for(var t=this._gems,e=0,i=E.length;e<i;e++)for(var n=E[e],o=0,a=n.length;o<a;o++){var s=n[o];t[s]&&t[s].slideThrough(100*e)}},o._stopIdleLight=function(){for(var t=this._gems,e=0,i=t.length;e<i;e++)t[e]&&t[e].stopSlideThrough()},o.restartAllGem=function(t){for(var e=m.default.gemsInfo,i=0;i<36;i++)this._gems[i].recycleGem();this._gems=[];var n=d.gemsDataParser.parseData(e);this._currentDataSource=n.gemsData,this._currentEmptyGems=n.emptyIndexes;var o=this._currentEliminateLength=n.eliminateLength;this._currentEliminateGroups=e.eliminateIndexGroups,this._currentEliminate=n.eliminateIndexes;for(var a=0;a<36;a++)this._requestGem(a,p.GemDropState.static);t||this.delegate.updateKeyTileState(),o&&this._gemsStartEliminate()},n}(cc.Component),l=x(c.prototype,"dustAnimations",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),h=x(c.prototype,"dustParticleLayer",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),u=x(c.prototype,"rockParticles",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),x(c.prototype,"_gemsStartEliminate",[s],Object.getOwnPropertyDescriptor(c.prototype,"_gemsStartEliminate"),c.prototype),r=c))||r);i.default=I,cc._RF.pop()}function w(t){return t&&t.__esModule?t:{default:t}}function B(t,e,i,n){i&&Object.defineProperty(t,e,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function R(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function k(t,e){return(k=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function x(t,e,i,n,o){var a={};return Object.keys(n).forEach(function(t){a[t]=n[t]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce(function(i,n){return n(t,e,i)||i},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(t,e,a),a=null),a}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",AutomationDecorator:"AutomationDecorator",DataManager:"DataManager",Enum:"Enum",GemsDataParser:"GemsDataParser","GemsManager.spec":"GemsManager.spec",GeneralBundle:"GeneralBundle",SettingMenuHelper:"SettingMenuHelper",TransactionStateMachineHandler:"TransactionStateMachineHandler",Utils:"Utils"}],GemsTemplate:[function(t,e,i){"use strict";if(!cc._RF.push(e,"ca816xgCuJOD60nV1mFxNCI","GemsTemplate")){i.__esModule=!0,i.default=void 0;var n=t("Enum"),o=t("GemsManager"),a=t("SettingMenuHelper"),s=[200,100,0,0,100,200],r=[200,160,120,80,40,0],c=o.NUM_ROW*o.GEM_HEIGHT+30,l=558-o.GEM_WIDTH/2,h=o.GEM_HEIGHT/2-504,u=cc.Class({extends:cc.Component,properties:{sprite:cc.Sprite,gemImages:[cc.SpriteFrame],effectParticle:cc.ParticleSystem,whiteDiamondGlow:cc.Node,gemBlurImages:[cc.SpriteFrame],gemNormalImages:{default:[],type:cc.SpriteFrame},_isHDVer:cc.Boolean},onLoad:function(){this._anim=this.getComponent(cc.Animation),this._dynamicLighting=this.sprite.getComponent("DynamicLighting"),this._bindedRemoveDropGem=this._removeDropGem.bind(this),this._bindedSetBlurSprite=this._setBlurSprite.bind(this),this._bindedCrush=this._crush.bind(this),this._bindedDropNewGemAnim=this._dropNewGemAnim.bind(this),this._bindedFinalSpecialChange=this._finalSpecialChange.bind(this),this._bindedSpecialSwapGem=this._specialSwapGem.bind(this)},isHDVersion:function(t){this._isHDVer=t},shaderIsEnabled:function(t){this._shaderEnabled=t},init:function(t,e,i){this._data=t,this._column=t.column,this._row=t.row;var o=this._spriteIndex=t.spriteIndex;i?this._setSpriteFrame(o,!0):e!==n.GemDropState.spin&&e!==n.GemDropState.crush&&this._resetSpriteFrame(),this._setPosition(e)},getSpriteIndex:function(){return this._spriteIndex},changeGemSprite:function(t){this.sprite.spriteFrame=t},_setSpriteFrame:function(t,e){this.sprite.spriteFrame=this.gemImages[t],e||(8!==t?(this._shaderEnabled&&this._dynamicLighting.setNormalMap(this.gemNormalImages[t],t),this._shaderEnabled&&(this._dynamicLighting.setNormalMap(this.gemNormalImages[t],t),this._dynamicLighting.applyShader()),this._playGlowAnimation()):(this.effectParticle.stopSystem(),this.whiteDiamondGlow.active=!1))},_resetSpriteFrame:function(){this._setSpriteFrame(this._spriteIndex)},_setBlurSprite:function(){if(!a.settingMenuHelper.turboSpinOn){var t=this._spriteIndex;t<8&&(this.sprite.spriteFrame=this.gemBlurImages[t]),this.effectParticle.stopSystem(),this.whiteDiamondGlow.active=!1}},_playGlowAnimation:function(){"Gem1"===this._data.type&&this._isHDVer?(this.effectParticle.resetSystem(),this.whiteDiamondGlow.active=!0):(this.effectParticle.stopSystem(),this.whiteDiamondGlow.active=!1)},removeDropGem:function(){var t=this._data;a.settingMenuHelper.turboSpinOn?this._delayedAction(this._bindedRemoveDropGem,0):this._delayedAction(this._bindedRemoveDropGem,(s[t.column]+r[t.row])/1e3)},_removeDropGem:function(){var t=this;this.node.runAction(cc.sequence(cc.moveTo(.32,this._positionX,this._positionY-c).easing(cc.easeIn(1.5)),cc.callFunc(function(){t.recycleGem()}))),a.settingMenuHelper.turboSpinOn?this._delayedAction(this._bindedSetBlurSprite,0):this._delayedAction(this._bindedSetBlurSprite,.16)},removeGem:function(){var t=this.node;"Gem1"===this._data.type&&(this.effectParticle.stopSystem(),this.whiteDiamondGlow.active=!1),t.removeFromParent(),t.destroy()},recycleRespinGem:function(){this.node.setPosition(l,h),this.recycleGem()},recycleGem:function(){var t=this.node;"Gem1"===this._data.type&&(this.effectParticle.stopSystem(),this.whiteDiamondGlow.active=!1),t.stopAllActions(),this.gemsNodePool.put(t)},removeRespin:function(){var t=this.node,e=this._respinRandomNum=Math.random();this._respinSpeed=5,this._centerDistance=300,this._startRespin=!0,this._destinationX=l,this._destinationY=h;var i=t.x-l,n=t.y-h;this._currentAngle=Math.atan2(n,i),this._currentDistance=Math.sqrt(Math.pow(i,2)+Math.pow(n,2)),this.sprite.node.runAction(cc.rotateBy(1.5+.5*e,1080).easing(cc.easeInOut(2))),this._respinRotateSpeed=.1*e+.05},startEliminate:function(t,e){var i=e?1400:1e3;this._anim.playAdditive("symbol_grow"),this._delayedAction(this._bindedCrush,(56*t+i)/1e3)},_setPosition:function(t){this._positionX=this._column*o.GEM_WIDTH,this._positionY=-this._row*o.GEM_HEIGHT,t===n.GemDropState.static?this.node.setPosition(this._positionX,this._positionY):t===n.GemDropState.respin?this._respinGem():t===n.GemDropState.respinGem?this._respinGem(!0):this._dropNewGem(t)},_respinGem:function(t){this._startRespin=!0,this._destinationX=this._positionX,this._destinationY=this._positionY;var e=this.node.x-this._positionX,i=this.node.y-this._positionY;this._currentAngle=Math.atan2(i,e),this._currentDistance=Math.sqrt(Math.pow(e,2)+Math.pow(i,2));var n=this._respinRandomNum;t&&(n=1),this._respinSpeed=this._currentDistance/(10+20*n),this._respinRotateSpeed=.03*n+.05,this._centerDistance=0},updateGem:function(t){if(this._startRespin){if(!this._currentDistance)return this._startRespin=!1,void this._dropFinish();var e=this.node,i=this._destinationX,n=this._destinationY;if(this._currentAngle-=this._respinRotateSpeed*t*60,this._currentDistance>this._centerDistance){var o=this._respinSpeed*t*60;this._currentDistance>=o?this._currentDistance-=o:this._currentDistance=0}var a=this._currentDistance,s=this._currentAngle;e.x=i+Math.cos(s)*a,e.y=n+Math.sin(s)*a}},_dropNewGem:function(t){var e=0,i=50,c=this._data,l=this.node;t===n.GemDropState.spin?(e=o.NUM_ROW*o.GEM_HEIGHT+30,i+=s[c.column]+r[c.row]):t===n.GemDropState.crush&&(e=c.eliminateCountInColumn*o.GEM_HEIGHT+30,i=r[c.row]);var h=this._positionX,u=this._positionY;l.setPosition(h,u+e);var d=(e-30)/(o.NUM_ROW*o.GEM_HEIGHT)*1;this._dropAnimDuration=.32*Math.pow(d,1/1.5),a.settingMenuHelper.turboSpinOn?this._delayedAction(this._bindedDropNewGemAnim,.1):this._delayedAction(this._bindedDropNewGemAnim,i/2e3)},_dropNewGemAnim:function(){var t=this,e=this._positionX,i=this._positionY;a.settingMenuHelper.turboSpinOn?(this._resetSpriteFrame(),this.node.runAction(cc.sequence([cc.moveTo(this._dropAnimDuration,e,i-40).easing(cc.easeIn(1.5)),cc.moveTo(.1,e,i).easing(cc.easeIn(.15)),cc.callFunc(function(){t._dropFinish()})]))):(this._setBlurSprite(),this.node.runAction(cc.sequence([cc.moveTo(this._dropAnimDuration,e,i-40).easing(cc.easeIn(1.5)),cc.callFunc(function(){t._resetSpriteFrame()}),cc.moveTo(.1,e,i).easing(cc.easeIn(.15)),cc.callFunc(function(){t._dropFinish()})])))},_dropFinish:function(){this._setFinalPosition(),this.delegate.dropFinish(this._data.index)},dropToNewPosition:function(){var t=this,e=this._data,i=this.node,n=void 0===e.nextIndex?e.index:e.nextIndex,a=this.delegate.updateGemData(n,this);if(this._data=a,void 0!==n&&void 0!==e.nextColumn&&void 0!==e.nextRow){var s=this._positionX=a.column*o.GEM_WIDTH,r=-a.row*o.GEM_HEIGHT,c=Math.abs(r-40-this._positionY);this._positionY=r,this._column=a.column,this._row=a.nextRow;var l=(c-30)/(o.NUM_ROW*o.GEM_HEIGHT)*1,h=.32*Math.pow(l,1/1.5);i.runAction(cc.sequence([cc.moveTo(h,s,r-40).easing(cc.easeIn(1.5)),cc.moveTo(.1,s,r).easing(cc.easeIn(.15)),cc.callFunc(function(){t._setFinalPosition()})]))}},_setFinalPosition:function(){this.node.setPosition(this._positionX,this._positionY)},_crush:function(){this._shaderEnabled&&this._dynamicLighting.resetLight(),this._anim.stop();var t=this.sprite.node;t.x=93,t.y=-84,t.scaleX=t.scaleY=1,this.delegate.onGemsCrushed(this._spriteIndex,this.getMiddlePoint(),this._data.index),this.recycleGem()},playShake:function(){this._isHDVer&&(this._anim.playAdditive("shake"),this._shaderEnabled&&this._dynamicLighting.lightsUp(!0)),this.delegate.gemBeginShake(this._spriteIndex,this.getMiddlePoint(),this._data.index)},_delayedAction:function(t,e){this.node.runAction(cc.sequence([cc.delayTime(e),cc.callFunc(t)]))},playGemChangeFirstWave:function(t){var e=this,i=void 0,n=function(){e._setSpriteFrame(t),0===i?(a.settingMenuHelper.turboSpinOn?e._delayedAction(o,0):e._delayedAction(o,.03),i++):1===i?(a.settingMenuHelper.turboSpinOn?e._delayedAction(o,0):e._delayedAction(o,.03),i++):2===i&&(e._isHDVer?a.settingMenuHelper.turboSpinOn?e._delayedAction(e._bindedFinalSpecialChange,0):e._delayedAction(e._bindedFinalSpecialChange,.06):e._bindedFinalSpecialChange())},o=function(){e._resetSpriteFrame(),e._isHDVer?a.settingMenuHelper.turboSpinOn?e._delayedAction(n,0):e._delayedAction(n,.03):n()};i=this._isHDVer?0:2,this._shaderEnabled&&this._dynamicLighting.lightsUp(!0),this._isHDVer?a.settingMenuHelper.turboSpinOn?this._delayedAction(n,0):this._delayedAction(n,.05):n()},playGemChangeSecondWave:function(t){var e=this,i=void 0,n=function(){e._setSpriteFrame(t),1===i?(a.settingMenuHelper.turboSpinOn?e._delayedAction(o,0):e._delayedAction(o,.03),i++):2===i&&(e._isHDVer?a.settingMenuHelper.turboSpinOn?e._delayedAction(e._bindedFinalSpecialChange,0):e._delayedAction(e._bindedFinalSpecialChange,.06):e._bindedFinalSpecialChange())},o=function(){e._resetSpriteFrame(),a.settingMenuHelper.turboSpinOn?e._delayedAction(n,0):e._delayedAction(n,.03)};i=this._isHDVer?1:2,this._shaderEnabled&&this._dynamicLighting.lightsUp(!0),this._isHDVer?a.settingMenuHelper.turboSpinOn?this._delayedAction(n,0):this._delayedAction(n,.11):n()},playGemChangeFinalWave:function(t){var e=this,i=function(){e._setSpriteFrame(t),e._isHDVer?a.settingMenuHelper.turboSpinOn?e._delayedAction(e._bindedFinalSpecialChange,0):e._delayedAction(e._bindedFinalSpecialChange,.06):e._bindedFinalSpecialChange()};this._shaderEnabled&&this._dynamicLighting.lightsUp(!0),this._isHDVer?a.settingMenuHelper.turboSpinOn?this._delayedAction(i,0):this._delayedAction(i,.17):i()},_finalSpecialChange:function(){var t=this,e=void 0,i=this.sprite.node,n=function(){i.active=!0,e?(t._shaderEnabled&&t._dynamicLighting.lightsDown(),a.settingMenuHelper.turboSpinOn?t._delayedAction(t._bindedSpecialSwapGem,0):t._delayedAction(t._bindedSpecialSwapGem,.3)):(a.settingMenuHelper.turboSpinOn?t._delayedAction(o,0):t._delayedAction(o,.03),e=!0)},o=function(){i.active=!1,a.settingMenuHelper.turboSpinOn?t._delayedAction(n,0):t._delayedAction(n,.03)};this._isHDVer?(e=!1,o()):(e=!0,n())},_specialSwapGem:function(){this.delegate.onSpecialSwapGem(this._data.index)},darken:function(){this._anim.playAdditive("gem_darken")},brighten:function(){this._anim.playAdditive("gem_brighten")},getMiddlePoint:function(){return cc.v2(this._positionX+o.GEM_WIDTH/2,this._positionY-o.GEM_HEIGHT/2)},slideThrough:function(t){this._shaderEnabled&&this._dynamicLighting.slideThrough(t)},stopSlideThrough:function(){this._shaderEnabled&&this._dynamicLighting.stopSlideThrough()}});i.default=u,e.exports=i.default,cc._RF.pop()}},{Enum:"Enum",GemsManager:"GemsManager",SettingMenuHelper:"SettingMenuHelper"}],GeneralBundle:[function(t,e,i){"use strict";if(!cc._RF.push(e,"6b481reuVJEBIRIqJR7XRjJ","GeneralBundle")){Object.defineProperty(i,"__esModule",{value:!0}),i.StoryResourceBundle=i.GeneralGameAudioBundle=i.GeneralResourceBundle=void 0;var n=t("SettingMenuHelper"),o=t("AssetBundleUtils"),a=t("AssetManager"),s=!0,r=cc._decorator.ccclass,c=function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var a=this,r=!!e[0]&&e[0];if((a=t.call(this)||this).settingMenuAudio=void 0,a.eventTitlePrefab=void 0,a.rpgViewPrefab=void 0,a.monsterWarningPrefab=void 0,a.respinPrefab=void 0,a.chatBubblePrefab=void 0,a.gemPrefab=void 0,a.victoryPrefab=void 0,a.specialGemPrefab=void 0,a.portalPrefab=void 0,a.playerPrefab=void 0,a.settingMenuController=void 0,a.settingFooter=void 0,a.backToLobbyButton=void 0,a.spinOptionButton=void 0,a.betOptionsButton=void 0,a.moreMenuButton=void 0,a.soundButton=void 0,a.rulesButton=void 0,a.payoutButton=void 0,a.historyButton=void 0,a.hideMoreMenuButton=void 0,a.lightningVfxPrefab=void 0,a.lightningStrikeVfxPrefab=void 0,a.lightningBurstVfxPrefab=void 0,a.lightningLv3VfxPrefab=void 0,a.speedLineVfxPrefab=void 0,a.swordChargeLv2VfxPrefab=void 0,a.swordChargeLv3VfxPrefab=void 0,a.healVfxPrefab=void 0,a.hitVfxPrefab=void 0,a.magicVfxPrefab=void 0,a.brightExplodeVfxPrefab=void 0,a.dustVfxPrefab=void 0,a.slashVfxPrefab=void 0,a.shockFlickerEmoticonPrefab=void 0,a.shockEmoticonPrefab=void 0,a.sweatEmoticonPrefab=void 0,a.chestPrefab=void 0,a.wordingSpritesAtlas=void 0,r)return a.settingMenuAudio=function(t){n.settingMenuHelper.loadAudio(t)},a.eventTitlePrefab=o.loadResourceMethodWrapper("prefab/event_title",cc.Prefab),a.rpgViewPrefab=o.loadResourceMethodWrapper("prefab/rpg_view",cc.Prefab),a.monsterWarningPrefab=o.loadResourceMethodWrapper("prefab/monster_warning",cc.Prefab),a.respinPrefab=o.loadResourceMethodWrapper("prefab/respin",cc.Prefab),a.chatBubblePrefab=o.loadResourceMethodWrapper("prefab/chat_bubble",cc.Prefab),a.gemPrefab=o.loadResourceMethodWrapper("prefab/gem",cc.Prefab),a.victoryPrefab=o.loadResourceMethodWrapper("prefab/victory",cc.Prefab),a.specialGemPrefab=o.loadResourceMethodWrapper("prefab/special_gem_effect",cc.Prefab),a.portalPrefab=o.loadResourceMethodWrapper("prefab/obstacles/other/portal",cc.Prefab,s),a.playerPrefab=o.loadResourceMethodWrapper("prefab/player/player",cc.Prefab,s),a.settingMenuController=o.loadResourceMethodWrapper(n.settingMenuHelper.path+"prefab/setting_menu/setting_menu",cc.Prefab),a.settingFooter=o.loadResourceMethodWrapper(n.settingMenuHelper.path+"prefab/info_footer/setting_info_footer_controller",cc.Prefab),a.backToLobbyButton=o.loadResourceMethodWrapper(n.settingMenuHelper.path+"prefab/others/return_lobby_button",cc.Prefab),a.spinOptionButton=o.loadResourceMethodWrapper(n.settingMenuHelper.path+"prefab/others/spin_options_button",cc.Prefab),a.betOptionsButton=o.loadResourceMethodWrapper(n.settingMenuHelper.path+"prefab/others/bet_options_button",cc.Prefab),a.moreMenuButton=o.loadResourceMethodWrapper(n.settingMenuHelper.path+"prefab/others/more_menu_button",cc.Prefab),a.soundButton=o.loadResourceMethodWrapper(n.settingMenuHelper.path+"prefab/others/sound_button",cc.Prefab),a.rulesButton=o.loadResourceMethodWrapper(n.settingMenuHelper.path+"prefab/others/rules_button",cc.Prefab),a.payoutButton=o.loadResourceMethodWrapper(n.settingMenuHelper.path+"prefab/others/payout_button",cc.Prefab),a.historyButton=o.loadResourceMethodWrapper(n.settingMenuHelper.path+"prefab/others/history_button",cc.Prefab),a.hideMoreMenuButton=o.loadResourceMethodWrapper(n.settingMenuHelper.path+"prefab/others/hide_more_menu_button",cc.Prefab),a.lightningVfxPrefab=o.loadResourceMethodWrapper("prefab/extra_effects/lightning_charge_vfx/lightning_effect",cc.Prefab),a.lightningStrikeVfxPrefab=o.loadResourceMethodWrapper("prefab/extra_effects/lightning_charge_vfx/lightning_strike_effect",cc.Prefab),a.lightningBurstVfxPrefab=o.loadResourceMethodWrapper("prefab/extra_effects/lightning_charge_vfx/lightning_burst_effect",cc.Prefab),a.lightningLv3VfxPrefab=o.loadResourceMethodWrapper("prefab/extra_effects/lightning_charge_vfx/lightning_lv3_atk",cc.Prefab),a.speedLineVfxPrefab=o.loadResourceMethodWrapper("prefab/extra_effects/lightning_charge_vfx/speed_line_effect",cc.Prefab),a.swordChargeLv2VfxPrefab=o.loadResourceMethodWrapper("prefab/extra_effects/lightning_charge_vfx/sword_charge_lv2",cc.Prefab),a.swordChargeLv3VfxPrefab=o.loadResourceMethodWrapper("prefab/extra_effects/lightning_charge_vfx/sword_charge_lv3",cc.Prefab),a.healVfxPrefab=o.loadResourceMethodWrapper("prefab/extra_effects/misc_vfx/heal_effect",cc.Prefab),a.hitVfxPrefab=o.loadResourceMethodWrapper("prefab/extra_effects/misc_vfx/hit_effect",cc.Prefab),a.brightExplodeVfxPrefab=o.loadResourceMethodWrapper("prefab/extra_effects/misc_vfx/bright_explode",cc.Prefab),a.magicVfxPrefab=o.loadResourceMethodWrapper("prefab/extra_effects/misc_vfx/magic_effect",cc.Prefab),a.slashVfxPrefab=o.loadResourceMethodWrapper("prefab/extra_effects/misc_vfx/slash_effect",cc.Prefab),a.dustVfxPrefab=o.loadResourceMethodWrapper("prefab/extra_effects/misc_vfx/dust_effect",cc.Prefab),a.shockFlickerEmoticonPrefab=o.loadResourceMethodWrapper("prefab/extra_effects/emoticon/emoticon_shock_flicker",cc.Prefab),a.shockEmoticonPrefab=o.loadResourceMethodWrapper("prefab/extra_effects/emoticon/emoticon_shock",cc.Prefab),a.sweatEmoticonPrefab=o.loadResourceMethodWrapper("prefab/extra_effects/emoticon/emoticon_sweat",cc.Prefab),a.chestPrefab=o.loadResourceMethodWrapper("prefab/obstacles/other/treasure_chest",cc.Prefab),a.wordingSpritesAtlas=o.loadResourceMethodWrapper("atlas/wordings",cc.SpriteAtlas,s),a}return __extends(e,t),__decorate([r("GeneralResourceBundle")],e)}(a.ResourceBundle);i.GeneralResourceBundle=c;var l=function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=this,o=!!e[0]&&e[0];if((n=t.call(this)||this).battleVictory=void 0,n.catCollectGem=void 0,n.catPlaceSymbol=void 0,n.catProtect=void 0,n.catVictory=void 0,n.dizzyLoop=void 0,n.monsterCoinDrop=void 0,n.displayRespinWord=void 0,n.respinGemMove=void 0,n.gemColourChange=void 0,n.gemDrop=void 0,n.gemsBreak=void 0,n.gemsCombo2=void 0,n.gemsCombo3=void 0,n.gemsCombo4=void 0,n.gemsCombo5=void 0,n.gemsCombo6=void 0,n.gemsCombo7=void 0,n.gemsCombo8=void 0,n.gemsHighlight=void 0,n.gemsRespin=void 0,n.keyAppear=void 0,n.keyGet=void 0,n.keyOpenTreasure=void 0,n.mapAppear=void 0,n.mapBeginDrop=void 0,n.megaWinZap=void 0,n.moneyReached=void 0,n.moneyRolling=void 0,n.superMegaWinRoll=void 0,n.superMegaWinZap=void 0,n.winGreat=void 0,n.winSuperMega=void 0,n.winWonderful=void 0,n.playerAttack=void 0,n.playerCelebrateNormal=void 0,n.playerCelebrate=void 0,n.playerCharge=void 0,n.playerChargeLoop=void 0,n.playerCombo=void 0,n.playerElecAttack=void 0,n.playerHit=void 0,n.playerMoneyToPocket=void 0,n.playerSecondCharge=void 0,n.playerShield=void 0,n.specialGemMatch=void 0,n.specialGemSpawn=void 0,n.portalLevelEnd=void 0,n.spinClick=void 0,n.stoneDropBag=void 0,n.treasureOpen=void 0,n.stoneBreak=void 0,o){var a=function(t,e){var i=Object.create(null);return i.path="audio/mp3/"+t,i.isMusic=e,i};return n.battleVictory=a("battle_victory",!1),n.catCollectGem=a("cat_collect_gem",!1),n.catPlaceSymbol=a("cat_place_symbol",!1),n.catProtect=a("cat_protect",!1),n.catVictory=a("cat_victory",!1),n.dizzyLoop=a("dizzy_loop",!1),n.monsterCoinDrop=a("monster_coin_drop",!1),n.displayRespinWord=a("display_respin_word",!1),n.respinGemMove=a("respin_gem_move",!1),n.gemColourChange=a("gem_color_change",!1),n.gemDrop=a("gem_drop",!1),n.gemsBreak=a("gems_break",!1),n.gemsCombo2=a("gems_combo_2",!1),n.gemsCombo3=a("gems_combo_3",!1),n.gemsCombo4=a("gems_combo_4",!1),n.gemsCombo5=a("gems_combo_5",!1),n.gemsCombo6=a("gems_combo_6",!1),n.gemsCombo7=a("gems_combo_7",!1),n.gemsCombo8=a("gems_combo_8",!1),n.gemsHighlight=a("gems_highlight",!1),n.gemsRespin=a("gems_respin",!1),n.keyAppear=a("key_appear",!1),n.keyGet=a("key_get",!1),n.keyOpenTreasure=a("key_open_treasure",!1),n.mapAppear=a("map_appear",!1),n.mapBeginDrop=a("map_begin_drop",!1),n.megaWinZap=a("mega_win_zap",!1),n.moneyReached=a("money_reached",!1),n.moneyRolling=a("money_rolling",!1),n.superMegaWinRoll=a("super_mega_win_roll",!1),n.superMegaWinZap=a("super_mega_win_zap",!1),n.winGreat=a("win_great",!1),n.winSuperMega=a("win_super_mega",!1),n.winWonderful=a("win_wonderful",!1),n.playerAttack=a("player_attack",!1),n.playerCelebrateNormal=a("player_celebrate_normal",!1),n.playerCelebrate=a("player_celebrate",!1),n.playerCharge=a("player_charge",!1),n.playerChargeLoop=a("player_charge_loop",!1),n.playerCombo=a("player_combo",!1),n.playerElecAttack=a("player_elec_attack",!1),n.playerHit=a("player_hit",!1),n.playerMoneyToPocket=a("player_money_to_pocket",!1),n.playerSecondCharge=a("player_second_charge",!1),n.playerShield=a("player_shield",!1),n.specialGemMatch=a("special_gem_match",!1),n.specialGemSpawn=a("special_gem_spawn",!1),n.portalLevelEnd=a("portal_level_end",!1),n.spinClick=a("spin_click",!1),n.stoneDropBag=a("stone_drop_bag",!1),n.treasureOpen=a("treasure_open",!1),n.stoneBreak=a("stone_break",!1),n}}return __extends(e,t),__decorate([r("GeneralGameAudioBundle")],e)}(a.AudioBundle);i.GeneralGameAudioBundle=l;var h=function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=this,a=!!e[0]&&e[0];if((n=t.call(this)||this).storyPrefab=void 0,a)return n.storyPrefab=o.loadResourceMethodWrapper("prefab/story",cc.Prefab),n}return __extends(e,t),__decorate([r("StoryResourceBundle")],e)}(a.ResourceBundle);i.StoryResourceBundle=h,cc._RF.pop()}},{AssetBundleUtils:"AssetBundleUtils",AssetManager:"AssetManager",SettingMenuHelper:"SettingMenuHelper"}],GenericBackgroundObject:[function(t,e,i){"use strict";if(!cc._RF.push(e,"d9b44fmzrhFdZMBLh3GE2N7","GenericBackgroundObject")){i.__esModule=!0,i.default=void 0;var n,o=(n=t("BaseEffect"))&&n.__esModule?n:{default:n},a=cc.Class({extends:cc.Component,properties:{baseEffects:[o.default]},playAnimations:function(){this.baseEffects.forEach(function(t){t.playEffect()})},stopAnimations:function(){this.baseEffects.forEach(function(t){t.stopEffect()})}});i.default=a,e.exports=i.default,cc._RF.pop()}},{BaseEffect:"BaseEffect"}],GenericCommand:[function(t,e,i){"use strict";if(!cc._RF.push(e,"cdd9eBU7yRM/ZKrwleN02m2","GenericCommand")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Object,ctor:function(){this.type=void 0,this.execute=void 0},init:function(t,e){this.type=t,this.execute=e},destroy:function(){this.execute=void 0,this._super()}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],GenericQueue:[function(t,e,i){"use strict";if(!cc._RF.push(e,"868b0M+VMxBBazXmwEvvH3g","GenericQueue")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Object,ctor:function(){this._commandQueue=[],this._active=!1},addToQueue:function(t){var e;(e=t)&&e.execute&&(this._commandQueue.push(t),this._active||this.executeNextCommand())},getPendingTypeCount:function(t){return this._commandQueue.filter(function(e){if(e.type===t)return e}).length},getCommandCount:function(){return this._commandQueue.length},executeNextCommand:function(){0!==this._commandQueue.length?(this._active=!0,this._commandQueue.splice(0,1)[0].execute()):this._active=!1},destroy:function(){this._commandQueue=void 0,this._super()}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],GenericSettingButton:[function(t,e,i){"use strict";if(!cc._RF.push(e,"aeaa7CV0CtEMo2Sab7CGMw1","GenericSettingButton")){Object.defineProperty(i,"__esModule",{value:!0});var n=t("ButtonTheme"),o=t("UIAppearanceHelper"),a=t("Utils"),s=cc._decorator,r=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.iconSprite=void 0,e.collider=void 0,e.buttonTheme=void 0,e._isInteractable=!0,e._touchStartPos=cc.v2(),e._touchPos=cc.v2(),e._isOutOfBoundY=!1,e._isOutOfBoundX=!1,e._touchInteraction=!1,e._touchInvalid=!1,e}return __extends(e,t),e.prototype.onLoad=function(){if(this._enableTouchInteraction(),this.buttonTheme){var t=o.uiAppearanceHelper.v(this.buttonTheme.domainKey+"."+this.buttonTheme.colorKey+".normal");a.setNodeColorWithOpacity(this.iconSprite,t)}},e.prototype.destroy=function(){return this._disableTouchInteraction(),t.prototype.destroy.call(this)},e.prototype.onClick=function(){},Object.defineProperty(e.prototype,"isInteractable",{get:function(){return this._isInteractable},set:function(t){this._isInteractable=t,this._interactableButtonColor(t),t?this._enableTouchInteraction():(this._disableTouchInteraction(),this._touchInvalid=!1)},enumerable:!1,configurable:!0}),e.prototype._touchStart=function(t){if(!t)throw Error("GenericSettingButton :: _touchStart : No event is passed in");this._isInteractable?(this._touchInvalid=!0,this._touchPos=this._touchStartPos=t.touch.getLocation(),this._isOutOfBoundY=!1,this._isOutOfBoundX=!1,this._changeButtonPressedColor(!0)):t.stopPropagation()},e.prototype._touchMoved=function(t){if(this._touchInvalid){if(!t)throw Error("GenericSettingButton :: _touchMoved : No event is passed in");this._isInteractable?(this._touchPos=t.touch.getLocation(),this._isOutOfBoundY||(h(cc.v2(0,this._touchStartPos.y),cc.v2(0,this._touchPos.y))>60&&(this._isOutOfBoundY=!0,this._changeButtonPressedColor(!1)),t.stopPropagation()),this._isOutOfBoundX||h(cc.v2(this._touchStartPos.x,0),cc.v2(this._touchPos.x,0))>60&&(this._isOutOfBoundX=!0,this._changeButtonPressedColor(!1))):t.stopPropagation()}},e.prototype._touchEnded=function(t){this._touchInvalid&&(this._isInteractable?this._isOutOfBoundY||(t.stopPropagation(),this.onClick(),this._changeButtonPressedColor(!1)):t.stopPropagation())},e.prototype._touchCancel=function(t){this._touchInvalid&&(this._isInteractable?this._isOutOfBoundY&&this._changeButtonPressedColor(!1):t.stopPropagation())},e.prototype.changeButtonColor=function(t){this._changeButtonPressedColor(t)},e.prototype._changeButtonPressedColor=function(t){if(this.buttonTheme){var e=o.uiAppearanceHelper.v(this.buttonTheme.domainKey+"."+this.buttonTheme.colorKey+".normal"),i=o.uiAppearanceHelper.v(this.buttonTheme.domainKey+"."+this.buttonTheme.colorKey+".pressed");a.setNodeColorWithOpacity(this.iconSprite,t?i:e)}},e.prototype._interactableButtonColor=function(t){if(this.buttonTheme){var e=o.uiAppearanceHelper.v(this.buttonTheme.domainKey+"."+this.buttonTheme.colorKey+".normal"),i=o.uiAppearanceHelper.v(this.buttonTheme.domainKey+"."+this.buttonTheme.colorKey+".disabled");a.setNodeColorWithOpacity(this.iconSprite,t?e:i)}},e.prototype._enableTouchInteraction=function(){this._touchInteraction||(this._touchInteraction=!0,this.collider.on(cc.Node.EventType.TOUCH_START,this._touchStart,this),this.collider.on(cc.Node.EventType.TOUCH_MOVE,this._touchMoved,this),this.collider.on(cc.Node.EventType.TOUCH_END,this._touchEnded,this),this.collider.on(cc.Node.EventType.TOUCH_CANCEL,this._touchCancel,this))},e.prototype._disableTouchInteraction=function(){this._touchInteraction&&(this._touchInteraction=!1,this.collider.off(cc.Node.EventType.TOUCH_START,this._touchStart,this),this.collider.off(cc.Node.EventType.TOUCH_MOVE,this._touchMoved,this),this.collider.off(cc.Node.EventType.TOUCH_END,this._touchEnded,this),this.collider.off(cc.Node.EventType.TOUCH_CANCEL,this._touchCancel,this))},__decorate([c(cc.Node)],e.prototype,"iconSprite",void 0),__decorate([c(cc.Node)],e.prototype,"collider",void 0),__decorate([c(n)],e.prototype,"buttonTheme",void 0),__decorate([r],e)}(cc.Component);i.default=l,cc._RF.pop()}function h(t,e){return t.sub(e).mag()}},{ButtonTheme:"ButtonTheme",UIAppearanceHelper:"UIAppearanceHelper",Utils:"Utils"}],GetHitSprite:[function(t,e,i){"use strict";if(!cc._RF.push(e,"117abxeLXJKSa+EyV2uXFhi","GetHitSprite")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Component,properties:{spriteA:cc.Sprite,spriteB:cc.Sprite,getHitAnim:cc.Animation},onLoad:function(){},playGetHitAnim:function(){this.node.active=!0,this.getHitAnim.play("get_hit")},playGetHitLongAnim:function(){this.node.active=!0,this.getHitAnim.play("get_hit_long")},stopGetHitAnim:function(){this.node.active=!1,this.getHitAnim.stop()},animDidEnd:function(){this.didAnimEnd&&this.didAnimEnd()}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],GridView:[function(t,e,i){"use strict";if(!cc._RF.push(e,"2a349Sf9h1Dw6gCmtoNZ3ZP","GridView")){Object.defineProperty(i,"__esModule",{value:!0});var n=t("ScrollViewEx"),o=function(t,e,i){return t.fuzzyEquals(e,i)},a=function(t,e){return t.sub(e).mag()},s=cc._decorator,r=s.ccclass,c=(s.property,function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.autoSnap=!0,e._nodePools={},e._templates={},e}return __extends(e,t),Object.defineProperty(e.prototype,"nodePools",{get:function(){return this._nodePools},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"templates",{get:function(){return this._templates},enumerable:!1,configurable:!0}),e.prototype.setEstimatedSize=function(t){this.vertical?this.estimatedHeight=t.y:this.estimatedWidth=t.x},e.prototype.setConstantCellSize=function(t,e){this.constCellSize={width:t,height:e}},e.prototype.setResetFinish=function(t){this.resetFinish=t},e.prototype.setSpawnCell=function(t){this._spawnCellAction=t},e.prototype.setRemoveCell=function(t){this._removeCellAction=t},e.prototype.setPullingLeft=function(t){this._pullingLeftAction=t},e.prototype.setPullLeftEnd=function(t){this._pullLeftEndAction=t},e.prototype.setPullingRight=function(t){this._pullingRightAction=t},e.prototype.setPullRightEnd=function(t){this._pullRightEndAction=t},e.prototype.setPullingDown=function(t){this._pullingDownAction=t},e.prototype.setPullDownEnd=function(t){this._pullDownEndAction=t},e.prototype.setPullingUp=function(t){this._pullingUpAction=t},e.prototype.setPullUpEnd=function(t){this._pullUpEndAction=t},e.prototype.setFocusPoint=function(t){switch(t){case 1:this.focusPoint={},this.focusPoint.type=1,this.focusPoint.width=this.viewSize.width/2,this.focusPoint.height=this.viewSize.height/2;break;case 2:this.focusPoint={},this.focusPoint.type=2,this.focusPoint.width=this.viewSize.width,this.focusPoint.height=this.viewSize.height;break;default:this.focusPoint={},this.focusPoint.type=0,this.focusPoint.width=0,this.focusPoint.height=0}},e.prototype.getFocusPoint=function(){return this.focusPoint||(this.focusPoint={},this.focusPoint.type=0,this.focusPoint.width=0,this.focusPoint.height=0),this.focusPoint},e.prototype.setLayoutSetting=function(t){this.contentLayout=this.content.getComponent(cc.Layout),this.layoutSetting=this.getLayoutSetting(),t.spacingLeft&&(this.layoutSetting.spacingLeft=t.spacingLeft),t.spacingRight&&(this.layoutSetting.spacingRight=t.spacingRight),t.spacingTop&&(this.layoutSetting.spacingTop=t.spacingTop),t.spacingBottom&&(this.layoutSetting.spacingBottom=t.spacingBottom),t.spacingX&&(this.layoutSetting.spacingX=t.spacingX),t.spacingY&&(this.layoutSetting.spacingY=t.spacingY),this.contentLayout.paddingLeft=this.layoutSetting.spacingLeft,this.contentLayout.paddingRight=this.layoutSetting.spacingRight,this.contentLayout.paddingTop=this.layoutSetting.spacingTop,this.contentLayout.paddingBottom=this.layoutSetting.spacingBottom,this.contentLayout.spacingX=this.layoutSetting.spacingX,this.contentLayout.spacingY=this.layoutSetting.spacingY},e.prototype.getLayoutSetting=function(){return this.layoutSetting?this.layoutSetting:this.layoutSetting={spacingLeft:0,spacingRight:0,spacingTop:0,spacingBottom:0,spacingX:0,spacingY:0}},e.prototype.getVisibleItems=function(){var t=[],e=this.content.children;if(e.length)for(var i=0;i<e.length;i++)t.push(e[i]);return t},e.prototype.setDataSource=function(t){var e=this.node,i=e.width,n=e.height;this._setViewSize(i,n),t!==this._dataSource&&(this._dataSource=t)},e.prototype._getDataSource=function(){return this._dataSource},e.prototype._setDataCount=function(t){this._dataCount=t},e.prototype._getDataCount=function(){return this._dataCount||(this._dataCount=0),this._dataCount},e.prototype._onSizeChanged=function(){var t=this.node,e=t.width,i=t.height;this._setViewSize(e,i),this._respawn(this._sectionIndex,this.currentIndex)},e.prototype._setViewSize=function(t,e){this.viewSize={width:t,height:e},this.content.parent.setContentSize(t,e)},e.prototype._getViewSize=function(){return this.viewSize},e.prototype.register=function(t,e,i){if(this.nodePools[t]);else if(e){var n=new cc.NodePool(i);this.templates[t]=e,this.nodePools[t]=n}},e.prototype.reloadData=function(){this.setSnapDone(!0);var t=this._dataSource,e=t.getCount(this,this._sectionIndex),i=this._dataCount;i!==e?(this.setMasterControl(!0),e<i?this._reloadReduceData(e):(this._setDataCount(e),this.reloadCurrentData(),this._reloadAddData())):this.reloadCurrentData(),t.didReloadData&&t.didReloadData()},e.prototype.insertItem=function(){},e.prototype.removeItem=function(){},e.prototype._respawn=function(t,e,i){if(void 0===t&&(t=this._sectionIndex),this._unbindListener(),this._resetScrollView(),this.setMasterControl(!0),this.content.y=0,this.content.x=0,this.content.setContentSize(0,0),this.contentLayout.paddingTop=this.layoutSetting.spacingTop,this.contentLayout.paddingBottom=this.layoutSetting.spacingBottom,this.contentLayout.paddingLeft=this.layoutSetting.spacingLeft,this.contentLayout.paddingRight=this.layoutSetting.spacingRight,this.content.children.length)for(var n=this.content.children.length-1;n>=0;n--){var o=this.content.children[n];this._putOuterCellNode(o)}this.init(t,e,!1,i)},e.prototype.reset=function(t,e){void 0===t&&(t=this._sectionIndex),this._respawn(t,e,this.resetFinish)},e.prototype.init=function(t,e,i,n){void 0===e&&(e=0),void 0===i&&(i=!0),this.layoutSetting||this.setLayoutSetting({spacingLeft:0,spacingRight:0,spacingTop:0,spacingBottom:0,spacingX:0,spacingY:0});var o=this._dataSource;this.isDynamicSize=!!o.getCellSize,this.isPreCalculateSize=!(!this.constCellSize&&!this.isDynamicSize),this.isPreCalculateSize||(e=0),this.originalElastic=this.elastic,this.currentIndex=e,this.currentTarget=e,this.requestSnap=!1,this.setMasterControl(!1),this.contentLayout=this.content.getComponent(cc.Layout),this.setSnapDone(!0),this.snapPause=!1,this.outerCellsMatrix=[],this._sectionIndex=t,this.pauseUpdate=!1,this.pullDir=null,this.prevContentY=this.content.y,this.prevContentX=-1*this.content.x,this._bindListener(),this._setDataCount(o.getCount(this,this._sectionIndex)),this.vertical?(this.contentLayout.startAxis=0,this.content.width=this.viewSize.width,this._spawnVerticalInit(0,e,this.viewSize.height,i,n)):(this.contentLayout.startAxis=1,this.content.height=this.viewSize.height,this._spawnHorizontalInit(0,e,this.viewSize.width,i,n))},e.prototype.scrollTo=function(t,e){var i=this;if(void 0===e&&(e=!0),!(t>=this._dataCount))if(!this.isPreCalculateSize||e){if(this.vertical){var n=this._getRowOrColByIndex(t);if(null!==n){var o=this.getFocusPoint();this.currentIndex=t,1===o.type?this.target=this._getRowTotalHeight(n)-this.outerCellsMatrix[n].height-o.height+this.outerCellsMatrix[n][0].height/2:this.target=this._getRowTotalHeight(n)-this.outerCellsMatrix[n].height-this.layoutSetting.spacingTop;var a=this.content.height-this.viewSize.height;this.target<0?this.target=0:this.target>a&&(this.target=a)}else this.target=this.estimatedHeight,this.suddenStopIndex=t}else{var s=this._getRowOrColByIndex(t);if(null!==s){o=this.getFocusPoint(),this.currentIndex=t,1===o.type?this.target=this._getColTotalWidth(s)-this.outerCellsMatrix[s].width-o.width+this.outerCellsMatrix[s][0].width/2:this.target=this._getColTotalWidth(s)-this.outerCellsMatrix[s].width-this.layoutSetting.spacingLeft;var r=this.content.width-this.viewSize.width;this.target<0?this.target=0:this.target>r&&(this.target=r)}else this.target=this.estimatedWidth,this.suddenStopIndex=t}this.lerpSpeed=10,this.setSnapDone(!1)}else this._respawn(this._sectionIndex,t,function(){i.snapFinish&&i.snapFinish(t)})},e.prototype.stopUpdate=function(){this.setMasterControl(!0)},e.prototype.resumeUpdate=function(){this.pauseUpdate&&(this.setMasterControl(!1),this.pullDir=null,this.pauseUpdate=!1)},e.prototype.setMasterControl=function(t){this._masterControl=t},e.prototype._recycle=function(){this.pauseUpdate||this._masterControl||this.content.children.length&&(this.vertical?this.content.y!==this.prevContentY&&this._recycleVertical():-1*this.content.x!==this.prevContentX&&this._recycleHorizontal())},e.prototype._getRowTotalHeight=function(t){if(this.outerCellsMatrix[t]&&this.outerCellsMatrix[t].totalHeight)return this.outerCellsMatrix[t].totalHeight;for(var e=this.layoutSetting.spacingTop,i=0;i<=t;i++){if(e+=this.outerCellsMatrix[i].height,i===t)return this.outerCellsMatrix[t].totalHeight=e,e;e+=this.layoutSetting.spacingY}},e.prototype._getColTotalWidth=function(t){if(this.outerCellsMatrix[t]&&this.outerCellsMatrix[t].totalWidth)return this.outerCellsMatrix[t].totalWidth;for(var e=this.layoutSetting.spacingLeft,i=0;i<=t;i++){if(e+=this.outerCellsMatrix[i].width,i===t)return this.outerCellsMatrix[t].totalWidth=e,e;e+=this.layoutSetting.spacingX}},e.prototype._getNearestItem=function(){if(this.vertical){if(this._getContentTopBoundary()<this._topBoundary)return 0;if(this._getContentBottomBoundary()>this._bottomBoundary){var t=this.content.children.length-1;return this.content.children[t].row}for(var e=0,i=0,n=this.content.height,o=null,a=0;a<this.content.children.length;a++)if(o!=this.content.children[a].row){o=this.content.children[a].row;var s=this._getRowTotalHeight(o)-this.outerCellsMatrix[o].height-this.layoutSetting.spacingTop;if((i=Math.abs(s-this.content.y))>=n)return e;e=o,n=i}return e}if(this._getContentLeftBoundary()>this._leftBoundary)return 0;if(this._getContentRightBoundary()<this._rightBoundary)return t=this.content.children.length-1,this.content.children[t].col;var r=0,c=0,l=(n=this.content.width,null);for(a=0;a<this.content.children.length;a++)if(l!=this.content.children[a].col){l=this.content.children[a].col;var h=this._getColTotalWidth(l)-this.outerCellsMatrix[l].width-this.layoutSetting.spacingLeft;if((c=Math.abs(h- -1*this.content.x))>=n)return r;r=l,n=c}return r},e.prototype._autoSnapTo=function(){if(this.elastic=this.originalElastic,!this._masterControl&&this.requestSnap&&this.content.children.length){if(this.vertical){var t=this.getFocusPoint();this.requestSnap=!1;var e=this._getNearestItem();this.currentTarget=e,this.currentIndex=this.outerCellsMatrix[e][0]?this.outerCellsMatrix[e][0].zIndex:null,1===t.type?this.target=this._getRowTotalHeight(e)-this.outerCellsMatrix[e].height-t.height+this.outerCellsMatrix[e][0].height/2:this.target=this._getRowTotalHeight(e)-this.outerCellsMatrix[e].height-this.layoutSetting.spacingTop;var i=this.content.height-this.viewSize.height;i<0&&(i=0),this.target<=0?this.target=0:this.target>=i&&(this.target=i)}else{t=this.getFocusPoint(),this.requestSnap=!1;var n=this._getNearestItem();this.currentTarget=n,this.currentIndex=this.outerCellsMatrix[n][0]?this.outerCellsMatrix[n][0].zIndex:null,1===t.type?this.target=this._getColTotalWidth(n)-this.outerCellsMatrix[n].width-t.width+this.outerCellsMatrix[n][0].width/2:this.target=this._getColTotalWidth(n)-this.outerCellsMatrix[n].width-this.layoutSetting.spacingLeft;var o=this.content.width-this.viewSize.width;o<0&&(o=0),this.target<=0?this.target=0:this.target>=o&&(this.target=o)}this.lerpSpeed=5,this.setSnapDone(!1)}},e.prototype._recycleVertical=function(){var t=this.content.y,e=this.content.children[0],i=this.content.children[this.content.children.length-1],n=e.row,o=i.row,a=this._getRowTotalHeight(o)-this.viewSize.height;if(this.prevContentY>t){var s=e.zIndex,r=t-this.contentLayout.paddingTop+this.layoutSetting.spacingY;if(0>r&&this._spawnVerticalPrevious(n-1,s-1,r),o>0&&this.outerCellsMatrix[o-1]&&this.outerCellsMatrix[o-1][0]){var c=t-a+this.layoutSetting.spacingY+this.outerCellsMatrix[o].height;c<0&&this._removeVerticalNext(o,c,a)}}else{var l=i.zIndex,h=t-a;if(0<h&&this._spawnVerticalNext(o+1,0,l+1,h),n<this.outerCellsMatrix.length-1&&this.outerCellsMatrix[n+1]&&this.outerCellsMatrix[n+1][0]){var u=t-this.contentLayout.paddingTop-this.outerCellsMatrix[n].height;0<u&&this._removeVerticalPrevious(n,u)}}this.prevContentY=t},e.prototype._recycleHorizontal=function(){var t=-1*this.content.x,e=this.content.children[0],i=this.content.children[this.content.children.length-1],n=e.col,o=i.col,a=this._getColTotalWidth(o)-this.viewSize.width;if(this.prevContentX>t){var s=e.zIndex,r=t-this.contentLayout.paddingLeft+this.layoutSetting.spacingX;if(0>r&&this._spawnHorizontalPrevious(n-1,s-1,r),o>0&&this.outerCellsMatrix[o-1]&&this.outerCellsMatrix[o-1][0]){var c=t-a+this.layoutSetting.spacingX+this.outerCellsMatrix[o].width;c<0&&this._removeHorizontalNext(o,c,a)}}else{var l=i.zIndex,h=t-a;if(0<h&&this._spawnHorizontalNext(0,o+1,l+1,h),n<this.outerCellsMatrix.length-1&&this.outerCellsMatrix[n+1]&&this.outerCellsMatrix[n+1][0]){var u=t-this.contentLayout.paddingLeft-this.outerCellsMatrix[n].width;0<u&&this._removeHorizontalPrevious(n,u)}}this.prevContentX=t},e.prototype._precalculateVerticalContent=function(){for(var t,e,i=this.layoutSetting,n=i.spacingX,o=i.spacingLeft+i.spacingRight,a=0,s=0,r=0,c=this._dataCount;a<c;){if(this.isDynamicSize){var l=this._dataSource.getCellSize(a);t=l.width+n,e=l.height}else t=this.constCellSize.width+n,e=this.constCellSize.height;this.outerCellsMatrix[s]||(this.outerCellsMatrix[s]={},this.outerCellsMatrix[s][r]=null,this.outerCellsMatrix[s].itemCount=0,this.outerCellsMatrix[s].height=0,this.outerCellsMatrix[s].freeWidth=this.viewSize.width-o,this.freeWidth=this.viewSize.width-o),this.freeWidth-t>=0?(this.outerCellsMatrix[s].height=Math.max(e,this.outerCellsMatrix[s].height),this.outerCellsMatrix[s][r]=null,this.freeWidth-=t,r+=1,this.outerCellsMatrix[s].itemCount=r,a++):this.freeWidth+n-t>=0?(this.outerCellsMatrix[s].height=Math.max(e,this.outerCellsMatrix[s].height),this.outerCellsMatrix[s][r]=null,this.freeWidth-=t,r+=1,this.outerCellsMatrix[s].itemCount=r,a++):(s+=1,r=0)}this.freeWidth=void 0,this._resetRowScrollSize()},e.prototype._precalculateHorizontalContent=function(){for(var t,e,i=this.layoutSetting,n=i.spacingY,o=i.spacingTop+i.spacingBottom,a=0,s=0,r=0,c=this._dataCount;a<c;){if(this.isDynamicSize){var l=this._dataSource.getCellSize(a);t=l.width,e=l.height+n}else t=this.constCellSize.width,e=this.constCellSize.height+n;this.outerCellsMatrix[r]||(this.outerCellsMatrix[r]={},this.outerCellsMatrix[r][s]={},this.outerCellsMatrix[r].itemCount=0,this.outerCellsMatrix[r].width=0,this.outerCellsMatrix[r].freeHeight=this.viewSize.height-o,this.freeHeight=this.viewSize.height-o),this.freeHeight-e>=0?(this.outerCellsMatrix[r].width=Math.max(t,this.outerCellsMatrix[r].width),this.outerCellsMatrix[r][s]=null,this.freeHeight-=e,s+=1,this.outerCellsMatrix[r].itemCount=s,a++):this.freeHeight+this.layoutSetting.spacingY-e>=0?(this.outerCellsMatrix[r].width=Math.max(t,this.outerCellsMatrix[r].width),this.outerCellsMatrix[r][s]=null,this.freeHeight-=e,s+=1,this.outerCellsMatrix[r].itemCount=s,a++):(r+=1,s=0)}this.freeHeight=void 0,this._resetColScrollSize()},e.prototype._spawnTopToBottom=function(t,e,i){this.lastContentY=this.content.y;for(var n,o,a=this.layoutSetting,s=a.spacingX,r=a.spacingY,c=a.spacingLeft+a.spacingRight,l=t,h=0,u=this._dataCount,d=0;e<u;){if(this.isDynamicSize){var p=this._dataSource.getCellSize(e);n=p.width+s,o=p.height}else n=this.constCellSize.width+s,o=this.constCellSize.height;if(!(i>0))return;if(this.outerCellsMatrix[l]||(this.outerCellsMatrix[l]={},this.outerCellsMatrix[l][h]=null,this.outerCellsMatrix[l].itemCount=0,this.outerCellsMatrix[l].height=0,this.outerCellsMatrix[l].freeWidth=this.viewSize.width-c),this.outerCellsMatrix[l].freeWidth-n>=0){this.outerCellsMatrix[l].height=Math.max(o,this.outerCellsMatrix[l].height);var f=this._dataSource.getItem(this,e,this._sectionIndex);this._setOuterCellData(f,l,h,e),this.outerCellsMatrix[l].freeWidth-=n,h+=1,this.outerCellsMatrix[l].itemCount=h,e++}else if(this.outerCellsMatrix[l].freeWidth+s-n>=0)this.outerCellsMatrix[l].height=Math.max(o,this.outerCellsMatrix[l].height),f=this._dataSource.getItem(this,e,this._sectionIndex),this._setOuterCellData(f,l,h,e),this.outerCellsMatrix[l].freeWidth-=n,h+=1,this.outerCellsMatrix[l].itemCount=h,e++;else{var _=(i-=d)-(this.outerCellsMatrix[l].height+r);_>0?i=_:_+r>0?(i=_+r,d=r):i=_,l+=1,h=0}}},e.prototype._spawnLeftToRight=function(t,e,i){this.lastContentX=-1*this.content.x;for(var n,o,a=this.layoutSetting,s=a.spacingX,r=a.spacingY,c=a.spacingTop+a.spacingBottom,l=0,h=t,u=this._dataCount,d=0;e<u;){if(this.isDynamicSize){var p=this._dataSource.getCellSize(e);n=p.width,o=p.height+r}else n=this.constCellSize.width,o=this.constCellSize.height+r;if(!(i>0))return void this.setMasterControl(!1);if(this.outerCellsMatrix[h]||(this.outerCellsMatrix[h]={},this.outerCellsMatrix[h][l]={},this.outerCellsMatrix[h].itemCount=0,this.outerCellsMatrix[h].width=0,this.outerCellsMatrix[h].freeHeight=this.viewSize.height-c),this.outerCellsMatrix[h].freeHeight-o>=0){this.outerCellsMatrix[h].width=Math.max(n,this.outerCellsMatrix[h].width);var f=this._dataSource.getItem(this,e,this._sectionIndex);this._setOuterCellData(f,l,h,e),this.outerCellsMatrix[h].freeHeight-=o,l+=1,this.outerCellsMatrix[h].itemCount=l,e++}else if(this.outerCellsMatrix[h].freeHeight+r-o>=0)this.outerCellsMatrix[h].width=Math.max(n,this.outerCellsMatrix[h].width),f=this._dataSource.getItem(this,e,this._sectionIndex),this._setOuterCellData(f,l,h,e),this.outerCellsMatrix[h].freeHeight-=o,l+=1,this.outerCellsMatrix[h].itemCount=l,e++;else{var _=(i-=d)-(this.outerCellsMatrix[h].width+s);_>0?i=_:_+s>0?(i=_+s,d=s):i=_,h+=1,l=0}}this.setMasterControl(!1)},e.prototype._spawnVerticalTargetArea=function(t,e,i){var n=this._getRowOrColByIndex(t),o=this._getFirstIndexByRowOrCol(n),a=this._getRowTotalHeight(n)-this.outerCellsMatrix[n].height;this._getContentTopBoundary()<this._topBoundary?this.target=0:this._getContentBottomBoundary()>this._bottomBoundary?this.target=this.content.height+this._bottomBoundary:this.target=a-this.layoutSetting.spacingTop,this.content.y=this.target,this.contentLayout.paddingTop=a,this.contentLayout.paddingBottom=this.layoutSetting.spacingBottom,this.contentLayout.updateLayout(),this._spawnTopToBottom(n,o,e);var s=this.content.y-a;s<0?this._spawnVerticalPrevious(n-1,o-1,s,i):i&&i(),this.setMasterControl(!1)},e.prototype._spawnHorizontalTargetArea=function(t,e,i){var n=this._getRowOrColByIndex(t),o=this._getFirstIndexByRowOrCol(n),a=-1*(this._getColTotalWidth(n)-this.outerCellsMatrix[n].width);this._getContentLeftBoundary()>this._leftBoundary?this.target=0:this._getContentRightBoundary()<this._rightBoundary?this.target=-1*(this.content.width-this._rightBoundary):this.target=a+this.layoutSetting.spacingLeft,this.content.x=this.target,this.contentLayout.paddingLeft=-a,this.contentLayout.paddingRight=this.layoutSetting.spacingRight,this.contentLayout.updateLayout(),this._spawnLeftToRight(n,o,e);var s=-1*this.content.x+a;s<0?this._spawnHorizontalPrevious(n-1,o-1,s,i):i&&i(),this.setMasterControl(!1)},e.prototype._spawnVerticalInit=function(t,e,i,n,o){if(void 0===n&&(n=!0),this._dataCount)if(this.isPreCalculateSize&&!n)this._precalculateVerticalContent(),this._spawnVerticalTargetArea(e,i,o);else{this.lastContentY=this.content.y;for(var a=this.layoutSetting,s=a.spacingX,r=a.spacingY,c=a.spacingLeft+a.spacingRight,l=t,h=0,u=void 0,d=void 0,p=void 0,f=this._dataCount,_=0;e<f;){if(d=(u=this._dataSource.getItem(this,e,this._sectionIndex)).width+s,p=u.height,!(i>0))return this._resetRowScrollSize(),this._enqueueReusableItem(u),void this.setMasterControl(!1);if(this.outerCellsMatrix[l]||(this.outerCellsMatrix[l]={},this.outerCellsMatrix[l][h]=null,this.outerCellsMatrix[l].itemCount=0,this.outerCellsMatrix[l].height=0,this.outerCellsMatrix[l].freeWidth=this.viewSize.width-c),this.outerCellsMatrix[l].freeWidth-d>=0)this.outerCellsMatrix[l].height=Math.max(p,this.outerCellsMatrix[l].height),this._setOuterCellData(u,l,h,e),this.outerCellsMatrix[l].freeWidth-=d,h+=1,this.outerCellsMatrix[l].itemCount=h,e++,this._resetRowScrollSize();else if(this.outerCellsMatrix[l].freeWidth+s-d>=0)this.outerCellsMatrix[l].height=Math.max(p,this.outerCellsMatrix[l].height),this._setOuterCellData(u,l,h,e),this.outerCellsMatrix[l].freeWidth-=d,h+=1,this.outerCellsMatrix[l].itemCount=h,e++,this._resetRowScrollSize();else{var m=(i-=_)-(this.outerCellsMatrix[l].height+r);m>0?i=m:m+r>0?(i=m+r,_=r):i=m,this._resetRowScrollSize(),this._enqueueReusableItem(u),l+=1,h=0}}this.setMasterControl(!1)}else o&&o()},e.prototype._spawnHorizontalInit=function(t,e,i,n,o){if(this._dataCount)if(this.isPreCalculateSize&&!n)this._precalculateHorizontalContent(),this._spawnHorizontalTargetArea(e,i,o);else{this.lastContentX=-1*this.content.x;for(var a=this.layoutSetting,s=a.spacingX,r=a.spacingY,c=a.spacingTop+a.spacingBottom,l=0,h=t,u=void 0,d=void 0,p=void 0,f=this._dataCount,_=0;e<f;){if(d=(u=this._dataSource.getItem(this,e,this._sectionIndex)).width,p=u.height+r,!(i>0))return this._resetColScrollSize(),this._enqueueReusableItem(u),void this.setMasterControl(!1);if(this.outerCellsMatrix[h]||(this.outerCellsMatrix[h]={},this.outerCellsMatrix[h][l]={},this.outerCellsMatrix[h].itemCount=0,this.outerCellsMatrix[h].width=0,this.outerCellsMatrix[h].freeHeight=this.viewSize.height-c),this.outerCellsMatrix[h].freeHeight-p>=0)this.outerCellsMatrix[h].width=Math.max(d,this.outerCellsMatrix[h].width),this._setOuterCellData(u,l,h,e),this.outerCellsMatrix[h].freeHeight-=p,l+=1,this.outerCellsMatrix[h].itemCount=l,e++,this._resetColScrollSize();else if(this.outerCellsMatrix[h].freeHeight+r-p>=0)this.outerCellsMatrix[h].width=Math.max(d,this.outerCellsMatrix[h].width),this._setOuterCellData(u,l,h,e),this.outerCellsMatrix[h].freeHeight-=p,l+=1,this.outerCellsMatrix[h].itemCount=l,e++,this._resetColScrollSize();else{var m=(i-=_)-(this.outerCellsMatrix[h].width+s);m>0?i=m:m+s>0?(i=m+s,_=s):i=m,this._resetColScrollSize(),this._enqueueReusableItem(u),h+=1,l=0}}this.setMasterControl(!1)}else o&&o()},e.prototype._removeVerticalPrevious=function(t,e){for(var i=this.layoutSetting.spacingLeft+this.layoutSetting.spacingRight,n=this.outerCellsMatrix[t].itemCount-1;0<e;)if(n>=0)this._removeCellAction&&this._removeCellAction(),this._putOuterCellNode(this.outerCellsMatrix[t][n]),n--;else{if(this.contentLayout.paddingTop+=this.outerCellsMatrix[t].height+this.layoutSetting.spacingY,this.outerCellsMatrix[t].freeWidth=this.viewSize.width-i,(t+=1)>=this.outerCellsMatrix.length-1||!this.outerCellsMatrix[t][0])return;n=this.outerCellsMatrix[t].itemCount-1,e=this.content.y-this.contentLayout.paddingTop-this.outerCellsMatrix[t].height}},e.prototype._removeHorizontalPrevious=function(t,e){for(var i=this.layoutSetting.spacingTop+this.layoutSetting.spacingBottom,n=this.outerCellsMatrix[t].itemCount-1;0<e;)if(n>=0)this._putOuterCellNode(this.outerCellsMatrix[t][n]),n--;else{if(this.contentLayout.paddingLeft+=this.outerCellsMatrix[t].width+this.layoutSetting.spacingX,this.outerCellsMatrix[t].freeHeight=this.viewSize.height-i,(t+=1)>=this.outerCellsMatrix.length-1||!this.outerCellsMatrix[t][0])return;n=this.outerCellsMatrix[t].itemCount-1,e=-1*this.content.x-this.contentLayout.paddingLeft-this.outerCellsMatrix[t].width}},e.prototype._removeVerticalNext=function(t,e,i){for(var n=this.layoutSetting.spacingLeft+this.layoutSetting.spacingRight,o=this.outerCellsMatrix[t].itemCount-1;e<0;)if(o>=0)this._removeCellAction&&this._removeCellAction(),this._putOuterCellNode(this.outerCellsMatrix[t][o]),o--;else{if(this.outerCellsMatrix[t].freeWidth=this.viewSize.width-n,(t-=1)<=0||!this.outerCellsMatrix[t][0])return;o=this.outerCellsMatrix[t].itemCount-1,i=this._getRowTotalHeight(t)-this.viewSize.height,e=this.content.y-i+this.layoutSetting.spacingY+this.outerCellsMatrix[t].height}},e.prototype._removeHorizontalNext=function(t,e,i){for(var n=this.layoutSetting.spacingTop+this.layoutSetting.spacingBottom,o=this.outerCellsMatrix[t].itemCount-1;e<0;)if(o>=0)this._removeCellAction&&this._removeCellAction(),this._putOuterCellNode(this.outerCellsMatrix[t][o]),o--;else{if(this.outerCellsMatrix[t].freeHeight=this.viewSize.height-n,(t-=1)<=0||!this.outerCellsMatrix[t][0])return;o=this.outerCellsMatrix[t].itemCount-1,i=this._getColTotalWidth(t)-this.viewSize.width,e=-1*this.content.x-i+this.layoutSetting.spacingX+this.outerCellsMatrix[t].width}},e.prototype.removeUselessItems=function(t,e){if(this._setDataCount(t),this.vertical)for(var i=this.content.children.length-1;i>=0;i--){if(!((o=this.content.children[i]).zIndex>t-1)){this.reloadCurrentData();var n=o.col+1;this.outerCellsMatrix[o.row].itemCount=n,this.outerCellsMatrix.splice(o.row+1,this.outerCellsMatrix.length-1),this._resetRowScrollSize(),this.setMasterControl(!1),e&&e();break}this.outerCellsMatrix[o.row].freeWidth+=this.outerCellsMatrix[o.row][o.col].width+this.layoutSetting.spacingX,this._putOuterCellNode(o),0===i&&(this._resetRowScrollSize(),this.setMasterControl(!1),e&&e())}else for(i=this.content.children.length-1;i>=0;i--){var o;if(!((o=this.content.children[i]).zIndex>=t-1)){this.reloadCurrentData(),n=o.row+1,this.outerCellsMatrix[o.col].itemCount=n,this.outerCellsMatrix.splice(o.col+1,this.outerCellsMatrix.length-1),this._resetColScrollSize(),this.setMasterControl(!1),e&&e();break}this.outerCellsMatrix[o.col].freeHeight+=this.outerCellsMatrix[o.col][o.row].height+this.layoutSetting.spacingY,this._putOuterCellNode(o),0===i&&(this._resetRowScrollSize(),this.setMasterControl(!1),e&&e())}},e.prototype._spawnVerticalNext=function(t,e,i,n){this.lastContentY=this.content.y;for(var o,a,s,r=this.layoutSetting.spacingLeft+this.layoutSetting.spacingRight,c=t,l=e,h=this._dataCount;i<h;){if(a=(o=this._dataSource.getItem(this,i,this._sectionIndex)).width+this.layoutSetting.spacingX,s=o.height,!(0<n))return this._resetRowScrollSize(),void this._enqueueReusableItem(o);if(this.outerCellsMatrix[c]||(this.outerCellsMatrix[c]={},this.outerCellsMatrix[c][l]={},this.outerCellsMatrix[c].itemCount=0,this.outerCellsMatrix[c].height=0,this.outerCellsMatrix[c].freeWidth=this.viewSize.width-r),this.outerCellsMatrix[c].freeWidth-a>=0)this._spawnCellAction&&this._spawnCellAction(),this.outerCellsMatrix[c].height=Math.max(s,this.outerCellsMatrix[c].height),this._setOuterCellData(o,c,l,i),this.outerCellsMatrix[c].freeWidth-=a,l+=1,this.outerCellsMatrix[c].itemCount=l,++i>=h&&this._resetRowScrollSize();else if(this.outerCellsMatrix[c].freeWidth+this.layoutSetting.spacingX-a>=0)this._spawnCellAction&&this._spawnCellAction(),this.outerCellsMatrix[c].height=Math.max(s,this.outerCellsMatrix[c].height),this._setOuterCellData(o,c,l,i),this.outerCellsMatrix[c].freeWidth-=a,l+=1,this.outerCellsMatrix[c].itemCount=l,i++,this._resetRowScrollSize();else{var u=this.content.children[this.content.children.length-1].row,d=this._getRowTotalHeight(u)-this.viewSize.height;n=this.content.y-d,this._resetRowScrollSize(),this._enqueueReusableItem(o),c+=1,l=0}}},e.prototype._spawnHorizontalNext=function(t,e,i,n){this.lastContentY=-1*this.content.x;for(var o,a,s,r=this.layoutSetting.spacingTop+this.layoutSetting.spacingBottom,c=t,l=e,h=this._dataCount;i<h;){if(a=(o=this._dataSource.getItem(this,i,this._sectionIndex)).width,s=o.height+this.layoutSetting.spacingY,!(0<n))return this._resetColScrollSize(),void this._enqueueReusableItem(o);if(this.outerCellsMatrix[l]||(this.outerCellsMatrix[l]={},this.outerCellsMatrix[l][c]={},this.outerCellsMatrix[l].itemCount=0,this.outerCellsMatrix[l].width=0,this.outerCellsMatrix[l].freeHeight=this.viewSize.height-r),this.outerCellsMatrix[l].freeHeight-s>=0)this._spawnCellAction&&this._spawnCellAction(),this.outerCellsMatrix[l].width=Math.max(a,this.outerCellsMatrix[l].width),this._setOuterCellData(o,c,l,i),this.outerCellsMatrix[l].freeHeight-=s,c+=1,this.outerCellsMatrix[l].itemCount=c,++i>=h&&this._resetColScrollSize();else if(this.outerCellsMatrix[l].freeHeight+this.layoutSetting.spacingY-s>=0)this._spawnCellAction&&this._spawnCellAction(),this.outerCellsMatrix[l].width=Math.max(a,this.outerCellsMatrix[l].width),this._setOuterCellData(o,c,l,i),this.outerCellsMatrix[l].freeHeight-=s,c+=1,this.outerCellsMatrix[l].itemCount=c,i++,this._resetColScrollSize();else{var u=this.content.children[this.content.children.length-1].col,d=this._getColTotalWidth(u)-this.viewSize.width;n=-1*this.content.x-d,this._resetColScrollSize(),this._enqueueReusableItem(o),l+=1,c=0}}},e.prototype._spawnVerticalPrevious=function(t,e,i,n){if(!(t<0)){for(var o,a,s,r=t,c=this.outerCellsMatrix[r].itemCount-1;e>=0;){if(a=(o=this._dataSource.getItem(this,e,this._sectionIndex)).width+this.layoutSetting.spacingX,s=o.height,!(0>i))return this._resetRowScrollSize(),this._enqueueReusableItem(o),void(n&&n());c>=0?(this._spawnCellAction&&this._spawnCellAction(),this.outerCellsMatrix[r].height=Math.max(s,this.outerCellsMatrix[r].height),this._setOuterCellData(o,r,c,e),this.outerCellsMatrix[r].freeWidth-=a,0===e&&(this.contentLayout.paddingTop-=this.outerCellsMatrix[r].height+this.layoutSetting.spacingY,i=this.content.y-this.contentLayout.paddingTop),c-=1,e--):(this.contentLayout.paddingTop-=this.outerCellsMatrix[r].height+this.layoutSetting.spacingY,i=this.content.y-this.contentLayout.paddingTop,this._resetRowScrollSize(),this._enqueueReusableItem(o),r-=1,c=this.outerCellsMatrix[r].itemCount-1)}n&&n()}},e.prototype._spawnHorizontalPrevious=function(t,e,i,n){if(!(t<0)){for(var o,a,s,r=-1*this.content.x,c=t,l=this.outerCellsMatrix[c].itemCount-1;e>=0;){if(a=(o=this._dataSource.getItem(this,e,this._sectionIndex)).width,s=o.height+this.layoutSetting.spacingY,!(0>i))return this._resetColScrollSize(),this._enqueueReusableItem(o),void(n&&n());l>=0?(this._spawnCellAction&&this._spawnCellAction(),this.outerCellsMatrix[c].width=Math.max(a,this.outerCellsMatrix[c].width),this._setOuterCellData(o,l,c,e),this.outerCellsMatrix[c].freeHeight-=s,0===e&&(this.contentLayout.paddingLeft-=this.outerCellsMatrix[c].width+this.layoutSetting.spacingX,i=r-this.contentLayout.paddingLeft),l-=1,e--):(this.contentLayout.paddingLeft-=this.outerCellsMatrix[c].width+this.layoutSetting.spacingX,i=r-this.contentLayout.paddingLeft,this._resetColScrollSize(),this._enqueueReusableItem(o),c-=1,l=this.outerCellsMatrix[c].itemCount-1)}n&&n()}},e.prototype._resetRowScrollSize=function(){for(var t=this.layoutSetting.spacingTop+this.layoutSetting.spacingBottom,e=0;e<this.outerCellsMatrix.length;e++)t+=this.outerCellsMatrix[e].height,e!==this.outerCellsMatrix.length-1?t+=this.layoutSetting.spacingY:this.content.height!==t&&(this.content.height=t)},e.prototype._resetColScrollSize=function(){for(var t=this.layoutSetting.spacingLeft+this.layoutSetting.spacingRight,e=0;e<this.outerCellsMatrix.length;e++)t+=this.outerCellsMatrix[e].width,e!==this.outerCellsMatrix.length-1?t+=this.layoutSetting.spacingX:this.content.width!==t&&(this.content.width=t)},e.prototype._setOuterCellData=function(t,e,i,n){var o=this._getOuterCellNode();this.vertical?this.outerCellsMatrix[e][i]=o:this.outerCellsMatrix[i][e]=o,this.content.addChild(o),o.addChild(t),o.row=e,o.col=i,o.zIndex=n,o.width=t.width,o.height=t.height,this.content.sortAllChildren()},e.prototype.dequeueReusableItem=function(t){var e,i=this.nodePools[t];if(i){if(!(e=i.get())){var n=this.templates[t];e=cc.instantiate(n)}e.lv_type=t}return e},e.prototype._enqueueReusableItem=function(t){var e,i=t.lv_type;i&&(e=this.nodePools[i]),e&&e.put(t)},e.prototype._reloadReduceData=function(t){if(this.vertical){var e=this._getRowOrColByIndex(this.currentIndex);this.currentIndex<=t-1?this.removeUselessItems(t):null!==e?(this.isReducingData=!0,this.newDataCount=t,this.setMasterControl(!0),this.scrollTo(0)):this.removeUselessItems(t)}else{var i=this._getRowOrColByIndex(this.currentIndex);this.currentIndex<t-1?this.removeUselessItems(t):null!==i?(this.isReducingData=!0,this.stopAutoScroll(),this.setMasterControl(!0),this.scrollTo(0)):this.removeUselessItems(t)}},e.prototype._reloadAddData=function(){if(this.vertical){if(!this.content.children.length)return void this._spawnVerticalInit(0,0,this.viewSize.height);var t=(s=this.content.children[this.content.children.length-1]).row,e=t-1;e<0&&(e=0);var i=this._getRowTotalHeight(e)-this.viewSize.height,n=s.zIndex,o=this.content.y-i,a=(l=this._dataSource.getItem(this,n+1,this._sectionIndex)).width+this.layoutSetting.spacingX;this._enqueueReusableItem(l),this.outerCellsMatrix[t].freeWidth-a>=0?this._spawnVerticalNext(t,this.outerCellsMatrix[t].itemCount,n+1,o):this.outerCellsMatrix[t].freeWidth+this.layoutSetting.spacingX-a>=0&&this._spawnVerticalNext(t,this.outerCellsMatrix[t].itemCount,n+1,o),this.setMasterControl(!1)}else{if(!this.content.children.length)return void this._spawnHorizontalInit(0,0,this.viewSize.width);var s,r=(s=this.content.children[this.content.children.length-1]).col,c=r-1;c<0&&(c=0),i=this._getColTotalWidth(c)-this.viewSize.width;var l,h=s.zIndex,u=-1*this.content.x-i,d=(l=this._dataSource.getItem(this,h+1,this._sectionIndex)).height+this.layoutSetting.spacingY;this._enqueueReusableItem(l),this.outerCellsMatrix[r].freeHeight-d>=0?this._spawnHorizontalNext(this.outerCellsMatrix[h].itemCount,r,h+1,u):this.outerCellsMatrix[r].freeWidth+this.layoutSetting.spacingX-d>=0&&this._spawnHorizontalNext(this.outerCellsMatrix[r].itemCount,r,h+1,u),this.setMasterControl(!1)}},e.prototype.reloadCurrentData=function(t){if(this.content.children.length)for(var e=0;e<this.content.children.length;e++){this._enqueueReusableItem(this.content.children[e].children[0]);var i=this._dataSource.getItem(this,this.content.children[e].zIndex,this._sectionIndex);this.content.children[e].addChild(i),this.content.sortAllChildren()}t&&t()},e.prototype._putOuterCellNode=function(t){var e=t;null!==e&&null!==e.row&&null!==e.col&&(this.vertical?this.outerCellsMatrix[e.row][e.col]=null:this.outerCellsMatrix[e.col][e.row]=null,e.children.length&&this._enqueueReusableItem(e.children[0]),this._nodePool.put(e),this.content.sortAllChildren())},e.prototype._getOuterCellNode=function(){return this._nodePool?this._nodePool.size()?this._nodePool.get():new cc.Node:(this._nodePool=new cc.NodePool,new cc.Node)},e.prototype._lerp1D=function(t,e,i,n,o){if(void 0===n&&(n=1),a(cc.v2(t,0),cc.v2(e,0))<=1)return this._lerpDone(o),e;this._dispatchEvent("scrolling");var s=t+(i*=n)*(e-t);return t>=e?s<=e&&(this._lerpDone(o),s=e):s>=e&&(this._lerpDone(o),s=e),s},e.prototype._lerpDone=function(t){var e=this;if(this.isReducingData)this.isReducingData=!1,this.removeUselessItems(this.newDataCount,function(){if(e.setMasterControl(!1),e.setSnapDone(!0),e.stopAutoScroll(),e._dispatchEvent("scroll-ended"),null===e.currentIndex){var i=e._getNearestItem();e.currentIndex=e.outerCellsMatrix[i][0].zIndex}e.snapFinish&&e.snapFinish(e.currentIndex),t&&t()});else{if(this.setMasterControl(!1),this.setSnapDone(!0),this.stopAutoScroll(),this._dispatchEvent("scroll-ended"),null===this.currentIndex){var i=this._getNearestItem();this.currentIndex=this.outerCellsMatrix[i][0].zIndex}this.snapFinish&&this.snapFinish(this.currentIndex),t&&t()}},e.prototype._getFirstIndexByRowOrCol=function(t){for(var e=0,i=0;i<=t;i++){if(t===i)return e;e+=this.outerCellsMatrix[i].itemCount}},e.prototype._getRowOrColByIndex=function(t){for(var e=this.outerCellsMatrix.length-1,i=0;i<=e;i++){if(!((t-=this.outerCellsMatrix[i].itemCount)>=0))return i;if(i===e)return null}},e.prototype.destroy=function(){this._unbindListener(),t.prototype.destroy.call(this)},e.prototype._bindListener=function(){this.content.on(cc.Node.EventType.POSITION_CHANGED,this._recycle,this),this.autoSnap&&this.node.on("scroll-ended",this._autoSnapTo,this),this.node.on(cc.Node.EventType.SIZE_CHANGED,this._onSizeChanged,this)},e.prototype._unbindListener=function(){this.content.off(cc.Node.EventType.POSITION_CHANGED,this._recycle,this),this.autoSnap&&this.node.off("scroll-ended",this._autoSnapTo,this),this.node.off(cc.Node.EventType.SIZE_CHANGED,this._onSizeChanged,this)},e.prototype._resetScrollView=function(){this._topBoundary=0,this._bottomBoundary=0,this._leftBoundary=0,this._rightBoundary=0,this._touchMoveDisplacements=[],this._touchMoveTimeDeltas=[],this._touchMovePreviousTimestamp=0,this._touchMoved=!1,this._autoScrolling=!1,this._autoScrollAttenuate=!1,this._autoScrollStartPosition=cc.v2(0,0),this._autoScrollTargetDelta=cc.v2(0,0),this._autoScrollTotalTime=0,this._autoScrollAccumulatedTime=0,this._autoScrollCurrentlyOutOfBoundary=!1,this._autoScrollBraking=!1,this._autoScrollBrakingStartPosition=cc.v2(0,0),this._outOfBoundaryAmount=cc.v2(0,0),this._outOfBoundaryAmountDirty=!0,this._stopMouseWheel=!1,this._mouseWheelEventElapsedTime=0,this._isScrollEndedWithThresholdEventFired=!1,this._scrollEventEmitMask=0,this._isBouncing=!1,this._scrolling=!1},e.prototype.update=function(e){if(!this.pauseUpdate){if(this.snapPause)return this.setSnapDone(!0),void this.stopAutoScroll();if(!this.snapDone){if(!this.content.children.length)return this.content.setPosition(cc.v2(0,0)),void this.setSnapDone(!0);if(!(this.suddenStopIndex&&this.content.children[this.content.children.length-1].zIndex>=this.suddenStopIndex))return this.stopAutoScroll(),void(this.vertical?this.content.y=this._lerp1D(this.content.y,this.target,e,this.lerpSpeed):this.content.x=-1*this._lerp1D(-1*this.content.x,this.target,e,this.lerpSpeed));this.setMasterControl(!0),this.scrollTo(this.suddenStopIndex),this.suddenStopIndex=null}t.prototype.update.call(this,e)}},e.prototype._onTouchBegan=function(e,i){this.elastic=this.originalElastic,this.touchPos=e.touch.getLocation(),!this._masterControl&&this.content.children.length&&(this.unschedule(this._checkMouseWheel),this._stopMouseWheel=!1,this.snapPause=!0,this.setSnapDone(!0),t.prototype._onTouchBegan.call(this,e,i))},e.prototype._onTouchMoved=function(e,i){this.elastic=this.originalElastic,!this._masterControl&&this.content.children.length&&(this.vertical?this._verticalPullAction(e):this._horizontalPullAction(e),this.pauseUpdate||t.prototype._onTouchMoved.call(this,e,i))},e.prototype._mouseWheelVertical=function(){if(this._mouseWheelEvent&&this._mouseWheelEvent.getScrollY()>0)this._pullingUpAction&&2===this.pullDir&&this._pullingUpAction(0),this._pullingDownAction&&this._getContentTopBoundary()<=this._topBoundary&&(this.pauseUpdate||(this.beginPullPos=cc.v2(0,this._mouseWheelEvent.getScrollY())),(t=this.beginPullPos.y-this._mouseWheelEvent.getScrollY())>0&&(t=0),this._pullingDownAction(Math.abs(t)),this.pauseUpdate=!0,this.pullDir=1),this.content.children[0].zIndex>0&&(this.elastic=!0);else if(this._mouseWheelEvent&&this._mouseWheelEvent.getScrollY()<0){var t;this._pullingDownAction&&1===this.pullDir&&this._pullingDownAction(0),this._pullingUpAction&&Math.round(this._getContentBottomBoundary())>=Math.round(this._bottomBoundary)&&(this.content.children.length&&this.content.children[this.content.children.length-1].zIndex!==this._dataCount-1||(this.pauseUpdate||(this.beginPullPos=cc.v2(0,this._mouseWheelEvent.getScrollY())),(t=this.beginPullPos.y-this._mouseWheelEvent.getScrollY())<0&&(t=0),this._pullingUpAction(t),this.pauseUpdate=!0,this.pullDir=2)),this.content.children[this.content.children.length-1].zIndex<this._dataCount-1&&(this.elastic=!0)}},e.prototype._mouseWheelHorizontal=function(){if(this._mouseWheelEvent&&this._mouseWheelEvent.getScrollY()>0)this._pullingUpAction&&2===this.pullDir&&this._pullingRightAction(0),this._pullingLeftAction&&this._getContentRightBoundary()<=this._rightBoundary&&(this.pauseUpdate||(this.beginPullPos=cc.v2(this._mouseWheelEvent.getScrollY(),0)),(t=this.beginPullPos.x-this._mouseWheelEvent.getScrollY())>0&&(t=0),this._pullingLeftAction(Math.abs(t)),this.pauseUpdate=!0,this.pullDir=1),this.content.children[0].zIndex>0&&(this.elastic=!0);else if(this._mouseWheelEvent&&this._mouseWheelEvent.getScrollY()<0){var t;this._pullingDownAction&&1===this.pullDir&&this._pullingLeftAction(0),this._pullingRightAction&&this._getContentLeftBoundary()>=this._leftBoundary&&(this.content.children.length&&this.content.children[this.content.children.length-1].zIndex!==this._dataCount-1||(this.pauseUpdate||(this.beginPullPos=cc.v2(this._mouseWheelEvent.getScrollY(),0)),(t=this.beginPullPos.x-this._mouseWheelEvent.getScrollY())<0&&(t=0),this._pullingRightAction(t),this.pauseUpdate=!0,this.pullDir=2)),this.content.children[this.content.children.length-1].zIndex<this._dataCount-1&&(this.elastic=!0)}},e.prototype._verticalPullAction=function(t){if(this.touchPos.y>t.touch.getLocation().y)this._pullingUpAction&&2===this.pullDir&&this._pullingUpAction(0),this._pullingDownAction&&this._getContentTopBoundary()<=this._topBoundary&&(this.pauseUpdate||(this.beginPullPos=t.touch.getLocation()),(e=this.beginPullPos.y-t.touch.getLocation().y)<0&&(e=0),this._pullingDownAction(e),this.pauseUpdate=!0,this.pullDir=1),this.content.children[0].zIndex>0&&(this.elastic=!0);else if(this.touchPos.y<t.touch.getLocation().y){var e;this._pullingDownAction&&1===this.pullDir&&this._pullingDownAction(0),this._pullingUpAction&&Math.round(this._getContentBottomBoundary())>=Math.round(this._bottomBoundary)&&(this.content.children.length&&this.content.children[this.content.children.length-1].zIndex!==this._dataCount-1||(this.pauseUpdate||(this.beginPullPos=t.touch.getLocation()),(e=this.beginPullPos.y-t.touch.getLocation().y)>0&&(e=0),this._pullingUpAction(Math.abs(e)),this.pauseUpdate=!0,this.pullDir=2)),this.content.children[this.content.children.length-1].zIndex<this._dataCount-1&&(this.elastic=!0)}},e.prototype._horizontalPullAction=function(t){if(this.touchPos.x>t.touch.getLocation().x)this._pullingRightAction&&1===this.pullDir&&this._pullingRightAction(0),this._pullingLeftAction&&this._getContentRightBoundary()<=this._rightBoundary&&(this.content.children.length&&this.content.children[this.content.children.length-1].zIndex!==this._dataCount-1||(this.pauseUpdate||(this.beginPullPos=t.touch.getLocation()),(e=this.beginPullPos.x-t.touch.getLocation().x)<0&&(e=0),this._pullingLeftAction(e),this.pauseUpdate=!0,this.pullDir=2)),this.content.children[this.content.children.length-1].zIndex<this._dataCount-1&&(this.elastic=!0);else if(this.touchPos.x<t.touch.getLocation().x){var e;this._pullingLeftAction&&2===this.pullDir&&this._pullingLeftAction(0),this._pullingRightAction&&this._getContentLeftBoundary()>=this._leftBoundary&&(this.pauseUpdate||(this.beginPullPos=t.touch.getLocation()),(e=this.beginPullPos.x-t.touch.getLocation().x)>0&&(e=0),this._pullingRightAction(Math.abs(e)),this.pauseUpdate=!0,this.pullDir=1),this.content.children[0].zIndex>0&&(this.elastic=!0)}},e.prototype._onTouchEnded=function(e,i){if(a(this.touchPos,e.touch.getLocation())>=50&&e.stopPropagationImmediate(),!this._masterControl&&this.content.children.length){if(this.pauseUpdate){if(this.vertical){var n=this.beginPullPos.y-e.touch.getLocation().y;this._pullDownEndAction&&1===this.pullDir?(n<0&&(n=0),this._pullDownEndAction(n)):this._pullUpEndAction&&2===this.pullDir&&(n>0&&(n=0),this._pullUpEndAction(Math.abs(n)))}else n=this.beginPullPos.x-e.touch.getLocation().x,this._pullRightEndAction&&1===this.pullDir?(n>0&&(n=0),this._pullRightEndAction(Math.abs(n))):this._pullLeftEndAction&&2===this.pullDir&&(n<0&&(n=0),this._pullLeftEndAction(n));this.pullDir=null}this.snapPause=!1,this.requestSnap=!0,t.prototype._onTouchEnded.call(this,e,i)}},e.prototype._onTouchCancelled=function(e,i){if(a(this.touchPos,e.touch.getLocation())>=50&&e.stopPropagationImmediate(),!this._masterControl&&this.content.children.length){if(this.pauseUpdate){if(this.vertical){var n=this.beginPullPos.y-e.touch.getLocation().y;this._pullDownEndAction&&1===this.pullDir?(n<0&&(n=0),this._pullDownEndAction(n)):this._pullUpEndAction&&2===this.pullDir&&(n>0&&(n=0),this._pullUpEndAction(Math.abs(n)))}else n=this.beginPullPos.x-e.touch.getLocation().x,this._pullRightEndAction&&1===this.pullDir?(n>0&&(n=0),this._pullRightEndAction(Math.abs(n))):this._pullLeftEndAction&&2===this.pullDir&&(n<0&&(n=0),this._pullLeftEndAction(n));this.pullDir=null}this.snapPause=!1,this.requestSnap=!0,t.prototype._onTouchCancelled.call(this,e,i)}},e.prototype._onMouseWheelStart=function(){this.snapPause=!0,this.setSnapDone(!0)},e.prototype._onMouseWheelEnd=function(){if(!this._masterControl){if(this.pauseUpdate){if(this.vertical){var t=this.beginPullPos.y-this._mouseWheelEvent.getScrollY();this._pullDownEndAction&&1===this.pullDir?(t>0&&(t=0),this._pullDownEndAction(Math.abs(t))):this._pullUpEndAction&&2===this.pullDir&&(t<0&&(t=0),this._pullUpEndAction(t))}else t=this.beginPullPos.x-this._mouseWheelEvent.getScrollY(),this._pullRightEndAction&&1===this.pullDir?(t>0&&(t=0),this._pullRightEndAction(Math.abs(t))):this._pullLeftEndAction&&2===this.pullDir&&(t<0&&(t=0),this._pullLeftEndAction(t));this.pullDir=null}this.snapPause=!1,this.requestSnap=!0,this.autoSnap&&this._autoSnapTo(),this._mouseWheelEvent=void 0}},e.prototype._onMouseWheel=function(t,e){if(this.elastic=this.originalElastic,!this._masterControl&&this.content.children.length&&this.enabledInHierarchy&&!this._hasNestedViewGroup(t,e)){this._mouseWheelEvent=t;var i=cc.v2(0,0);this.vertical?(i=cc.v2(0,-.1*t.getScrollY()),this._mouseWheelVertical()):this.horizontal&&(i=cc.v2(-.1*t.getScrollY(),0),this._mouseWheelHorizontal()),this._mouseWheelEventElapsedTime=0,this._processDeltaMove(i),this._stopMouseWheel||(this._handlePressLogic(),this.schedule(this._checkMouseWheel,1/60),this._stopMouseWheel=!0,this._onMouseWheelStart()),this._stopPropagationIfTargetIsMe(t)}},e.prototype._checkMouseWheel=function(t){if(!this._masterControl){var e=this._getHowMuchOutOfBoundary();if(!o(e,cc.v2(0,0),1e-4))return this._processInertiaScroll(),this.unschedule(this._checkMouseWheel),this._stopMouseWheel=!1,void this._onMouseWheelEnd();this._mouseWheelEventElapsedTime+=t,this._mouseWheelEventElapsedTime>.1&&(this._onScrollBarTouchEnded(),this.unschedule(this._checkMouseWheel),this._stopMouseWheel=!1,this._onMouseWheelEnd())}},e.prototype._processAutoScrolling=function(t){var e=this._isNecessaryAutoScrollBrake(),i=e?.05:1;this._autoScrollAccumulatedTime+=t*(1/i);var n,o=Math.min(1,this._autoScrollAccumulatedTime/this._autoScrollTotalTime);this._autoScrollAttenuate&&(n=o,o=(n-=1)*n*n*n*n+1);var a=this._autoScrollStartPosition.add(this._autoScrollTargetDelta.mul(o)),s=o>.5;if(Math.abs(o-1)<=this.getScrollEndedEventTiming()&&!this._isScrollEndedWithThresholdEventFired&&(this._dispatchEvent("scroll-ended-with-threshold"),this._isScrollEndedWithThresholdEventFired=!0),this.elastic){var r=a.sub(this._autoScrollBrakingStartPosition);e&&(r=r.mul(i)),a=this._autoScrollBrakingStartPosition.add(r)}else{var c=a.sub(this.getContentPosition()),l=this._getHowMuchOutOfBoundary(c);l.fuzzyEquals(cc.v2(0,0),1e-4)||(a=a.add(l),s=!0)}s&&(this._autoScrolling=!1);var h=a.sub(this.getContentPosition());this._moveContent(this._clampDelta(h),s),this._dispatchEvent("scrolling"),this._autoScrolling||(this._isBouncing=!1,this._scrolling=!1,this._dispatchEvent("scroll-ended"))},e.prototype._hasNestedViewGroup=function(){return!1},e.prototype._processInertiaScroll=function(){if(!this._startBounceBackIfNeeded()&&this.inertia){var t=this._calculateTouchMoveVelocity();!o(t,cc.v2(0,0),1e-4)&&this.brake<1?this._startInertiaScroll(t):this.autoSnap&&this._autoSnapTo()}this._onScrollBarTouchEnded()},__decorate([r],e)}(n.default));i.default=c,cc._RF.pop()}},{ScrollViewEx:"ScrollViewEx"}],GsGameLaunchServices:[function(t,e,i){"use strict";if(!cc._RF.push(e,"9cf66/6hslCYKE4pp6iT028","GsGameLaunchServices")){Object.defineProperty(i,"__esModule",{value:!0}),i.loadGameAssetsWrapper=void 0;var n=t("AssetManager"),o=t("GeneralBundle"),a=t("WorldLoader"),s=t("GamePreference"),r=t("NotifyHelper"),c=t("NoSoundAdapter"),l=t("GameAudioAdapter"),h=t("SlotUtils");i.loadGameAssetsWrapper=function(){return function(t){var e=shell.I18n;r.showMessage(e.t("General.LoadingResource")),n.assetManager.addAsset(o.GeneralGameAudioBundle,o.GeneralResourceBundle),a.worldLoader.loadResources(!0,void 0),s.gamePreference.story||n.assetManager.addAsset(o.StoryResourceBundle);var i=h.isNoAudio()?c.default:l.default;n.assetManager.setAudioAdapter(i),shell.setProgressVisible(!0),n.assetManager.loadAsset(function(t,e){shell.setProgress(t,e)},t)}},cc._RF.pop()}},{AssetManager:"AssetManager",GameAudioAdapter:"GameAudioAdapter",GamePreference:"GamePreference",GeneralBundle:"GeneralBundle",NoSoundAdapter:"NoSoundAdapter",NotifyHelper:"NotifyHelper",SlotUtils:"SlotUtils",WorldLoader:"WorldLoader"}],HitPassThrough:[function(t,e,i){"use strict";if(!cc._RF.push(e,"c55eeQvpvBJQ70BFU5konXG","HitPassThrough")){Object.defineProperty(i,"__esModule",{value:!0});var n,o=cc._decorator,a=o.ccclass,s=o.property;(function(t){t._hitTest="_hitTest"})(n||(n={}));var r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.passPoint=cc.v2(0,0),e.passSize=cc.size(0,0),e}return __extends(e,t),e.prototype.onEnable=function(){var t=this;this._superHitTest=this.node[n._hitTest],this.node[n._hitTest]=function(e,i){if(!t._superHitTest.call(this,e,i))return!1;for(var n=t.passPoint.x+this.x-t.passSize.width/2,o=t.passPoint.y+this.y-t.passSize.height/2,a=this.getParent();null!==a;a=a.parent)n+=a.x,o+=a.y;var s=t.passSize.width,r=t.passSize.height,c=e.x-n,l=n+s-e.x,h=o+r-e.y,u=e.y-o;return!(c>=0&&l>=0&&h>=0&&u>=0)}},e.prototype.onDisable=function(){this.node[n._hitTest]=this._superHitTest,this._superHitTest=void 0},__decorate([s(cc.Vec2)],e.prototype,"passPoint",void 0),__decorate([s(cc.Size)],e.prototype,"passSize",void 0),__decorate([a],e)}(cc.Component);i.default=r,cc._RF.pop()}},{}],HpState:[function(t,e,i){"use strict";if(!cc._RF.push(e,"f3a60VYi95Bj5YB8i6B933T","HpState")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Component,properties:{hpSprite:cc.Component},init:function(t){this._actor=t,this.hpCount.node.active=!1},setBlood:function(t){t<0&&(t=0),t>1&&(t=1),this.hpSprite.node.scaleX=t},setHpCount:function(t,e){t<=0?t=0:t>0&&t<.1&&(t=.1),this.hpCount.string=t.toFixed(1)+"/"+e.toFixed(1)},hide:function(){this.node.stopAllActions(),this.node.runAction(cc.fadeOut(.3)),this._isShowing=!1},show:function(){this.node.stopAllActions(),this.node.runAction(cc.fadeIn(.3)),this._isShowing=!0},isHidden:function(){return!this._isShowing}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],IdleServices:[function(t,e,i){"use strict";if(!cc._RF.push(e,"8dc31hiqeRHKZYH4/dR5FWc","IdleServices")){Object.defineProperty(i,"__esModule",{value:!0}),i.getVerifySpinService=i.checkWalletCompletedServicesWrapper=i.reevaluateBetServiceWrapper=void 0;var n=t("SettingMenuHelper"),o=t("WalletHelper"),a=t("Utils"),s=t("BetCalculator"),r=t("AnalyticsHelper");i.reevaluateBetServiceWrapper=function(t,e){return function(i){n.settingMenuHelper.reevaluateBet()?(n.settingMenuHelper.updateBetValues(),t.transactionModel.selectedBetSizeValue=n.settingMenuHelper.betSizeValue,t.transactionModel.selectedBetLevelValue=n.settingMenuHelper.betLevelValue,e?e(i):i&&i()):i&&i()}},i.checkWalletCompletedServicesWrapper=function(t,e){return function(i){o.walletHelper.isWalletCompleted()?(t(),i&&i()):e(i)}},i.getVerifySpinService=function(t,e){return function(i){a.sequenceCallback(c(t),l(t,i))(e)}},cc._RF.pop()}function c(t){return function(e){if(n.settingMenuHelper.setWinAmount(0),n.settingMenuHelper.setAllButtonsInteractable(!1),o.walletHelper.isFreeGameMode())o.walletHelper.spin(0);else if(o.walletHelper.isBonusGameMode()){var i=t.systemModel.maxLineNumber,a=t.transactionModel.selectedBetSizeValue,r=t.transactionModel.selectedBetLevelValue,c=s.calculateBet(a,r,i);o.walletHelper.spin(c)}e()}}function l(t,e){return function(i){if(!t.isGameReplaying){var o=n.settingMenuHelper.turboSpinOn?"Turbo":"Normal",a=2===e?"Auto":"Manual";r.sendAnalyticsEvent({actionName:""+o+a+"Spin"})}i()}}},{AnalyticsHelper:"AnalyticsHelper",BetCalculator:"BetCalculator",SettingMenuHelper:"SettingMenuHelper",Utils:"Utils",WalletHelper:"WalletHelper"}],InfoBoard:[function(t,e,i){"use strict";if(!cc._RF.push(e,"a240cnLYeRLN6P7Jp/ceXZO","InfoBoard")){i.__esModule=!0,i.default=void 0;var n=l(t("CallbackEffect")),o=l(t("InfoboardMessageController")),a=t("Utils"),s=shell.I18n,r=["InfoBoard.GoForth","InfoBoard.LetsGo","InfoBoard.NeverGiveUp","InfoBoard.Onwards","InfoBoard.GetBetter","InfoBoard.BetterLuck"],c=cc.Class({extends:cc.Component,properties:{infoLabel:cc.Node,burstLabel:cc.Node,infoBoardWordColorWin:cc.Color,infoBoardWordColorInfo:cc.Color,infoBoardWinLighting:cc.Animation,lightningInfoEffect:n.default,infoboardMessage:o.default},onLoad:function(){this._infoLabel=this.infoLabel.getComponent(cc.Label),this._infoLabel.string=s.t("InfoBoard.GameStart"),this._burstLabel=this.burstLabel.getComponent(cc.Label),this.lightningInfoEffect.node.active=!1,this.lightningInfoEffect.effectDidEnd=this._lightningInfoEffectDidEnd.bind(this),this.infoboardMessage.setTips(this._getContinue())},setWinAmount:function(t,e,i){this.infoboardMessage.setWinAmount(t,i),this._setMessageAction(e,!1)},setMessage:function(t,e,i,n){void 0===n&&(n=!0),this.infoboardMessage.clear(),this.infoboardMessage.setEventMessage(t,n),this._setMessageAction(i,e)},setRollingWinAmount:function(t,e){this._infoLabel.string=s.t("InfoboardMessage.Win")+" "+(0,a.formatCurrency)(t,"",""),this._setMessageAction(e,!1)},_setMessageAction:function(t,e){e||t||this.playLabelBurst(),this.infoLabel.color=e?this.infoBoardWordColorInfo:this.infoBoardWordColorWin},clearMessage:function(t){t?this.scheduleOnce(this._clearInfoBoard,t):this._clearInfoBoard()},_clearInfoBoard:function(){this.infoboardMessage.clear()},playLightningCharge:function(t){this.lightningInfoEffect.node.active=!0,this.lightningInfoEffect.executeCallback=t,this.lightningInfoEffect.playEffect()},_lightningInfoEffectDidEnd:function(){this.lightningInfoEffect.node.active=!1},playLabelBurst:function(){var t=this.burstLabel;this._burstLabel.string=this._infoLabel.string,t.opacity=180,t.scaleX=t.scaleY=1,t.runAction(cc.spawn([cc.fadeOut(.4),cc.scaleTo(.5,2.3)])),this.infoBoardWinLighting.play()},_getContinue:function(){return r.map(function(t){return s.t(t)})}});i.default=c,e.exports=i.default,cc._RF.pop()}function l(t){return t&&t.__esModule?t:{default:t}}},{CallbackEffect:"CallbackEffect",InfoboardMessageController:"InfoboardMessageController",Utils:"Utils"}],"InfoboardMessageController.spec":[function(t,e,i){"use strict";cc._RF.push(e,"9a894aU+wtPzI8aYY1BbeiI","InfoboardMessageController.spec")||(Object.defineProperty(i,"__esModule",{value:!0}),i.setWinAmount=i.setTotalAndWinText=void 0,i.setTotalAndWinText=function(t,e){if(t||e){var i=System.get("automation")&&System.get("automation").GameData;i&&i.emit(t?"ShowTotalWin":"ShowWin")}},i.setWinAmount=function(t,e){if(t&&t>0){var i=System.get("automation")&&System.get("automation").GameData;i&&i.emit(e?"ShowTotalWin":"ShowWin")}},cc._RF.pop())},{}],InfoboardMessageController:[function(t,e,i){"use strict";if(!cc._RF.push(e,"f962cm61b9P6rw9Yco9B/O4","InfoboardMessageController")){Object.defineProperty(i,"__esModule",{value:!0}),i.InfoboardMessageOrderState=void 0;var n,o,a=t("NumberDisplayController"),s=t("NumberRollController"),r=t("Utils"),c=t("AutomationDecorator"),l=t("InfoboardMessageController.spec");(function(t){t[t.SEQUENCE=0]="SEQUENCE",t[t.RANDOM=1]="RANDOM"})(n=i.InfoboardMessageOrderState||(i.InfoboardMessageOrderState={})),function(t){t._fntConfig="_fntConfig"}(o||(o={}));var h=cc._decorator,u=h.ccclass,d=h.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.maskNode=void 0,e.padding=40,e.label=void 0,e.winLabelColor=new cc.Color,e.winLabelOutlineColor=new cc.Color,e.tipsLabelColor=new cc.Color,e.tipsLabelOutlineColor=new cc.Color,e.enableWinOutline=!0,e.enableTipsOutline=!0,e.spriteMessageNode=void 0,e.sprite=void 0,e.numberRollController=void 0,e.numberDisplayController=void 0,e.winText=void 0,e.totalText=void 0,e.winDisplayNode=void 0,e._initSpriteNodePos=void 0,e._tips=[],e._sprites=[],e._availableTips=[],e._availableSprites=[],e._isWinAmountShown=void 0,e._willExpire=void 0,e._isEventShown=void 0,e._numberRollCompleteCallback=void 0,e._labelMessageMinDelayTime=4,e._labelMessageRangeOfTimeAdded=3,e._spriteMessageMinDelayTime=4,e._spriteMessageRangeOfTimeAdded=3,e._labelOriginY=0,e._maxNumberDisplayNodeWidth=650,e._initialNumberDisplayNodeScale=1,e._orderMessageState=n.RANDOM,e}return __extends(e,t),Object.defineProperty(e.prototype,"willExpire",{get:function(){return this._willExpire},enumerable:!1,configurable:!0}),e.prototype.initNumberDisplayNodeEvent=function(){this._initialNumberDisplayNodeScale=this.winDisplayNode.scale,this.winDisplayNode.on("size-changed",this.resizeNumberDisplay,this)},e.prototype.setNumberDisplayNodeWidth=function(t){this._maxNumberDisplayNodeWidth=t},e.prototype.setEventMessage=function(t,e,i){void 0===e&&(e=!0),void 0===i&&(i=!1),this._isWinAmountShown||(i&&(this.label.node.color=this.tipsLabelOutlineColor,this.label.node.getComponent(cc.LabelOutline).enabled=this.enableTipsOutline),this._isWinAmountShown=!1,this._isEventShown=!0,this._willExpire=e,this.unschedule(this.playRandomTips),this.unschedule(this.playRandomSpriteTips),t instanceof cc.SpriteFrame?this.setSpriteMessage(t):"string"==typeof t&&this.setLabel(t))},e.prototype.clear=function(t){void 0===t&&(t=!1),(this._isWinAmountShown||this._isEventShown||t||this._orderMessageState!==n.RANDOM)&&(this.sprite?(this.unschedule(this.playRandomSpriteTips),this.playRandomSpriteTips()):this.label&&(this.unschedule(this.playRandomTips),this.playRandomTips()))},e.prototype.stop=function(){this.sprite&&this.sprite.node.stopAllActions(),this.label&&this.label.node.stopAllActions()},e.prototype.setLocalizedSpriteFrame=function(t,e){this.winText.spriteFrame=t,this.totalText.spriteFrame=e},e.prototype.setSprites=function(t){this._sprites=void 0,this._sprites=t,this._availableSprites=t.slice()},e.prototype.setOrderOfMessage=function(t){void 0===t&&(t=n.RANDOM),this._orderMessageState=t},e.prototype.setRandomSpriteScheduleTime=function(t,e){void 0===t&&(t=4),void 0===e&&(e=3),this._spriteMessageRangeOfTimeAdded=e,this._spriteMessageMinDelayTime=t},e.prototype.playScheduleRandomSpriteTipsOverride=function(){var t=Math.floor(Math.random()*this._spriteMessageRangeOfTimeAdded)+this._spriteMessageMinDelayTime;this.unschedule(this.playRandomSpriteTips),this.scheduleOnce(this.playRandomSpriteTips,t)},e.prototype.playScheduleRandomSpriteTips=function(t){void 0===t&&(t=0),this.unschedule(this.playRandomSpriteTips),this.scheduleOnce(this.playRandomSpriteTips,t)},e.prototype.unscheduleRandomSpriteTips=function(){this.unschedule(this.playRandomSpriteTips)},e.prototype.setTotalAndWinText=function(t,e){var i=this;this.winDisplayNode.opacity=0,this.totalText.node.active=t,this.winText.node.active=e,r.deferCallback(!0)(function(){r.deferCallback(!0)(function(){i.winDisplayNode.opacity=255})})},e.prototype.showInfoboardMessage=function(){var t=this.maskNode.getComponent(cc.Mask);t&&(t.enabled=!0),this.spriteMessageNode.active=!0},e.prototype.hideInfoboardMessage=function(){this.spriteMessageNode.active=!1;var t=this.maskNode.getComponent(cc.Mask);t&&(t.enabled=!1)},e.prototype.showDisplayNumber=function(t,e){void 0===e&&(e=!1),this._isWinAmountShown=!0,this.winDisplayNode&&this.winDisplayNode.setScale(this._initialNumberDisplayNodeScale),this.numberDisplayController.clear(),this.numberDisplayController.displayNumber(t,e)},e.prototype.clearDisplayNumber=function(){this.numberDisplayController.clear()},e.prototype.showNumberRoll=function(t,e,i,n,o){void 0===o&&(o=!0),this._isEventShown=!1,this._isWinAmountShown=!0,this._numberRollCompleteCallback=n,this.winDisplayNode&&this.winDisplayNode.setScale(this._initialNumberDisplayNodeScale),this.numberRollController.rollDuration=t,this.numberRollController.play(e,i,this.onNumberRollComplete.bind(this),o)},e.prototype.skipNumberRoll=function(){this.numberRollController.skip(),this.onNumberRollComplete()},e.prototype.clearNumberRoll=function(){this.numberRollController.stop()},e.prototype.setSpriteMessage=function(t){var e=this,i=this.padding,n=this.sprite,o=n.node;o.stopAllActions(),n.spriteFrame=t;var a=this.maskNode.width;if(o.width*o.scaleY+2*i>a){o.setAnchorPoint(0,o.anchorY),o.setPosition(cc.v2(-(a/2-i),o.y)),this._initSpriteNodePos=o.position;var s=o.width*o.scaleY+2*i,c=cc.delayTime(1.5),l=cc.moveBy(s/130,cc.v2(-s,0)),h=void 0;h=this._willExpire?cc.sequence(c,l,cc.callFunc(this.playScheduleRandomSpriteTips,this)):cc.sequence(c,l,cc.callFunc(function(){o.position=e._initSpriteNodePos})).repeatForever(),o.runAction(h)}else{if(o.setAnchorPoint(.5,o.anchorY),o.x=0,!this._willExpire)return;r.deferCallback(!0)(this.playScheduleRandomSpriteTipsOverride.bind(this))}},e.prototype.playRandomSpriteTips=function(){this._isWinAmountShown=!1,this._isEventShown=!1,this._willExpire=!0,0===this._availableSprites.length&&(this._availableSprites=this._sprites.slice());var t=this._availableSprites;if(this._orderMessageState===n.RANDOM){var e=Math.floor(Math.random()*t.length);if(t.length>1)for(;this.sprite.spriteFrame===t[e];)e=Math.floor(Math.random()*t.length);this.setSpriteMessage(t[e]),this._availableSprites.splice(e,1)}else this._orderMessageState===n.SEQUENCE&&(this.setSpriteMessage(t[0]),this._availableSprites.splice(0,1))},e.prototype.resizeNumberDisplay=function(){var t=this._maxNumberDisplayNodeWidth,e=this.winDisplayNode.width*this._initialNumberDisplayNodeScale,i=e-t;if(i>0){var n=this._initialNumberDisplayNodeScale-i/e;this.winDisplayNode.scale=n}},e.prototype.onNumberRollComplete=function(){var t=this._numberRollCompleteCallback;this._isWinAmountShown=!1,this._numberRollCompleteCallback=void 0,t&&t()},e.prototype.initLabelNodeY=function(){this._labelOriginY=this.label.node.y},e.prototype.setTips=function(t){this._tips=t,this._availableTips=t.slice()},e.prototype.setLocalizedFont=function(t){this.label.font=t},e.prototype.setLabelFontHeight=function(t){void 0===t&&(t=0);var e=this.label.font;e[o._fntConfig]&&(this.label.lineHeight=e[o._fntConfig].commonHeight+t)},e.prototype.setWinLabelColor=function(t){this.winLabelColor=t},e.prototype.setWinLabelOutlineColor=function(t){this.winLabelOutlineColor=t},e.prototype.setTipsLabelColor=function(t){this.tipsLabelColor=t},e.prototype.setTipsLabelOutlineColor=function(t){this.tipsLabelOutlineColor=t},e.prototype.setWinAmount=function(t,e,i){if(void 0===e&&(e=!1),void 0===i&&(i=!1),t&&t>0){this.unschedule(this.playRandomTips),this.unschedule(this.playRandomSpriteTips),this._isEventShown=!1,this._isWinAmountShown=!0,this._willExpire=i;var n=this.label.node,o=n.getComponent(cc.LabelOutline);n.color=this.winLabelColor,o&&(o.color=this.winLabelOutlineColor,o.enabled=this.enableWinOutline);var a=(e?shell.I18n.t("InfoboardMessage.TotalWin"):shell.I18n.t("InfoboardMessage.Win"))+" "+r.formatCurrency(t,"","");this.setLabel(a)}},e.prototype.setRandomLabelScheduleTime=function(t,e){void 0===t&&(t=4),void 0===e&&(e=3),this._labelMessageRangeOfTimeAdded=e,this._labelMessageMinDelayTime=t},e.prototype.scheduleRandomTips=function(){var t=Math.floor(Math.random()*this._labelMessageRangeOfTimeAdded)+this._labelMessageMinDelayTime;this.unschedule(this.playRandomTips),this.scheduleOnce(this.playRandomTips,t)},e.prototype.playScheduleRandomTips=function(t){void 0===t&&(t=0),this.unschedule(this.playRandomTips),this.scheduleOnce(this.playRandomTips,t)},e.prototype.unscheduleRandomTips=function(){this.unschedule(this.playRandomTips)},e.prototype.playRandomTips=function(){this._isWinAmountShown=!1,this._isEventShown=!1,1!==this._tips.length&&(this._willExpire=!0),0===this._availableTips.length&&(this._availableTips=this._tips.slice());var t=this._availableTips,e=Math.floor(Math.random()*t.length),i=this.label.node;i.color=this.tipsLabelColor;var n=i.getComponent(cc.LabelOutline);n&&(n.color=this.tipsLabelOutlineColor,n.enabled=this.enableTipsOutline),this.setLabel(t[e]),this._availableTips.splice(e,1)},e.prototype.setLabel=function(t){var e=this.label;e.string=t,e.node.y=2*this.maskNode.height,this.unschedule(this.determineOverFlow),this.scheduleOnce(this.determineOverFlow)},e.prototype.determineOverFlow=function(){var t=this.label.node,e=this.padding;t.width+2*e>this.maskNode.width?this.scrollLabel():(t.stopAllActions(),t.setAnchorPoint(.5,t.anchorY),t.x=0,this._willExpire&&this.scheduleRandomTips()),t.y=this._labelOriginY},e.prototype.scrollLabel=function(){var t=this.label,e=this.padding,i=t.node;i.stopAllActions(),i.setAnchorPoint(0,i.anchorY),i.setPosition(cc.v2(-(this.maskNode.width/2-e),i.y));var n,o=i.width+2*e,a=cc.delayTime(1.5),s=cc.moveBy(o/130,cc.v2(-o,0));n=this._willExpire?cc.sequence(a,s,cc.callFunc(this.playScheduleRandomTips,this)):cc.sequence(a,s,cc.callFunc(this.scrollLabel,this)),i.runAction(n)},e.prototype._reset=function(){this.stop(),this.numberRollController.stop(),this.numberDisplayController.clear(),this.unschedule(this.scheduleRandomTips),this.unschedule(this.playRandomSpriteTips),this.unschedule(this.playRandomTips),this.padding=40,this._maxNumberDisplayNodeWidth=650,this._labelOriginY=0,this._orderMessageState=n.RANDOM,this.enableTipsOutline=!0,this.enableWinOutline=!0,this._isWinAmountShown=!1,this._tips=[],this._sprites=[],this._availableSprites=[],this._availableTips=void 0,this._willExpire=void 0,this._isEventShown=void 0,this.tipsLabelColor=void 0,this.tipsLabelOutlineColor=void 0,this._numberRollCompleteCallback=void 0},e.prototype.destroy=function(){return this._reset(),this.node.destroy(),t.prototype.destroy.call(this)},__decorate([d({type:cc.Node,tooltip:!1})],e.prototype,"maskNode",void 0),__decorate([d({type:cc.Float,tooltip:!1})],e.prototype,"padding",void 0),__decorate([d({type:cc.Label,tooltip:!1})],e.prototype,"label",void 0),__decorate([d({tooltip:!1})],e.prototype,"winLabelColor",void 0),__decorate([d({tooltip:!1})],e.prototype,"winLabelOutlineColor",void 0),__decorate([d({tooltip:!1})],e.prototype,"tipsLabelColor",void 0),__decorate([d({tooltip:!1})],e.prototype,"tipsLabelOutlineColor",void 0),__decorate([d({tooltip:!1})],e.prototype,"enableWinOutline",void 0),__decorate([d({tooltip:!1})],e.prototype,"enableTipsOutline",void 0),__decorate([d({type:cc.Node,tooltip:!1})],e.prototype,"spriteMessageNode",void 0),__decorate([d({type:cc.Sprite,tooltip:!1})],e.prototype,"sprite",void 0),__decorate([d({type:s,tooltip:!1})],e.prototype,"numberRollController",void 0),__decorate([d({type:a,tooltip:!1})],e.prototype,"numberDisplayController",void 0),__decorate([d({type:cc.Sprite,tooltip:!1})],e.prototype,"winText",void 0),__decorate([d({type:cc.Sprite,tooltip:!1})],e.prototype,"totalText",void 0),__decorate([d({type:cc.Node,tooltip:!1})],e.prototype,"winDisplayNode",void 0),__decorate([c.automationDec({func:l.setTotalAndWinText})],e.prototype,"setTotalAndWinText",null),__decorate([c.automationDec({func:l.setWinAmount})],e.prototype,"setWinAmount",null),__decorate([u],e)}(cc.Component);i.default=p,cc._RF.pop()}},{AutomationDecorator:"AutomationDecorator","InfoboardMessageController.spec":"InfoboardMessageController.spec",NumberDisplayController:"NumberDisplayController",NumberRollController:"NumberRollController",Utils:"Utils"}],ItemGenerator:[function(t,e,i){"use strict";if(!cc._RF.push(e,"09766c42xxM9J6yPiBlLuyg","ItemGenerator")){i.__esModule=!0,i.default=void 0;var n,o=t("Enum"),a=(n=t("AudioLibrary"))&&n.__esModule?n:{default:n},s=t("AssetManager"),r=t("GeneralBundle"),c=t("Utils"),l=cc.Class({extends:cc.Component,properties:{coinPrefab:cc.Prefab,moneyBagPrefab:cc.Prefab,mapPrefab:cc.Prefab,inertia:cc.v2(10,40),monsterInertia:cc.v2(10,15),minCoinPerLoop:3,maxCoinPerLoop:6,_isHDVer:cc.Boolean},onLoad:function(){this._moneyToPocketLoop=void 0,this._coinPool=new cc.NodePool,this._moneyBagPool=new cc.NodePool,this._mapPool=new cc.NodePool,this._objectGroups=[],this._followObjects=[],this._itemsObjects=[],this._itemReceived=!1},init:function(){var t=s.assetManager.getAsset(r.GeneralGameAudioBundle);this.moneyToPocket=t.playerMoneyToPocket},isHDVersion:function(t){this._isHDVer=t},_getMaxRewardAmount:function(t){switch(t){case o.EnemyType.bat:case o.EnemyType.chest_guy:case o.EnemyType.skeleton:return{coin:5,moneyBag:0};case o.EnemyType.gargoyle:case o.EnemyType.tree_monster:return{coin:4,moneyBag:1};case o.EnemyType.rock_monster:case o.EnemyType.werewolf:return{coin:8,moneyBag:1};case o.EnemyType.witch:return{coin:3,moneyBag:2};default:return{coin:0,moneyBag:0}}},initCoin:function(t,e,i,n,o){var a=this;t instanceof Array||(t=[t]);var s=0,r=0;t.forEach(function(t){var e=a._getMaxRewardAmount(t);s+=e.coin,r+=e.moneyBag});for(var c=[],l=0;l<s;l++){var h=this._coinPool.get();h||((h=cc.instantiate(this.coinPrefab)).zIndex=4),i.addChild(h);var u=-i.getAnchorPoint().y*i.height+h.height/2,d=cc.v2(500*-Math.random()+e.x,u),p=h.getComponent("Coin");p.playFlip(),p.spawnItemAt(d,i,cc.v2(0,0),void 0),c.push(h)}for(var f=0;f<r;f++){var _=this._generateItemMoneyBag(cc.v2(0,0),i),m=-i.getAnchorPoint().y*i.height+_.height/2,g=cc.v2(500*-Math.random()+e.x,m);_.getComponent("MoneyBag").spawnItemAt(g,i,cc.v2(0,0),void 0),c.push(_)}var y=c.length;if(y){var v=c[y-1],b=this._getMonsterCoinEndAction(v,c,n,o);v.runAction(b)}this._objectGroups.unshift(c)},generateCoins:function(t,e,i,n,o){var a=this,s=[],r=Math.min(Math.round(t),20);this._objectGroups.unshift(s),function t(l){if(!(l>=r)){var h,u;if(l%3==0&&l+10<=r){h=l+(u=10)>=r;var d=a._generateMoneyBag(e,i,!0);if(s.push(d),h){var p=a._getEndAction(d,s,n,o);d.runAction(p)}}else{u=(0,c.randomInt)(a.minCoinPerLoop,a.maxCoinPerLoop),h=l+u>=r;for(var f=0;f<u;f++){var _=a._generateCoin(e,i);if(s.push(_),f===u-1&&h){var m=a._getEndAction(_,s,n,o);_.runAction(m)}}}l+=u,h||a.scheduleOnce(function(){t(l)},.1)}}(0)},generateMonsterCoins:function(t,e,i,n,o){for(var a=this._getMaxRewardAmount(t),s=a.coin,r=[],c=s+a.moneyBag,l=0;l<c;l++){var h=void 0;if(h=l<s?this._generateCoin(e,i,!0):this._generateMoneyBag(e,i,!0),r.push(h),l===c-1){var u=this._getMonsterCoinEndAction(h,r,n,o);h.runAction(u)}}this._objectGroups.unshift(r)},_getMonsterCoinEndAction:function(t,e,i,n){return cc.sequence([cc.delayTime(2),cc.callFunc(function(){n&&n()})])},_getEndAction:function(t,e,i,n){return cc.sequence([cc.delayTime(2),cc.callFunc(function(){n&&n()})])},generateItemMap:function(t,e){var i=this._generateItemMap(t,e);return this._itemsObjects.push(i),i},generateItemMoneyBag:function(t,e,i){void 0===i&&(i=!1);var n=this._generateItemMoneyBag(t,e,i);return this._itemsObjects.push(n),n},_recycleObject:function(t){var e,i=t.getComponent("Coin");i&&(i.stopFlip(),i.reset(),e=this._coinPool);var n=t.getComponent("MoneyBag");n&&(n.stopAnimation(),n.reset(),e=this._moneyBagPool);var o=t.getComponent("MapItem");o&&(o.stopAnimation(),o.reset(),e=this._mapPool),t.stopAllActions(),t.removeFromParent(),t.opacity=255,e.put(t)},reconfigureAllObjectAsFollow:function(t){this._itemReceived=!1;for(var e=this._objectGroups,i=e.length-1;i>=0;i--)for(var n=e[i],o=n.length-1;o>=0;o--){var a=n[o];this._reconfigureAsFollowObject(a,t)}for(var s=this._itemsObjects,r=s.length-1;r>=0;r--){var c=s[r];this._reconfigureAsFollowObject(c,t)}this._objectGroups.length=0,this._itemsObjects.length=0},reconfigureItemAsFollow:function(t,e){this._itemReceived=!1;var i=this._itemsObjects.indexOf(t);this._itemsObjects.splice(i,1),this._reconfigureAsFollowObject(t,e),t.zIndex=4},_reconfigureAsFollowObject:function(t,e){var i=this,n=t.getComponent("SpawnableItem");this._followObjects.push(t);var o=function(){i._removeFollowObject(t)};t.runAction(cc.sequence([cc.fadeIn(.1),cc.callFunc(function(){n.reconfigureToFollow(e,o)})]))},_removeFollowObject:function(t){this._itemReceived||(this._itemReceived=!0,this.notifyItemFollowedPlayer(t.getComponent("SpawnableItem").getItemType()),this._moneyToPocketLoop=a.default.playEffect(this.moneyToPocket,!0));var e=this._followObjects.indexOf(t);-1!==e&&(this._followObjects.splice(e,1),this._recycleObject(t),0===this._followObjects.length&&this._moneyToPocketLoop&&(a.default.stopEffect(this._moneyToPocketLoop,this.moneyToPocket),this._moneyToPocketLoop=void 0))},_generateCoin:function(t,e,i){void 0===i&&(i=!1);var n=this._coinPool,o=i?this.monsterInertia:this.inertia,a=n.get();a||((a=cc.instantiate(this.coinPrefab)).zIndex=4),e.addChild(a);var s=cc.v2(50*Math.random()*-1+t.x,t.y),r=cc.v2(o.x*Math.random()*1,o.y+Math.random()*o.y/2),c=a.getComponent("Coin");return c.playFlip(),c.spawnItemAt(s,e,r,void 0),a},_generateMoneyBag:function(t,e,i){void 0===i&&(i=!1);var n=i?this.monsterInertia:this.inertia,o=this._generateItemMoneyBag(t,e),a=cc.v2(50*Math.random()*-1+t.x,t.y),s=cc.v2(n.x*Math.random()*1,n.y+Math.random()*n.y/2);return o.getComponent("MoneyBag").spawnItemAt(a,e,s,void 0),o},_generateItemMoneyBag:function(t,e,i){void 0===i&&(i=!1);var n=this._moneyBagPool.get();n||(n=cc.instantiate(this.moneyBagPrefab)),e.addChild(n);var o=n.getComponent("MoneyBag");return i&&(o.setItemToRelicBag(),o.setZIndex(0)),o.playAnimation(),this._isHDVer||o.disableParticle(),n},_generateItemMap:function(t,e){var i=this._mapPool.get();i||(i=cc.instantiate(this.mapPrefab));var n=-e.getAnchorPoint().y*e.height+i.height/2;i.minY=n,e.addChild(i);var o=i.getComponent("MapItem");return o.setZIndex(0),o.playAnimation(),this._isHDVer||o.disableParticle(),i},getScrollableGroups:function(){var t=this._objectGroups,e=[];t.forEach(function(t,i){var n={objectList:t,speedFactor:1.1,groupIndex:i};e.push(n)});var i={objectList:this._itemsObjects,speedFactor:1.1,groupIndex:0};return e.push(i),e},recycleObject:function(){},clear:function(){var t=this;this._objectGroups.forEach(function(e){e.forEach(function(e){t._recycleObject(e)})}),this._followObjects.forEach(function(e){t._recycleObject(e)}),this._itemsObjects.forEach(function(e){t._recycleObject(e)}),this._moneyToPocketLoop&&(a.default.stopEffect(this._moneyToPocketLoop,this.moneyToPocket),this._moneyToPocketLoop=void 0),this._objectGroups.length=0,this._followObjects.length=0,this._itemsObjects.length=0},notifyItemFollowedPlayer:function(t){this.didFollowPlayer&&this.didFollowPlayer(t)}});i.default=l,e.exports=i.default,cc._RF.pop()}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",Enum:"Enum",GeneralBundle:"GeneralBundle",Utils:"Utils"}],JSONSerializer:[function(t,e){"use strict";if(!cc._RF.push(e,"c70eexVG3xJk5Qu0qLLBx1M","JSONSerializer")){var i=function(t,e){var i=o();return function(t){return i[t-=194]}(t,e)},n=System[i(197)](i(209)+i(205))[i(198)+i(204)+i(196)+i(207)+"er"];e[i(202)+i(200)+"s"][i(198)+i(204)+i(196)+i(206)+"er"]=n,e[i(202)+i(200)+"s"][i(194)+i(199)+i(208)+"e"]=!0,cc._RF.pop()}function o(){var t=["__e","der","ria","get","JSO","sMo","ort","uil","exp","isB","NSe","mon","liz","lis","dul","com"];return(o=function(){return t})()}},{}],KeyEffectPlayer:[function(t,e,i){"use strict";if(!cc._RF.push(e,"418d9Ql6w1LUbicUrzJgPrO","KeyEffectPlayer")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Object,properties:{keyPrefab:cc.Prefab,keyLayer:cc.Node,_isHDVer:cc.Boolean},isHDVersion:function(t){this._isHDVer=t},spawnKey:function(t){if(!this.key){var e=this.keyLayer,i=cc.instantiate(this.keyPrefab);i.x=t.x,i.y=t.y;var n=this.key=i.getComponent("Key");n.init(),n.playShine(this._isHDVer),n.playRotate(),e.addChild(i)}},keyStartRotate:function(){this.key.playRotate()},playKeyOpen:function(t){var e=this.key;e&&(e.didAnimEnd=this.removeKey.bind(this),e.openTreasureChest=t,e.playOpenChest())},removeKey:function(){if(this.key){var t=this.key,e=t.node;t.destroy(),e.removeFromParent(),e.destroy(),this.key=void 0,this.delegate.keyAnimEnd()}}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],KeyManager:[function(t,e,i){"use strict";if(!cc._RF.push(e,"c9e94AiHF1BFa6XAhZi9tNW","KeyManager")){i.__esModule=!0,i.default=void 0;var n=h(t("AudioLibrary")),o=h(t("DataManager")),a=t("GeneralBundle"),s=t("AssetManager"),r=t("Enum"),c=[[6,7,8,12,14,15,16,17,18,20,23,24,25,26,29],[6,7,8,11,12,14,17,18,20,21,22,23,24,25,26],[9,10,11,12,13,14,15,17,18,21,23,24,27,28,29],[6,9,10,11,12,15,17,18,19,20,21,23,27,28,29],[1,2,3,4,7,10,13,14,15,16,20,26,32,33,34],[1,2,3,4,7,10,13,14,15,16,21,27,31,32,33],[2,3,4,8,14,19,20,21,22,25,28,31,32,33,34],[1,2,3,9,15,19,20,21,22,25,28,31,32,33,34]],l=cc.Class({extends:cc.Component,properties:{mapPrefab:cc.Prefab,keyObtainedPrefab:cc.Prefab,tilePrefab:cc.Prefab,tileView:cc.Node,keyMapLayer:cc.Node,keySpawnAnimationLayer:cc.Node,_isHDVer:cc.Boolean},isHDVersion:function(t){this._isHDVer=t},initAudio:function(){var t=s.assetManager.getAsset(a.GeneralGameAudioBundle);this.mapAppearSound=t.mapAppear,this.mapBeginDropSound=t.mapBeginDrop,this.keyAppearSound=t.keyAppear},initWithData:function(){return this._keyDataSourceArr=[],this._tiles=Object.create(null),this.updateDataSource(!0),this._isKeyShining=!1,this},updateDataSource:function(t){void 0===t&&(t=!1),this._handleKeyData(t)},getNextData:function(){this._handleKeyData(!1)},playDarken:function(){var t=this._tiles;for(var e in t)t[e].darken()},playBrighten:function(){var t=this._tiles;for(var e in t)t[e].brighten()},litKeyTile:function(t){var e=this._tiles;e[t]&&e[t].setTileOn()},_handleKeyData:function(t){if(o.default.hasKeyInfo()){var e=o.default.keyState,i=o.default.keyCurrentEliminateKeyIndexes,n=o.default.keyAllEliminateKeyIndexes;if(e===r.KEY_STATE.GET_KEY)this._canKeepNextData=!0;else if(e===r.KEY_STATE.HAS_KEY&&!t&&!this._canKeepNextData||e===r.KEY_STATE.HAS_MAP&&i.length<1&&!t)return;e=t&&e===r.KEY_STATE.GET_MAP&&i.length?r.KEY_STATE.HAS_MAP:e;var a={keyType:o.default.keyType,keyState:e,allEliminateKeyIndexes:n,currentEliminateKeyIndexes:i,keyIndexes:c[o.default.keyType-1]};this._keyDataSourceArr.push(a),this._canKeepNextData&&e===r.KEY_STATE.HAS_KEY&&(this._canKeepNextData=!1)}},updateAllTileState:function(){this._showKey()},checkIfMapAppear:function(){return 0!==this._keyDataSourceArr.length&&this._keyDataSourceArr[0].keyState===r.KEY_STATE.GET_MAP},checkIfKeyObtained:function(){return 0!==this._keyDataSourceArr.length&&this._keyObtainedPending},keyHide:function(){this._isKeyShining=!1},restartKeyManager:function(){this.clearKey(),this.initWithData()},clearKey:function(){var t=this._tiles;for(var e in t){var i=t[e].node;i.removeFromParent(),i.destroy()}this._tiles=Object.create(null)},_showKey:function(){if(0!==this._keyDataSourceArr.length){var t=this._keyDataSourceArr[0],e=this.delegate;t.keyState===r.KEY_STATE.GET_MAP?this._startKeyAppearAnimation(t.keyType):t.keyState===r.KEY_STATE.HAS_MAP?(e.showKeyTrayWithAnimation(!0,!0),this._updateKeyTiles()):t.keyState===r.KEY_STATE.GET_KEY?(e.showKeyTrayWithAnimation(!0,!0),this._updateKeyTiles(),this._keyObtainedPending=!0):t.keyState===r.KEY_STATE.HAS_KEY&&(this.clearKey(),this._keyDataSourceArr.shift(),this._keyObtainedPending?(this._startKeyObtainedAnimation(),this._keyObtainedPending=!1):(e.showKeyTrayWithAnimation(!0,!1),this._getKey()))}},_shineKey:function(){this._isKeyShining||(this._isKeyShining=!0,this.delegate.shineKey())},_getKey:function(){this._shineKey(),this.delegate.getKey()},_startKeyAppearAnimation:function(t){this._keyType=t;var e=this._map=cc.instantiate(this.mapPrefab);e.parent=this.keyMapLayer,e.zIndex=10;var i=e.getComponent("Map");i.mapDelegate=this,i.isHDVersion(this._isHDVer),this.scheduleOnce(this._playMapAppear,.6)},_playMapAppear:function(){this._playMapAppearSound(),this._map.getComponent("Map").playKeyAppearAnimationWithKeyType(this._keyType)},_startKeyObtainedAnimation:function(){var t=this._keyObtained=cc.instantiate(this.keyObtainedPrefab);this.keySpawnAnimationLayer.addChild(t);var e=t.getComponent("KeyObtained");e.delegate=this,e.init(this._isHDVer),e.startKeyDisappearAnimation()},_updateKeyTiles:function(){var t=this._tiles;0===Object.keys(t).length&&this._createTiles(!1);for(var e=this._keyDataSourceArr[0],i=e.allEliminateKeyIndexes,n=(e.currentEliminateKeyIndexes,0),o=i.length;n<o;n++){var a=t[i[n]];a&&a.setTileOn()}this._keyDataSourceArr.shift()},_createTiles:function(t){for(var e=this._tiles,i=this.tileView,n=this.tilePrefab,o=this._keyDataSourceArr[0],a=o.keyIndexes,s=0,r=a.length;s<r;s++){var c=a[s],l=cc.instantiate(n);i.addChild(l);var h=l.getComponent("KeyTile");h.initWithIndex(c,t),e[c]=h}t&&(this._updateDataSourceIfNeed(o),this.scheduleOnce(this._notifyTileFinishDisplay,.5))},_notifyTileFinishDisplay:function(){this.delegate.keyTileFinishDisplay()},_updateDataSourceIfNeed:function(t){var e=t.currentEliminateKeyIndexes,i=t.keyState;if(e.length>0&&i===r.KEY_STATE.GET_MAP)t.keyState=r.KEY_STATE.HAS_MAP;else{var n=this._keyDataSourceArr.indexOf(t);if(n<0)return;this._keyDataSourceArr.splice(n,1)}},_playMapAppearSound:function(){n.default.playEffect(this.mapAppearSound)},_playMapBeginDropSound:function(){n.default.playEffect(this.mapBeginDropSound)},_playKeyAppearSound:function(){n.default.playEffect(this.keyAppearSound)},keyMoveToRightPosition:function(){this._createTiles(!0),this._playKeyAppearSound(),this.delegate.showKeyTrayWithAnimation(!0,!0)},mapAnimFinish:function(){this._map.removeFromParent(),this._map.destroy()},mapBeginDrop:function(){this._playMapBeginDropSound()},startToShineKey:function(){this._shineKey(),this.clearKey()},disappearAnimFinish:function(){this.delegate.keyDisappearAnimFinish(),this._keyObtained.removeFromParent(),this._keyObtained.destroy()}});i.default=l,e.exports=i.default,cc._RF.pop()}function h(t){return t&&t.__esModule?t:{default:t}}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",DataManager:"DataManager",Enum:"Enum",GeneralBundle:"GeneralBundle"}],KeyObtained:[function(t,e,i){"use strict";if(!cc._RF.push(e,"4220c7UlrtKeb14JDeH83dE","KeyObtained")){i.__esModule=!0,i.default=void 0;var n,o=(n=t("AudioLibrary"))&&n.__esModule?n:{default:n},a=t("AssetManager"),s=t("GeneralBundle"),r=cc.Class({extends:cc.Component,properties:{shineParticle:cc.ParticleSystem,keyTailParticle:cc.ParticleSystem,_isHDVer:cc.Boolean},startKeyDisappearAnimation:function(){this.getComponent(cc.Animation).play(),o.default.playEffect(this.getKey)},init:function(t){var e=a.assetManager.getAsset(s.GeneralGameAudioBundle);this.getKey=e.keyGet,this._isHDVer=t},shineParticleBegin:function(){this._isHDVer?(this.shineParticle.resetSystem(),this.shineParticle.node.active=!0):(this.shineParticle.stopSystem(),this.shineParticle.node.active=!1)},keyTileParticleBegin:function(){this._isHDVer?(this.keyTailParticle.resetSystem(),this.keyTailParticle.node.active=!0):(this.keyTailParticle.stopSystem(),this.keyTailParticle.node.active=!1)},keyStartToShine:function(){this.delegate.startToShineKey()},animationFinish:function(){this.getComponent(cc.Animation).stop(),this.keyTailParticle.stopSystem(),this.shineParticle.stopSystem(),this.delegate.disappearAnimFinish(),this._isHDVer=void 0}});i.default=r,e.exports=i.default,cc._RF.pop()}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",GeneralBundle:"GeneralBundle"}],KeyTile:[function(t,e,i){"use strict";if(!cc._RF.push(e,"04914b3PbNFSo/cuvUyX71k","KeyTile")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Component,properties:{width:0,height:0,left:0,top:0,tileSprite:cc.Sprite,tileOnImage:cc.SpriteFrame,tileDefaultImage:cc.SpriteFrame},initWithIndex:function(t,e){var i=parseInt(t/6),n=Math.round(t%6);this.node.setPosition(this.left+i*this.width,this.top-n*this.height),e?this._playKeyTileAppearAnim():this.node.opacity=255},setTileOn:function(){this.tileSprite.spriteFrame=this.tileOnImage},darken:function(){this.getComponent(cc.Animation).play("key_tile_darken")},brighten:function(){this.getComponent(cc.Animation).play("key_tile_brighten")},_playKeyTileAppearAnim:function(){this.getComponent(cc.Animation).play("key_tile_appear")}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],Key:[function(t,e,i){"use strict";if(!cc._RF.push(e,"3db0fgNWMFBY4dz7np855eE","Key")){i.__esModule=!0,i.default=void 0;var n,o=(n=t("AudioLibrary"))&&n.__esModule?n:{default:n},a=t("AssetManager"),s=t("GeneralBundle"),r=cc.Class({extends:cc.Component,properties:{shineSprite:cc.Node,keySprite:cc.Sprite,TrailSprite:cc.Sprite,particle:cc.Node},onLoad:function(){var t=a.assetManager.getAsset(s.GeneralGameAudioBundle);this.keyOpenTreasure=t.keyOpenTreasure},init:function(){this._shineAnim=this.shineSprite.getComponent(cc.Animation),this._mainAnim=this.getComponent(cc.Animation)},playShine:function(t){var e=this.particle;t?(e.active=!0,e.getComponent(cc.ParticleSystem).resetSystem()):(e.active=!1,e.getComponent(cc.ParticleSystem).stopSystem()),this._shineAnim.play("new_key_glow_effect"),this.shineSprite.opacity=255},playRotate:function(){var t=this._mainAnim;t.stop(),t.play("key_rotate")},playOpenChest:function(){var t=this._mainAnim;t.stop(),t.play("key_open_chest"),o.default.playEffect(this.keyOpenTreasure)},fadeOutShine:function(){var t=this,e=this.particle;this.shineSprite.runAction(cc.sequence([cc.fadeOut(.5),cc.callFunc(function(){t._shineAnim.stop(),e.active=!1,e.getComponent(cc.ParticleSystem).stopSystem(),t._mainAnim.stop("key_rotate")})]))},unlockTreasureChest:function(){this.openTreasureChest&&this.openTreasureChest()},animEnded:function(){this._mainAnim.stop(),this._shineAnim.stop(),this.resetKeySprite(),this.didAnimEnd&&this.didAnimEnd()},resetKeySprite:function(){var t=this.keySprite;t.node.opacity=255,t.node.angle=-290,t.node.scaleX=-1,t.node.scaleY=1,t.node.x=0,t.node.y=0},destroy:function(){this.didAnimEnd=void 0,this.openTreasureChest=void 0,this._super()}});i.default=r,e.exports=i.default,cc._RF.pop()}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",GeneralBundle:"GeneralBundle"}],LabelLocalized:[function(t,e,i){"use strict";if(!cc._RF.push(e,"f5f30hTmFFOcLgg2elp0I0D","LabelLocalized")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Component,editor:!1,properties:{key:{tooltip:!1,default:"",notify:function(){this._updateString()}}},onLoad:function(){this._label=this.node.getComponent(cc.Label),this._label||(this._label=this.node.getComponent(cc.RichText)),this._updateString()},_updateString:function(){var t=this._label;t&&(t.string=shell.I18n.t(this.key))}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],LabelTheme:[function(t,e,i){"use strict";if(!cc._RF.push(e,"05b6c8yPn1LZIH3AnSTBq8U","LabelTheme")){i.__esModule=!0,i.default=void 0;var n,o=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=u(void 0);if(e&&e.has(t))return e.get(t);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var a=n?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(i,o,a):i[o]=t[o]}return i.default=t,e&&e.set(t,i),i}(t("ResRC")),a=t("ResourceQualifierHelper"),s=t("Utils"),r=t("UIAppearanceHelper"),c=cc.Enum({_updateRichText:"_updateRichText",_isBold:"_isBold",_isItalic:"_isItalic"}),l=(0,s.getCocosMajor)();n="number"==typeof l&&l>=4?function(t){return t.markForRender(!0)}:function(t){return t.markForUpdateRenderData(!0)};var h=cc.Class({extends:cc.Component,ctor:function(){},editor:!1,properties:{followThemeColor:!1,followFont:!1,domainKey:{tooltip:!1,default:""},colorKey:{tooltip:!1,default:"",notify:function(){this._updateColor()}},fontFamilyKey:{tooltip:!1,default:"theme_font"},fontKey:{tooltip:!1,default:""},fontWeightKey:{tooltip:!1,default:""},fontStyleKey:{tooltip:!1,default:""}},onLoad:function(){this._label=this.node.getComponent(cc.Label),this._label||(this._label=this.node.getComponent(cc.RichText)),this._updateColor(),this._updateFont()},_updateColor:function(){if(this.followThemeColor){var t=this.node;if(this.domainKey,this.colorKey,t&&""!=this.colorKey){var e=r.uiAppearanceHelper.v(this.domainKey+"."+this.colorKey);t.color=new cc.Color(e.r,e.g,e.b),t.opacity=e.getA()}}},_updateFont:function(){var t=this;if(this.followFont){var e=this._label;if(e){if(e.offsetY=(0,r.getOffsetY)(),this.fontFamilyKey&&this.domainKey){var i=r.uiAppearanceHelper.v(this.domainKey+"."+this.fontFamilyKey);this._updateLabelFontFamily(i)}if(this.fontWeightKey){var n=this.fontWeightKey;this._updateLabelWeight(n)}if(this.fontStyleKey){var s=this.fontStyleKey;this._updateLabelStyle(s)}if(!this.fontFamilyKey&&this.fontKey&&this.domainKey){var c=r.uiAppearanceHelper.v(this.domainKey+"."+this.fontKey);if("object"==typeof c)return void this._updateLabelFont(c);if(c){var l=(0,a.getResourceURL)(c);return void(l&&o.load(l,cc.Font,function(e,i){e||t._updateLabelFont(i)}))}}}}},_updateLabelFont:function(t){var e=this._label;cc.isValid(this.node)&&(e.font=t,e instanceof cc.Label?n(e):e instanceof cc.RichText&&e[c._updateRichText]())},_updateLabelFontFamily:function(t){var e=this._label;cc.isValid(this.node)&&(e.fontFamily=t,e instanceof cc.Label?n(e):e instanceof cc.RichText&&e[c._updateRichText]())},_updateLabelWeight:function(t){var e=this._label;cc.isValid(this.node)&&(e[c._isBold]=t,e instanceof cc.Label?n(e):cc.RichText)},_updateLabelStyle:function(t){var e=this._label;cc.isValid(this.node)&&(e[c._isItalic]=t,e instanceof cc.Label?n(e):cc.RichText)}});i.default=h,e.exports=i.default,cc._RF.pop()}function u(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,i=new WeakMap;return(u=function(t){return t?i:e})(t)}},{ResRC:"ResRC",ResourceQualifierHelper:"ResourceQualifierHelper",UIAppearanceHelper:"UIAppearanceHelper",Utils:"Utils"}],LaunchConfig:[function(t,e){"use strict";if(!cc._RF.push(e,"888d6YSINNJYKpJ6Y8Amuaq","LaunchConfig")){var i=function(t,e){var i=a();return function(t){return i[t-=391]}(t,e)},n=System[i(398)](i(402)+i(400)+i(396)+"rk")[i(394)+i(403)+i(399)+i(397)];for(var o in n)e[i(404)+i(392)+"s"][o]=n[o];e[i(404)+i(392)+"s"][i(406)+i(405)+i(391)+"e"]=!0,cc._RF.pop()}function a(){var t=["dul","ort","uil","Lau","der","ewo","fig","get","Con","ram","isB","bvf","nch","exp","sMo","__e"];return(a=function(){return t})()}},{}],LaunchServices:[function(t,e,i){"use strict";if(!cc._RF.push(e,"7116dWkm15CP5z5Ts5HYp2I","LaunchServices")){Object.defineProperty(i,"__esModule",{value:!0}),i.initAudioManagerWrapper=i.launchCompleteServiceWrapper=i.startGameServiceWrapper=i.setUpSettingMenuHelperWrapper=void 0,t("opus");var n=t("NoSoundAdapter"),o=t("SettingMenuHelper"),a=t("GameAudioAdapter"),s=t("SlotUtils"),r=t("AudioManager"),c=t("AssetManager"),l=t("NotifyHelper");i.setUpSettingMenuHelperWrapper=function(){return function(t){o.settingMenuHelper.path="lib/setting_menu/",o.settingMenuHelper.initAudio(s.isNoAudio()?n.default:a.default),t()}},i.startGameServiceWrapper=function(){return function(t){var e=shell.I18n;l.showMessage(e.t("General.LoadingCompleted")),shell.setProgressVisible(!1),shell.requestGameStart(!0,t)}},i.launchCompleteServiceWrapper=function(){return function(t){c.assetManager.launchComplete(),t()}},i.initAudioManagerWrapper=function(){return function(t){r.init(),t()}},cc._RF.pop()}},{AssetManager:"AssetManager",AudioManager:"AudioManager",GameAudioAdapter:"GameAudioAdapter",NoSoundAdapter:"NoSoundAdapter",NotifyHelper:"NotifyHelper",SettingMenuHelper:"SettingMenuHelper",SlotUtils:"SlotUtils",opus:"opus"}],LavaBubbleEffect:[function(t,e,i){"use strict";if(!cc._RF.push(e,"ea9e96XokxFSJKwhVQjUN5B","LavaBubbleEffect")){Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator.ccclass,o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.onLoad=function(){this.play()},e.prototype.play=function(){this.node.getComponent(cc.Animation).play("lava_bubble_pop",2*Math.random())},e.prototype.stop=function(){this.node.getComponent(cc.Animation).stop()},__decorate([n],e)}(cc.Component);i.default=o,cc._RF.pop()}},{}],LightningStrike:[function(t,e,i){"use strict";if(!cc._RF.push(e,"53146x1KMtInKIo0thruqB0","LightningStrike")){i.__esModule=!0,i.default=void 0;var n,o=(n=t("CallbackEffect"))&&n.__esModule?n:{default:n},a=cc.Class({extends:o.default,playEffect:function(t){if(t){var e=this._calculateScale(this.node.position,t),i=this._calculateAngle(this.node.position,t);this.node.angle=-i,this.node.scaleX=e,this.node.scaleY=e,this.spriteAnim.play(this.spriteAnimName)}else this.didAnimEnd()},_calculateScale:function(t,e){var i=this._xDistance=e.x-t.x,n=this._yDistance=e.y-t.y;return Math.sqrt(Math.pow(i,2)+Math.pow(n,2))/this.node.height},_calculateAngle:function(t,e){var i=this._xDistance=e.x-t.x,n=this._yDistance=e.y-t.y,o=Math.atan2(n,i);return-(o=o/Math.PI*180)-90}});i.default=a,e.exports=i.default,cc._RF.pop()}},{CallbackEffect:"CallbackEffect"}],ListViewCellUpdateAnim:[function(t,e,i){"use strict";if(!cc._RF.push(e,"5502dsWooBCr7Ubvh4+KVSO","ListViewCellUpdateAnim")){Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator.ccclass,o=function(){function t(){}return t.prototype.layoutDuration=function(){return.5},t.prototype.layoutDelay=function(){return.5},t.prototype.updateCellAmimation=function(){},t.prototype.animationEnd=function(){},__decorate([n],t)}();i.default=o,cc._RF.pop()}},{}],ListViewEnum:[function(t,e,i){"use strict";cc._RF.push(e,"1db1bgDOdFP2LjHMP1kDfIt","ListViewEnum")||(Object.defineProperty(i,"__esModule",{value:!0}),i.cellUpdateAction=i.scrollPosition=void 0,function(t){t[t.scrollPositionTop=0]="scrollPositionTop",t[t.scrollPositionMiddle=1]="scrollPositionMiddle",t[t.scrollPositionBottom=2]="scrollPositionBottom"}(i.scrollPosition||(i.scrollPosition={})),function(t){t[t.cellUpdateActionInsert=0]="cellUpdateActionInsert",t[t.cellUpdateActionRemove=1]="cellUpdateActionRemove",t[t.cellUpdateActionUpdate=2]="cellUpdateActionUpdate"}(i.cellUpdateAction||(i.cellUpdateAction={})),cc._RF.pop())},{}],ListView:[function(t,e,i){"use strict";if(!cc._RF.push(e,"3d710qNmRNP1LLRNNBcLNnF","ListView")){Object.defineProperty(i,"__esModule",{value:!0});var n=t("ListViewEnum"),o=cc._decorator,a=o.ccclass,s=o.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.view=void 0,e.contentWidget=void 0,e._nodePools={},e._templates={},e._visibleItems=[],e._firstPosition=0,e._selectScrollPosition=0,e._cellCount=0,e._estimateCellHeight=0,e._shouldIgnoreContentEvent=!1,e._isReloadPending=!1,e._disableScroll=!1,e._dataSource=void 0,e}return __extends(e,t),Object.defineProperty(e.prototype,"nodePools",{get:function(){return this._nodePools},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"templates",{get:function(){return this._templates},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"visibleCells",{get:function(){return this._visibleItems},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.content.originY=this.content.y},e.prototype.start=function(){t.prototype.start.call(this),cc.director.once(cc.Director.EVENT_AFTER_DRAW,this._disableTopWidget,this)},e.prototype.onDisable=function(){t.prototype.onDisable.call(this),this.content.off("position-changed",this._onContentMoved,this),this.node.off("scroll-to-top",this._scrollToTop,this),this.node.off("scroll-to-bottom",this._scrollToBottom,this),this.node.off("scroll-ended",this._scrollEnded,this),this.node.off("scrolling",this._whenScrolling,this),this.node.off("size-changed",this._onSizeChanged,this)},e.prototype.onEnable=function(){t.prototype.onEnable.call(this),this.content.on("position-changed",this._onContentMoved,this),this.node.on("scroll-to-top",this._scrollToTop,this),this.node.on("scroll-to-bottom",this._scrollToBottom,this),this.node.on("scroll-ended",this._scrollEnded,this),this.node.on("scrolling",this._whenScrolling,this),this.node.on("size-changed",this._onSizeChanged,this),this._isReloadPending&&(this.reloadData(),this._isReloadPending=!1)},e.prototype.viewWillLayoutSubviews=function(){},e.prototype.viewDidLayoutSubviews=function(){var t=this.node.width,e=this.node.height;for(this.view.setContentSize(t,e),this.content.width=t;this._shouldPushBottom();)this._pushAtBottom();for(;this._shouldPopTop();)this._popFromTop();for(;this._shouldPushTop();)this._pushAtTop();for(;this._shouldPopBottom();)this._popFromBottom()},e.prototype.setDataSource=function(t){this._dataSource=t},e.prototype.register=function(t,e,i){if(this.nodePools[t]);else if(e){var n;n=i?new cc.NodePool(i):new cc.NodePool,this.templates[t]=e,this.nodePools[t]=n}},e.prototype.dequeueReusableItem=function(t){var e,i=this.nodePools[t];if(i){if(!(e=i.get())){var n=this.templates[t];e=cc.instantiate(n)}e.lv_type=t}return e},e.prototype.reloadData=function(){var t=this;if(this._dataSource)if(this._isOnLoadCalled){this.stopAutoScroll();var e=this._visibleItems,i=this._cellCount=this._dataSource.getCount(this),n=0,o=0,a=0;if(e&&e.length&&e.length>0&&(n=(v=e[0]).listViewIndex,o=c(v),a=e[e.length-1].listViewIndex),this._shouldIgnoreContentEvent=!0,e&&e.length&&(0===i||a>=i))for(var s=e.length-1;a>=i&&(d=e[s]);)d&&this._enqueueReusableItem(d),a--,s--;var r=this._visibleItems=[];if(n<i){for(var h=0,u=(s=n,o);s<i&&this._shouldPushBottom();){var d;(d=this._itemAtIndexInArr(s,e))&&this._enqueueReusableItem(d),(g=this._dataSource.getItem(this,s))&&(g.lv_type,g.x=0,g.y=u-g.height*g.anchorY,g.listViewIndex=s,h+=g.height,this.content.addChild(g),r.push(g),u=l(g),s++)}var p=this.content.originY-u-this.view.height;if(this.content.height=Math.abs(u),h<this.view.height&&n>0){s=n-1;for(var f=this.view.height-h,_=0,m=o;s>=0&&_<f;)(g=this._dataSource.getItem(this,s))&&(g.lv_type,g.x=0,g.y=m+g.height*(1-g.anchorY),g.listViewIndex=s,_+=g.height,this.content.addChild(g),r.unshift(g),m=c(g),s--);this.content.runAction(cc.sequence(cc.moveTo(.2,cc.v2(0,p)),cc.callFunc(function(){t.content.y=p,t.content.oldY=p,t._shouldIgnoreContentEvent=!1,t._finishReload()})))}else this._shouldIgnoreContentEvent=!1,this._finishReload()}else{for(h=0,s=i-1,m=-i*this._estimateCellHeight;s>=0&&h<this.view.height;){var g;(g=this._dataSource.getItem(this,s))&&(g.lv_type,g.x=0,g.y=m+g.height*(1-g.anchorY),g.listViewIndex=s,h+=g.height,this.content.addChild(g),r.unshift(g),m=c(g),s--)}f=0,h>this.view.height?f=h-this.view.height:h<this.view.height&&this._requestLayout(!0);var y=this.content.originY+f;this.content.runAction(cc.sequence(cc.moveTo(.2,cc.v2(0,y)),cc.callFunc(function(){t.content.y=y,t.content.oldY=y,t._shouldIgnoreContentEvent=!1,t._finishReload()})))}if(r.length&&r.length>0){var v=r[0],b=r[r.length-1];this._estimateCellHeight=(c(v)-l(b))/(b.listViewIndex-v.listViewIndex+1),this.content.height=this._estimateCellHeight*i}}else this._isReloadPending=!0},e.prototype.scrollToRow=function(t,e,i){var o=this;void 0===e&&(e=n.scrollPosition.scrollPositionTop),void 0===i&&(i=!0),this.stopAutoScroll();var a=this.content.y;if(!(t<0||t>=this._cellCount)){var s=this._visibleItems;if(s&&s.length&&!(s.length<=0)){this.content.off("position-changed",this._onContentMoved,this);var r=this._selectScrollPosition=t;s=this._preloadCells(r,s),this._visibleItems=s,0===s[0].listViewIndex&&this._requestLayout(!0);var c,l,h=this.itemAtIndex(t),u=s.indexOf(h),d=0;if(l=e===n.scrollPosition.scrollPositionTop?0:e===n.scrollPosition.scrollPositionMiddle?this.view.height/2-h.height*h.anchorY:this.view.height,e===n.scrollPosition.scrollPositionBottom)d=(d=l-(p=this._calculateIfReachHeight(u,s,l,!1)))>=0?d:0,c=this.content.originY+Math.abs(h.y)+h.height*h.anchorY-l+d;else if(e===n.scrollPosition.scrollPositionTop){var p=this._calculateIfReachHeight(u,s,this.view.height-l,!0);d=(d=this.view.height-l-p)>=0?d:0,c=this.content.originY+Math.abs(h.y)-h.height*h.anchorY-l-d}else p=this._calculateIfReachHeight(u,s,this.view.height-l,!0),(d=this.view.height-l-p)<=0&&(d=l-(p=this._calculateIfReachHeight(u-1,s,l,!1))),d=d>=0?d:0,c=this.content.originY+Math.abs(h.y)-h.height*h.anchorY-l-d;if(a===(c=c>=this.content.originY?c:this.content.originY))return this.content.y=c,this.content.oldY=c,this._popAllInvisibleItems(r),void this.content.on("position-changed",this._onContentMoved,this);i?this.content.runAction(cc.sequence(cc.moveTo(.2,cc.v2(this.content.x,c)),cc.callFunc(function(){o.content.y=c,o.content.oldY=c,o._popAllInvisibleItems(r),o.content.on("position-changed",o._onContentMoved,o)}))):(this.content.y=c,this.content.oldY=c,this._popAllInvisibleItems(r),this.content.on("position-changed",this._onContentMoved,this))}}},e.prototype.visibleItems=function(){return this._visibleItems},e.prototype.itemAtIndex=function(t){return this._itemAtIndexInArr(t,this._visibleItems)},e.prototype.insertCellAtIndex=function(t,e){var i=this;if(void 0===e&&(e=!0),!(t>this._cellCount)){this.stopAutoScroll(),this._cellCount+=1,this.content.height=this._estimateCellHeight*this._cellCount;var o=this.itemAtIndex(t),a=this._visibleItems,s=this._cellUpdateAnimCallback;if(!o){var r=a[0];return r.listViewIndex>t?this._updateCellsListIndex(0,r.listViewIndex+1):this._shouldPushBottom()&&this._pushAtBottom(),s&&s.updateCellAmimation(null,n.cellUpdateAction.cellUpdateActionInsert),void(s&&s.animationEnd())}var h=a.indexOf(o),u=c(o),d=this._dataSource.getItem(this,t);d.x=0,d.y=u-d.height*d.anchorY,d.listViewIndex=t,this.content.addChild(d),a.splice(h,0,d),u=l(d),this._updateCellsListIndex(h+1,t+1),s&&s.updateCellAmimation(d,n.cellUpdateAction.cellUpdateActionInsert),this._updateCells(h+1,u,n.cellUpdateAction.cellUpdateActionInsert,e,function(){for(;i._shouldPopBottom();)i._popFromBottom();i._resizeContentHeight(),i._isStartUpdateCell=!1})}},e.prototype.removeCellAtIndex=function(t,e){var i=this;if(void 0===e&&(e=!0),!(t>=this._cellCount)){var o=this._visibleItems;this._cellCount-=1;var a=this.itemAtIndex(t),s=this._cellUpdateAnimCallback;if(!a){var r=o[0];return r.listViewIndex>t&&this._updateCellsListIndex(0,r.listViewIndex-1),s&&s.updateCellAmimation(null,n.cellUpdateAction.cellUpdateActionRemove),void(s&&s.animationEnd())}this.stopAutoScroll();var l=o.indexOf(a),h=c(a);o.splice(l,1),this._updateCellsListIndex(l,t),this._cellUpdateAnimCallback?s.updateCellAmimation(a,n.cellUpdateAction.cellUpdateActionRemove,function(){i._enqueueReusableItem(a),a.removeFromParent()}):(this._enqueueReusableItem(a),a.removeFromParent()),this._updateCells(l,h,n.cellUpdateAction.cellUpdateActionRemove,e,function(){for(;i._shouldPushTop();)i._pushAtTop();for(;i._shouldPushBottom();)i._pushAtBottom();i._resizeContentHeight(),i._isStartUpdateCell=!1})}},e.prototype.updateCellAtIndex=function(t,e){var i=this;void 0===e&&(e=!0);var o=this.itemAtIndex(t);if(o){var a=this._visibleItems,s=a.indexOf(o),r=c(o),h=o.height,u=this._dataSource.getItem(this,t);u&&(this._enqueueReusableItem(o),u.x=0,u.y=r-u.height*u.anchorY,u.listViewIndex=t,this.content.addChild(u),a[s]=u,h!==u.height)&&(r=l(u),this._updateCells(s+1,r,n.cellUpdateAction.cellUpdateActionUpdate,e,function(){if(h<u.height)for(;i._shouldPopBottom();)i._popFromBottom();else for(;i._shouldPushBottom();)i._pushAtBottom();i._resizeContentHeight(),i._isStartUpdateCell=!1}))}},e.prototype.setScrollToTopCallback=function(t){this._scrollToTopCallback=t},e.prototype.setScrollToBottomCallback=function(t){this._scrollToButtomCallback=t},e.prototype.setScrollEndedCallback=function(t){this._scrollToEndedCallback=t},e.prototype.setScrollingCallback=function(t){this._scrollingCallback=t},e.prototype.setCellUpdateAnimCallback=function(t){this._cellUpdateAnimCallback=t},e.prototype._disableTopWidget=function(){this.contentWidget&&(this.contentWidget.isAlignTop=!1)},e.prototype._enqueueReusableItem=function(t){var e,i=t.lv_type;i&&(e=this.nodePools[i]),e&&e.put(t)},e.prototype._resizeContentHeight=function(){var t=this._visibleItems;if(t.length>0){var e=t[t.length-1],i=t[0],n=Math.abs(e.y)+e.height*e.anchorY;n>this.content.height?this.content.height=n:n<this.view.height&&0===i.listViewIndex?(this.content.y=this.content.originY,this.content.oldY=this.content.originY,this.content.height=n):e.listViewIndex===this._cellCount-1&&(this.content.height=n)}else this.content.height=0},e.prototype._requestLayoutIfNecessary=function(){var t=this._visibleItems;if(t&&t.length&&!(t.length<=0)){var e=t[0],i=c(e),n=t[t.length-1];0!==e.listViewIndex||0===i?i>-this._estimateCellHeight&&e.listViewIndex>1?this._adjustPosition(!0):n.listViewIndex===this._cellCount-1&&Math.abs(n.y)+n.height*n.anchorY<this.content.height?this._adjustPosition(!0):Math.abs(n.y)+n.height*n.anchorY>this.content.height&&this._adjustPosition(!1):this._adjustPosition(!0)}},e.prototype._adjustPosition=function(t,e){void 0===e&&(e=!0),this._shouldIgnoreContentEvent=!0,this._requestLayout(t),this._shouldIgnoreContentEvent=!1,this._autoScrollStartPosition.y=this.content.y,e&&this._continueAutoScroll()},e.prototype._requestLayout=function(t){var e=this._visibleItems;if(e&&e.length&&!(e.length<=0)){if(this.stopAutoScroll(),t)for(var i=-e[0].listViewIndex*this._estimateCellHeight,n=0;n<e.length;)(a=e[n]).x=0,a.y=i-a.height*a.anchorY,i=l(a),n++;else{var o=-e[e.length-1].listViewIndex*this._estimateCellHeight;for(n=e.length-1;n>=0;){var a;(a=e[n]).x=0,a.y=o-a.height*a.anchorY+a.height,o=c(a),n--}}var s=e[0],r=this.content.originY-l(s);this.content.y=r,this.content.oldY=r,this._resizeContentHeight()}},e.prototype._continueAutoScroll=function(){this._autoScrolling=!0,this._autoScrollTotalTime=this._storedAutoScrollLeftTime,this._autoScrollAccumulatedTime=0,this._autoScrollTargetDelta=this._leftScrollDelta},e.prototype._shouldPushBottom=function(){var t=!1,e=this._visibleItems;if(e.length>0){var i=e[e.length-1];if(i.listViewIndex===this._cellCount-1)return!1;var n=l(i),o=this.content.convertToWorldSpaceAR(cc.v2(0,n)),a=l(this.view),s=this.view.parent.convertToWorldSpaceAR(cc.v2(0,a));o.y>=s.y&&(t=!0)}else 0===e.length&&this._cellCount>0&&(t=!0);return t},e.prototype._shouldPushTop=function(){var t=!1,e=this._visibleItems;if(e.length>0){var i=e[0];if(0===i.listViewIndex)return!1;var n=c(i),o=this.content.convertToWorldSpaceAR(cc.v2(0,n)),a=c(this.view),s=this.view.parent.convertToWorldSpaceAR(cc.v2(0,a));o.y<=s.y&&(t=!0)}return t},e.prototype._shouldPopBottom=function(){var t=!1,e=this._visibleItems;if(e.length>1){var i=c(e[e.length-1]),n=this.content.convertToWorldSpaceAR(cc.v2(0,i)),o=l(this.view),a=this.view.parent.convertToWorldSpaceAR(cc.v2(0,o));n.y<a.y&&(t=!0)}return t},e.prototype._shouldPopTop=function(){var t=!1,e=this._visibleItems;if(e.length>1){var i=l(e[0]),n=this.content.convertToWorldSpaceAR(cc.v2(0,i)),o=c(this.view),a=this.view.parent.convertToWorldSpaceAR(cc.v2(0,o));n.y>a.y&&(t=!0)}return t},e.prototype._pushAtBottom=function(){var t=this._visibleItems;if(t.length>0){var e=this._cellCount,i=t[t.length-1],n=i.listViewIndex+1;if(n<e){var o=this._dataSource.getItem(this,n),a=(o.lv_type,l(i));o.x=0,o.y=a-o.height*o.anchorY,o.listViewIndex=n,this.content.addChild(o),t.push(o)}}},e.prototype._pushAtTop=function(){var t=this._visibleItems;if(t.length>0){var e=t[0],i=e.listViewIndex-1;if(i>=0){var n=this._dataSource.getItem(this,i),o=(n.lv_type,c(e));n.x=0,n.y=o-n.height*n.anchorY+n.height,n.listViewIndex=i,this.content.addChild(n),t.unshift(n)}}},e.prototype._popFromTop=function(){var t=this._visibleItems;if(t.length>0){var e=t[0];this._enqueueReusableItem(e),t.shift()}},e.prototype._popFromBottom=function(){var t=this._visibleItems;if(t.length>0){var e=t[t.length-1];this._enqueueReusableItem(e),t.pop()}},e.prototype._popAllTopInvisibleItems=function(){var t=this._visibleItems;if(t.length>0)for(var e=0;e<t.length&&this._shouldPopTop();)this._popFromTop(),e++},e.prototype._popAllBottomInvisibleItems=function(){var t=this._visibleItems;if(t.length>0)for(var e=t[t.length-1];e>=0&&this._shouldPopBottom();)this._popFromBottom(),e--},e.prototype._popAllInvisibleItems=function(t){this._popAllTopInvisibleItems(),this._popAllBottomInvisibleItems();var e=this._visibleItems,i=this.itemAtIndex(t),n=e.indexOf(i);if(-1!==n){var o=n,a=[],s=-1,r=-1;if(e.length>o){var c=e[o],l=c.listViewIndex;for(o++,a.push(c);o<e.length;){if((h=(p=e[o]).listViewIndex)-l!=1){s=h;break}a.push(p),o++,l=h}for(o=n-1,l=c.listViewIndex;o>=0;){var h;if(l-(h=(p=e[o]).listViewIndex)!=1){r=h;break}a.unshift(p),o--,l=h}}if(s>=0)for(var u=this.itemAtIndex(s),d=e.indexOf(u);e.length>d;){var p=e[d];this._enqueueReusableItem(p),d++}if(r>=0)for(var f=this.itemAtIndex(r),_=e.indexOf(f);_>=0;)p=e[_],this._enqueueReusableItem(p),_--;this._visibleItems=a}},e.prototype._createOrReuseCellFromTopToBottom=function(t,e){for(var i=this._visibleItems,n=i[0],o=i[i.length-1],a=t,s=0,r=[];a<this._cellCount&&s<=e&&a!==n.listViewIndex&&a!==o.listViewIndex;){var c=this._dataSource.getItem(this,a);c.listViewIndex=a,this.content.addChild(c),r.push(c),s+=c.height,a++}return r},e.prototype._createOrReuseCellFromBottomToTop=function(t,e){for(var i=this._visibleItems,n=i[0],o=i[i.length-1],a=t,s=0,r=[];a>=0&&s<=e&&a!==n.listViewIndex&&a!==o.listViewIndex;){var c=this._dataSource.getItem(this,a);c.listViewIndex=a,this.content.addChild(c),r.unshift(c),s+=c.height,a--}return r},e.prototype._layoutCellsFromTopToBottom=function(t,e){if(!e||!e.length||e.length<=0)return null;for(var i=0;i<e.length;i++){var n=e[i];n.x=0,n.y=t-n.height*n.anchorY,t-=n.height}return e},e.prototype._layoutCellsFromBottomToTop=function(t,e){if(!e||!e.length||e.length<=0)return null;for(var i=e.length-1;i>=0;i--){var n=e[i];n.x=0,n.y=t+n.height*n.anchorY,t+=n.height}return e},e.prototype._calculateIfReachHeight=function(t,e,i,n){var o=t,a=0;if(n)for(var s=o;s<e.length&&!((a+=e[s].height)>=i);s++);else for(s=o;s>=0&&!((a+=e[s].height)>=i);s--);return a},e.prototype._preloadCells=function(t,e){var i,n,o=e[0],a=e[e.length-1],s=this.view.height;if(t>=o.listViewIndex&&t<=a.listViewIndex)i=this._createOrReuseCellFromTopToBottom(a.listViewIndex+1,s),n=this._createOrReuseCellFromBottomToTop(o.listViewIndex-1,s),i=this._layoutCellsFromTopToBottom(l(a),i),(n=this._layoutCellsFromBottomToTop(c(o),n))&&(e=n.concat(e)),i&&(e=e.concat(i));else{var r=t;i=this._createOrReuseCellFromTopToBottom(r,s),r=t;var h=void 0;h=(n=this._createOrReuseCellFromBottomToTop(r-1,s))&&i?n.concat(i):n||i,t>a.listViewIndex?(h=this._layoutCellsFromTopToBottom(l(a),h),e=e.concat(h)):(h=this._layoutCellsFromBottomToTop(c(o),h))&&(e=h.concat(e))}return e},e.prototype._isLastCellLoaded=function(){var t=this._visibleItems;return!(t.length>0)||t[t.length-1].listViewIndex===this._cellCount-1},e.prototype._itemAtIndexInArr=function(t,e){if(!e||!e.length||e.length<=0)return null;for(var i=null,n=0;n<e.length;){var o=e[n];if(o.listViewIndex===t){i=o;break}n++}return i},e.prototype._finishReload=function(){this._resizeContentHeight(),this._dataSource.didReloadData&&this._dataSource.didReloadData(this)},e.prototype._updateCells=function(t,e,i,n,o){var a=this,s=this._cellUpdateAnimCallback;this._isStartUpdateCell=!0;for(var r,c=this._visibleItems,l=s?s.layoutDuration():.5,h=s?s.layoutDelay(i):0,u=function(t){var i=c[t],u=i.y,p=e-i.height*i.anchorY;e=p-i.height*i.anchorY,t===c.length-1&&(r=Math.abs(p)+i.height*i.anchorY),u!==p&&n?i.runAction(cc.sequence(cc.delayTime(h),cc.moveTo(l,cc.v2(i.x,p)),cc.callFunc(function(){i.y=p,t===c.length-1&&(a._LayoutUpdatedCells(r),o&&o(),s&&s.animationEnd())}))):(i.y=p,t===c.length-1&&(d._LayoutUpdatedCells(r),o&&o(),s&&s.animationEnd()))},d=this,p=t;p<c.length;p++)u(p);t>=c.length&&(o&&o(),s&&s.animationEnd())},e.prototype._LayoutUpdatedCells=function(t){var e=t+this.content.originY-this.content.y-this.view.height;e<0&&(this.content.oldY+=e,this.content.y+=e)},e.prototype._updateCellsListIndex=function(t,e){for(var i=this._visibleItems,n=t;n<i.length;n++)i[n].listViewIndex=e,e+=1},e.prototype._onContentMoved=function(){var t=this.content,e=t.y-t.oldY;if(t.oldY=t.y,!this._shouldIgnoreContentEvent){if(e>0){for(;this._shouldPushBottom();)this._pushAtBottom();for(;this._shouldPopTop();)this._popFromTop()}else if(e<0){for(;this._shouldPushTop();)this._pushAtTop();for(;this._shouldPopBottom();)this._popFromBottom()}this._requestLayoutIfNecessary()}},e.prototype._scrollToTop=function(){this._isScrollToTop=!0},e.prototype._scrollToBottom=function(){this._isScrollToBottom=!0},e.prototype._scrollEnded=function(){this._scrollToEndedCallback&&this._scrollToEndedCallback()},e.prototype._whenScrolling=function(){var t=this._getHowMuchOutOfBoundary();this._scrollingCallback&&this._scrollingCallback(t.y)},e.prototype._onSizeChanged=function(){this.viewDidLayoutSubviews()},e.prototype.stopAutoScroll=function(){if(this._shouldIgnoreContentEvent){this._storedAutoScrollLeftTime=this._autoScrollTotalTime-this._autoScrollAccumulatedTime;var e=Math.min(1,this._autoScrollAccumulatedTime/this._autoScrollTotalTime);this._autoScrollAttenuate&&(n=e,e=(n-=1)*n*n*n*n+1),this._leftScrollDelta=(i=1-e,this._autoScrollTargetDelta.mul(i))}var i,n;t.prototype.stopAutoScroll.call(this)},e.prototype._processInertiaScroll=function(){var e=this;if(this._isScrollToTop&&this._scrollToTopCallback){var i=this._getHowMuchOutOfBoundary();this._scrollToTopCallback(function(){e._isScrollToTop=!1,e._startInertiaScroll(cc.v2(0,0))},i)}else this._isScrollToBottom&&this._scrollToButtomCallback&&this._isLastCellLoaded()?this._scrollToButtomCallback(function(t){e._isScrollToBottom=!1;var i=e._cellCount=e._dataSource.getCount(e);e.content.height=e._estimateCellHeight*i;var n=e._visibleItems;if(n&&n.length&&n.length>0){var o=n[n.length-1].listViewIndex;for(e.content.off("position-changed",e._onContentMoved,e);o<i&&e._shouldPushBottom();)e._pushAtBottom(),o+=1;e._resizeContentHeight(),e.content.on("position-changed",e._onContentMoved,e)}t&&e._processInertiaScroll()}):(this._isScrollToTop=!1,this._isScrollToBottom=!1,t.prototype._processInertiaScroll.call(this))},e.prototype._handleMoveLogic=function(e){this._isStartUpdateCell||t.prototype._handleMoveLogic.call(this,e)},__decorate([s(cc.Node)],e.prototype,"view",void 0),__decorate([s(cc.Widget)],e.prototype,"contentWidget",void 0),__decorate([a],e)}(cc.ScrollView);i.default=r,cc._RF.pop()}function c(t){return t.y-t.height*t.anchorY+t.height}function l(t){return t.y-t.height*t.anchorY}},{ListViewEnum:"ListViewEnum"}],Loader:[function(t,e,i){"use strict";if(!cc._RF.push(e,"5b2b8J133JOT6TS0SeGH3MY","Loader")){Object.defineProperty(i,"__esModule",{value:!0});var n=t("ResourceQualifierHelper"),o=t("RetryHandler"),a=t("ResRC"),s=t("Utils"),r=function(){function t(t,e,i,n){void 0===n&&(n=!0),this._retryErrorCallback=void 0,this._errorCallback=void 0,this._successCallback=void 0,this._bindedCheckLoad=void 0,this._loadList=void 0,this._successCount=void 0,this._failCount=void 0,this._loadNumber=void 0,this._retryHandler=void 0,this._retryCount=0,this._retryErrorCallback=t,this._errorCallback=e,this._successCallback=i,this._canRetry=n,this._bindedCheckLoad=this._checkLoad.bind(this),this._loadList=[]}return t.prototype.addUrlLoadTask=function(t,e,i){this.addMethodLoadTask(function(i){a.load(n.getResourceURL(t,e),e,i)},i)},t.prototype.addMethodLoadTask=function(t,e){var i=this._loadList,n=function(o){t(function(t,a){t||(e&&e(a),i.splice(i.indexOf(n),1)),o()})};i.push(n)},t.prototype.startLoad=function(){var t=this,e=function(e){t._retryCount=e,s.spawnCallback(t._loadList.slice())(t._bindedCheckLoad)};this._canRetry&&(this._retryHandler=new o.default).init(shell.I18n.t("General.ResourceRetryMessage"),e),e(0)},t.prototype._checkLoad=function(){0===this._loadList.length?this._loadSuccess():this._loadFailed()},t.prototype._loadSuccess=function(){var t=this._successCallback;this._successCallback=void 0,t&&t(),this._retryErrorCallback=void 0,this._errorCallback=void 0,this._retryHandler&&this._retryHandler.destroy()},t.prototype._loadFailed=function(){this._retryErrorCallback&&this._retryErrorCallback(this._retryCount);var t=this._retryHandler;t&&t.canRetry()?t.execute():(this._errorCallback&&this._errorCallback(),t&&t.destroy())},t}();i.default=r,cc._RF.pop()}},{ResRC:"ResRC",ResourceQualifierHelper:"ResourceQualifierHelper",RetryHandler:"RetryHandler",Utils:"Utils"}],LocalUtils:[function(t,e,i){"use strict";cc._RF.push(e,"a0f02n6g0xPzoN66w9yDu0U","LocalUtils")||(Object.defineProperty(i,"__esModule",{value:!0}),i.isInRangeSimple=i.getChildRecursively=i.getNodeFromPool=i.setWorldPositionAR=i.getWorldPositionAR=i.clone=void 0,i.clone=function(t){if(t)return JSON.parse(JSON.stringify(t))},i.getWorldPositionAR=function(t){return t.convertToWorldSpaceAR(cc.v2())},i.setWorldPositionAR=function(t,e){var i=t.parent;i&&(t.position=i.convertToNodeSpaceAR(e))},i.getNodeFromPool=function(t,e){var i=e.get();return i||(i=cc.instantiate(t)),i},i.getChildRecursively=function t(e,i){if(e.name===i)return e;if(e.children.length>0)for(var n=e.children,o=0,a=n.length;o<a;o++){var s=t(n[o],i);if(s)return s}},i.isInRangeSimple=function(t,e,i){return Math.abs(t.position.x-e.position.x)<=i},cc._RF.pop())},{}],MagicBall:[function(t,e,i){"use strict";if(!cc._RF.push(e,"e08f79Qz8JMdom6vXQDCTXH","MagicBall")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Component,properties:{sprite:cc.Sprite,spriteAnim:cc.Animation},onLoad:function(){this.spriteAnim.play("magic_ball"),this.node.active=!1},attack:function(t,e){var i=this;this.node.scaleX=0,this.node.scaleY=0,this.node.x=t.x,this.node.y=t.y,this.node.active=!0;var n=this._xDistance=e.x-t.x,o=this._yDistance=e.y-t.y;this._distance=Math.sqrt(Math.pow(n,2)+Math.pow(o,2));var a=Math.atan2(o,n);a=a/Math.PI*180,this.node.angle=a,this.node.runAction(cc.scaleTo(.1,1.5,1.5)),this.node.runAction(cc.sequence([cc.moveTo(.3,e).easing(cc.easeOut(.5)),cc.callFunc(function(){i.hitTarget()})]))},hitTarget:function(){this.didHitTarget&&this.didHitTarget(this)}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],MagicEffect:[function(t,e,i){"use strict";if(!cc._RF.push(e,"1b803HyWGlIE51T4IutfSNS","MagicEffect")){i.__esModule=!0,i.default=void 0;var n,o=(n=t("BaseEffect"))&&n.__esModule?n:{default:n},a=cc.Class({extends:o.default,setColor:function(t){this.sprite.node.color=t}});i.default=a,e.exports=i.default,cc._RF.pop()}},{BaseEffect:"BaseEffect"}],"MainControiller.spec":[function(t,e,i){"use strict";if(!cc._RF.push(e,"de807Qmx/xJ0Lj/5tOSMTTC","MainControiller.spec")){Object.defineProperty(i,"__esModule",{value:!0}),i.onSymbolDrop=i.onScrollEnd=i.onScrollStart=void 0;var n=t("AutomationConstant"),o=System.get("automation")&&System.get("automation").GameData;i.onScrollStart=function(){o&&o.emit("ScrollEvent","start")},i.onScrollEnd=function(){o&&o.emit("ScrollEvent","stop")},i.onSymbolDrop=function(){o&&o.emit(n.AUTOMATION_EVENT.SYMBOL_DROP)},cc._RF.pop()}},{AutomationConstant:"AutomationConstant"}],MainController:[function(t,e,i){"use strict";if(!cc._RF.push(e,"8ec25LmcR9G27ZLvlFy/0UO","MainController")){i.__esModule=!0,i.default=void 0;var n,o,a,s,r,c,l,h,u,d,p,f,_,m,g,y,v,b,S,C,A,E,M,T,P,I,w,B,R,k,x,D,L,N,F,O,G,H,W,U,z,V,j,Y,q,K,X,Q,J,Z,$,tt,et,it=t("GamePreference"),nt=t("Enum"),ot=Jt(t("RPGController")),at=Jt(t("GemsManager")),st=Jt(t("GemPiecesGenerator")),rt=t("UIAppearanceHelper"),ct=Jt(t("KeyManager")),lt=Jt(t("KeyEffectPlayer")),ht=Jt(t("InfoBoard")),ut=Jt(t("ItemGenerator")),dt=Jt(t("BreakPointGenerator")),pt=Jt(t("GemsHighlight")),ft=Jt(t("MegaWin")),_t=Jt(t("SuperMegaWin")),mt=Jt(t("ShockWave")),gt=Jt(t("AudioLibrary")),yt=t("RtConfig"),vt=t("WalletHelper"),bt=t("SettingMenuHelper"),St=t("GSDataSource"),Ct=t("GSApiClient"),At=t("LaunchServices"),Et=t("SetupServices"),Mt=t("ResultServices"),Tt=Jt(t("DataManager")),Pt=Jt(t("PGGameHandler")),It=t("IdleServices"),wt=t("AssetManager"),Bt=t("GsGameLaunchServices"),Rt=t("GeneralBundle"),kt=t("GameInitializationHandler"),xt=t("Utils"),Dt=t("SpinTimeHelper"),Lt=t("NotifyHelper"),Nt=Jt(t("MultiResHandler")),Ft=t("BVFrameworkEnum"),Ot=t("GameLayout"),Gt=t("AudioManager"),Ht=t("TransactionStateMachineHandler"),Wt=t("GameUtils"),Ut=t("AutomationDecorator"),zt=t("MainControiller.spec"),Vt=shell.I18n,jt=Ft.EN_GAME_LAYER_Z_INDEX_HIGH+50,Yt=cc.Enum({MOUSE_ON_CLICK_EVENT:0,SPACE_BAR_KEY_DOWN_EVENT:1,AUTOSPIN:2}),qt=cc._decorator,Kt=qt.ccclass,Xt=qt.property,Qt=(n=Xt(cc.Node),o=Xt(cc.Node),a=Xt(cc.Node),s=Xt(cc.Node),r=Xt(cc.Prefab),c=Xt(at.default),l=Xt(st.default),h=Xt(ct.default),u=Xt(ut.default),d=Xt(ht.default),p=Xt(pt.default),f=Xt(cc.Node),_=Xt(cc.Node),m=Xt(cc.Node),g=Xt(cc.Node),y=Xt(cc.Node),v=Xt(ft.default),b=Xt(_t.default),S=Xt(mt.default),C=Xt(cc.Animation),A=Xt(cc.Prefab),E=Xt(cc.Node),M=Xt(cc.Node),T=Xt(cc.Font),P=(0,Ut.automationDec)({func:zt.onScrollStart}),I=(0,Ut.automationDec)({func:zt.onScrollEnd}),w=(0,Ut.automationDec)({func:zt.onSymbolDrop}),Kt((R=function(t){var e,i;function n(){for(var e,i=arguments.length,n=Array(i),o=0;o<i;o++)n[o]=arguments[o];return Zt(e=t.call.apply(t,[this].concat(n))||this,"head",k,$t(e)),Zt(e,"body",x,$t(e)),Zt(e,"controllerMask",D,$t(e)),Zt(e,"spinButtonNode",L,$t(e)),Zt(e,"keyPrefab",N,$t(e)),Zt(e,"gemsManager",F,$t(e)),Zt(e,"gemsPieces",O,$t(e)),Zt(e,"keyManager",G,$t(e)),Zt(e,"itemGenerator",H,$t(e)),Zt(e,"infoBoard",W,$t(e)),Zt(e,"gemsHighlight",U,$t(e)),Zt(e,"responsiveEffectLayer",z,$t(e)),Zt(e,"responsiveEffectFrontLayer",V,$t(e)),Zt(e,"controllerEffectLayer",j,$t(e)),Zt(e,"grayKey",Y,$t(e)),Zt(e,"keyTray",q,$t(e)),Zt(e,"megaWin",K,$t(e)),Zt(e,"superMegaWin",X,$t(e)),Zt(e,"shockWave",Q,$t(e)),Zt(e,"cameraAnim",J,$t(e)),Zt(e,"numberContainer",Z,$t(e)),Zt(e,"settingMenuHolder",$,$t(e)),Zt(e,"warningHolder",tt,$t(e)),Zt(e,"bitMapFont",et,$t(e)),e}i=t,(e=n).prototype=Object.create(i.prototype),e.prototype.constructor=e,te(e,i);var o=n.prototype;return o.onLoad=function(){this._hasRespinAfterCollectMapAndNoWin=!1,this._showingSettings=!1,this._isIdle=!1,this._totalAmount=0,this._isRPGFinished=!1,this._isGemsDropped=!1,this.controllerMask.opacity=255;var t={getGameInfo:Tt.default.requestGameInfoOnInitWalletHelper.bind(Tt.default)};vt.walletHelper.init(t),this._bindedStopAutoSpin=this._stopAutoSpin.bind(this),this._bindedProcessNextData=this._proceedWithLatestData.bind(this),this._bindedReevaluateBetActions=this._reevaluateBetActions.bind(this),this._bindedPlayIdleLight=this._playIdleLight.bind(this),this._bindedExecuteAutoSpin=this._executeAutoSpin.bind(this),this._initGame(),this.controllerMask.zIndex=jt},o._initializeGameWrapper=function(){var t,e=this;return"sd"===yt.cs_Launch.definition?t=function(){return e._isHDMode=!1,!0}:this._isHDMode=!0,function(i){var n={dataSource:St.gsDataSource,apiClient:Ct.gsAPIClient,callback:i,multiResHandler:Nt.default,printerLibPath:"lib/printer",shouldBecomeSD:t,notifyConfig:{theme:Lt.ThemeType.SLOT,buttonColor:rt.uiAppearanceHelper.v("game.theme_color"),buttonTitleColor:rt.uiAppearanceHelper.v("game.white_color"),titleColor:rt.uiAppearanceHelper.v("game.white_color"),messageColor:rt.uiAppearanceHelper.v("game.white_color")},gameTitle:{name:Vt.t("GemSaviour.Title"),fontFamily:rt.uiAppearanceHelper.v("game.theme_font_family")},refreshWorldCallback:e._refreshWorldCallback.bind(e),updateBalanceCallback:function(t){bt.settingMenuHelper.setBalance(t)},gameLayoutInfo:Ot.gameLayout,autoDeductBalance:!0,updateAudioPlayRateCallback:Gt.updatePlayRate,socketConfig:{enableSessionSocket:!0},enablePerformanceTracker:!0};(0,kt.initializeGame)(n)}},o._initSpinTimeHelperWrapper=function(){return function(t){Dt.spinTimeHelper.init({regularSpinningTime:.3,minimumSpinningTime:.2,spinningTimeDelayOffset:1.05,dataSource:St.gsDataSource}),t()}},o._getGameInfoWrapper=function(){return function(t){shell.ga.sendEvent(shell.ga.CATEGORY_QUERY,shell.ga.EVENT_READ_INFO),(0,Lt.showMessage)(Vt.t("General.LoadingInfo")),Tt.default.requestGameInfoOnInit(t)}},o._setupGameLaunchWrapper=function(){var t=this;return function(e){t._setupComponents(e)}},o._subscribeGameStateEvent=function(){return function(t){Pt.default.subscribeGameStateEvent(),t()}},o._startRPGController=function(){var t=this;return function(e){t._startCallback=e,t._presentController(t._getRPGController(),!1,void 0,t._startCallback)}},o._updateStatusBarWrapper=function(){return function(t){window.shell&&window.shell.StatusBarStyle&&window.shell.setStatusBarStyle(window.shell.StatusBarStyle.white),t()}},o._startGamePlayInitiation=function(){var t=this;return function(e){(0,Ht.initState)(1===Tt.default.nextSpinType?"setup":"idle"),t._gamePlayInitiation(),e()}},o._setGameEventCallback=function(){var t=this;Pt.default.setupGameStateEventCallback(function(){t._isIdle&&(Pt.default.emitGamePauseEvent(),t._isAutoSpin&&t.unschedule(t._bindedExecuteAutoSpin))},function(){t._isIdle&&t._isAutoSpin&&t._autoSpin(1)}),Pt.default.setupGamePlayUIBlockEventCallback(function(){t.spinButton.enableSpin()},function(){t.spinButton.disableSpin()})},o._setGameStateEventCallback=function(){var t=this;return function(e){t._setGameEventCallback(),e()}},o._startGameMusic=function(){var t=this;return function(e){t._pendingUnmute&&bt.settingMenuHelper.toggleSound(),t._rpgController.startMusic(),e()}},o._gamePlayStarted=function(){var t=this;return function(){shell.ga.sendScreen(shell.ga.CATEGORY_GAME),t._verifyGamePause(),t._startController&&t._startController(),t._startController=void 0}},o._verifyGamePause=function(){Pt.default.isGamePause()&&Pt.default.emitGamePauseEvent()},o._initGame=function(){(0,xt.sequenceCallback)(this._initializeGameWrapper(),this._initSpinTimeHelperWrapper(),this._getGameInfoWrapper(),(0,At.setUpSettingMenuHelperWrapper)(),(0,Bt.loadGameAssetsWrapper)(),this._setupGameLaunchWrapper(),this._subscribeGameStateEvent(),(0,At.initAudioManagerWrapper)(),this._setGameStateEventCallback(),this._startRPGController(),(0,At.startGameServiceWrapper)(),this._updateStatusBarWrapper(),this._startGamePlayInitiation(),this._startGameMusic())(this._gamePlayStarted())},o._setupComponents=function(t){var e=this,i=wt.assetManager.getAsset(Rt.GeneralResourceBundle),n=this.spinButton=this.spinButtonNode.getComponent("SpinButton");n.onClick=this.onClick.bind(this),n.init(),Tt.default.didSpinReturned=this.didSpinReturned.bind(this);var o=this.gemsManager;o.delegate=this,o.setGemTemplate(i.gemPrefab),o.specialGemPrefab=i.specialGemPrefab,o.isHDVersion(this._isHDMode),this._gemPrefab=void 0,o.shaderIsEnabled(!1),this.gemsHighlight.isHDVersion(this._isHDMode);var a=new dt.default;a.numberContainer=this.numberContainer;var s=this.gemsPieces;s.delegate=this,s.init(),s.setBreakPointGenerator(a),s.isHDVersion(this._isHDMode);var r=this.keyManager;r.delegate=this,r.initWithData(),r.initAudio(),r.isHDVersion(this._isHDMode);var c=this.keyEffectPlayer=new lt.default;c.keyLayer=this.body,c.keyPrefab=this.keyPrefab,c.isHDVersion(this._isHDMode);var l=cc.instantiate(i.settingFooter);this._settingInfoFooterController=l.getComponent("SettingInfoFooterController"),bt.settingMenuHelper.setButtonPrefab(bt.ButtonPrefabType.BACK_TO_LOBBY,i.backToLobbyButton),bt.settingMenuHelper.setButtonPrefab(bt.ButtonPrefabType.SPIN_OPTIONS,i.spinOptionButton),bt.settingMenuHelper.setButtonPrefab(bt.ButtonPrefabType.BET_OPTIONS,i.betOptionsButton),bt.settingMenuHelper.setButtonPrefab(bt.ButtonPrefabType.MORE_MENU,i.moreMenuButton),bt.settingMenuHelper.setButtonPrefab(bt.ButtonPrefabType.SOUND,i.soundButton),bt.settingMenuHelper.setButtonPrefab(bt.ButtonPrefabType.PAYTABLE,i.payoutButton),bt.settingMenuHelper.setButtonPrefab(bt.ButtonPrefabType.RULE,i.rulesButton),bt.settingMenuHelper.setButtonPrefab(bt.ButtonPrefabType.HISTORY,i.historyButton),bt.settingMenuHelper.setButtonPrefab(bt.ButtonPrefabType.HIDE_MORE,i.hideMoreMenuButton);var h=cc.instantiate(i.settingMenuController),u=this.settingMenuController=h.getComponent("SettingMenuController");this.settingMenuHolder.addChild(h),h.setPosition(0,0),bt.settingMenuHelper.setSettingMenuController(u),bt.settingMenuHelper.addSettingInfoFooter(this._settingInfoFooterController),bt.settingMenuHelper.menuChangedCallBack=n.setButtonHidden.bind(n),(0,Et.setupSettingMenuHelperService)(Ct.gsAPIClient,St.gsDataSource,this._autoSpinCallback.bind(this)),bt.settingMenuHelper.baseBet=Vt.t("General.BaseBet"),bt.settingMenuHelper.showChangeBetReminder=!0,bt.settingMenuHelper.manualUpdateBetFactorCallBack=function(t,i){e._changingBet||e._executeBetChange(function(){e._changeWorldOnBetChange(t,i,void 0),shell.ga.sendEvent(shell.ga.CATEGORY_GAME,shell.ga.EVENT_SLOT_CHANGE_BET,{amount:t*i*Tt.default.betFactor})})},bt.settingMenuHelper.updateBetValues(),bt.settingMenuHelper.setAllButtonsInteractable(!1),bt.settingMenuHelper.soundOn&&(bt.settingMenuHelper.toggleSound(),this._pendingUnmute=!0),(0,Et.setupWalletHelperService)(St.gsDataSource);var d=this._wordingSprites=i.wordingSpritesAtlas,p=cc.instantiate(i.eventTitlePrefab);this._eventTitlePrefab=void 0,p.zIndex=2,this.eventTitle=p.getComponent("EventTitle"),this.eventTitle.init(d.getSpriteFrame("event_title_respin"),d.getSpriteFrame("event_title_big_win"),d.getSpriteFrame("event_title_mega_win"),d.getSpriteFrame("event_title_super_mega_win")),this.eventTitle.isHDVersion(this._isHDMode),this.responsiveEffectLayer.addChild(p);var f=this._monsterWarning=cc.instantiate(i.monsterWarningPrefab);f.getComponent("MonsterWarning").init(this._wordingSprites.getSpriteFrame("title_warning")),this._monsterWarningPrefab=void 0,f.opacity=0,f.active=!1,this.warningHolder.addChild(f);var _=cc.instantiate(i.respinPrefab);this._respinPrefab=void 0,(this._respin=_.getComponent("Respin")).init(),this._respin.delegate=this,this.responsiveEffectLayer.addChild(_),this._onSpinVerified=(0,It.getVerifySpinService)(St.gsDataSource,this._firstSpin.bind(this)),this._initBalanceWin(!0),t()},o._autoSpinCallback=function(){this._isAutoSpin=!0;var t=bt.settingMenuHelper.autoSpinCount,e=bt.settingMenuHelper.singleWinAmount,i=bt.settingMenuHelper.balanceAmountMoreThan,n=bt.settingMenuHelper.balanceAmountLessThan;this.spinButton.setAutoSpinMode(t),Tt.default.autoSpinCount=t,shell.ga.sendEvent(shell.ga.CATEGORY_GAME,shell.ga.EVENT_SLOT_AUTO_SPIN,{count:t,single_win:e,increment:i,decrement:n}),bt.settingMenuHelper.setAllButtonsInteractable(!1),Pt.default.emitGameAutoplayStarted(function(){Tt.default.autoSpinCount=0}),this._autoSpin(1)},o._initBalanceWin=function(t){var e=this.infoBoard,i=Tt.default.accumulatedWin;Tt.default.nextSpinType===nt.SPIN_TYPE.NORMAL_SPIN?i>0&&(0,Wt.checkOperatorProfit)(i,St.gsDataSource)?e.setWinAmount(i,!0,!0):t?e.setMessage(Vt.t("InfoBoard.ClickToStart"),!1,!0,!1):(0,Wt.checkOperatorProfit)(i,St.gsDataSource)?e.clearMessage():e.setMessage(Vt.t("InfoBoard.ClickToStart"),!1,!0,!1):i>0&&(0,Wt.checkOperatorProfit)(i,St.gsDataSource)?e.setWinAmount(i,!0):(0,Wt.checkOperatorProfit)(i,St.gsDataSource)?e.clearMessage():e.setMessage(Vt.t("InfoBoard.ClickToStart"),!1,!0,!1),this._totalAmount=i,(0,Mt.updateSettingFooterService)(St.gsDataSource)},o._firstSpin=function(){this._eliminateCount=0,this._megaWinCount=0,this.megaWin.disappear(!0),this.superMegaWin.disappear(!0),this._isRolling?this._endRoll():this._totalAmount=0,this.infoBoard.clearMessage(.5),this._isAutoSpin||this.spinButton.accelerateSpin(),this._spin(nt.SPIN_TYPE.NORMAL_SPIN)},o._spin=function(t){var e=this._rpgController,i=this.gemsManager;this._spinType=t,t===nt.SPIN_TYPE.NORMAL_SPIN?(e&&(e.didStartSpin(),bt.settingMenuHelper.setAllButtonsInteractable(!1)),this._isDataReadyToProcess=!1,this._hasSpinReturned=!1,i.onSpin(),this.scheduleOnce(this._dataProcessReady,Dt.spinTimeHelper.regularSpinningTime)):t===nt.SPIN_TYPE.RESPIN&&(this._respin.prepareRespin(this.getRespinSymbolPosition()),i.removeRespin(this._respinIndex)),Tt.default.requestSpinData()},o._dataProcessReady=function(){this._hasSpinReturned?this._subSpinReturned():this._isDataReadyToProcess=!0},o.getNextData=function(){Tt.default.getNextData(this._bindedProcessNextData)},o._proceedWithLatestData=function(){Tt.default.updateBalanceWin(),this._rpgController.didSpinReturned(),this.keyManager.getNextData(),this.gemsManager.getNextData()},o.didSpinReturned=function(){Tt.default.updateBalanceWin(!0);var t=this._spinType;t===nt.SPIN_TYPE.RESPIN||t===nt.SPIN_TYPE.SPECIAL_SYMBOL_SPIN||this._isDataReadyToProcess?this._subSpinReturned():this._hasSpinReturned=!0},o._subSpinReturned=function(){var t=this._spinType,e=this.gemsManager;this.keyManager.updateDataSource(),e.didSpinReturned(t);var i=t===nt.SPIN_TYPE.NORMAL_SPIN;this._rpgController.didSpinReturned(i),t===nt.SPIN_TYPE.RESPIN?this._respin.playRespin():t!==nt.SPIN_TYPE.SPECIAL_SYMBOL_SPIN&&t!==nt.SPIN_TYPE.RESPIN&&e.playGemDropAnimation(this._dataProcessReady)},o.requestNextData=function(){(0,Ht.setTransitionData)({noBet:!0}),(0,Ht.goToStateCallback)("action")(function(){Tt.default.requestSpinData(!0)})},o._presentController=function(t,e,i,n){var o=this,a=this._presentingController,s=this.controllerMask,r=function(){((t||xt.emptyObj).didAppear||xt.emptyFunc).call(t),o._initGems(),it.gamePreference.story||(o._disableComponents(),o._setupStory()),i&&i(),n&&n(),o._startCallback=void 0},c=function(){var t=function(){s.runAction(cc.fadeOut(.2))};e?((0,Lt.hideFullLoadingPage)(),r(),t()):(r(),n?o._startController=t:t())},l=function(){((a||xt.emptyObj).willDisappear||xt.emptyFunc).call(a)},h=function(){((a||xt.emptyObj).didDisappear||xt.emptyFunc).call(a),a&&a.getName&&(o._lastControllerName=a.getName()),a&&a.destroy(),o._presentingController=t,o.scheduleOnce(function(){((t||xt.emptyObj).willAppear||xt.emptyFunc).call(t,c)},.6)};e?s.runAction(cc.sequence([cc.callFunc(l),cc.fadeIn(.3),cc.callFunc(function(){(0,Lt.showFullLoadingPage)(),h()})])):(this.controllerMask.opacity=255,l(),n?(t.setupRPG(h),t.launchGame()):h())},o._initGems=function(){this._gemsInited||(this.gemsManager.init(this.isMapAppear()),this._gemsInited=!0)},o._gamePlayInitiation=function(t){if(it.gamePreference.story){var e=this.spinButton,i=Tt.default.nextSpinType;this._isIdle=!0,i!==nt.SPIN_TYPE.NORMAL_SPIN&&(this._isIdle=!1,this._startingEliminate=!0,e.accelerateSpin(!0),this._rpgController.didStartSpin(Tt.default.rpgHasEnemy),i===nt.SPIN_TYPE.RESPIN||i===nt.SPIN_TYPE.SPECIAL_SYMBOL_SPIN?this._specialSpin(i):(this.gemsManager.initCheckElimination(),this._rpgController.didGemEliminate())),this._isIdle&&this._uiIdleState(!0),t&&t()}else this._playStory()},o.getRespinSymbolPosition=function(){var t=this.gemsManager.getGemWorldPosition(this._respinIndex);return this.responsiveEffectLayer.convertToNodeSpaceAR(t)},o._specialSpin=function(t){var e=this;t===nt.SPIN_TYPE.RESPIN&&(this._respinIndex=Tt.default.respinIndex),(0,Ht.goToStateCallback)("action")(function(){e._spin(t)})},o._getRPGController=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var i=this._rpgController=new ot.default;return i.delegate=this,i.head=this.head,i.victoryBannerTitle=this._wordingSprites.getSpriteFrame("victory_ribbon_txt"),i.victoryLabelBattleReward=this._wordingSprites.getSpriteFrame("victory_label_battle_rewards"),i.victoryLabelTreasureReward=this._wordingSprites.getSpriteFrame("victory_label_treasure_rewards"),i.chestPrefab=this._chestPrefab,i.reinit=t,i.keyEffectPlayer=this.keyEffectPlayer,i.itemGenerator=this.itemGenerator,i.effectLayer=this.controllerEffectLayer,i.responsiveEffectLayer=this.responsiveEffectLayer,i.responsiveEffectFrontLayer=this.responsiveEffectFrontLayer,i.didPlaceSymbol=this.didPlaceSymbol.bind(this),i.willSwitchWorld=this.willSwitchLevel.bind(this),i.didObtainMoney=this.addRPGMoney.bind(this),i.rpgWillFinishAction=this.rpgWillFinishAction.bind(this),i.shakeScreenEffect=this.shakeScreenEffect.bind(this),i.isHDVer=this._isHDMode,i.font=this.bitMapFont,t||e||(i.worldResourcesLoaded=!0),i},o.shakeScreenEffect=function(){this.cameraAnim.play("scene_shake")},o.onClick=function(t,e){var i=this;if(void 0===e&&(e=!1),t||!this._stopAutoSpin()&&this._isIdle){this.spinButton.playSpinClickAudio();var n=Yt.MOUSE_ON_CLICK_EVENT;t?n=Yt.AUTOSPIN:e&&(n=Yt.SPACE_BAR_KEY_DOWN_EVENT),this._isIdle=!1,(0,Ht.transitionCompleteCallback)()(function(){i._onSpinVerified(n)})}},o._rollMoney=function(t){var e=this._rollUnit*t*60,i=this._totalRollAmount;this._currentRollAmount+=e;var n=this._currentRollAmount,o=n>i,a=n-i,s=o||Math.abs(a)<.001;if(s){this._isRolling=!1,o&&(e-=a);var r=this._totalAmount+e,c=this._rpgMoneyAddedCallback;this._rpgMoneyAddedCallback=void 0,c&&c(r)}this._victoryRollTotal+=e;var l=(0,xt.formatCurrency)(this._victoryRollTotal,"","");this._rpgController.rollVictoryPoints(l,s),this.addWinAmount(e,!s,s)},o.addRPGMoney=function(t,e,i){if(!e){var n=t===Tt.default.getCurrentTotalWinAmount(!1);return this.addWinAmount(t,!1,n),void(i&&i())}if(this._rpgMoneyAddedCallback=i,this._isRolling){this._totalRollAmount+=t;var o=this._rollUnit,a=this._currentRollAmount,s=100-a/o;o=(this._totalRollAmount-a)/s,this._rollUnit=Math.round(1e4*o)/1e4}else{this._victoryRollTotal=0;var r=this._totalRollAmount=t;this._currentRollAmount=0,this._rollUnit=Math.round(r/100*1e4)/1e4,this._isRolling=!0}},o._endRoll=function(){this._forceStop=!0,this._rollUnit=this._totalRollAmount-this._currentRollAmount},o.addWinAmount=function(t,e,i,n){var o=wt.assetManager.getAsset(Rt.GeneralGameAudioBundle),a=Tt.default.winThreshold.mediumWinThreshold,s=Tt.default.winThreshold.bigWinThreshold;this._totalAmount=this._totalAmount+t;var r=this._totalAmount;if(e&&(r+=t*(.2*Math.random()-.1)),r=(0,xt.toDecimalWithExp)(r,2),this._forceStop)this._totalAmount=0,this._forceStop=!1,bt.settingMenuHelper.setBalance(Tt.default.getCurrentBalance());else{if(r>=s){var c=t<.25;this.superMegaWin.setNumber(r,e,c,i),this._moneyRollingSound&&(gt.default.stopEffect(this._moneyRollingSound,this._moneyRollingKey),this._moneyRollingSound=gt.default.playEffect(o.superMegaWinRoll,!0),this._moneyRollingKey=o.superMegaWinRoll),this.megaWin.disappear(!0)}else r>=a&&this.megaWin.setNumber((0,xt.formatCurrency)(r,"",""),e,n);i||this._moneyRollingSound||(0,Wt.checkOperatorProfit)(r,St.gsDataSource)&&(this._moneyRollingSound=gt.default.playEffect(o.moneyRolling,!1,.92),this._moneyRollingKey=o.moneyRolling),i?(bt.settingMenuHelper.setBalance(Tt.default.getCurrentBalance()),bt.settingMenuHelper.setWinAmount(Tt.default.getCurrentWinAmount())):bt.settingMenuHelper.setWinAmount(r)}if(i){this._moneyRollingSound&&(gt.default.stopEffect(this._moneyRollingSound,this._moneyRollingKey),this._moneyRollingSound=void 0,this._moneyRollingKey=void 0),gt.default.playEffect(o.moneyReached),(0,Wt.checkOperatorProfit)(r,St.gsDataSource)&&this.infoBoard.setWinAmount(r);var l=Tt.default.getCurrentTotalWinAmount(),h=Tt.default.getCurrentTransactionId(),u=St.gsDataSource.transactionModel,d=u.selectedBetLevelValue,p=u.selectedBetSizeValue,f=St.gsDataSource.systemModel.maxLineNumber,_=(0,xt.toDecimalWithExp)(p*d*f,2),m=Math.floor(l/_),g=l>=s?"BigWin":l>=a?"MediumWin":"SmallWin";Pt.default.emitWinAnnouncement({winType:g,transactionId:h,totalWinAmount:l,winMultiplier:m})}else(0,Wt.checkOperatorProfit)(r,St.gsDataSource)&&this.infoBoard.setRollingWinAmount(r,e)},o.gemsTileHighlight=function(t){this.gemsHighlight.setHighlight(t)},o.playShockWave=function(t,e){this.shockWave.setShockWave(t,e)},o.gemBeginShake=function(t,e,i,n){this.gemsPieces.showBreakPoint(Tt.default.getGemWinAmount(t),e,i,n)},o.breakGems=function(t,e,i){this.gemsPieces.breakGems(t,e,i),this.keyManager.litKeyTile(i)},o.willEliminate=function(t){void 0===t&&(t=!1),this._eliminateCount++,Tt.default.hasRpgHeroInfo()&&(Tt.default.rpgHeroEliminateCount=this._eliminateCount),Tt.default.rpgHasEnemy&&!t&&this._rpgController.didGemEliminate()},o.startEliminate=function(t){if(t>5){this._megaWinCount++;var e=this._megaWinCount;e>2?this.eventTitle.playSuperMegaWin():e>1?this.eventTitle.playMegaWin():this.eventTitle.playBigWin()}Tt.default.rpgHasEnemy||this._rpgController.didGemEliminate(),this.gemsHighlight.removeHighlight()},o.getGemPosition=function(t){var e=this.controllerEffectLayer,i=this.gemsManager.getGemWorldPosition(t);return e.convertToNodeSpaceAR(i)},o.getInfoboardPosition=function(){var t=this.controllerEffectLayer,e=this.infoBoard.node,i=e.parent.convertToWorldSpaceAR(e.position);return t.convertToNodeSpaceAR(i)},o.didPlaceSymbol=function(){this.gemsManager.setSpecialGem(),this._isHDMode&&this.keyManager.playDarken()},o.specialGemEnd=function(){this._isHDMode&&this.keyManager.playBrighten()},o.specialLightningCharge=function(t){var e=this.controllerEffectLayer.convertToNodeSpaceAR(this.gemsManager.getGemWorldPosition(t));this._rpgController.executeSpecialSymbolSpecialLightningCharge(e)},o.rpgWillFinishAction=function(){this._isRPGFinished=!0,this.showMonsterWarning(!1),this._allEndAction()},o._allEndAction=function(){var t=this;if(this._hasRespinAfterCollectMapAndNoWin&&(this._hasRespinAfterCollectMapAndNoWin=!1,this._isGemsDropped=!0),this._isRPGFinished&&this._isGemsDropped){Tt.default.nextSpinType!==nt.SPIN_TYPE.RESPIN||Tt.default.keyState!==nt.KEY_STATE.GET_MAP||Tt.default.hasWinPosition||(this._hasRespinAfterCollectMapAndNoWin=!0),this._isRPGFinished=!1,this._isGemsDropped=!1;var e=Tt.default.nextSpinType;e===nt.SPIN_TYPE.RESPIN||e===nt.SPIN_TYPE.SPECIAL_SYMBOL_SPIN?(0,Ht.transitionCompleteCallback)()(function(){t._specialSpin(e)}):Tt.default.rpgObstacleIsFinished?(this.megaWin.disappear(),this.superMegaWin.disappear(),0===St.gsDataSource.transactionModel.totalWinAmount&&bt.settingMenuHelper.setBalance(St.gsDataSource.playerModel.balance),(0,Ht.transitionCompleteCallback)()(function(){t.isKeyObtained()?t.updateKeyTileState():t._uiIdleState()})):(bt.settingMenuHelper.setBalance(St.gsDataSource.playerModel.balance),(0,Ht.transitionCompleteCallback)()(function(){t.megaWin.disappear(),t.superMegaWin.disappear(),(0,Ht.goToStateCallback)("setup")(function(){t.isKeyObtained()?t.updateKeyTileState():t._uiIdleState()})}))}},o._uiIdleState=function(t){void 0===t&&(t=!1),this._isRefreshingWorld?(this._isRefreshingWorld=!1,(0,xt.sequenceCallback)((0,It.reevaluateBetServiceWrapper)(St.gsDataSource,this._bindedReevaluateBetActions),this._checkHasInitMap(t))(this._setupIdleStateEffect())):(0,xt.sequenceCallback)((0,Ht.goToStateCallback)("idle",!0),(0,It.checkWalletCompletedServicesWrapper)(this._checkAndStopAutoSpin(),(0,It.reevaluateBetServiceWrapper)(St.gsDataSource,this._bindedReevaluateBetActions)),this._checkHasInitMap(t),this._setupIdleAnimationWrapper(),(0,Ht.transitionCompleteCallback)(),(0,Ht.goToStateCallback)("action",!0))(this._checkAutoSpinWrapper())},o._checkHasInitMap=function(t){var e=this;return function(i){t&&e.isMapAppear()?(e._isIdle=!1,e._initPlayingKeyCallback=i,bt.settingMenuHelper.setAllButtonsInteractable(!1),e.spinButton.accelerateSpin(!0),e.updateKeyTileState()):i()}},o.willSwitchLevel=function(){this._presentController(this._getRPGController(!0),!0)},o._restartGems=function(t){this._isRefreshingWorld=!0,this.gemsManager.restartAllGem(this.isMapAppear()),t&&t(),this._uiIdleState(!0)},o.gemsDropFinish=function(){this._isRPGFinished=!1,this._rpgController.didGemDroppedFinish(),this._automationSymbolDrop(),this._gemHasEliminate&&(this._automationScrollEnded(),this._isGemsDropped=!0,this._allEndAction())},o.updateKeyTileState=function(){this.keyManager.updateAllTileState()},o.isMapAppear=function(){return this.keyManager.checkIfMapAppear()},o.isKeyObtained=function(){return this.keyManager.checkIfKeyObtained()},o.canContinueDrop=function(t){return this._gemHasEliminate=!0,!this.isMapAppear()||(this._gemHasEliminate=t,!t)},o._setupStory=function(){var t=wt.assetManager.getAsset(Rt.GeneralResourceBundle),e=wt.assetManager.getAsset(Rt.StoryResourceBundle),i=this._storyPrefab=e.storyPrefab,n=cc.instantiate(i),o=this._story=n.getComponent("Story");o.delegate=this,o.chatBubblePrefab=t.chatBubblePrefab,n.parent=this.node,n.zIndex=Ft.EN_GAME_LAYER_Z_INDEX_HIGH+48},o._playStory=function(){this._story.composeStory()},o._enableComponents=function(){this.spinButton.active=!0},o._disableComponents=function(){this.spinButton.active=!1},o.storyFinish=function(){var t=this;this._story.node.removeFromParent(),this._story.node.destroy(),this._story=void 0,wt.assetManager.releaseAsset(Rt.StoryResourceBundle),it.gamePreference.story=!0,this._enableComponents(),this._rpgController.didStoryEnd(function(){t._gamePlayInitiation(),t._rpgController.executePetLoginTalk()})},o._autoSpinConditionCheck=function(){var t=Tt.default.accumulatedWin,e=Tt.default.balance;return bt.settingMenuHelper.isBalanceHitTargetInAutoSpinMode(t,e)},o._stopAutoSpin=function(){return!!this._isAutoSpin&&(this._isAutoSpin=!1,Tt.default.autoSpinCount=-1,this.unschedule(this._bindedExecuteAutoSpin),this.spinButton.setSpinMode(),Pt.default.emitGameAutoplayStopped(),this._isIdle?bt.settingMenuHelper.setAllButtonsInteractable(!0):this.spinButton.accelerateSpin(!0),!0)},o._autoSpin=function(t){void 0===t&&(t=0),t>0?this.scheduleOnce(this._bindedExecuteAutoSpin,t):this._executeAutoSpin()},o._executeAutoSpin=function(){if(this.onClick(!0),Tt.default.autoSpinCount>0){var t=Tt.default.autoSpinCount-1;Tt.default.autoSpinCount=t,this.spinButton.setAutoCounter(t)}},o.keyTileFinishDisplay=function(){if(this._initPlayingKeyCallback){var t=this._initPlayingKeyCallback;this._initPlayingKeyCallback=void 0,t()}else this._gemHasEliminate?this.gemsManager.resumeDropAction():(this._automationScrollEnded(),this._isGemsDropped=!0,this._allEndAction())},o.shineKey=function(){this.keyEffectPlayer.spawnKey(cc.v2(244,1066)),this.grayKey.active=!1},o.getKey=function(){this.keyEffectPlayer.keyStartRotate()},o.showKeyTrayWithAnimation=function(t,e){this.grayKey.active=e;var i=this.keyTray;if(-374!==i.position.x){var n=i.position.y;t?(i.stopAllActions(),i.runAction(cc.moveTo(.2,-374,n))):i.setPosition(-374,n),i.position.x=-374}},o.hideGrayKey=function(){var t=this.keyTray;if(-255!==t.position.x){var e=t.position.y;t.runAction(cc.moveTo(.2,-255,e)),t.position.x=-255}this.keyManager.keyHide()},o.keyDisappearAnimFinish=function(){this._rpgController.didReceiveKey(),this._uiIdleState()},o.startRespin=function(){this.eventTitle.playRespin(),this.gemsManager.gemsRespin(this._respinIndex),this._rpgController.didGemEliminate(!0)},o.showMonsterWarning=function(t){var e=this._monsterWarning;t?(e.active=!0,e.runAction(cc.fadeIn(.2))):e.active&&e.runAction(cc.sequence(cc.fadeOut(.2),cc.callFunc(function(){e.active=!1})))},o.update=function(t){var e=this._presentingController;e&&e.update&&e.update(t),this._isRolling&&this._rollMoney(t)},o._playIdleLight=function(){this.gemsManager.playIdleLight()},o._schedulePlayIdleLight=function(){this._isHDMode&&this.schedule(this._bindedPlayIdleLight,6)},o._unschedulePlayIdleLight=function(){this._isHDMode&&this.unschedule(this._bindedPlayIdleLight)},o._executeBetChange=function(t){this._changingBet=!0,this.spinButton.disableSpin(),this.controllerMask.runAction(cc.sequence([cc.fadeIn(.3),cc.callFunc(function(){t&&t()})]))},o._changeWorldOnBetChange=function(t,e,i){var n=this;(0,xt.spawnCallback)((0,xt.delayCallback)(.3),function(t){(0,Lt.showFullLoadingPage)(),t()},function(i){Tt.default.requestGameInfoOnBetChange(t,e,i)})(function(){n._reinitOnChangeWorld(!0,i),n._changingBet=!1})},o._reinitOnChangeWorld=function(t,e){var i=this;this._isIdle=!1,this.hideGrayKey(),this.shockWave.stopColorChange(),this.keyManager.restartKeyManager(),this.keyEffectPlayer.removeKey(),(0,Et.setupRefreshWorldService)(St.gsDataSource),this._initBalanceWin(),this._presentController(this._getRPGController(!1,!0),!1,function(){t&&(0,Lt.hideFullLoadingPage)(),i._restartGems(e)})},o._refreshWorldCallback=function(t){var e=St.gsDataSource.systemModel,i=e.betLevelList,n=e.betSizeList,o=St.gsDataSource.transactionModel,a=o.betSizeValue,s=o.betLevelValue;bt.settingMenuHelper.betSizeList=n,bt.settingMenuHelper.betSizeValue=a,bt.settingMenuHelper.betLevelList=i,bt.settingMenuHelper.betLevelValue=s,bt.settingMenuHelper.reevaluateBet()?this._reevaluateBetActions(t):(this.spinButton.disableSpin(),this._reinitOnChangeWorld(!1,t))},o._idle=function(){this.spinButton.decelerateSpin(),this.spinButton.enableSpin(),bt.settingMenuHelper.setAllButtonsInteractable(!0)},o._reevaluateBetActions=function(t){var e=this;this._executeBetChange(function(){e._changeWorldOnBetChange(bt.settingMenuHelper.betSizeValue,bt.settingMenuHelper.betLevelValue,t)})},o._checkAndStopAutoSpin=function(){var t=this;return function(e){t._isAutoSpin&&t._stopAutoSpin(),e&&e()}},o._checkAutoSpinWrapper=function(){var t=this;return function(e){t._isIdle=!0,t._isAutoSpin?Tt.default.autoSpinCount>0&&!t._autoSpinConditionCheck()?Pt.default.isGamePause()?Pt.default.emitGamePauseEvent():t._autoSpin(1):(t._stopAutoSpin(),t._verifyGamePause()):(t._startingEliminate&&(t._startingEliminate=!1),t._verifyGamePause(),t._idle()),e&&e()}},o._setupIdleStateEffect=function(){var t=this;return function(e){var i=Tt.default.accumulatedWin;i>0&&(0,Wt.checkOperatorProfit)(i,St.gsDataSource)&&t.infoBoard.setWinAmount(i,!0,!0),(0,Mt.updateSettingFooterService)(St.gsDataSource),t._isIdle=!0,t._idle(),e&&e()}},o._setupIdleAnimationWrapper=function(){var t=this;return function(e){var i=Tt.default.accumulatedWin;i>0&&(0,Wt.checkOperatorProfit)(i,St.gsDataSource)&&t.infoBoard.setWinAmount(i,!0,!0),t.shockWave.stopColorChange(),t._rpgController.executeStopWalkTimer(),e&&e()}},o._automationScrollEnded=function(){},o._automationSymbolDrop=function(){},n}(cc.Component),k=ee(R.prototype,"head",[n],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),x=ee(R.prototype,"body",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),D=ee(R.prototype,"controllerMask",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),L=ee(R.prototype,"spinButtonNode",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),N=ee(R.prototype,"keyPrefab",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),F=ee(R.prototype,"gemsManager",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),O=ee(R.prototype,"gemsPieces",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),G=ee(R.prototype,"keyManager",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),H=ee(R.prototype,"itemGenerator",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),W=ee(R.prototype,"infoBoard",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),U=ee(R.prototype,"gemsHighlight",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),z=ee(R.prototype,"responsiveEffectLayer",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),V=ee(R.prototype,"responsiveEffectFrontLayer",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),j=ee(R.prototype,"controllerEffectLayer",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Y=ee(R.prototype,"grayKey",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),q=ee(R.prototype,"keyTray",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),K=ee(R.prototype,"megaWin",[v],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),X=ee(R.prototype,"superMegaWin",[b],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Q=ee(R.prototype,"shockWave",[S],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),J=ee(R.prototype,"cameraAnim",[C],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),Z=ee(R.prototype,"numberContainer",[A],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),$=ee(R.prototype,"settingMenuHolder",[E],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),tt=ee(R.prototype,"warningHolder",[M],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),et=ee(R.prototype,"bitMapFont",[T],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),ee(R.prototype,"_firstSpin",[P],Object.getOwnPropertyDescriptor(R.prototype,"_firstSpin"),R.prototype),ee(R.prototype,"_automationScrollEnded",[I],Object.getOwnPropertyDescriptor(R.prototype,"_automationScrollEnded"),R.prototype),ee(R.prototype,"_automationSymbolDrop",[w],Object.getOwnPropertyDescriptor(R.prototype,"_automationSymbolDrop"),R.prototype),B=R))||B);i.default=Qt,e.exports=i.default,cc._RF.pop()}function Jt(t){return t&&t.__esModule?t:{default:t}}function Zt(t,e,i,n){i&&Object.defineProperty(t,e,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function $t(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function te(t,e){return(te=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function ee(t,e,i,n,o){var a={};return Object.keys(n).forEach(function(t){a[t]=n[t]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce(function(i,n){return n(t,e,i)||i},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(t,e,a),a=null),a}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",AudioManager:"AudioManager",AutomationDecorator:"AutomationDecorator",BVFrameworkEnum:"BVFrameworkEnum",BreakPointGenerator:"BreakPointGenerator",DataManager:"DataManager",Enum:"Enum",GSApiClient:"GSApiClient",GSDataSource:"GSDataSource",GameInitializationHandler:"GameInitializationHandler",GameLayout:"GameLayout",GamePreference:"GamePreference",GameUtils:"GameUtils",GemPiecesGenerator:"GemPiecesGenerator",GemsHighlight:"GemsHighlight",GemsManager:"GemsManager",GeneralBundle:"GeneralBundle",GsGameLaunchServices:"GsGameLaunchServices",IdleServices:"IdleServices",InfoBoard:"InfoBoard",ItemGenerator:"ItemGenerator",KeyEffectPlayer:"KeyEffectPlayer",KeyManager:"KeyManager",LaunchServices:"LaunchServices","MainControiller.spec":"MainControiller.spec",MegaWin:"MegaWin",MultiResHandler:"MultiResHandler",NotifyHelper:"NotifyHelper",PGGameHandler:"PGGameHandler",RPGController:"RPGController",ResultServices:"ResultServices",RtConfig:"RtConfig",SettingMenuHelper:"SettingMenuHelper",SetupServices:"SetupServices",ShockWave:"ShockWave",SpinTimeHelper:"SpinTimeHelper",SuperMegaWin:"SuperMegaWin",TransactionStateMachineHandler:"TransactionStateMachineHandler",UIAppearanceHelper:"UIAppearanceHelper",Utils:"Utils",WalletHelper:"WalletHelper"}],MapItem:[function(t,e,i){"use strict";if(!cc._RF.push(e,"81403Ll5qRInrvGTLEQAVI4","MapItem")){i.__esModule=!0,i.default=void 0;var n,o=(n=t("SpawnableItem"))&&n.__esModule?n:{default:n},a=t("Enum"),s=cc.Class({extends:o.default,properties:{mapSprite:cc.Sprite,shineAnim:cc.Animation,particle:cc.ParticleSystem},setZIndex:function(t){this.node.zIndex=t},playAnimation:function(){this.shineAnim.node.opacity=255,this.particle.resetSystem(),this.particle.node.active=!0,this.shineAnim.play("new_key_glow_effect")},stopAnimation:function(){this.shineAnim.node.opacity=0,this.particle.stopSystem(),this.shineAnim.stop()},disableParticle:function(){this.particle.stopSystem(),this.particle.node.active=!1},getItemType:function(){return a.ItemType.Map}});i.default=s,e.exports=i.default,cc._RF.pop()}},{Enum:"Enum",SpawnableItem:"SpawnableItem"}],Map:[function(t,e,i){"use strict";if(!cc._RF.push(e,"92067n5L3VMZpK0tDR0Fjj8","Map")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Component,properties:{key1Sprite:cc.Sprite,key2Sprite:cc.Sprite,key3Sprite:cc.Sprite,key4Sprite:cc.Sprite,mapScroll:cc.Sprite,headShineParticle:cc.ParticleSystem,bodyShineParticle:cc.ParticleSystem,_isHDVer:cc.Boolean},isHDVersion:function(t){this._isHDVer=t},playKeyAppearAnimationWithKeyType:function(t){switch(t){case 1:this.key1Sprite.node.active=!0,this.key2Sprite.node.active=!1,this.key3Sprite.node.active=!1,this.key4Sprite.node.active=!1,this.key1Sprite.node.angle=0;break;case 2:this.key1Sprite.node.active=!1,this.key2Sprite.node.active=!1,this.key3Sprite.node.active=!0,this.key4Sprite.node.active=!1,this.key3Sprite.node.angle=0;break;case 3:this.key1Sprite.node.active=!1,this.key2Sprite.node.active=!1,this.key3Sprite.node.active=!0,this.key4Sprite.node.active=!1,this.key3Sprite.node.angle=-180;break;case 4:this.key1Sprite.node.active=!0,this.key2Sprite.node.active=!1,this.key3Sprite.node.active=!1,this.key4Sprite.node.active=!1,this.key1Sprite.node.angle=-180;break;case 5:this.key1Sprite.node.active=!1,this.key2Sprite.node.active=!0,this.key3Sprite.node.active=!1,this.key4Sprite.node.active=!1,this.key2Sprite.node.angle=90;break;case 6:this.key1Sprite.node.active=!1,this.key2Sprite.node.active=!1,this.key3Sprite.node.active=!1,this.key4Sprite.node.active=!0,this.key4Sprite.node.angle=-90;break;case 7:this.key1Sprite.node.active=!1,this.key2Sprite.node.active=!1,this.key3Sprite.node.active=!1,this.key4Sprite.node.active=!0,this.key4Sprite.node.angle=90;break;case 8:this.key1Sprite.node.active=!1,this.key2Sprite.node.active=!0,this.key3Sprite.node.active=!1,this.key4Sprite.node.active=!1,this.key2Sprite.node.angle=-90}this.getComponent(cc.Animation).play()},startShine:function(){this._isHDVer?(this.headShineParticle.resetSystem(),this.headShineParticle.node.active=!0):(this.headShineParticle.stopSystem(),this.headShineParticle.node.active=!1)},mapOpen:function(){this._isHDVer?(this.bodyShineParticle.resetSystem(),this.bodyShineParticle.node.active=!0):(this.bodyShineParticle.stopSystem(),this.bodyShineParticle.node.active=!1)},keyMoveEnd:function(){this.mapDelegate.keyMoveToRightPosition()},animFinish:function(){this.headShineParticle.stopSystem(),this.bodyShineParticle.stopSystem(),this.mapDelegate.mapAnimFinish(),this._isHDVer=void 0},mapBeginDrop:function(){this.mapDelegate.mapBeginDrop()},testKey1:function(){this.playKeyAppearAnimationWithKeyType(1)},testKey2:function(){this.playKeyAppearAnimationWithKeyType(2)},testKey3:function(){this.playKeyAppearAnimationWithKeyType(3)},testKey4:function(){this.playKeyAppearAnimationWithKeyType(4)},testKey5:function(){this.playKeyAppearAnimationWithKeyType(5)},testKey6:function(){this.playKeyAppearAnimationWithKeyType(6)},testKey7:function(){this.playKeyAppearAnimationWithKeyType(7)},testKey8:function(){this.playKeyAppearAnimationWithKeyType(8)}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],MegaWin:[function(t,e,i){"use strict";if(!cc._RF.push(e,"d8f3aTOfJhBS7DMA9+OmIBy","MegaWin")){i.__esModule=!0,i.default=void 0;var n,o=(n=t("AudioLibrary"))&&n.__esModule?n:{default:n},a=t("AssetManager"),s=t("GeneralBundle"),r=t("Utils"),c=[cc.v2(0,20),cc.v2(-125,21),cc.v2(-240,20),cc.v2(-370,20),cc.v2(95,20),cc.v2(173,20),cc.v2(287,20),cc.v2(370,20),cc.v2(157,85),cc.v2(-187,85),cc.v2(-137,-28),cc.v2(136,-28)],l=cc.Class({extends:cc.Component,properties:{infoLabel:cc.Label,burstLabel:cc.Node,winLighting:cc.Animation,shining:cc.Node,thunder:cc.Node,lighting:cc.Node},onLoad:function(){this._anim=this.getComponent(cc.Animation),this._burstLabel=this.burstLabel.getComponent(cc.Label),this.node.zIndex=8,this._canDisappear=!0},setNumber:function(t,e,i){var n=shell.I18n,r=a.assetManager.getAsset(s.GeneralGameAudioBundle);if(this.lightingZap=r.megaWinZap,this.infoLabel.string=this._burstLabel.string=n.t("InfoBoard.WinGame")+" "+t,this._appeared){var c=this.burstLabel;c.opacity=180,c.scaleX=c.scaleY=1,c.runAction(cc.spawn([cc.fadeOut(.4),cc.scaleTo(.5,2.3)])),i&&o.default.playEffect(this.lightingZap,!1,.92)}else this._anim.play("super_mega_win_appear"),this._appeared=!0,o.default.playEffect(this.lightingZap,!1,.92);this._canDisappear||this._isRolling||this.unschedule(this._timeOutDisappear),!this._isRolling&&e&&(this._canDisappear=!1,this._isRolling=!0),e||(this._canDisappear=!1,this._isRolling=!1,this._playWinAnim(),this.scheduleOnce(this._timeOutDisappear,2))},_playWinAnim:function(){this.shining.active=!0,this.thunder.active=!0,this.shining.getComponent(cc.Animation).play(),this.winLighting.play();var t=(0,r.randomInt)(0,c.length-1),e=c[t];this.thunder.setPosition(e),this.thunder.getComponent(cc.Animation).play()},_timeOutDisappear:function(){this._canDisappear=!0,this._disappearPending&&(this._disappearPending=!1,this.disappear())},disappear:function(t){this._appeared?t||this._canDisappear?(this._canDisappear||this.unschedule(this._timeOutDisappear),this._isRolling=!1,this._anim.play("super_mega_win_disappear"),this._appeared=!1):this._disappearPending=!0:this._disappearPending=!t},shineDisappear:function(){this.shining.active=!1,this.thunder.active=!1},testNumber:function(){this.setNumber(Math.floor(1e5*Math.random()))}});i.default=l,e.exports=i.default,cc._RF.pop()}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",GeneralBundle:"GeneralBundle",Utils:"Utils"}],MoneyBag:[function(t,e,i){"use strict";if(!cc._RF.push(e,"d1c87LtZypNepiWQieM/G0g","MoneyBag")){i.__esModule=!0,i.default=void 0;var n=l(t("SpawnableItem")),o=l(t("AudioLibrary")),a=t("Enum"),s=t("AssetManager"),r=t("GeneralBundle"),c=cc.Class({extends:n.default,properties:{moneyBagSprite:cc.Sprite,shineAnim:cc.Animation,particle:cc.ParticleSystem},onLoad:function(){var t=s.assetManager.getAsset(r.GeneralGameAudioBundle);this.dropSound=t.stoneDropBag,this._isRelicBag=!1},setZIndex:function(t){this.node.zIndex=t},playDropSound:function(){o.default.playEffect(this.dropSound)},disableParticle:function(){this.particle.stopSystem(),this.particle.node.active=!1},playAnimation:function(){this.shineAnim.node.opacity=255,this.particle.resetSystem(),this.particle.node.active=!0,this.shineAnim.play("new_key_glow_effect")},stopAnimation:function(){this.shineAnim.node.opacity=0,this.particle.stopSystem(),this.shineAnim.stop()},getItemType:function(){return this._isRelicBag?(this._isRelicBag=!1,a.ItemType.Bag):a.ItemType.Monsterbag},setItemToRelicBag:function(){this._isRelicBag=!0}});i.default=c,e.exports=i.default,cc._RF.pop()}function l(t){return t&&t.__esModule?t:{default:t}}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",Enum:"Enum",GeneralBundle:"GeneralBundle",SpawnableItem:"SpawnableItem"}],MonsterWarning:[function(t,e,i){"use strict";if(!cc._RF.push(e,"53e2dMPBntAx5ZgPR6maIlA","MonsterWarning")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Component,properties:{titleWarningSprite:cc.Sprite},init:function(t){this.titleWarningSprite.spriteFrame=t}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],MouseHover:[function(t,e,i){"use strict";if(!cc._RF.push(e,"e189f09pWVNsrVJ9uura6K0","MouseHover")){i.__esModule=!0,i.default=void 0;var n={spriteFrame:void 0,width:void 0,height:void 0,color:void 0,glowNodes:[],useAddMode:!1,repeatCount:0,animDuration:.54,initScale:.7,targetScale:1.5,targetOpacity:255,cycleDelay:.15,glowNodesTargetOpacity:255,glowNodeFadeInDuration:.3,glowNodeFadeOutDuration:.2},o=cc.Class({extends:cc.Component,properties:{_isAnimPlaying:!1,_pendingAnimStart:!1},onLoad:function(){this._bindedResetStart=this._resetStart.bind(this)},init:function(t){var e,i,o=Object.assign({},n,t),a=this.spriteNode=new cc.Node("spriteNode"),s=this._sprite=a.addComponent(cc.Sprite);a.parent=this.node,o.color&&(a.color=o.color),s.spriteFrame=o.spriteFrame,t.useAddMode&&((-1!==(i=(e=cc.ENGINE_VERSION).indexOf("."))?parseInt(e.slice(0,i)):-1)>1?(s.spriteFrame.srcBlendFactor=cc.macro.BlendFactor.SRC_APLHA,s.spriteFrame.dstBlendFactor=cc.macro.BlendFactor.ONE):(s.spriteFrame.srcBlendFactor=cc.BlendFunc.BlendFactor.SRC_APLHA,s.spriteFrame.dstBlendFactor=cc.BlendFunc.BlendFactor.ONE)),this.node.width=o.width,this.node.height=o.height,a.width=o.width,a.height=o.height,a.opacity=0,this.glowNodes=o.glowNodes,this.mouseHoverConfig=o,this._isMouseHoverEnable=!0,this._setUpTouchListener()},setEnable:function(t,e){void 0===e&&(e=!1),this._isMouseHoverEnable=t,!t&&this._isAnimPlaying&&(this._mouseLeave(),e||(this._pendingAnimStart=!0)),t&&this._pendingAnimStart&&this._mouseEnter()},onDestroy:function(){this.glowNodes=[],this.removeTouchListener()},_setUpTouchListener:function(){this.node.on(cc.Node.EventType.MOUSE_ENTER,this._mouseEnter,this),this.node.on(cc.Node.EventType.MOUSE_LEAVE,this._mouseLeave,this)},removeTouchListener:function(){this.node.off(cc.Node.EventType.MOUSE_ENTER,this._mouseEnter,this),this.node.off(cc.Node.EventType.MOUSE_LEAVE,this._mouseLeave,this)},_resetStart:function(){var t=this.spriteNode;t.opacity=0,t.scaleX=.6,t.scaleY=.6},_resetClose:function(){this.spriteNode.opacity=0},_mouseEnter:function(){var t=this;if(this._isMouseHoverEnable){this._pendingAnimStart=!1,this._resetStart();var e=this.mouseHoverConfig,i=0,n=0===e.repeatCount?void 0:function(){++i===e.repeatCount&&t._mouseLeave()},o=e.animDuration/2;this.spriteNode.opacity=0,this.spriteNode.runAction(cc.repeatForever(cc.sequence([cc.spawn(cc.scaleTo(e.animDuration,e.targetScale,e.targetScale),cc.sequence([cc.fadeTo(o,e.targetOpacity).easing(cc.easeOut(2)),cc.fadeOut(o)])),cc.delayTime(e.cycleDelay),cc.callFunc(function(){t._bindedResetStart(),n&&n()})]))),this.glowNodes.length>0&&this.glowNodes.forEach(function(t){t.stopAllActions(),t.runAction(cc.fadeIn(e.glowNodeFadeInDuration))}),this._isAnimPlaying=!0}else this._pendingAnimStart=!0},_mouseLeave:function(){if(this._pendingAnimStart&&(this._pendingAnimStart=!1),this._isAnimPlaying){var t=this.mouseHoverConfig;this._isAnimPlaying=!1,this.spriteNode.stopAllActions(),this._resetClose(),this.glowNodes.length>0&&this.glowNodes.forEach(function(e){e.stopAllActions(),e.runAction(cc.fadeOut(t.glowNodeFadeOutDuration))})}}});i.default=o,e.exports=i.default,cc._RF.pop()}},{}],MultiResHandler:[function(t,e){"use strict";if(!cc._RF.push(e,"6d49b/guMxMtZNwJRGXX/UW","MultiResHandler")){var i=function(t,e){var i=o();return function(t){return i[t-=159]}(t,e)},n=System[i(166)](i(161)+i(165))[i(169)+i(170)+i(176)+i(171)+i(160)];e[i(163)+i(172)+"s"][i(174)+i(168)+"t"]=n,e[i(163)+i(172)+"s"][i(159)+i(173)+i(164)+"e"]=!0,cc._RF.pop()}function o(){var t=["__e","ler","com","isB","exp","dul","mon","get","uil","aul","Mul","tiR","and","ort","sMo","def","der","esH"];return(o=function(){return t})()}},{}],NavigationBar:[function(t,e,i){"use strict";if(!cc._RF.push(e,"0dc7dijGWtKO4QKzl8UL9Pz","NavigationBar")){Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator,o=n.ccclass,a=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._navigator=void 0,e.animatedLayer=void 0,e.defaultLeftItem=void 0,e.rightItemContainer=void 0,e.leftItemContainer=void 0,e.middleItemContainer=void 0,e.titleLabel=void 0,e.background=void 0,e.shadow=void 0,e._items=[],e._pushAnimated=!1,e._titleLabelColor=void 0,e}return __extends(e,t),Object.defineProperty(e.prototype,"navigator",{get:function(){return this._navigator},set:function(t){this._navigator=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topItem",{get:function(){if(this._items&&this._items.length>0)return this._items[this._items.length-1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backItem",{get:function(){if(this._items&&this._items.length>1)return this._items[this._items.length-2]},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){var t=this.node.width,e=this.node.height;this.background.node.setContentSize(t,e),this.shadow.y=-e},e.prototype.getBarHeight=function(t,e){var i=this.node.width,n=t.height,o=e.top,a=n+o;return this.animatedLayer.setContentSize(i,n),this.animatedLayer.y=-o,this.node.height=a,this.shadow.y=-n,this._setItemsConfig(t.item_space_x),a},e.prototype.pushItem=function(t,e){if(t){var i=this._items[this._items.length-1],n=this.leftItemContainer.children[0],o=this.middleItemContainer.children[1],a=this.rightItemContainer.children[0],s=i?i.title:"",r=i&&!i.leftItem,c=t.title,l=void 0,h=void 0,u=t.rightItem instanceof cc.Node?t.rightItem:void 0,d=!0;if(this._items.push(t),this._pushAnimated=e,t.middleItem instanceof cc.Node&&(h=t.middleItem,t.title=""),t.leftItem instanceof cc.Node)l=t.leftItem,d=!1;else if(this._items.length>1){l=cc.instantiate(this.defaultLeftItem),this._createDefaultLeftItemEvents(l);var p=l.children?l.getComponentInChildren(cc.Label):void 0;p instanceof cc.Label&&s&&(p.string=s)}e?this._playPushAnimation({leftItem:n,middleItem:o,rightItem:a,title:s,useDefaultLeftItem:r},{leftItem:l,middleItem:h,rightItem:u,title:c,useDefaultLeftItem:d}):(this._removeFromParent(n),this._addChild(this.leftItemContainer,l),this._removeFromParent(o),this._addChild(this.middleItemContainer,h),this._removeFromParent(a),this._addChild(this.rightItemContainer,u),this.titleLabel.string=c,this._titleLabelColor=this.titleLabel.node.color,"land"===shell.environment.getOrientationMode()&&(this.titleLabel.fontSize=42,this.titleLabel.lineHeight=50))}},e.prototype.popItem=function(t){var e=this.topItem;if(e){var i=this.backItem;if(this._items.pop(),!i)return this.titleLabel.string="",this.rightItemContainer.removeAllChildren(!1),this.leftItemContainer.removeAllChildren(!1),this.middleItemContainer.children[1]&&this.middleItemContainer.children[1].removeFromParent(!1),void(this._titleLabelColor=this.titleLabel.node.color);var n=this._items[this._items.length-2],o="";n&&!n.middleItem&&(o=n.title);var a=this.leftItemContainer.children[0],s=this.middleItemContainer.children[1],r=this.rightItemContainer.children[0],c=s?"":e.title,l=!e.leftItem,h=i.title,u=void 0,d=void 0,p=i.rightItem instanceof cc.Node?i.rightItem:void 0,f=!0;if(i.middleItem instanceof cc.Node&&(d=i.middleItem,i.title=""),i.leftItem instanceof cc.Node)u=i.leftItem,f=!1;else if(this._items.length>1){u=cc.instantiate(this.defaultLeftItem),this._createDefaultLeftItemEvents(u);var _=u.children?u.getComponentInChildren(cc.Label):null;_&&(_.string=o)}t?this._playPopAnimation({leftItem:a,middleItem:s,rightItem:r,title:c,useDefaultLeftItem:l},{leftItem:u,middleItem:d,rightItem:p,title:h,useDefaultLeftItem:f}):(this._removeFromParent(a),this._addChild(this.leftItemContainer,u),this._removeFromParent(s),this._addChild(this.middleItemContainer,d),this._removeFromParent(r),this._addChild(this.rightItemContainer,p),this.titleLabel.string=h,this._titleLabelColor=this.titleLabel.node.color)}},e.prototype.enableButtons=function(){var t=this.leftItemContainer.children[0],e=this.rightItemContainer.children[0];if(t){var i=t.getComponent(cc.Button);i&&(i.interactable=!0)}if(e){var n=e.getComponent(cc.Button);n&&(n.interactable=!0)}},e.prototype.disableButtons=function(){var t=this.leftItemContainer.children[0],e=this.rightItemContainer.children[0];if(t){var i=t.getComponent(cc.Button);i&&(i.interactable=!1)}if(e){var n=e.getComponent(cc.Button);n&&(n.interactable=!1)}},e.prototype.setTitleColor=function(t){this.titleLabel.node.color=t},e.prototype.setTitleSize=function(t){this.titleLabel.fontSize=t},e.prototype.removeItemsAtIndex=function(t){this._items.length<=t||this._items.splice(t,1)},e.prototype._assignLabel=function(t){t.node.setContentSize(this.titleLabel.node.width,this.titleLabel.node.height),t.string=this.titleLabel.string,t.fontSize=this.titleLabel.fontSize,t.lineHeight=this.titleLabel.lineHeight,t.verticalAlign=1,this.titleLabel.font&&(t.font=this.titleLabel.font)},e.prototype._createDefaultLeftItemEvents=function(t){var e=new cc.Component.EventHandler;e.target=this.node,e.component="NavigationBar",e.handler="onLeftItemPressed",t.getComponent(cc.Button).clickEvents.push(e)},e.prototype._setItemsConfig=function(t){var e=this.node.width,i=this.leftItemContainer,n=-e/2+t+i.width/2,o=this.rightItemContainer,a=e/2-t-o.width/2;i.x=n,o.x=a},e.prototype.onLeftItemPressed=function(){var t=this.navigator;if(this.navigator.topController,t&&t.topController){var e=this._pushAnimated;this.navigator.popController(e)}},e.prototype._playPushAnimation=function(t,e){var i=t.leftItem,n=t.middleItem,o=t.rightItem,a=t.title,s=t.useDefaultLeftItem,r=e.leftItem,c=e.middleItem,l=e.rightItem,h=e.title,u=e.useDefaultLeftItem,d=!n&&!c;this._playPushMiddleItemAnimation(d,a,h,n,c),this._playPushLeftItemAnimation(u,s,d,i,r),this._playRightContainerFadeAnim(o,l)},e.prototype._playPopAnimation=function(t,e){var i=t.leftItem,n=t.middleItem,o=t.rightItem,a=t.title,s=t.useDefaultLeftItem,r=e.leftItem,c=e.middleItem,l=e.rightItem,h=e.title,u=e.useDefaultLeftItem,d=!n&&!c;this._playPopMiddleItemAnimation(d,a,h,n,c),this._playPopLeftItemAnimation(u,s,d,i,r),this._playRightContainerFadeAnim(o,l)},e.prototype._playPushMiddleItemAnimation=function(t,e,i,n,o,a){if(t){var s=this.middleItemContainer,r=this.leftItemContainer,c=s.x-s.width*s.anchorX-r.x-r.width*(1-r.anchorX);if(e){var l=this.titleLabel.node,h=l.parent.convertToWorldSpaceAR(cc.v2(l.x,l.y)),u=this.animatedLayer.convertToNodeSpaceAR(h),d=new cc.Node,p=d.addComponent(cc.Label);d.parent=this.animatedLayer,d.position=u,p.node.color=this._titleLabelColor,this._assignLabel(p);var f=cc.spawn(cc.moveBy(.2,cc.v2(-c/2,0)).easing(cc.easeIn(3)),cc.fadeOut(.2).easing(cc.easeIn(3)));d.runAction(cc.sequence(f,cc.callFunc(function(){d.active=!1,d.removeFromParent()})))}s.x+=c,s.opacity=0,this.titleLabel.string=i;var _=cc.spawn(cc.moveBy(.3,cc.v2(-c,0)).easing(cc.easeOut(3)),cc.fadeIn(.3).easing(cc.easeIn(3)));s.runAction(cc.sequence(cc.delayTime(.1),_,cc.callFunc(function(){s.active=!0,s.opacity=255,a&&a()})))}else this._playMiddleContainerFadeAnim(n,o,i,a)},e.prototype._playPushLeftItemAnimation=function(t,e,i,n,o,a){var s=this;if(t&&e&&i){var r=void 0,c=void 0,l=void 0,h=void 0;if(n&&n.children&&(r=n.getComponentInChildren(cc.Label),c=n.getComponentInChildren(cc.Sprite)),o&&o.children&&(l=o.getComponentInChildren(cc.Label),h=o.getComponentInChildren(cc.Sprite)),l){if(r){var u=r.node,d=u.x,p=u.width,f=u.anchorX,_=d-p*f-d-p*(1-f),m=cc.spawn(cc.moveBy(.2,cc.v2(2*-_,0)).easing(cc.easeOut(3)),cc.fadeOut(.2).easing(cc.easeIn(3)));u.runAction(cc.sequence(m,cc.callFunc(function(){u.active=!1})))}var g=this.middleItemContainer,y=this.leftItemContainer,v=g.x-g.width*g.anchorX-y.x-y.width*(1-y.anchorX),b=h.node,S=l.node;o&&y.addChild(o),b.active=!1,S.opacity=0,S.x+=v/2;var C=cc.spawn(cc.moveBy(.2,cc.v2(-v/2,0)).easing(cc.easeOut(3)),cc.fadeIn(.2).easing(cc.easeIn(3)));S.runAction(cc.sequence(cc.delayTime(.2),C,cc.callFunc(function(){S.opacity=255,b.active=!0,n&&n.removeFromParent(!1),a&&a()})))}else this._playLeftContainerFadeAnim(n,o,a)}else if(t&&e&&n){if(r=void 0,c=void 0,n&&n.children&&(r=n.getComponentInChildren(cc.Label),c=n.getComponentInChildren(cc.Sprite)),!r||!c)return void this._playLeftContainerFadeAnim(n,o,a);var A=c.node,E=r.node;_=E.x-E.width*E.anchorX-A.x-A.width*(1-A.anchorX),m=cc.spawn(cc.moveBy(.2,cc.v2(-_,0)).easing(cc.easeOut(3)),cc.fadeOut(.2).easing(cc.easeIn(3))),E.runAction(cc.sequence(m,cc.callFunc(function(){n&&n.removeFromParent(!1),o&&s.leftItemContainer.addChild(o),a&&a()})))}else this._playLeftContainerFadeAnim(n,o,a)},e.prototype._playPopLeftItemAnimation=function(t,e,i,n,o,a){if(t&&e&&i){var s=void 0,r=void 0,c=void 0,l=void 0;if(n&&n.children&&(s=n.getComponentInChildren(cc.Label),r=n.getComponentInChildren(cc.Sprite)),o&&o.children&&(c=o.getComponentInChildren(cc.Label),l=o.getComponentInChildren(cc.Sprite)),!c||!s)return void this._playLeftContainerFadeAnim(n,o,a);var h=this.middleItemContainer,u=this.leftItemContainer,d=h.x-h.width*h.anchorX-u.x-u.width*(1-u.anchorX),p=s.node,f=r.node,_=p.x-p.width*p.anchorX-f.x-f.width*(1-f.anchorX),m=cc.spawn(cc.moveBy(.2,cc.v2(d/2,0)).easing(cc.easeOut(3)),cc.fadeOut(.2).easing(cc.easeIn(3)));if(o){p.runAction(cc.sequence(m,cc.callFunc(function(){p.active=!1})));var g=c.node,y=l.node;y.active=!1,g.opacity=0,u.addChild(o),g.x-=2*_;var v=cc.spawn(cc.moveBy(.2,cc.v2(2*_,0)).easing(cc.easeOut(3)),cc.fadeIn(.2).easing(cc.easeIn(3)));g.runAction(cc.sequence(cc.delayTime(.2),v,cc.callFunc(function(){g.opacity=255,y.active=!0,n&&n.removeFromParent(!1),a&&a()})))}else p.runAction(cc.sequence(m,cc.callFunc(function(){n&&n.removeFromParent(!1),a&&a()})))}else if(t&&e){if(c=void 0,l=void 0,o&&o.children&&(c=o.getComponentInChildren(cc.Label),l=o.getComponentInChildren(cc.Sprite)),!c||!l)return void this._playLeftContainerFadeAnim(n,o,a);var b=c.node,S=l.node;_=b.x-b.width*b.anchorX-S.x-S.width*(1-S.anchorX),n&&n.removeFromParent(!1),o&&this.leftItemContainer.addChild(o),b.opacity=0,b.x-=2*_,v=cc.spawn(cc.moveBy(.2,cc.v2(2*_,0)).easing(cc.easeOut(3)),cc.fadeIn(.2).easing(cc.easeIn(3))),b.runAction(cc.sequence(cc.delayTime(.2),v,cc.callFunc(function(){b.opacity=255,a&&a()})))}else this._playLeftContainerFadeAnim(n,o,a)},e.prototype._playPopMiddleItemAnimation=function(t,e,i,n,o,a){if(t){var s=this.leftItemContainer,r=this.middleItemContainer,c=r.x-r.width*r.anchorX-s.x-s.width*(1-s.anchorX);if(e){var l=this.titleLabel.node.parent.convertToWorldSpaceAR(cc.v2(this.titleLabel.node.x,this.titleLabel.node.y)),h=this.animatedLayer.convertToNodeSpaceAR(l),u=new cc.Node;u.addComponent(cc.Label);var d=u.getComponent(cc.Label);u.parent=this.animatedLayer,d.node.color=this._titleLabelColor,u.position=h,this._assignLabel(d);var p=cc.spawn(cc.moveBy(.2,cc.v2(c/2,0)).easing(cc.easeOut(3)),cc.fadeOut(.2).easing(cc.easeOut(3)));u.runAction(cc.sequence(p,cc.callFunc(function(){u.active=!1,u.removeFromParent()})))}this.titleLabel.string=i,r.x-=c/2,r.opacity=0;var f=cc.spawn(cc.moveBy(.3,cc.v2(c/2,0)).easing(cc.easeOut(3)),cc.fadeIn(.3).easing(cc.easeIn(3)));this.middleItemContainer.runAction(cc.sequence(cc.delayTime(.1),f,cc.callFunc(function(){r.active=!0,r.opacity=255,a&&a()})))}else this._playMiddleContainerFadeAnim(n,o,i,a)},e.prototype._playLeftContainerFadeAnim=function(t,e,i){var n=this.leftItemContainer;t&&t.removeFromParent(!1),e&&this.leftItemContainer.addChild(e),n.opacity=0,n.runAction(cc.sequence(cc.fadeIn(.3).easing(cc.easeOut(3)),cc.callFunc(function(){i&&i()})))},e.prototype._playMiddleContainerFadeAnim=function(t,e,i,n){var o=this.middleItemContainer;t&&t.removeFromParent(!1),e&&o.addChild(e),this.titleLabel.string=i,o.opacity=0,o.runAction(cc.sequence(cc.fadeIn(.3),cc.callFunc(function(){n&&n()})))},e.prototype._playRightContainerFadeAnim=function(t,e,i){var n=this;t&&t.removeFromParent(!1),e&&this.rightItemContainer.addChild(e),this.rightItemContainer.opacity=0,this.rightItemContainer.runAction(cc.sequence(cc.fadeIn(.3).easing(cc.easeOut(3)),cc.callFunc(function(){n._titleLabelColor=n.titleLabel.node.color,i&&i()})))},e.prototype._removeFromParent=function(t){t&&t.parent&&t.removeFromParent(!1)},e.prototype._addChild=function(t,e){t&&e&&t.addChild(e)},__decorate([a(cc.Node)],e.prototype,"animatedLayer",void 0),__decorate([a(cc.Prefab)],e.prototype,"defaultLeftItem",void 0),__decorate([a(cc.Node)],e.prototype,"rightItemContainer",void 0),__decorate([a(cc.Node)],e.prototype,"leftItemContainer",void 0),__decorate([a(cc.Node)],e.prototype,"middleItemContainer",void 0),__decorate([a(cc.Label)],e.prototype,"titleLabel",void 0),__decorate([a(cc.Sprite)],e.prototype,"background",void 0),__decorate([a(cc.Node)],e.prototype,"shadow",void 0),__decorate([o],e)}(cc.Component);i.default=s,cc._RF.pop()}},{}],NavigationController:[function(t,e,i){"use strict";if(!cc._RF.push(e,"d742diXy4tHCIVIgSy1jEIb","NavigationController")){Object.defineProperty(i,"__esModule",{value:!0});var n=t("ViewController"),o=t("NavigationBar"),a=t("TransitionEnum"),s=t("NavigationDefaultTransition"),r=t("TransitionContext"),c=t("UIKit"),l=t("TabBarItem"),h=cc._decorator,u=h.ccclass,d=h.property,p=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.defaultNavigationBar=void 0,e.statusBarPlaceholderNode=void 0,e.contentNode=void 0,e._navigationBar=void 0,e._controllers=[],e._isOnTransistion=!1,e._tabBarItem=void 0,e}return __extends(e,t),Object.defineProperty(e.prototype,"controllers",{get:function(){return this._controllers.slice()},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"tabBarItem",{get:function(){return this._tabBarItem},set:function(t){this._tabBarItem=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"topController",{get:function(){var t=this.controllers;if(t&&t.length>0)return t[t.length-1]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"backController",{get:function(){var t=this.controllers;if(t&&t.length>1)return t[t.length-2]},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"navigationBar",{get:function(){return this._navigationBar||(this._navigationBar=this.defaultNavigationBar,this._navigationBar&&(this._navigationBar.navigator=this)),this._navigationBar},set:function(t){if(t!==this._navigationBar){var e=this._navigationBar;this._navigationBar=t,this._navigationBar&&(this._navigationBar.navigator=this),e&&(e.navigator=void 0)}},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){var t=cc.Canvas.instance.designResolution,e=t.height,i=t.width;this.node.setContentSize(i,e),this.navigationBar.node.width=i;var n="land"===shell.environment.getOrientationMode()?c.NavigationConfigs.bar.landscape:c.NavigationConfigs.bar.portrait,o=this.navigationBar.getBarHeight(n,this.safeAreaInsets),a=e-o;this.contentNode.setContentSize(i,a),this.contentNode.y=-o,this.statusBarPlaceholderNode.height=this.safeAreaInsets.top,this.node.on("size-changed",this._resize,this)},e.prototype.onEnable=function(){var t=this.topController;t&&(t.enabled=!0)},e.prototype.onDisable=function(){var t=this.topController;t&&(t.enabled=!1)},e.prototype.viewWillAppear=function(t){var e=this.topController;e&&e.viewWillAppear(t)},e.prototype.viewDidAppear=function(t){var e=this.topController;e&&e.viewDidAppear(t)},e.prototype.viewWillDisappear=function(t){var e=this.topController;e&&e.viewWillDisappear(t)},e.prototype.viewDidDisappear=function(t){var e=this.topController;e&&e.viewDidDisappear(t)},e.prototype.viewDidLayoutSubviews=function(){},e.prototype.pushController=function(t,e){if(!this._isOnTransistion&&t){this._isOnTransistion=!0;var i=this.contentNode,n=i.width,o=i.height;t.navigator=this,t.view.setContentSize(n,o);var c=(t.node.anchorY-i.anchorY)*o,l=(t.node.anchorX-i.anchorX)*n;e&&(l=(t.node.anchorX-i.anchorX+1)*n),t.view.setPosition(cc.v2(l,c)),i.addChild(t.view),t.enabled=!0,this._checkIfNeedCallAppear()?t.viewWillAppear(e):e=!1;var h=this.topController;if(h&&h.viewWillDisappear(e),this.navigationBar.pushItem(t,e),e){var u=void 0,d=this.navigationDelegate;u=d&&d.animationForOperation?d.animationForOperation(a.NavigationControllerOperation.Push):new s.DefaultNavigationPushTransition;var p=h?h.view:void 0,f=new r.TransitionContext(h,t,p,t.view,i),_=this._pushViewControllerAnimateEnd.bind(this,t,!0);u.animateTransition(f,_)}else this._pushViewControllerAnimateEnd(t,!1)}},e.prototype.popController=function(t){var e=this.topController,i=this.backController;if(!this._isOnTransistion&&e&&i)if(this._isOnTransistion=!0,i.enabled=!0,i.viewWillAppear(t),e.viewWillDisappear(t),this.navigationBar.popItem(t),t){var n=void 0,o=this.navigationDelegate;n=o&&o.animationForOperation?o.animationForOperation(a.NavigationControllerOperation.Pop):new s.DefaultNavigationPopTransition;var c=new r.TransitionContext(e,i,e.view,i.view,this.contentNode),l=this._popViewControllerAnimateEnd.bind(this,!0);n.animateTransition(c,l)}else this._popViewControllerAnimateEnd(!1)},e.prototype.popToController=function(t,e){for(var i=this.controllers.length-e;i;){var n=this.topController;n&&(n.enabled=!1,this.navigationBar.popItem(!1),this.contentNode.removeChild(n.view),this._controllers.pop(),n.node.destroy()),i-=1}this.popController(t)},e.prototype.popToRootController=function(t){for(var e=this.controllers.length-2;e;){var i=this.topController;i&&(i.enabled=!1,this.navigationBar.popItem(!1),this.contentNode.removeChild(i.view),this._controllers.pop(),i.node.destroy()),e-=1}this.popController(t)},e.prototype.hideNavigationBarBackground=function(){this.navigationBar.background.node.active=!1,this.navigationBar.shadow.active=!1},e.prototype.showNavigationBarBackground=function(){this.navigationBar.background.node.active=!0,this.navigationBar.shadow.active=!0},e.prototype.hideNavigationBar=function(t){void 0===t&&(t=!0),this.navigationBar.node.active=!1,t&&this._resize()},e.prototype.showNavigationBar=function(t){void 0===t&&(t=!0),this.navigationBar.node.active=!0,t&&this._resize()},e.prototype.enableItems=function(){this.navigationBar.enableButtons()},e.prototype.disableItems=function(){this.navigationBar.disableButtons()},e.prototype.setControllers=function(t){if(t&&t.length&&!(t.length<1)){for(var e=this.controllers,i=e.filter(function(e){return t.indexOf(e)<0}),n=i.length-1;n>=0;n--){var o=i[n];o.enabled=!1,this.contentNode.removeChild(o.view);var a=e.indexOf(o);this.navigationBar.removeItemsAtIndex(a),o.node.destroy()}this._controllers=t}},e.prototype._resize=function(){this._resizeContentNode(),this._resizeViewControllers()},e.prototype._resizeContentNode=function(){var t=this.contentNode,e=this.navigationBar.node.active?this.navigationBar.node.height:this.statusBarPlaceholderNode.height,i=this.node.height-e;t.setContentSize(this.node.width,i),t.y=-e},e.prototype._resizeViewControllers=function(){var t=this.contentNode,e=t.width,i=t.height,n=t.anchorX,o=t.anchorY;this.controllers.forEach(function(t){var a=t.node,s=(a.anchorX-n)*e,r=(a.anchorY-o)*i;t.viewWillLayoutSubviews(),a.setContentSize(e,i),a.setPosition(cc.v2(s,r)),t.viewDidLayoutSubviews()})},e.prototype._pushViewControllerAnimateEnd=function(t,e){void 0===e&&(e=!1),this._checkIfNeedCallAppear()&&t.viewDidAppear(e);var i=this.topController;this._controllers.push(t),t.view.setContentSize(this.contentNode.width,this.contentNode.height),this._isOnTransistion=!1,i&&(i.viewDidDisappear(e),i.enabled=!1)},e.prototype._popViewControllerAnimateEnd=function(t){void 0===t&&(t=!1);var e=this.backController;e&&e.viewDidAppear(t),this.scheduleOnce(this._popAnimationClearStacks.bind(this,t))},e.prototype._popAnimationClearStacks=function(t){var e=this.topController;e&&(this.contentNode.removeChild(e.view),this._controllers.pop(),this._isOnTransistion=!1,e.viewDidDisappear(t),e.enabled=!1,e.destroy&&e.destroy(),e.node.destroy())},e.prototype._checkIfNeedCallAppear=function(){return!(this.tabBarItem instanceof l.default&&!this.topController)},__decorate([d(o.default)],e.prototype,"defaultNavigationBar",void 0),__decorate([d(cc.Node)],e.prototype,"statusBarPlaceholderNode",void 0),__decorate([d(cc.Node)],e.prototype,"contentNode",void 0),__decorate([u],e)}(n.default);i.default=p,cc._RF.pop()}},{NavigationBar:"NavigationBar",NavigationDefaultTransition:"NavigationDefaultTransition",TabBarItem:"TabBarItem",TransitionContext:"TransitionContext",TransitionEnum:"TransitionEnum",UIKit:"UIKit",ViewController:"ViewController"}],NavigationDefaultTransition:[function(t,e,i){"use strict";if(!cc._RF.push(e,"2472eYgH9NBWJvtIuLXvIEh","NavigationDefaultTransition")){Object.defineProperty(i,"__esModule",{value:!0}),i.DefaultNavigationPopTransition=i.DefaultNavigationPushTransition=void 0;var n=t("ViewControllerTransition"),o=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.transitionDuration=function(){},e.prototype.animateTransition=function(t,e){var i=t.getToController(),n=t.getFromController(),o=t.getContainer(),a=(n.node.anchorX-o.anchorX-1)*o.width,s=(n.node.anchorY-o.anchorY)*o.height;n.node.runAction(cc.sequence(cc.moveTo(.4,cc.v2(a,s)).easing(cc.easeSineIn()),cc.callFunc(function(){n.node.setPosition(a,s)})));var r=(i.node.anchorX-o.anchorX)*o.width,c=(i.node.anchorY-o.anchorY)*o.height;i.node.runAction(cc.sequence(cc.moveTo(.4,cc.v2(r,c)).easing(cc.easeSineIn()),cc.callFunc(function(){i.node.setPosition(r,c),e&&e()})))},e.prototype.animationEnd=function(){},e}(n.default);i.DefaultNavigationPushTransition=o;var a=function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.transitionDuration=function(){},e.prototype.animateTransition=function(t,e){var i=t.getToController(),n=t.getFromController(),o=t.getContainer(),a=(n.node.anchorX-o.anchorX+1)*o.width,s=(n.node.anchorY-o.anchorY)*o.height;n.node.runAction(cc.sequence(cc.moveTo(.4,cc.v2(a,s)).easing(cc.easeSineIn()),cc.callFunc(function(){n.node.setPosition(a,s)})));var r=(i.node.anchorX-o.anchorX)*o.width,c=(i.node.anchorY-o.anchorY)*o.height;i.node.runAction(cc.sequence(cc.moveTo(.4,cc.v2(r,c)).easing(cc.easeSineIn()),cc.callFunc(function(){i.node.setPosition(r,c),e&&e()})))},e.prototype.animationEnd=function(){},e}(n.default);i.DefaultNavigationPopTransition=a,cc._RF.pop()}},{ViewControllerTransition:"ViewControllerTransition"}],NoSoundAdapter:[function(t,e,i){"use strict";if(!cc._RF.push(e,"d85610Qhw9DzLM9jdvZsDKB","NoSoundAdapter")){Object.defineProperty(i,"__esModule",{value:!0});var n=t("Utils"),o=t("AudioAdapter"),a={load:function(t,e){setTimeout(e,0)},unload:function(){}},s=2,r=function(t){function e(e){var i=t.call(this)||this;return i._muted=!1,i._volume=1,i._loop=!1,i._rate=1,i._duration=s,i._startTime=0,i._pausedTime=0,i._onAudioEnded=i._onAudioEnded.bind(i),i._onFadeEnded=i._onFadeEnded.bind(i),i.reset(e),i}return __extends(e,t),e.prototype.reset=function(t){if(this._startTime=0,this._pausedTime=0,void 0!==t){var e=t.loop,i=t.volume,n=t.muted,o=t.rate,a=t.duration;"boolean"==typeof e&&(this._loop=e),"number"==typeof i&&i>=0&&i<=1&&(this._volume=i),"boolean"==typeof n&&(this._muted=n),"number"==typeof o&&o>0&&(this._rate=o),"number"==typeof a&&a>0&&(this._duration=a)}},e.prototype.destroy=function(){this.reset(),this.removeAll()},Object.defineProperty(e.prototype,"instantVolume",{get:function(){return this._volume},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"volume",{get:function(){return this._volume},set:function(t){this._volume=t,this._setFadeDispose(void 0)},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"loop",{get:function(){return this._loop},set:function(t){t!==this._loop&&(this._loop=t,t?this._setScheduleDispose(void 0):this._scheduleEnd())},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"paused",{get:function(){return this._startTime>0&&this._pausedTime>0},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"playing",{get:function(){return this._startTime>0&&0===this._pausedTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"stopped",{get:function(){return 0===this._startTime&&0===this._pausedTime},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"rate",{get:function(){return this._rate},enumerable:!1,configurable:!0}),e.prototype.pause=function(){this.paused||(this._pausedTime=Date.now(),this._setFadeDispose(void 0),this._setScheduleDispose(void 0))},e.prototype.resume=function(){this.paused&&(this._startTime+=Date.now()-this._pausedTime,this._pausedTime=0,this._loop||this._scheduleEnd())},Object.defineProperty(e.prototype,"muted",{get:function(){return this._muted},set:function(t){this._muted=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"duration",{get:function(){return this._duration},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"currentTime",{get:function(){return this._pausedTime>0?(this._pausedTime-this._startTime)/1e3%this._duration:(Date.now()-this._startTime)/1e3%this._duration},enumerable:!1,configurable:!0}),e.prototype.seek=function(t){if(this._setFadeDispose(void 0),t>=this._duration&&!this._loop)return this._setScheduleDispose(void 0),this._startTime=0,this._pausedTime=0,this._onFadeEnded(),void this.emit(shell.WebAudioEvent.ENDED);this.paused&&this.resume(),this._startTime=Date.now()-1e3*t,this._loop||this._scheduleEnd(),this.emit(shell.WebAudioEvent.SEEK)},e.prototype.play=function(t,e){this._startTime=Date.now(),this._duration="number"==typeof e&&e>0?e:this._duration,this._loop||this._scheduleEnd()},e.prototype._onAudioEnded=function(){this._fadeDispose&&(this._setFadeDispose(void 0),this._onFadeEnded()),this._startTime=0,this._pausedTime=0,this.emit(shell.WebAudioEvent.ENDED)},e.prototype.stop=function(){this._setFadeDispose(void 0),this._setScheduleDispose(void 0),this._startTime=0,this._pausedTime=0,this.emit(shell.WebAudioEvent.STOP)},e.prototype.fade=function(t,e,i){this._volume=e,this._setFadeDispose(i)},e.prototype._onFadeEnded=function(){this.emit(shell.WebAudioEvent.FADED)},e.prototype._scheduleEnd=function(){var t=this._duration-this.currentTime;t>=0?this._setScheduleDispose(t):this._setScheduleDispose(void 0)},e.prototype._setScheduleDispose=function(t){var e=this._scheduleDispose;e&&e(),this._scheduleDispose=null==t?void 0:n.delayCallback(t)(this._onAudioEnded)},e.prototype._setFadeDispose=function(t){var e=this._fadeDispose;e&&e(),this._fadeDispose=null==t?void 0:n.delayCallback(t)(this._onFadeEnded)},e}(shell.CustomEventTarget),c=function(t){function e(e){var i=this;return e.loader=a,(i=t.call(this,e)||this)._estimatedDuration=e.estimatedDuration||s,i}return __extends(e,t),e.prototype.getDuration=function(e){return"number"==typeof e?t.prototype.getDuration.call(this,e):this._estimatedDuration},e.prototype.getAudioFromPool=function(){var t=this.factory.get();return t?(t.reset({duration:this._estimatedDuration}),t):new r({duration:this._estimatedDuration})},e}(o.default);i.default=c,cc._RF.pop()}},{AudioAdapter:"AudioAdapter",Utils:"Utils"}],NotifyHelper:[function(t,e){"use strict";if(!cc._RF.push(e,"6d654kvIaBBJaTYJa3BSWOU","NotifyHelper")){var i=function(t,e){var i=a();return function(t){return i[t-=425]}(t,e)},n=System[i(436)](i(426)+i(435)+i(437)+"rk")[i(434)+i(430)];for(var o in n)e[i(425)+i(429)+"s"][o]=n[o];e[i(425)+i(429)+"s"][i(438)+i(433)+i(431)+"e"]=!0,cc._RF.pop()}function a(){var t=["exp","bvf","der","uil","ort","ify","dul","isB","sMo","Not","ram","get","ewo","__e"];return(a=function(){return t})()}},{}],NumberCurvedController:[function(t,e,i){"use strict";if(!cc._RF.push(e,"22ff3ETL9NJ6LV0gfCqckfH","NumberCurvedController")){i.__esModule=!0,i.default=void 0;var n,o=(n=t("NumberDisplayController"))&&n.__esModule?n:{default:n},a=cc.Class({extends:o.default,properties:{curveness:{default:.1,min:-10,max:10,type:cc.Float,slide:!0,tooltip:!1}},dequeueNumberContainer:function(t){var e=this.numberContainer.children[t];if(!e){(e=new cc.Node("container")).width=this.nodeNumberWidth,this.numberContainer.addChild(e);var i=new cc.Node("numberSprite");i.addComponent(cc.Sprite),e.addChild(i)}return e},displayNumber:function(t,e,i){void 0===e&&(e=!0),this._super(t,e,i),this._layout.updateLayout();var n=0;this.numberContainer.children.forEach(function(t){n+=t.width});for(var o=0;o<this.numberContainer.children.length;o++){var a=this.dequeueNumberContainer(o),s=n/2,r=(100/Math.abs(this.curveness)+s)/this.numberContainer.scale,c=void 0,l=void 0;this.curveness>0?(c=Math.sqrt(Math.pow(r,2)-Math.pow(a.x,2)),l=180*Math.atan2(Math.abs(c),a.x)/Math.PI,a.angle=-(90-l)):this.curveness<0?(c=Math.sqrt(Math.pow(r,2)+Math.pow(a.x,2)),l=180*Math.atan2(Math.abs(c),a.x)/Math.PI,a.angle=90-l):a.angle=0,a.y=c-r}}});i.default=a,e.exports=i.default,cc._RF.pop()}},{NumberDisplayController:"NumberDisplayController"}],NumberDisplayController:[function(t,e,i){"use strict";if(!cc._RF.push(e,"e13cc9FLShL66GevrFVSv5p","NumberDisplayController")){i.__esModule=!0,i.default=void 0;var n,o=(n=t("NumberDisplayInterface"))&&n.__esModule?n:{default:n},a=t("Utils"),s=cc.Class({extends:o.default,properties:{numberSpriteAtlas:{default:void 0,type:cc.SpriteAtlas,tooltip:!1},numberBlurSpriteAtlas:{default:void 0,type:cc.SpriteAtlas,tooltip:!1},numberSprite:[cc.SpriteFrame],numberBlurSprite:[cc.SpriteFrame],kSprite:cc.SpriteFrame,srcBlendFactor:{default:cc.macro.BlendFactor.SRC_ALPHA,type:cc.macro.BlendFactor,tooltip:!1},dstBlendFactor:{default:cc.macro.BlendFactor.ONE_MINUS_SRC_ALPHA,type:cc.macro.BlendFactor,tooltip:!1},nodeNumberWidth:{default:141,type:cc.Integer,tooltip:!1},nodeNumberY:{default:0,type:cc.Integer,tooltip:!1},nodeNumberScale:{default:1,type:cc.Float,tooltip:!1},commaWidth:{default:50,type:cc.Integer,tooltip:!1},commaY:{default:0,type:cc.Integer,tooltip:!1},commaScale:{default:1,type:cc.Float,tooltip:!1},decimalWidth:{default:60,type:cc.Integer,tooltip:!1},decimalY:{default:0,type:cc.Integer,tooltip:!1},decimalScale:{default:1,type:cc.Float,tooltip:!1},decimalNumberWidth:{default:121,type:cc.Integer,tooltip:!1},decimalNumberY:{default:0,type:cc.Integer,tooltip:!1},decimalNumberScale:{default:.9,type:cc.Float,tooltip:!1},multiplySpriteWidth:{default:50,type:cc.Integer,tooltip:!1},multiplySpriteY:{default:0,type:cc.Integer,tooltip:!1},multiplySpriteScale:{default:1,type:cc.Float,tooltip:!1},layoutSpacingX:{default:0,type:cc.Float,tooltip:!1},layoutSpacingY:{default:0,type:cc.Float,tooltip:!1},blurScale:{default:1,type:cc.Float,tooltip:!1},spriteColor:{default:"#FFFFFF",tooltip:!1},disableFixedWidth:{default:!1,tooltip:!1},enablePrefixNumber:{default:!1,tooltip:!1},_isScaling:{default:!1}},onLoad:function(){this._originalScaleX=this.numberContainer.scaleX,this._originalScaleY=this.numberContainer.scaleY,this.numberContainer.on(cc.Node.EventType.SIZE_CHANGED,this.resizeNumberIfNeeded,this)},displayNumber:function(t,e,i){void 0===e&&(e=!0),this._setupNumberContainer();var n=Array.from(this._getNumberDisplay(t,e));n=n.reverse(),this.enablePrefixNumber&&n.push("x");var o=this.numberBlurSpriteAtlas?this.numberBlurSpriteAtlas.getSpriteFrames():this.numberBlurSprite,s=this.numberSpriteAtlas?this.numberSpriteAtlas.getSpriteFrames():this.numberSprite,r=!1;this._clearNumberIfLenghtChange(n.length);for(var c=0;c<n.length;c++){var l=this.dequeueNumberContainer(c),h=l.getChildByName("numberSprite").getComponent(cc.Sprite);if(","===n[c])l.width=this.commaWidth,l.scaleX=l.scaleY=this.commaScale,h.node.y=this.commaY,h.spriteFrame=s[10];else if("."===n[c])l.width=this.decimalWidth,l.scaleX=l.scaleY=this.decimalScale,h.node.y=this.decimalY,h.spriteFrame=s[11];else if("x"===n[c])l.width=this.multiplySpriteWidth,l.scaleX=l.scaleY=this.multiplySpriteScale,h.node.y=this.multiplySpriteY,h.spriteFrame=s[12];else if("k"===n[c])l.scale=this.nodeNumberScale,l.width=this.nodeNumberWidth,h.node.y=this.nodeNumberY,h.spriteFrame=this.kSprite;else if(" "===n[c])l.width=this.commaWidth,l.scaleX=l.scaleY=this.commaScale,h.node.y=this.commaY;else{r=!1;var u=(0,a.getDefaultCurrencyFormat)().decimalSeparator;c<n.indexOf(u)&&-1!==n.indexOf(u)?(r=!e,l.scale=r?this.decimalNumberScale*this.blurScale:this.decimalNumberScale,l.width=this.decimalNumberWidth,h.node.y=this.decimalNumberY):(l.scale=this.nodeNumberScale,l.width=this.nodeNumberWidth,h.node.y=this.nodeNumberY),h.spriteFrame=r?o[n[c]]:s[n[c]]}(this.disableFixedWidth||-1===l.width)&&(l.width=h.node.width),this._attributesForNumberContainer(c,n[c],r,l)}i&&i()},_clearNumberIfLenghtChange:function(t){var e=this.numberContainer.children.length;if(t<e)for(var i=e-t;0!==i;){var n=this.numberContainer.children[0];n.removeFromParent(),n.destroy(),i--}},clear:function(){this.numberContainer.removeAllChildren(),this._revertScale(),this.numberContainer.width=0},_revertScale:function(){this._originalScaleX&&this._originalScaleY&&(this.numberContainer.scaleX=this._originalScaleX,this.numberContainer.scaleY=this._originalScaleY)},_getNumberDisplay:function(t,e){var i=t,n="",o=1;this.enableShortenNumber&&t>999&&(o=1e3,n="k");var s=!(0,a.getDefaultCurrencyFormat)().hideDecimal&&this.enableDecimal;return i=s?Math.floor(i/o):Math.round(i/o),this.enableComma&&(i=this.numberWithComma(i)),s&&(i+=this._getDecimalStringFrom(t,e)),i+n},_getDecimalStringFrom:function(t,e){var i,n,o,s=(0,a.getDefaultCurrencyFormat)().decimalSeparator;this.enableShortenNumber&&t>999?(i=Math.round(t/100)/10,n=2,o=e?"":s+"0"):(i=t,n=3,o=s+"00");var r=i.toString();if(-1!==r.indexOf("."))for(o=s+(o=r.substring(r.indexOf(".")+1,r.indexOf(".")+n));o.length!==n;)o+="0";return o},_attributesForNumberContainer:function(t,e,i,n){this.attributesForNumberContainer&&this.attributesForNumberContainer(t,e,i,n)},dequeueNumberContainer:function(t){var e=this.numberContainer.children[t];if(!e){(e=new cc.Node("container")).width=this.nodeNumberWidth,this.numberContainer.addChild(e);var i=new cc.Node("numberSprite");i.addComponent(cc.Sprite);var n=i.getComponent(cc.Sprite);n.srcBlendFactor=this.srcBlendFactor,n.dstBlendFactor=this.dstBlendFactor,e.addChild(i),i.color=(new cc.Color).fromHEX(this.spriteColor)}return e},resizeNumberIfNeeded:function(){var t=this.numberContainer.width,e=this.maxContainerSize/t,i=t*this.numberContainer.scaleX;isFinite(e)&&Math.round(i)>this.maxContainerSize&&(this.numberContainer.scale=e)},_bounceEffect:function(t,e,i){this.numberContainer.runAction(cc.sequence(cc.scaleTo(.08,t),cc.scaleTo(.05,e),cc.callFunc(i,this)))},_setupNumberContainer:function(){if(!this._layout){var t=this._layout=this.numberContainer.getComponent(cc.Layout);t||(t=this._layout=this.numberContainer.addComponent(cc.Layout)),t.resizeMode=cc.Layout.ResizeMode.CONTAINER,t.horizontalDirection=cc.Layout.HorizontalDirection.RIGHT_TO_LEFT,t.type=cc.Layout.Type.HORIZONTAL,t.spacingX=this.layoutSpacingX,t.spacingY=this.layoutSpacingY}},onDestroy:function(){this.attributesForNumberContainer=void 0}});i.default=s,e.exports=i.default,cc._RF.pop()}},{NumberDisplayInterface:"NumberDisplayInterface",Utils:"Utils"}],NumberDisplayInterface:[function(t,e,i){"use strict";if(!cc._RF.push(e,"6e9deOwoQZHDb/Mv4FAbr3R","NumberDisplayInterface")){i.__esModule=!0,i.default=void 0;var n=t("Utils"),o=cc.Class({extends:cc.Component,properties:{numberContainer:cc.Node,maxContainerSize:1142,enableComma:{default:!0,tooltip:!1},enableDecimal:{default:!0,tooltip:!1},enableShortenNumber:{default:!1,tooltip:!1}},numberWithComma:function(t){var e=(0,n.getDefaultCurrencyFormat)().groupSeparator;return t.toString().replace(/\B(?=(\d{3})+(?!\d))/g,e)},setResizeAnimation:function(t){this._resizeFunc=t},displayNumber:function(t,e){throw void 0===e&&(e=!0),"NumberDisplayInterface: method must be overriden"},clear:function(){throw"NumberDisplayInterface: method must be overriden"},resizeNumberIfNeeded:function(){throw"NumberDisplayInterface: method must be overriden"}});i.default=o,e.exports=i.default,cc._RF.pop()}},{Utils:"Utils"}],NumberGenerator:[function(t,e,i){"use strict";if(!cc._RF.push(e,"61d42P8BwxJ85O9c8Si9s0V","NumberGenerator")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Object,ctor:function(){this._numberPool=new cc.NodePool,this.numberSprites=[]},getNumber:function(t){var e,i=this._getSpriteIndex(t),n=this._numberPool,o=this.numberSprites,a=n.get();return a?e=a.getComponent(cc.Sprite):(e=(a=new cc.Node).addComponent(cc.Sprite),a.setAnchorPoint(.5,.5)),11===i?a.setAnchorPoint(.5,1):10===i?a.setAnchorPoint(.5,1.2):a.setAnchorPoint(.5,.5),e.spriteFrame=o[i],a.width=e.node.width,a.height=e.node.height,a},_getSpriteIndex:function(t){return"-"===t?12:"+"===t?13:"."===t?11:","===t?10:+t},recycleNumber:function(t){t.destroy()}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],NumberLabelControllerLite:[function(t,e,i){"use strict";if(!cc._RF.push(e,"88c0bvJUDVGt4Zbi3DnKpmf","NumberLabelControllerLite")){Object.defineProperty(i,"__esModule",{value:!0});var n=t("Utils"),o=cc.misc.lerp,a=cc._decorator,s=a.ccclass,r=a.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.label=void 0,e.rollDuration=2,e.maxWidth=0,e._isIncrement=!1,e._time=0,e._startValue=0,e._endValue=0,e._countStarted=!1,e}return __extends(e,t),e.prototype.play=function(t,e){this._countStarted&&(this.unschedule(this._calculateNumber),this._countStarted=!1),this._startValue=t,this._endValue=e,this._time=0,this._countStarted=!0,this._isIncrement=!(t>e),this.schedule(this._calculateNumber,0)},e.prototype.skip=function(t){this._countStarted&&(this.unschedule(this._calculateNumber),this._countStarted=!1),this.label.string=n.formatCurrency(t),this._modifyNodeWidth()},e.prototype._modifyNodeWidth=function(){0!==this.maxWidth&&(this.label.node.width>this.maxWidth?this.label.overflow=cc.Label.Overflow.SHRINK:this.label.overflow=cc.Label.Overflow.NONE)},e.prototype._calculateNumber=function(t){this._time+=t;var e=this._time/this.rollDuration;e=e>=1?1:1-Math.cos(e*Math.PI*.5);var i=o(this._startValue,this._endValue,e);this._isIncrement?i>=this._endValue&&(i=this._endValue,this.unschedule(this._calculateNumber),this._countStarted=!1):i<=this._endValue&&(i=this._endValue,this.unschedule(this._calculateNumber),this._countStarted=!1),this.label.string=n.formatCurrency(i),this._modifyNodeWidth()},__decorate([r(cc.Label)],e.prototype,"label",void 0),__decorate([r(cc.Float)],e.prototype,"rollDuration",void 0),__decorate([r(cc.Float)],e.prototype,"maxWidth",void 0),__decorate([s],e)}(cc.Component);i.default=c,cc._RF.pop()}},{Utils:"Utils"}],NumberLabelController:[function(t,e,i){"use strict";if(!cc._RF.push(e,"b6e176hgIFCvo12TMjQIRc7","NumberLabelController")){i.__esModule=!0,i.default=void 0;var n,o=(n=t("NumberDisplayInterface"))&&n.__esModule?n:{default:n},a=t("Utils"),s=cc.Class({extends:o.default,properties:{_isScaling:{default:!1}},onLoad:function(){this._originalScaleX=this.numberContainer.scaleX,this._originalScaleY=this.numberContainer.scaleY,this._setupNumberContainer(),this.numberContainer.on(cc.Node.EventType.SIZE_CHANGED,this.resizeNumberIfNeeded,this)},setPrefix:function(t){this._prefix=t},displayNumber:function(t,e,i){void 0===e&&(e=!0),this._endCallback=i;var n=this._getNumberDisplay(t,e);if(this._label.string=this._prefix?this._prefix+n:n,e){var o=this._endCallback;this._endCallback=null,o&&o()}},_getNumberDisplay:function(t,e){var i=t,n="",o=1;this.enableShortenNumber&&t>999&&(o=1e3,n="k");var s=!(0,a.getDefaultCurrencyFormat)().hideDecimal&&this.enableDecimal;return i=s?Math.floor(i/o):Math.round(i/o),this.enableComma&&(i=this.numberWithComma(i)),s&&(i+=this._getDecimalStringFrom(t,e)),i+n},_getDecimalStringFrom:function(t,e){var i,n,o,s=(0,a.getDefaultCurrencyFormat)().decimalSeparator;this.enableShortenNumber&&t>999?(i=Math.round(t/100)/10,n=2,o=e?"":s+"0"):(i=t,n=3,o=s+"00");var r=i.toString();if(-1!=r.indexOf(s))for(o=r.substring(r.indexOf(s),r.indexOf(s)+n);o.length!=n;)o+="0";return o},clear:function(){this._label.string="",this._revertScale()},resizeNumberIfNeeded:function(){var t=this;if(!this._isScaling){var e=this.numberContainer.width,i=this.maxContainerSize/e,n=e*this.numberContainer.scaleX,o=this._endCallback;if(this._endCallback=null,isFinite(i)&&!this._isScaling&&Math.round(n)>this.maxContainerSize){this._isScaling=!0;var s=i-.06,r=function(){t._isScaling=!1,o&&o()};this._resizeFunc?this._resizeFunc(this.numberContainer,s,i,r):this._bounceEffect(s,i,r)}else(0,a.delayCallback)(0)(function(){o&&o()})}},_revertScale:function(){this._originalScaleX&&this._originalScaleY&&(this.numberContainer.scaleX=this._originalScaleX,this.numberContainer.scaleY=this._originalScaleY)},_bounceEffect:function(t,e,i){this.numberContainer.runAction(cc.sequence(cc.scaleTo(.08,t),cc.scaleTo(.05,e),cc.callFunc(i,this)))},_setupNumberContainer:function(){this._label=this.numberContainer.getComponent(cc.Label),this._label||(this._label=this.numberContainer.addComponent(cc.Label),this._label.fontSize=45,this._label.lineHeight=60,this._label.string="")},onDestroy:function(){this._endCallback=null,this._resizeFunc=null}});i.default=s,e.exports=i.default,cc._RF.pop()}},{NumberDisplayInterface:"NumberDisplayInterface",Utils:"Utils"}],NumberRollBaseController:[function(t,e,i){"use strict";if(!cc._RF.push(e,"b940fHCDN9PkIykJo0EuNqR","NumberRollBaseController")){i.__esModule=!0,i.default=void 0;var n,o=(n=t("NumberDisplayInterface"))&&n.__esModule?n:{default:n},a=cc.Class({extends:cc.Component,properties:{rollDuration:2,displayController:{default:null,type:o.default,override:!0}},onLoad:function(){this.enabled=!1},play:function(t,e,i,n){if(void 0===n&&(n=!0),!(e<0||t<0)){if(t===e)return n&&this.displayController.clear(),void this.displayController.displayNumber(e,!0,i);this._onComplete=i,this._startValue=t,this._maxValue=e,this._duration=this.rollDuration,this._time=0,n&&this.displayController.clear(),this.displayController.displayNumber(t,!1),this.enabled=!0}},skip:function(){var t=this;this.enabled&&(this.stop(!1),this.displayController.displayNumber(this._maxValue,!0,function(){var e=t._onComplete;t._onComplete=void 0,e&&e()}))},stop:function(t){this.enabled=!1,t&&(this.displayController.clear(),this._onComplete=void 0)},update:function(t){var e=this;this._time+=t;var i=this._time/this._duration;if(i>=1)this.stop(!1),this.displayController.displayNumber(this._maxValue,!0,function(){var t=e._onComplete;e._onComplete=void 0,t&&t()});else{i=1-Math.cos(i*Math.PI*.5);var n=cc.misc.lerp(this._startValue,this._maxValue,i);this.displayController.displayNumber(n,!1)}}});i.default=a,e.exports=i.default,cc._RF.pop()}},{NumberDisplayInterface:"NumberDisplayInterface"}],NumberRollController:[function(t,e,i){"use strict";if(!cc._RF.push(e,"6ce4aSiKeVGJZPyEX2VbsSD","NumberRollController")){i.__esModule=!0,i.default=void 0;var n=s(t("NumberDisplayController")),o=s(t("NumberRollBaseController")),a=cc.Class({extends:o.default,properties:{displayController:{default:null,type:n.default,override:!0}}});i.default=a,e.exports=i.default,cc._RF.pop()}function s(t){return t&&t.__esModule?t:{default:t}}},{NumberDisplayController:"NumberDisplayController",NumberRollBaseController:"NumberRollBaseController"}],NumberRollCurveController:[function(t,e,i){"use strict";if(!cc._RF.push(e,"a0a6doEXuNKgJy7Sh2yc8T3","NumberRollCurveController")){i.__esModule=!0,i.default=void 0;var n=s(t("NumberCurvedController")),o=s(t("NumberRollBaseController")),a=cc.Class({extends:o.default,properties:{displayController:{default:null,type:n.default,override:!0}}});i.default=a,e.exports=i.default,cc._RF.pop()}function s(t){return t&&t.__esModule?t:{default:t}}},{NumberCurvedController:"NumberCurvedController",NumberRollBaseController:"NumberRollBaseController"}],NumberRollLabelController:[function(t,e,i){"use strict";if(!cc._RF.push(e,"9b7acp+xyJLMJ5gESfkIJHz","NumberRollLabelController")){i.__esModule=!0,i.default=void 0;var n=s(t("NumberLabelController")),o=s(t("NumberRollBaseController")),a=cc.Class({extends:o.default,properties:{displayController:{default:null,type:n.default,override:!0}}});i.default=a,e.exports=i.default,cc._RF.pop()}function s(t){return t&&t.__esModule?t:{default:t}}},{NumberLabelController:"NumberLabelController",NumberRollBaseController:"NumberRollBaseController"}],ObstacleBundle:[function(t,e,i){"use strict";if(!cc._RF.push(e,"6c1c8jaAwRAQpotnvbCL9xH","ObstacleBundle")){Object.defineProperty(i,"__esModule",{value:!0}),i.BattleSceneDefaultAudioBundle=i.TreantAudioBundle=i.WerewolfAudioBundle=i.GolemAudioBundle=i.GargoyleAudioBundle=i.BatAudioBundle=i.MimicAudioBundle=i.SkeletonAudioBundle=i.WitchAudioBundle=i.TreantResourceBundle=i.WerewolfResourceBundle=i.GolemResourceBundle=i.GargoyleResourceBundle=i.BatResourceBundle=i.MimicResourceBundle=i.SkeletonResourceBundle=i.WitchResourceBundle=i.BattleSceneDefaultResourceBundle=void 0;var n=t("AssetManager"),o=t("AssetBundleUtils"),a=!0,s=cc._decorator,r=s.ccclass,c=(s.property,function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=this,s=!!e[0]&&e[0];if((n=t.call(this)||this).emptyMonsterPrefab=void 0,s)return n.emptyMonsterPrefab=o.loadResourceMethodWrapper("prefab/obstacles/enemy/empty_monster",cc.Prefab,a),n}return __extends(e,t),__decorate([r("BattleSceneDefaultResourceBundle")],e)}(n.ResourceBundle));i.BattleSceneDefaultResourceBundle=c;var l=function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=this,s=!!e[0]&&e[0];if((n=t.call(this)||this).witchPrefab=void 0,s)return n.witchPrefab=o.loadResourceMethodWrapper("prefab/obstacles/enemy/witch",cc.Prefab,a),n}return __extends(e,t),__decorate([r("WitchResourceBundle")],e)}(n.ResourceBundle);i.WitchResourceBundle=l;var h=function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=this,s=!!e[0]&&e[0];if((n=t.call(this)||this).skeletonPrefab=void 0,s)return n.skeletonPrefab=o.loadResourceMethodWrapper("prefab/obstacles/enemy/skeleton",cc.Prefab,a),n}return __extends(e,t),__decorate([r("SkeletonResourceBundle")],e)}(n.ResourceBundle);i.SkeletonResourceBundle=h;var u=function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=this,s=!!e[0]&&e[0];if((n=t.call(this)||this).mimicPrefab=void 0,s)return n.mimicPrefab=o.loadResourceMethodWrapper("prefab/obstacles/enemy/chest_guy",cc.Prefab,a),n}return __extends(e,t),__decorate([r("MimicResourceBundle")],e)}(n.ResourceBundle);i.MimicResourceBundle=u;var d=function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=this,s=!!e[0]&&e[0];if((n=t.call(this)||this).batPrefab=void 0,s)return n.batPrefab=o.loadResourceMethodWrapper("prefab/obstacles/enemy/bat",cc.Prefab,a),n}return __extends(e,t),__decorate([r("BatResourceBundle")],e)}(n.ResourceBundle);i.BatResourceBundle=d;var p=function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=this,s=!!e[0]&&e[0];if((n=t.call(this)||this).gargoylePrefab=void 0,s)return n.gargoylePrefab=o.loadResourceMethodWrapper("prefab/obstacles/enemy/gargoyle",cc.Prefab,a),n}return __extends(e,t),__decorate([r("GargoyleResourceBundle")],e)}(n.ResourceBundle);i.GargoyleResourceBundle=p;var f=function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=this,s=!!e[0]&&e[0];if((n=t.call(this)||this).golemPrefab=void 0,s)return n.golemPrefab=o.loadResourceMethodWrapper("prefab/obstacles/enemy/rock_monster",cc.Prefab,a),n}return __extends(e,t),__decorate([r("GolemResourceBundle")],e)}(n.ResourceBundle);i.GolemResourceBundle=f;var _=function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=this,s=!!e[0]&&e[0];if((n=t.call(this)||this).werewolfPrefab=void 0,s)return n.werewolfPrefab=o.loadResourceMethodWrapper("prefab/obstacles/enemy/werewolf",cc.Prefab,a),n}return __extends(e,t),__decorate([r("WerewolfResourceBundle")],e)}(n.ResourceBundle);i.WerewolfResourceBundle=_;var m=function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=this,s=!!e[0]&&e[0];if((n=t.call(this)||this).treantPrefab=void 0,s)return n.treantPrefab=o.loadResourceMethodWrapper("prefab/obstacles/enemy/tree_monster",cc.Prefab,a),n}return __extends(e,t),__decorate([r("TreantResourceBundle")],e)}(n.ResourceBundle);i.TreantResourceBundle=m;var g=function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=this,o=!!e[0]&&e[0];if((n=t.call(this)||this).battleBossBg=void 0,n.witchComboAttack=void 0,n.witchDie=void 0,n.witchLaserAttack=void 0,n.witchNormalAttack=void 0,n.witchRunAway=void 0,n.witchStruggleLoop=void 0,n.witchTeleport=void 0,o){var a=function(t,e){var i=Object.create(null);return i.path="audio/mp3/"+t,i.isMusic=e,i};return n.battleBossBg=a("battle_boss_bg",!0),n.witchComboAttack=a("witch_combo_atk",!1),n.witchDie=a("witch_die",!1),n.witchLaserAttack=a("witch_laser_atk",!1),n.witchNormalAttack=a("witch_normal_atk",!1),n.witchRunAway=a("witch_run_away",!1),n.witchStruggleLoop=a("witch_struggle_loop",!1),n.witchTeleport=a("witch_teleport",!1),n}}return __extends(e,t),__decorate([r("WitchAudioBundle")],e)}(n.AudioBundle);i.WitchAudioBundle=g;var y=function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=this,o=!!e[0]&&e[0];if((n=t.call(this)||this).skeletonDie=void 0,n.skeletonJumpAttack=void 0,n.skeletonNormalAttack=void 0,o){var a=function(t,e){var i=Object.create(null);return i.path="audio/mp3/"+t,i.isMusic=e,i};return n.skeletonDie=a("skeleton_die",!1),n.skeletonJumpAttack=a("skeleton_jump_atk",!1),n.skeletonNormalAttack=a("skeleton_normal_atk",!1),n}}return __extends(e,t),__decorate([r("SkeletonAudioBundle")],e)}(n.AudioBundle);i.SkeletonAudioBundle=y;var v=function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=this,o=!!e[0]&&e[0];if((n=t.call(this)||this).chestGuyAttack=void 0,n.chestGuyDie=void 0,n.chestGuyJumpAttack=void 0,o){var a=function(t,e){var i=Object.create(null);return i.path="audio/mp3/"+t,i.isMusic=e,i};return n.chestGuyAttack=a("chest_guy_atk",!1),n.chestGuyDie=a("chest_guy_die",!1),n.chestGuyJumpAttack=a("chest_guy_jump_atk",!1),n}}return __extends(e,t),__decorate([r("MimicAudioBundle")],e)}(n.AudioBundle);i.MimicAudioBundle=v;var b=function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=this,o=!!e[0]&&e[0];if((n=t.call(this)||this).batComboAttack=void 0,n.batDie=void 0,n.batNormalAttack=void 0,o){var a=function(t,e){var i=Object.create(null);return i.path="audio/mp3/"+t,i.isMusic=e,i};return n.batComboAttack=a("bat_combo_atk",!1),n.batDie=a("bat_die",!1),n.batNormalAttack=a("bat_normal_atk",!1),n}}return __extends(e,t),__decorate([r("BatAudioBundle")],e)}(n.AudioBundle);i.BatAudioBundle=b;var S=function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=this,o=!!e[0]&&e[0];if((n=t.call(this)||this).gargoyleComboAttack=void 0,n.gargoyleDie=void 0,n.gargoyleNormalAttack=void 0,o){var a=function(t,e){var i=Object.create(null);return i.path="audio/mp3/"+t,i.isMusic=e,i};return n.gargoyleComboAttack=a("gargoyle_combo_atk",!1),n.gargoyleDie=a("gargoyle_die",!1),n.gargoyleNormalAttack=a("gargoyle_normal_atk",!1),n}}return __extends(e,t),__decorate([r("GargoyleAudioBundle")],e)}(n.AudioBundle);i.GargoyleAudioBundle=S;var C=function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=this,o=!!e[0]&&e[0];if((n=t.call(this)||this).rockComboAttack=void 0,n.rockNormalAttack=void 0,n.rockDie=void 0,o){var a=function(t,e){var i=Object.create(null);return i.path="audio/mp3/"+t,i.isMusic=e,i};return n.rockComboAttack=a("rock_combo_atk",!1),n.rockNormalAttack=a("rock_normal_atk",!1),n.rockDie=a("rock_die",!1),n}}return __extends(e,t),__decorate([r("GolemAudioBundle")],e)}(n.AudioBundle);i.GolemAudioBundle=C;var A=function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=this,o=!!e[0]&&e[0];if((n=t.call(this)||this).wolfDie=void 0,n.wolfImpactAttack=void 0,n.wolfNormalAttack=void 0,n.wolfTurnAroundAttack=void 0,o){var a=function(t,e){var i=Object.create(null);return i.path="audio/mp3/"+t,i.isMusic=e,i};return n.wolfDie=a("wolf_die",!1),n.wolfImpactAttack=a("wolf_impact_atk",!1),n.wolfNormalAttack=a("wolf_normal_atk",!1),n.wolfTurnAroundAttack=a("wolf_turn_around_atk",!1),n}}return __extends(e,t),__decorate([r("WerewolfAudioBundle")],e)}(n.AudioBundle);i.WerewolfAudioBundle=A;var E=function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=this,o=!!e[0]&&e[0];if((n=t.call(this)||this).treeDie=void 0,n.treeNormalAttack=void 0,n.treeScissorAttack=void 0,n.treeToxicAttack=void 0,o){var a=function(t,e){var i=Object.create(null);return i.path="audio/mp3/"+t,i.isMusic=e,i};return n.treeDie=a("tree_die",!1),n.treeNormalAttack=a("tree_normal_atk",!1),n.treeScissorAttack=a("tree_scissor_atk",!1),n.treeToxicAttack=a("tree_toxic_atk",!1),n}}return __extends(e,t),__decorate([r("TreantAudioBundle")],e)}(n.AudioBundle);i.TreantAudioBundle=E;var M=function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=this,o=!!e[0]&&e[0];if((n=t.call(this)||this).battleBackgroundOne=void 0,n.battleBackgroundTwo=void 0,o){var a=function(t,e){var i=Object.create(null);return i.path="audio/mp3/"+t,i.isMusic=e,i};return n.battleBackgroundOne=a("battle_bg_1",!0),n.battleBackgroundTwo=a("battle_bg_2",!0),n}}return __extends(e,t),__decorate([r("BattleSceneDefaultAudioBundle")],e)}(n.AudioBundle);i.BattleSceneDefaultAudioBundle=M,cc._RF.pop()}},{AssetBundleUtils:"AssetBundleUtils",AssetManager:"AssetManager"}],ObstacleManager:[function(t,e,i){"use strict";if(!cc._RF.push(e,"827e1An1/ZMPo7a9G7CQufF","ObstacleManager")){i.__esModule=!0,i.default=void 0;var n=m(t("BaseActor")),o=m(t("EnemyAI")),a=m(t("EnemyIdleState")),s=m(t("HpState")),r=m(t("Chest")),c=m(t("Portal")),l=t("Enum"),h=m(t("ObstacleSpawner")),u=m(t("DataManager")),d=t("AssetManager"),p=t("GeneralBundle"),f=t("Utils"),_=cc.Class({extends:cc.Component,properties:{enemyLayer:cc.Node,bossState:s.default,rockRelicPrefab:cc.Prefab,_HDVer:cc.Boolean},onLoad:function(){this._state=void 0,this._currentChest=void 0,this._currentPortal=void 0,this._enemies=[],this._enemiesAI=[]},init:function(t){this._rpgController=t,this._initX=1050,this._pillarInitX=750,this._chestInitX=1150,this._portalInitX=200,this._monsterSpawnX=2300,this._portalSpawnX=1400,this._monsterSpawnOffsetX=150,this._enemyIndexMap={},this._setup()},_setup:function(){this.spawner=(new h.default).init(),this.spawner.relicPrefab=this.rockRelicPrefab},isHDVersion:function(t){this._isHDVer=t},spawnPortal:function(t){var e;e=t?this._portalInitX:2*this._portalSpawnX,this.spawnPortalAtPosition(e,t)},spawnPortalAtPosition:function(t,e,i){this._currentPortal&&this.despawnPortal(this._currentPortal);var n=cc.instantiate(this.portalPrefab);n.x=t,n.active=!0,this.enemyLayer.addChild(n);var o=n.getComponent(c.default);e?(n.scaleX=-1,n.zIndex=-1):(n.scaleX=1,n.zIndex=1),o.didEliminate=this.despawnPortal.bind(this),o.play(),this._currentPortal=o,i&&i(n)},spawnRelic:function(t,e){var i=this._monsterSpawnOffsetX,n=(t?this._pillarInitX:this._monsterSpawnX)+i;this._enemies.unshift([]),this._enemiesAI.unshift([]),this.spawnRelicAtPosition(n,e)},spawnChest:function(t){var e=this._chestInitX;this.spawnChestAtPosition(e,t)},spawnChestAtPosition:function(t,e){var i=this,n=!1;this._currentChest&&(this.despawnChest(this._currentChest),n=!0);var o=function(n){n.x=t,n.active=!0,i.enemyLayer.addChild(n);var o=n.getComponent(r.default);o.itemGenerator=i._rpgController.itemGenerator,o.followActor=i._rpgController.playerManager.getPlayer(),o.didEliminate=i.despawnChest.bind(i),i._currentChest=o,e&&e(n)},a=cc.instantiate(d.assetManager.getAsset(p.GeneralResourceBundle).chestPrefab);n?this.scheduleOnce(function(){o(a)},.3):o(a)},spawnEnemies:function(t,e){var i=this,n=this.spawner,o=this.enemyLayer,a=this._monsterSpawnOffsetX,s=t?this._initX:this._monsterSpawnX;this._enemies.unshift([]),this._enemiesAI.unshift([]);var r,c=[],h=[],d=u.default.rpgObstacleEnemyList;d.forEach(function(t){var e=l.EnemyType[t.type];e||(e="witch"),t.currentHp<=0&&!t.isDizzy&&(h.push(t.type),e="empty_monster"),c.push(e)});var p=function(){if(r.length===d.length){if(d.length<=2)for(var n=s,c=0;c<d.length;c++){var l=r[c],h=d[c],u=n+1.5*a*c;l.x=u,o.addChild(l),i._registerEnemyActor(l,h,t)}else for(var p=s-a,f=0;f<d.length;f++){var _=r[f],m=d[f],g=p+a*f;_.x=g,o.addChild(_),i._registerEnemyActor(_,m,t)}e&&e()}};t?n.dynamicallySpawnEnemies(c,function(t){if(r=t,p(),h.length){var e=i._rpgController.playerManager.getPlayer(),n=i.getEnemies()[0].node.position;i._rpgController.itemGenerator.initCoin(h,n,i.enemyLayer,e)}}):(0,f.spawnCallback)(function(t){n.dynamicallySpawnEnemies(c,function(e){r=e,t()})},(0,f.delayCallback)(1))(p)},spawnRelicAtPosition:function(t,e){var i=this,n=this.enemyLayer;this.spawner.dynamicallySpawnEnemies(["rock_pillar"],function(o){var a=o[0];i._spawnRelicItemNode(t,function(o){var s=a.getComponent("RockPillar");a.x=t,n.addChild(a),i._registerEnemyActor(a,u.default.rpgObstacleRelicList),o&&(u.default.rpgObstacleHasTreasureChest?s.setPillarItem(o,l.PillarItemPosition.Behind):(s.executeRPGControllerRelicBattleEndNextQueueCommand=i._rpgController.executeRelicBattleEndNextQueueCommand.bind(i._rpgController),s.setPillarItem(o,l.PillarItemPosition.Top))),s.didEliminate=i.didEliminateRelic.bind(i),e&&e()})})},_spawnRelicItemNode:function(t,e){switch(u.default.rpgObstacleRelicType){case l.RELIC_ITEM_TYPE.NONE:var i=this._rpgController.symbolManager;i.spawnSymbol(void 0,t),e&&e(i.getCurrentSymbol().node);break;case l.RELIC_ITEM_TYPE.TREASURE_CHEST:this.spawnChestAtPosition(t,e);break;case l.RELIC_ITEM_TYPE.MONEY_BAG:var n=this._rpgController.itemGenerator;e&&e(n.generateItemMoneyBag(t,this.enemyLayer,!0));break;case l.RELIC_ITEM_TYPE.TREASURE_MAP:var o=this._rpgController.itemGenerator;e&&e(o.generateItemMap(t,this.enemyLayer));break;default:e&&e()}},_registerEnemyActor:function(t,e,i){void 0===i&&(i=!1);var s=this._enemies[0],r=this._enemiesAI[0],c=t.getComponent(n.default);if(s&&r){if(c.itemGenerator=this._rpgController.itemGenerator,c.followActor=this._rpgController.playerManager.getPlayer(),c.isBoss()&&(c.didBossHpChanged=this.didBossHpChanged.bind(this)),i){var l=c.getApproachRange()-600;c.node.x+=l}c.init(e),c.callShakeScreenEffect=this.callShakeScreen.bind(this),c.extraEffectPlayer=this._rpgController.extraEffectPlayer,c.emoticonEffectPlayer=this._rpgController.emoticonEffectPlayer,c.chatBubbleGenerator=this._rpgController.chatBubbleGenerator,s.push(c);var h=new o.default;h.init(this._rpgController,c),h.setState(new a.default),r.push(h)}else this.despawnEnemy(c)},callShakeScreen:function(){this._rpgController.shakeScreen&&this._rpgController.shakeScreen()},getApproachEnemy:function(){var t=this.getAliveEnemies(),e=this.getEnemies();if(!(t.length<=0))return e.length>2?e[1]:e[0]},getAliveEnemies:function(){var t=this.getEnemies();return t?t.filter(function(t){return!t.isDead()}):[]},getEnemies:function(){return this._enemies[0]},getEnemyGroups:function(){return this._enemies},getCurrentChest:function(){return this._currentChest},getCurrentPortal:function(){return this._currentPortal},getCurrentRound:function(){if(u.default.hasRpgObstacleInfo())return this._currentRound},despawnPortal:function(t){this.spawner.recyclePortal(t),this._currentPortal=void 0},despawnChest:function(t){this.spawner.recycleChest(t),t===this._currentChest&&(this._currentChest=void 0)},despawnEnemy:function(t){this.spawner.recycleEnemy(t)},updateData:function(){u.default.hasRpgObstacleInfo()&&(this._currentRound=u.default.rpgObstacleRound,u.default.rpgObstacleEnemyIsMonster?this.updateEnemiesData():this.updateRelicData())},updateRelicData:function(){var t=this.getEnemies();!t||t.length>1||t.length<=0||t[0].updateData(u.default.rpgObstacleRelicList)},updateEnemiesData:function(){var t=u.default.rpgObstacleEnemyList,e=this.getEnemies();if(e){var i=e.length;if(t.length===e.length)for(var n=0;n<i;n++){var o=e[n],a=t[n];o.updateData(a)}}},_battleEndEvaluation:function(t){var e=this;this.notifyWonBattle(function(){e.willInterruptAction(!0),t&&t()})},executeBattleEndPhase:function(t){this._battleEndEvaluation(t)},executeActionPhase:function(t){var e=this,i=this.getAliveEnemies(),n=i.length;if(0===(u.default.hasRpgObstacleInfo()?u.default.rpgObstacleRound:l.OBSTACLE_ACTION_ROUND.SPAWN))return this.willInterruptAction(!0),void(t&&t());if(u.default.rpgObstacleEnemyIsMonster&&u.default.rpgObstacleIsFinished)t&&t();else{var o=u.default.hasRpgObstacleInfo()?u.default.rpgObstacleRound===l.OBSTACLE_ACTION_ROUND.ATTACK:void 0;if(0===n||!o)return this.willInterruptAction(!0),void(t&&t());var a=this._rpgController.playerManager.getPlayer();(function o(s){if(!(s>=n)){var r=s===n-1;e.willInterruptAction(r),i[s].attack(a,e._isHDVer,function(){var i=r?t:f.emptyFunc;e.interruptAction(i,r)}),e.scheduleOnce(function(){o(s+1)},.3*(s+1))}})(0)}},willInterruptAction:function(t){this.beforeInterruptAction&&this.beforeInterruptAction(t)},interruptAction:function(t,e){this.didInterruptAction?this.didInterruptAction(t,e):t&&t()},getScrollableGroups:function(){var t=[],e=this._getScrollableEnemyGroups(),i=this._getScrollableChestGroups(),n=this._getScrollablePortalGroups();return t.concat(e,i,n)},recycleObject:function(t,e,i){switch(i){case-99:case-98:return}},_getScrollableEnemyGroups:function(){var t=this.getEnemyGroups(),e=[];return t.forEach(function(t,i){var n={objectList:t.map(function(t){return t.node}),speedFactor:1.1,groupIndex:i};e.push(n)}),e},_getScrollableChestGroups:function(){var t=[],e=this._currentChest;if(e){var i={objectList:[e.node],speedFactor:1.1,groupIndex:-99};t.push(i)}return t},_getScrollablePortalGroups:function(){var t=[],e=this._currentPortal;if(e){var i={objectList:[e.node],speedFactor:1.1,groupIndex:-98};t.push(i)}return t},shouldShowBossState:function(){var t=this.getEnemies();return!!t&&t.filter(function(t){return t.isBoss()}).length>0},didEliminateRelic:function(){this.scheduleOnce(this._animatedRecycleCurrentEnemyGroup,.1)},_animatedRecycleCurrentEnemyGroup:function(){this.recycleCurrentEnemyGroup(!0,f.emptyFunc)},didBossHpChanged:function(t,e){var i=this.bossState;i&&i.setBlood(e)},recycleCurrentEnemyGroup:function(t,e){var i=this,n=this.getEnemyGroups().pop(),o=this._enemiesAI.pop(),a=this.spawner;if(n)for(var s=function(s){var r=n[s],c=o[s],l=s===n.length-1;c.destroy(),t?r.exitBattlefield(function(){i.despawnEnemy(r),l&&i.scheduleOnce(function(){a.releaseAllEnemyPrefabs(),e&&e()},.3)}):(i.despawnEnemy(r),l&&(a.releaseAllEnemyPrefabs(),e&&e()))},r=n.length-1;r>=0;r--)s(r)},notifyWonBattle:function(t){var e=this;this.node.runAction(cc.sequence([cc.delayTime(.5),cc.callFunc(function(){e.didWinBattle&&e.didWinBattle(t)})]))},revealEnemiesState:function(){var t=this,e=this.getEnemies();e&&e.forEach(function(e){e.isBoss()&&t.bossState.isHidden()&&t.bossState.show(),e.enterBattlefield()})},hideEnemiesState:function(){this.bossState.isHidden()||this.bossState.hide()},destroy:function(){this._currentChest&&(this.despawnChest(this._currentChest),this._currentChest=void 0),this._currentPortal&&(this.despawnPortal(this._currentPortal),this._currentPortal=void 0),this.recycleCurrentEnemyGroup(!1,void 0),this._rpgController=void 0,this.spawner.destroy(),this._super()},update:function(t){var e=this._enemiesAI[0];if(e)for(var i=e.length-1;i>=0;i--)e[i].executeAction(t)}});i.default=_,e.exports=i.default,cc._RF.pop()}function m(t){return t&&t.__esModule?t:{default:t}}},{AssetManager:"AssetManager",BaseActor:"BaseActor",Chest:"Chest",DataManager:"DataManager",EnemyAI:"EnemyAI",EnemyIdleState:"EnemyIdleState",Enum:"Enum",GeneralBundle:"GeneralBundle",HpState:"HpState",ObstacleSpawner:"ObstacleSpawner",Portal:"Portal",Utils:"Utils"}],ObstacleSpawner:[function(t,e,i){"use strict";if(!cc._RF.push(e,"cfc2e8SBy9IS7TQBxDT8DPL","ObstacleSpawner")){i.__esModule=!0,i.default=void 0;var n,o=(n=t("EnemyLoader"))&&n.__esModule?n:{default:n},a=t("AssetManager"),s=t("ObstacleBundle"),r=t("Enum"),c=cc.Class({extends:cc.Object,ctor:function(){this.enemyLoader=new o.default,this.relicPrefab=void 0,this._enemyNodes=[]},init:function(){return this},dynamicallySpawnEnemies:function(t,e){var i=this,n=this.enemyLoader,o=this.instantiateEnemy;this._enemyNodes=[];var c=this._enemyNodes;n.loadEnemies(t,function(){for(var n=0;n<t.length;n++)switch(t[n]){case r.OBSTACLE_NAME.BAT:o(t[n],a.assetManager.getAsset(s.BatResourceBundle).batPrefab,c);break;case r.OBSTACLE_NAME.MIMIC:o(t[n],a.assetManager.getAsset(s.MimicResourceBundle).mimicPrefab,c);break;case r.OBSTACLE_NAME.EMPTY_MONSTER:o(t[n],a.assetManager.getAsset(s.BattleSceneDefaultResourceBundle).emptyMonsterPrefab,c);break;case r.OBSTACLE_NAME.GARGOYLE:o(t[n],a.assetManager.getAsset(s.GargoyleResourceBundle).gargoylePrefab,c);break;case r.OBSTACLE_NAME.GOLEM:o(t[n],a.assetManager.getAsset(s.GolemResourceBundle).golemPrefab,c);break;case r.OBSTACLE_NAME.RELIC:o(t[n],i.relicPrefab,c);break;case r.OBSTACLE_NAME.SKELETON:o(t[n],a.assetManager.getAsset(s.SkeletonResourceBundle).skeletonPrefab,c);break;case r.OBSTACLE_NAME.TREANT:o(t[n],a.assetManager.getAsset(s.TreantResourceBundle).treantPrefab,c);break;case r.OBSTACLE_NAME.WEREWOLF:o(t[n],a.assetManager.getAsset(s.WerewolfResourceBundle).werewolfPrefab,c);break;case r.OBSTACLE_NAME.WITCH:o(t[n],a.assetManager.getAsset(s.WitchResourceBundle).witchPrefab,c)}e&&e(c)})},instantiateEnemy:function(t,e,i){var n=cc.instantiate(e);n._enemyName=t,n.active=!0,i.push(n)},recycleEnemy:function(t){t.node._enemyName;var e=t.node;t.destroy(),e.removeFromParent(),e.destroy()},releaseAllEnemyPrefabs:function(){this.enemyLoader.releaseAllPrefabs()},recycleChest:function(t){var e=t.node;t.stopAnimation(),e.removeFromParent(),e.active=!1,e.destroy()},recyclePortal:function(t){var e=t.node;e.removeFromParent(),e.active=!1,e.destroy()},destroy:function(){this.enemyLoader.destroy(),this._super()}});i.default=c,e.exports=i.default,cc._RF.pop()}},{AssetManager:"AssetManager",EnemyLoader:"EnemyLoader",Enum:"Enum",ObstacleBundle:"ObstacleBundle"}],OperatorJurisdictionModel:[function(t,e){"use strict";if(!cc._RF.push(e,"ec597n6rnlNXI+b+vFuStwZ","OperatorJurisdictionModel")){var i=function(t,e){var i=a();return function(t){return i[t-=180]}(t,e)},n=System[i(192)](i(184)+i(190)+i(194)+"rk")[i(188)+i(195)+i(196)+i(185)+i(198)+i(193)+i(182)+i(180)+"l"];for(var o in n)e[i(183)+i(191)+"s"][o]=n[o];e[i(183)+i(191)+"s"][i(187)+i(186)+i(181)+"e"]=!0,cc._RF.pop()}function a(){var t=["ode","dul","onM","exp","bvf","uri","sMo","__e","Ope","uil","ram","ort","get","cti","ewo","rat","orJ","der","sdi","isB"];return(a=function(){return t})()}},{}],PGGameHandler:[function(t,e,i){"use strict";if(!cc._RF.push(e,"c0dddL/QJJCoZLeNhBq6+Rt","PGGameHandler")){Object.defineProperty(i,"__esModule",{value:!0});var n,o=t("GameEventHandler");(function(t){t.PAUSE="pause",t.RESUME="resume"})(n||(n={}));var a=new(function(t){function e(){return null!==t&&t.apply(this,arguments)||this}return __extends(e,t),e.prototype.subscribeGameStateEvent=function(){o.subscribeGamePauseEvent(),o.subscribeGameResumeEvent()},e.prototype.setupGameStateEventCallback=function(t,e){var i=this;this._resumeEvent=function(){e(),o.setGamePauseEventCallback(n.PAUSE,i._pauseEvent),o.removeGameResumeEventCallback(n.RESUME)},this._pauseEvent=function(){t(),o.setGameResumeEventCallback(n.RESUME,i._resumeEvent),o.removeGamePauseEventCallback(n.PAUSE)},o.setGamePauseEventCallback(n.PAUSE,this._pauseEvent)},e.prototype.setupGamePlayUIBlockEventCallback=function(t,e){o.setGamePlayUIBlockEventCallback(function(i){i?e():t()})},e.prototype.emitGamePauseEvent=function(){o.emitGameNotifyPauseEvent()},e.prototype.isGamePause=function(){return o.isGameStatePaused()},e.prototype.emitGameAutoplayStarted=function(t){o.emitAutoplayStarted(t)},e.prototype.emitGameAutoplayStopped=function(){o.emitAutoplayStopped()},e.prototype.emitWinAnnouncement=function(t){o.emitGameWinAnnouncement(t)},e}(cc.Object));i.default=a,cc._RF.pop()}},{GameEventHandler:"GameEventHandler"}],PageControlButton:[function(t,e,i){"use strict";if(!cc._RF.push(e,"49dd983G1VDGoSnw7stgTlI","PageControlButton")){Object.defineProperty(i,"__esModule",{value:!0});var n=t("Button"),o=cc._decorator,a=o.ccclass,s=o.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprite=void 0,e.selectImg=void 0,e.normalImg=void 0,e.selectTintColor=void 0,e.normalTintColor=void 0,e.index=0,e._isSelect=!1,e}return __extends(e,t),e.prototype.init=function(){this.selectImg&&(this.sprite.SpriteFrame=this.normalImg),this.normalColor=this.normalTintColor,this._isSelect=!1},e.prototype.setSelect=function(){this._isSelect||(this.selectImg&&(this.sprite.spriteFrame=this.selectImg),this.normalColor=this.selectTintColor,this._isSelect=!0)},e.prototype.setUnselect=function(){this._isSelect&&(this.selectImg&&(this.sprite.spriteFrame=this.normalImg),this.normalColor=this.normalTintColor,this._isSelect=!1)},e.prototype.selectDot=function(){this.delegate&&this.delegate.canChangePage&&!this.delegate.canChangePage()||this._isSelect||(this.selectImg&&(this.sprite.spriteFrame=this.selectImg),this.normalColor=this.selectTintColor,this._isSelect=!0,this.delegate&&this.delegate.didSelectDotAtIndex&&this.delegate.didSelectDotAtIndex(this.index))},__decorate([s(cc.Sprite)],e.prototype,"sprite",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"selectImg",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"normalImg",void 0),__decorate([s(cc.Color)],e.prototype,"selectTintColor",void 0),__decorate([s(cc.Color)],e.prototype,"normalTintColor",void 0),__decorate([s(cc.Integer)],e.prototype,"index",void 0),__decorate([a],e)}(n.default);i.default=r,cc._RF.pop()}},{Button:"Button"}],PageControl:[function(t,e,i){"use strict";if(!cc._RF.push(e,"db0df9/6UZNW6sskb9QIFSg","PageControl")){Object.defineProperty(i,"__esModule",{value:!0});var n=t("PageControlButton"),o=cc._decorator,a=o.ccclass,s=o.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.buttonPrefab=void 0,e.delegate=void 0,e._currentPage=0,e._totalPage=0,e._dotButtons=[],e}return __extends(e,t),e.prototype.init=function(t,e,i){if(!(t>=e||t<0)){this.node.removeAllChildren(),this._totalPage=e,this.delegate=i;for(var o=[],a=0;a<e;a++){var s=cc.instantiate(this.buttonPrefab);s.parent=this.node;var r=s.getComponent(n.default);r.index=a,r.delegate=this,r.init(),o.push(r)}o[t].setSelect(),this._currentPage=t,this._dotButtons=o}},e.prototype.layoutContainer=function(t){this.getComponent(cc.Layout).spacingX=t},e.prototype.changeCurrentPage=function(t){var e=this._totalPage;if(!(t<0||t>=e)){var i=this._dotButtons;i[this._currentPage].setUnselect(),i[t].setSelect(),this._currentPage=t}},e.prototype.getCurrentPage=function(){return this._currentPage},e.prototype.didSelectDotAtIndex=function(t){this._dotButtons[this._currentPage].setUnselect(),this._currentPage=t,this.delegate&&this.delegate.changePage&&this.delegate.changePage(t)},e.prototype.canChangePage=function(){var t=this.delegate;return!(t&&t.enableChangePage&&!t.enableChangePage())},__decorate([s(cc.Prefab)],e.prototype,"buttonPrefab",void 0),__decorate([a],e)}(cc.Component);i.default=r,cc._RF.pop()}},{PageControlButton:"PageControlButton"}],PetManager:[function(t,e,i){"use strict";if(!cc._RF.push(e,"0a4eaIghetGhre+yqLUrIpA","PetManager")){i.__esModule=!0,i.default=void 0;var n,o=(n=t("AudioLibrary"))&&n.__esModule?n:{default:n},a=t("GamePreference"),s=t("AssetManager"),r=t("GeneralBundle"),c=t("Utils"),l=shell.I18n,h=cc.Enum({Idle:-1,Placing:-1,Returning:-1}),u=cc.Enum({Idle:-1,Touching:-1,GoingToSpin:-1,Spinning:-1,Returning:-1}),d=cc.Enum({None:-1,Special:-1,Respin:-1}),p=cc.v2(0,-250),f=[cc.v2(308,34),cc.v2(313,-530),cc.v2(-310,-530),cc.v2(-310,34)],_=cc.Class({extends:cc.Component,properties:{catPrefab:cc.Prefab,worldLayer:cc.Node,exitPosition:cc.v2(-900,400),_isHDVer:cc.Boolean},onLoad:function(){this._style=d.None,this._currentSpecialPhase=h.Idle,this._currentRespinPhase=u.Idle},moveBy:function(t,e,i){var n=this._pet;if(n){var o=n.node.x+t;n.node.runAction(cc.sequence([cc.moveBy(e,cc.v2(t,0)),cc.callFunc(function(){n.node.x=o,i&&i()})]))}},init:function(t,e){this._rpgController=t,this._isHDVer=e;var i=s.assetManager.getAsset(r.GeneralGameAudioBundle);this.collectSymbolSound=i.catCollectGem,this.placeSymbolSound=i.catPlaceSymbol,this.victorySound=i.catVictory,this.gemChangeColorSound=i.gemColourChange,this.protectSound=i.catProtect},spawnPet:function(t){if(!this._pet){var e=cc.instantiate(this.catPrefab);e.x=t.x,e.y=t.y;var i=this._pet=e.getComponent("Cat");this.worldLayer.addChild(e),i.isHDVersion(this._isHDVer),this._isHDVer=void 0,this._exitPosition=this.exitPosition,this._style=d.None,this._currentSpecialPhase=h.Idle,this._currentRespinPhase=u.Idle,this._rpgController&&(i.chatBubbleGenerator=this._rpgController.chatBubbleGenerator),this._grabSymbol=void 0,this._petSpeed=1200,i.idle()}},getPet:function(){return this._pet},startProtectPlayer:function(t){var e=this._pet;o.default.playEffect(this.protectSound),e.protect(t)},startVictoryDance:function(t){var e=this._pet;o.default.playEffect(this.victorySound),e.victory(t)},startCollectSymbol:function(t,e,i){if(this._style===d.None){this._style=d.Special,this._currentSpecialPhase=h.Idle,this._grabSymbol=t;var n=t.node,a=this._pet;this._originalPosition=a.node.position,this._pickPosition=cc.v2(n.x-110,n.y+100),this._placePosition=e,this._callback=i,a.didFinishStartGrab=this.didSpecialFinishStartGrab.bind(this),a.didFinishEndGrab=this.didSpecialFinishEndGrab.bind(this),a.didFinishFlyDown=this.didSpecialFinishFlyDown.bind(this),a.stopBubbleChat(),a.startGrab(),o.default.playEffect(this.collectSymbolSound)}},didSpecialFinishStartGrab:function(){var t=this._pet,e=t.node,i=this._pickPosition,n=this._grabSymbol,o=this.effectLayer;n.stopFloatAnimation(),this.scheduleOnce(this._setPetIndex,.15),e.runAction(cc.sequence([cc.moveTo(.3,i),cc.callFunc(function(){(0,c.transferToParent)(e,o),e.position=new cc.v2(e.x+40,e.y-45),e.scaleX=e.scaleX-.4,e.scaleY=e.scaleY-.4,e.zIndex=20,t.grab()})]))},_setPetIndex:function(){this._pet.node.zIndex=20},didSpecialFinishEndGrab:function(){var t=this._pet,e=this._grabSymbol.node;this._grabSymbol.stopShineAnimation(),(0,c.transferToParent)(e,t.node),e.x=21,e.y=-16.5,e.scaleX=.33,e.scaleY=.33,t.flyDown(),o.default.playEffect(this.placeSymbolSound)},didSpecialFinishFlyDown:function(){this._pickPosition=this._pet.node.position;var t=cc.v2(this._pickPosition.x+200,this._pickPosition.y),e=cc.v2(this._placePosition.x+200,this._placePosition.y);this._placeCoefficients=this._calculateCoefficients(this._pickPosition,this._placePosition,t,e),this._placeDistance=this._calculateBezierArcLength(this._placeCoefficients,this._pickPosition);var i=cc.v2(this._placePosition.x-500,this._placePosition.y),n=cc.v2(this._exitPosition.x-100,this._exitPosition.y-500);this._exitCoefficients=this._calculateCoefficients(this._placePosition,this._exitPosition,i,n),this._exitDistance=this._calculateBezierArcLength(this._exitCoefficients,this._placePosition),this._speed=0,this._currentSpecialPhase=h.Placing},didRespinFinishStartGrab:function(){var t=this._pet.node;t.zIndex=20,(0,c.transferToParent)(t,this.effectLayer),this._pet.directFlyDown(),this._startSpinning()},didRespinFinishFlyDown:function(){var t=this._pet.node;t.zIndex=20,(0,c.transferToParent)(t,this.effectLayer),this._startSpinning()},_startSpinning:function(){var t=this._pet.node;this._flyDownPosition=t.position;var e=this._calculateAngle(this._originalPosition,this._flyDownPosition);t.angle=-e;var i=this._getControlPoint(this._flyDownPosition,this._touchPosition,this._quarterIndex);this._touchDistance=this._calculateDistance(this._flyDownPosition,this._touchPosition),this._touchCoefficients=this._calculateQuadraticCoefficient(this._flyDownPosition,this._touchPosition,i),this._spinningAngle=Math.atan2(this._touchPosition.y-p.y,this._touchPosition.x-p.x),this._radius=this._calculateDistance(p,this._touchPosition),this._speed=0,this._currentRespinPhase=u.Touching},_getControlPoint:function(t,e,i){var n,o,a=this._calculateDistance(t,e)/4;return a=t.x>e.x?-1*a:a,i<2?(n=(t.x+e.x)/2+a,o=(t.y+e.y)/2+a):(n=(t.x+e.x)/2-a,o=(t.y+e.y)/2+a),cc.v2(n,o)},_calculateCoefficients:function(t,e,i,n){var o=t,a=e,s=i,r=n,c=3*(s.x-o.x),l=3*(r.x-s.x)-c,h=a.x-o.x-c-l,u=3*(s.y-o.y),d=3*(r.y-s.y)-u;return{cx:c,bx:l,ax:h,cy:u,by:d,ay:a.y-o.y-u-d}},_calculateQuadraticCoefficient:function(t,e,i){return{p0:t,p1:i,p2:e}},_calculateQuadNewPosition:function(t,e){var i=e.p0,n=e.p1,o=e.p2,a=(1-t)*(1-t)*i.x+2*(1-t)*t*n.x+t*t*o.x,s=(1-t)*(1-t)*i.y+2*(1-t)*t*n.y+t*t*o.y;return cc.v2(a,s)},_calculateBezierArcLength:function(t,e){for(var i=0,n=e,o=.1;o<=1;o+=.05){var a=this._calculateNewPosition(o,t,e);i+=this._calculateDistance(n,a),n=a}return i},_calculateCardinalDistance:function(t){for(var e=0,i=t[0],n=1;n<t.length;n+=1){var o=t[n];e+=this._calculateDistance(i,o),i=o}return e},_calculateDistance:function(t,e){var i=this._xDistance=e.x-t.x,n=this._yDistance=e.y-t.y;return Math.sqrt(Math.pow(i,2)+Math.pow(n,2))},_calculateNewPosition:function(t,e,i){var n=e.ax*Math.pow(t,3)+e.bx*Math.pow(t,2)+e.cx*t+i.x,o=e.ay*Math.pow(t,3)+e.by*Math.pow(t,2)+e.cy*t+i.y;return cc.v2(n,o)},_calculateAngle:function(t,e){var i=this._xDistance=e.x-t.x,n=this._yDistance=e.y-t.y,o=Math.atan2(n,i);return-(o=o/Math.PI*180)-90},_getQuarterWithPoint:function(t){var e,i=this,n=0;return f.forEach(function(o,a){var s=i._calculateDistance(t,o);0===a?e=s:s<e&&(n=a,e=s)}),n},resetBackToPlayer:function(){var t=this,e=this._pet,i=e.node,n=this._originalPosition;(0,c.transferToParent)(i,this.worldLayer),i.opacity=255,i.scale=new cc.v2(3,3),e.setPosition(cc.v2(i.x,n.y)),e.setRotation(0),e.idle(),e.didFinishStartGrab=void 0,e.didFinishEndGrab=void 0,e.didFinishFlyDown=void 0,i.runAction(cc.sequence([cc.moveTo(1.5,n),cc.callFunc(function(){i.position=n,t._isCollecting=!1,t._style=d.None,t._callback&&t._callback(),t._grabSymbol=void 0,t._callback=void 0})]))},executeMeetRelicDialog:function(t){var e=this._pet;t?a.gamePreference.meetMapOrMoney?(0,c.randomInt)(0,9)>3&&e.displayBubbleChat(l.t("CatDialog.EncounteredRelicBlockTreasureOnTop")):(e.displayBubbleChat(l.t("CatDialog.EncounteredRelicBlockTreasureOnTop")),a.gamePreference.meetMapOrMoney=!0):a.gamePreference.meetTreasureBehind?(0,c.randomInt)(0,9)>3&&e.displayBubbleChat(l.t("CatDialog.EncounteredRelicBlockTreasureBehind")):(e.displayBubbleChat(l.t("CatDialog.EncounteredRelicBlockTreasureBehind")),a.gamePreference.meetTreasureBehind=!0)},executeReachedTeleportDialog:function(){var t=this._pet;a.gamePreference.reachedGate?(0,c.randomInt)(0,9)>7&&t.displayBubbleChat(l.t("CatDialog.EncounteredPortal")):(t.displayBubbleChat(l.t("CatDialog.EncounteredPortal")),a.gamePreference.reachedGate=!0)},destroy:function(){var t=this._pet;t&&t.node&&t.node.destroy(),this._rpgController=void 0,this._super()},update:function(t){var e=this._pet;if(this._style!==d.None&&e){var i=e.node;if(this._style===d.Respin){if(this._currentRespinPhase===u.Idle)return;if(this._currentRespinPhase===u.Touching){var n=this._touchCoefficients,a=this._speed,s=this._calculateQuadNewPosition(a,n,this._flyDownPosition),r=this._calculateAngle(i.position,s);if(e.setRotation(r),e.setPosition(s),this._speed>=1)this._speed=0,this._isFirst=!0,this._spinDuration=0,this.didTouchSymbol&&this.didTouchSymbol(),this._currentRespinPhase=u.Spinning;else{var c=this._petSpeed/this._touchDistance;this._speed=Math.min(1,this._speed+c*t)}return}if(this._currentRespinPhase===u.Spinning){var l=this._radius,f=this._spinningAngle,_=this._quarterIndex,m=p.x+Math.cos(f)*l,g=p.y+Math.sin(f)*l,y=cc.v2(m,g),v=this._calculateAngle(i.position,y);this._isFirst?this._isFirst=!1:e.setRotation(v),e.setPosition(cc.v2(m,g));var b=.0035*this._petSpeed*t;if(_<2?this._spinningAngle-=b:this._spinningAngle+=b,this._radius>100){var S=this._radius-200*t;this._radius=Math.max(100,S)}else this._spinDuration>2&&(this.resetBackToPlayer(),e.setPosition(this._exitPosition),this._currentRespinPhase=u.Idle);return void(this._spinDuration+=t)}}if(this._style===d.Special){if(this._currentSpecialPhase===h.Idle)return;if(this._currentSpecialPhase===h.Placing){var C=this._placeCoefficients,A=this._speed,E=this._calculateNewPosition(A,C,this._pickPosition),M=this._calculateAngle(i.position,E);if(M>-10&&e.setRotation(M),e.setPosition(E),this._speed>=1)this._speed=0,this._isFirst=!0,this._currentSpecialPhase=h.Returning,o.default.playEffect(this.gemChangeColorSound),this.didPlaceSymbol&&this.didPlaceSymbol(this._grabSymbol);else{var T=this._petSpeed/this._placeDistance*2;this._speed=Math.min(1,this._speed+T*t)}return}if(this._currentSpecialPhase===h.Returning){var P=this._exitCoefficients,I=this._speed,w=this._calculateNewPosition(I,P,this._placePosition),B=this._calculateAngle(i.position,w);if(this._isFirst?this._isFirst=!1:e.setRotation(B),e.setPosition(w),this._speed>=1)this.resetBackToPlayer(),this._currentSpecialPhase=h.Idle;else{var R=this._petSpeed/this._exitDistance*2;this._speed=Math.min(1,this._speed+R*t)}}}}}});i.default=_,e.exports=i.default,cc._RF.pop()}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",GamePreference:"GamePreference",GeneralBundle:"GeneralBundle",Utils:"Utils"}],PlayerAI:[function(t,e,i){"use strict";if(!cc._RF.push(e,"afe9dXUnZZHdrM5AJ4+S87E","PlayerAI")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Object,init:function(t,e){this._rpgController=t,this._player=e,this._currentState=void 0},getActor:function(){return this._player},getController:function(){return this._rpgController},getState:function(){return this._currentState},setState:function(t){var e=this._currentState;e&&(e.willLeaveState(this),e.destroy()),this._currentState=t,this._currentState.willEnterState(this)},executeAction:function(t){var e=this._rpgController,i=this._player,n=this._currentState;e&&i&&n&&n.executeAction(t,this)},destroy:function(){this._rpgController=void 0,this._player=void 0,this._currentState.destroy(),this._currentState=void 0,this._super()}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],PlayerChestState:[function(t,e,i){"use strict";if(!cc._RF.push(e,"045feVQ33hJ4b3yG3soRkxq","PlayerChestState")){i.__esModule=!0,i.default=void 0;var n=l(t("BaseState")),o=t("Enum"),a=l(t("PlayerMoveState")),s=l(t("PlayerIdleState")),r=t("Utils"),c=cc.Class({extends:n.default,ctor:function(){this._stateTransitioning=!1,this.didComplete=void 0,this._id="GEM_SAVIOUR_PLAYER_CHEST_STATE_ID"},getName:function(){return"PlayerChest"},willEnterState:function(t){var e=t.getActor(),i=t.getController();e.idleBattle(!1,!1),i.didEncounterChest(function(){var t=i.obstacleManager.getCurrentChest(),e=i.isHDVer;t&&t.playOpenChest(e)},!0)},willLeaveState:function(){},executeAction:function(t,e){var i=this;if(!this._stateTransitioning){var n=e.getController();n.getState()!==o.GameState.idle?n.obstacleManager.getCurrentChest().isDone&&(this._stateTransitioning=!0,n.symbolManager.getCurrentSymbol()?this._didComplete():n.didFinishChest(function(){e.setState(new a.default),(0,r.delayCallback)(.5)(i.didComplete)})):e.setState(new s.default)}}});i.default=c,e.exports=i.default,cc._RF.pop()}function l(t){return t&&t.__esModule?t:{default:t}}},{BaseState:"BaseState",Enum:"Enum",PlayerIdleState:"PlayerIdleState",PlayerMoveState:"PlayerMoveState",Utils:"Utils"}],PlayerDeadState:[function(t,e,i){"use strict";if(!cc._RF.push(e,"73f05S7y+NNko2kChaUq5mr","PlayerDeadState")){i.__esModule=!0,i.default=void 0;var n,o=t("Enum"),a=(n=t("PlayerEncounterState"))&&n.__esModule?n:{default:n},s=cc.Class({extends:cc.Object,getName:function(){return"PlayerDead"},willEnterState:function(t){var e=t.getActor();t.getController().moveCameraIn(),e.die()},willLeaveState:function(t){t.getActor().revive()},executeAction:function(t,e){var i=e.getController().getState();e.getActor().isDead()||i!==o.GameState.idle&&e.setState((new a.default).init(!1,!0))}});i.default=s,e.exports=i.default,cc._RF.pop()}},{Enum:"Enum",PlayerEncounterState:"PlayerEncounterState"}],PlayerEncounterState:[function(t,e,i){"use strict";if(!cc._RF.push(e,"59017L/x+BBM64XMrE0eRyT","PlayerEncounterState")){i.__esModule=!0,i.default=void 0;var n=c(t("BaseState")),o=t("Enum"),a=c(t("PlayerIdleState")),s=c(t("PlayerDeadState")),r=cc.Class({extends:n.default,ctor:function(){this._stateTransitioning=!1},init:function(t,e){return this._isNewEncounter=t,this._isMonster=e,this},getName:function(){return"PlayerEncounter"},willEnterState:function(t){var e=t.getActor(),i=t.getController();e.idleBattle(!1,this._isMonster),this._isNewEncounter?i.didEncounterObject():i.moveCameraIn()},willLeaveState:function(){},executeAction:function(t,e){this._stateTransitioning||(e.getController().getState()!==o.GameState.idle?e.getActor().isDead()&&e.setState(new s.default):e.setState(new a.default))}});i.default=r,e.exports=i.default,cc._RF.pop()}function c(t){return t&&t.__esModule?t:{default:t}}},{BaseState:"BaseState",Enum:"Enum",PlayerDeadState:"PlayerDeadState",PlayerIdleState:"PlayerIdleState"}],PlayerIdleState:[function(t,e,i){"use strict";if(!cc._RF.push(e,"02bafcaO+VL669c90S9nmVx","PlayerIdleState")){i.__esModule=!0,i.default=void 0;var n=t("Enum"),o=l(t("PlayerEncounterState")),a=l(t("PlayerPortalState")),s=l(t("PlayerDeadState")),r=t("LocalUtils"),c=cc.Class({extends:cc.Object,getName:function(){return"PlayerIdle"},willEnterState:function(t){var e=this;this._actor=t.getActor(),this._actor.idle(),function i(){e._actorAction=e._actor.node.runAction(cc.sequence([cc.delayTime(10),cc.callFunc(function(){var e=t.getController(),o=e.petManager.getPet();e.getState()!==n.GameState.idle&&o.showHeroIdleDialog(),i()})]))}()},willLeaveState:function(){this._actorAction&&(this._actor.node.stopAction(this._actorAction),this._actorAction=void 0)},destroy:function(){this._actorAction&&(this._actor.node.stopAction(this._actorAction),this._actorAction=void 0),this._actor=void 0,this._super()},executeAction:function(t,e){var i=e.getController(),c=i.getState(),l=e.getActor(),h=i.obstacleManager.getCurrentPortal(),u=i.obstacleManager.getApproachEnemy(),d=i.symbolManager.getCurrentSymbol(),p=i.obstacleManager.getCurrentChest();if(c!==n.GameState.idle)if(u&&(0,r.isInRangeSimple)(l.node,u.node,u.getApproachRange())){var f=u._getEnemyType()!==n.EnemyType.rock_pillar;e.setState((new o.default).init(!0,f))}else h&&(0,r.isInRangeSimple)(l.node,h.node,l.portalRange)&&l.node.x<h.node.x?e.setState(new a.default):l.isDead()?e.setState(new s.default):(d||p)&&e.setState((new o.default).init(!1,!1))}});i.default=c,e.exports=i.default,cc._RF.pop()}function l(t){return t&&t.__esModule?t:{default:t}}},{Enum:"Enum",LocalUtils:"LocalUtils",PlayerDeadState:"PlayerDeadState",PlayerEncounterState:"PlayerEncounterState",PlayerPortalState:"PlayerPortalState"}],PlayerManager:[function(t,e,i){"use strict";if(!cc._RF.push(e,"33caa+naB5CBKo+uVaDGsjs","PlayerManager")){i.__esModule=!0,i.default=void 0;var n=p(t("Player")),o=p(t("PlayerAI")),a=p(t("PlayerIdleState")),s=p(t("PlayerMoveState")),r=p(t("PlayerMoveFasterState")),c=p(t("PlayerChestState")),l=t("Enum"),h=p(t("DataManager")),u=t("Enum"),d=cc.Class({extends:cc.Component,properties:{playerPrefab:cc.Prefab,playerLayer:cc.Node,_isHDVer:cc.Boolean},init:function(t){this._rpgController=t},onLoad:function(){this._isRepositioningPlayer=!1,this._player=void 0,this._playerAI=void 0},isHDVersion:function(t){this._isHDVer=t},spawnPlayer:function(t){var e=this.playerLayer,i=cc.instantiate(this.playerPrefab).getComponent(n.default);i.callShakeScreenEffect=this._rpgController.shakeScreen.bind(this._rpgController),i.coinObtainedLabelGenerator=this._rpgController.coinObtainedLabelGenerator,i.extraEffectPlayer=this._rpgController.extraEffectPlayer,i.didLightningAttack=this._didLightningAttack.bind(this),i.node.x=t,e.addChild(i.node),i.node.active=!0,i.init(),this._player=i;var s=new o.default;s.init(this._rpgController,i),this._playerAI=s,s.setState(new a.default)},getPlayer:function(){return this._player},hasPlayer:function(){return void 0!==this._player},getPlayerDirection:function(){return this._player.getDirection()},getPlayerIsAlive:function(){return!this._player.isDead()},getPlayerIsProtected:function(){return this._player.isProtected()},getPlayerMoving:function(){return this._player.isMoving()},startPlayerRun:function(){var t=this._playerAI,e=t.getState().getName();"PlayerIdle"!==e&&"PlayerWalk"!==e||t.setState(new s.default)},startPlayerRunFaster:function(){var t=this._playerAI,e=t.getState().getName();"PlayerIdle"!==e&&"PlayerMove"!==e&&"PlayerWalk"!==e||t.setState(new r.default)},startPlayerIdle:function(){var t=this._playerAI,e=t.getState().getName();"PlayerMove"!==e&&"PlayerMoveFaster"!==e||t.setState(new a.default)},preparePlayerProtect:function(){this._player.prepareProtect()},startPlayerProtect:function(t){this._player.startProtect(),t&&t()},startPlayerCheer:function(t,e){var i=this,n=this._player,o=function(){i._setPlayerAnimationBasedOnState(),e&&e()};t>=5*h.default.totalBet&&this._isHDVer?n.extraCheer(o):n.cheer(o)},_setPlayerAnimationBasedOnState:function(){var t=this._player,e=this._playerAI.getState().getName();"PlayerWalk"===e?t.setAnimation("walk",!0):"PlayerMove"===e||"PlayerMoveFaster"===e?t.setAnimation("run",!0):"PlayerIdle"===e?t.setAnimation("idle_relax",!0):"PlayerEncounter"!==e&&"PlayerChest"!==e||t.setAnimation("idle_battle",!0)},executeActionPhase:function(t){if(this._player.isDead())this._executePlayerIsDeadScenario(t);else{var e=this._rpgController.obstacleManager.getAliveEnemies();e.length>0?this._executeHasEnemyScenario(e,t):t&&t()}},executeEliminateActionPhase:function(t,e){if(this._player.isDead())e&&e();else{var i=this._rpgController.obstacleManager.getAliveEnemies();0===i.length?this._executeNoEnemyScenario(e):this._executeChargeScenario(i,t,e)}},executeBonusActionPhase:function(t){if(this._player.isDead())this._executePlayerIsDeadBonusScenario(t);else{var e=this._rpgController.obstacleManager.getAliveEnemies();0===e.length?this._executeNoEnemyBonusScenario(t):this._executeHasEnemyBonusScenario(e,t)}},_executePlayerIsDeadScenario:function(t){this._player.tryRecover(t)},_executePlayerIsDeadBonusScenario:function(t){t&&t()},_executeNoEnemyScenario:function(t){var e=this._playerAI;"PlayerEncounter"!==e.getState().getName()&&h.default.currentSpinType!==l.SPIN_TYPE.RESPIN?"PlayerIdle"===e.getState().getName()?(this.startPlayerRunFaster(),t&&t()):this._player.celebrate(t):t&&t()},_executeChargeScenario:function(t,e,i){var n=this._rpgController.obstacleManager.getCurrentRound();if(0!==n){if(e||n++,h.default.rpgObstacleEnemyIsMonster)switch(n){case 0:case 1:case 2:break;case 3:t.forEach(function(t){t.playEmoticonEffect(l.EmoticonStyle.Sweat)});break;case 4:t.forEach(function(t){t.playEmoticonEffect(l.EmoticonStyle.Shock),t.playEmoticonEffect(l.EmoticonStyle.ShockExpMarkLv1)});break;case 5:t.forEach(function(t){t.playEmoticonEffect(l.EmoticonStyle.Shock),t.playEmoticonEffect(l.EmoticonStyle.ShockExpMarkLv2)});break;default:t.forEach(function(t){t.playEmoticonEffect(l.EmoticonStyle.Shock),t.playEmoticonEffect(l.EmoticonStyle.ShockExpMarkLv3)})}h.default.isChargingForLightningAttack=!0,this._player.playSpecialCharge(n,this._isHDVer,i)}else i&&i()},_executeHasEnemyScenario:function(t,e){var i=this,n=this._rpgController.obstacleManager.getCurrentRound();0!==n&&this._player.isAttack()&&1===n?this._player.attack(t,this._isHDVer,function(){t.forEach(function(t){t.invalidateActor()}),e&&i.scheduleOnce(function(){e()},.6)}):e&&e()},_executeNoEnemyBonusScenario:function(t){t&&t()},_executeHasEnemyBonusScenario:function(t,e){var i=this._rpgController.obstacleManager,n=this._player.isAttack(),o=i.getCurrentRound();if(n&&1!==o||h.default.rpgObstacleIsFinished)return this._player.attack(t,this._isHDVer,function(){t.forEach(function(t){t.invalidateActor()}),e&&e()}),t.forEach(function(t){t.stopAllEmoticonEffect()}),void(h.default.isChargingForLightningAttack=!1);e&&e()},_didLightningAttack:function(){this.didLightningAttack&&this.didLightningAttack()},endActionPhase:function(t){var e=this,i=this._rpgController,n=i.obstacleManager.getAliveEnemies(),o=i.symbolManager.getCurrentSymbol(),a=this._playerAI,r=this._playerAI.getState();if(0!==n.length||"PlayerEncounter"!==r.getName())t&&t();else{var d=i.obstacleManager.getCurrentChest();if(d&&!d.isDone)if(d.isReady()){var p=new c.default;p.didComplete=t,a.setState(p)}else t&&t();else o||h.default.nextSpinType===l.SPIN_TYPE.RESPIN&&h.default.keyState===u.KEY_STATE.GET_MAP?t&&t():this._rpgController.didFinishObject(function(){e._playerAI.setState(new s.default),t&&t()})}},executeRegenerationPhase:function(t){this.getPlayer().regen(t)},moveBy:function(t,e,i){var n=this.getPlayer();if(n){var o=n.node.x+t;n.node.runAction(cc.sequence([cc.moveBy(e,cc.v2(t,0)),cc.callFunc(function(){n.node.x=o,i&&i()})]))}},destroy:function(){var t=this._player,e=this._playerAI,i=t.node;this._rpgController=void 0,e.destroy(),t.destroy(),i.destroy(),this._super()},update:function(t){if(this._player){var e=this._playerAI;e&&e.executeAction(t)}}});i.default=d,e.exports=i.default,cc._RF.pop()}function p(t){return t&&t.__esModule?t:{default:t}}},{DataManager:"DataManager",Enum:"Enum",Player:"Player",PlayerAI:"PlayerAI",PlayerChestState:"PlayerChestState",PlayerIdleState:"PlayerIdleState",PlayerMoveFasterState:"PlayerMoveFasterState",PlayerMoveState:"PlayerMoveState"}],PlayerModel:[function(t,e){"use strict";if(!cc._RF.push(e,"e8d43MAUbpOa624p+NFEbNT","PlayerModel")){var i=function(t,e){var i=o();return function(t){return i[t-=243]}(t,e)},n=System[i(245)](i(259)+i(252)+i(253)+"rk")[i(255)+i(249)+i(248)+"el"];e[i(257)+i(254)+"s"][i(258)+i(247)+"t"]=n,e[i(257)+i(254)+"s"][i(256)+i(251)+i(246)+"e"]=!0,cc._RF.pop()}function o(){var t=["der","uil","get","dul","aul","Mod","yer","isB","sMo","ram","ewo","ort","Pla","__e","exp","def","bvf"];return(o=function(){return t})()}},{}],PlayerMoveFasterState:[function(t,e,i){"use strict";if(!cc._RF.push(e,"02b9aVUo65NIpG2KP/oE4fX","PlayerMoveFasterState")){i.__esModule=!0,i.default=void 0;var n,o=(n=t("PlayerMoveState"))&&n.__esModule?n:{default:n},a=cc.Class({extends:o.default,getName:function(){return"PlayerMoveFaster"},willEnterState:function(t){var e=t.getActor();this._super(t),e.runFaster()},willLeaveState:function(t){var e=t.getActor();this._super(t),e.stopRunningFaster()}});i.default=a,e.exports=i.default,cc._RF.pop()}},{PlayerMoveState:"PlayerMoveState"}],PlayerMoveState:[function(t,e,i){"use strict";if(!cc._RF.push(e,"7b156kaH9NIO7EH1vpilwbT","PlayerMoveState")){i.__esModule=!0,i.default=void 0;var n=u(t("BaseState")),o=t("Enum"),a=u(t("PlayerEncounterState")),s=u(t("PlayerIdleState")),r=u(t("PlayerPortalState")),c=u(t("PlayerDeadState")),l=t("LocalUtils"),h=cc.Class({extends:n.default,getName:function(){return"PlayerMove"},willEnterState:function(t){var e=t.getActor();e.setDirection(o.PlayerDirection.right),e.run()},willLeaveState:function(){},executeAction:function(t,e){var i=e.getController();if(i.getState()!==o.GameState.idle){var n=e.getActor();if(n.isDead())e.setState(new c.default);else{var h=i.obstacleManager.getApproachEnemy();if(h&&(0,l.isInRangeSimple)(n.node,h.node,h.getApproachRange())){var u=h._getEnemyType()!==o.EnemyType.rock_pillar;e.setState((new a.default).init(!0,u))}else{var d=i.obstacleManager.getCurrentPortal();d&&(0,l.isInRangeSimple)(n.node,d.node,n.portalRange)&&n.node.x<d.node.x&&e.setState(new r.default)}}}else e.setState(new s.default)}});i.default=h,e.exports=i.default,cc._RF.pop()}function u(t){return t&&t.__esModule?t:{default:t}}},{BaseState:"BaseState",Enum:"Enum",LocalUtils:"LocalUtils",PlayerDeadState:"PlayerDeadState",PlayerEncounterState:"PlayerEncounterState",PlayerIdleState:"PlayerIdleState",PlayerPortalState:"PlayerPortalState"}],PlayerPortalState:[function(t,e,i){"use strict";if(!cc._RF.push(e,"527b6AThnNO7bLtFIQcPNxY","PlayerPortalState")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Object,getName:function(){return"PlayerPortal"},ctor:function(){this._id="GEM_SAVIOUR_PLAYER_PORTAL_STATE_ID"},willEnterState:function(t){var e=this,i=t.getActor(),n=t.getController();i.idle(),n.didEncounterPortal(function(){cc.director.getScheduler().schedule(function(){n.switchWorld()},e,0,0,2,!1)},!1)},willLeaveState:function(){},executeAction:function(){}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],PlayerSpecialSprite:[function(t,e,i){"use strict";if(!cc._RF.push(e,"68befjb8uFEbIBMxPXtxOlG","PlayerSpecialSprite")){i.__esModule=!0,i.default=void 0;var n,o=(n=t("CallbackEffect"))&&n.__esModule?n:{default:n},a=t("Utils"),s=cc.Class({extends:cc.Component,properties:{sprite:cc.Sprite,spriteAnimation:cc.Animation,chargeAnimation:cc.Animation,enemyTrailAnimation:cc.Animation,swordChargeUpEffect:o.default,swordLightningCharge:o.default,defaultChargeAttackFrame:cc.SpriteFrame},onLoad:function(){this._setupAnimations(),this._setupCallbackEffects(),this._playStartCharge=cc.v2(5,105),this._playChargeLoopPosition=cc.v2(5,105),this._playChargeAttack=cc.v2(65,84),this._isCharging=!1},_setupAnimations:function(){this._chargeAnimNode=this.chargeAnimation.node,this._chargeAnimNode.active=!1,this._enemyTrailAnimNode=this.enemyTrailAnimation.node,this._enemyTrailAnimNode.active=!1},_setupCallbackEffects:function(){this.swordChargeUpEffect.effectDidEnd=this._didEffectEnd.bind(this),this.swordChargeUpEffect.node.active=!1,this._swordLightningChargeNode=this.swordLightningCharge.node,this._swordLightningChargeNode.active=!1},_didEffectEnd:function(t){t.node.active=!1},playSpecialCharge:function(t,e,i){var n=this,o=this.extraEffectPlayer;o.playChargeLoopEffect(),2===t?e?o.playSpeedLineEffect(function(){n.playStartCharge(i)}):n.playStartCharge(i):3===t?(n._playChargeLoop(),n.playSecondCharge(e,i)):4===t?(n._playChargeLoop(),n._playThirdCharge(e,i)):t>=5&&e?(n._playChargeLoop(),n.playFourthCharge(i)):i&&i()},playSpecialAttack:function(t){this._switchChargeAnimation(!1),this._switchSwordLightningCharge(!1),this.playStopCharge(t)},addLightningCharge:function(){this._switchSwordLightningCharge(!0)},playStartCharge:function(t){this.node.position=this._playStartCharge,this._startChargeCallback=t,this.spriteAnimation.play("player_start_charge")},playStopCharge:function(t){this.node.position=this._playStartCharge,this._stopChargeCallback=t,this._isCharging=!1,this.spriteAnimation.play("player_stop_charge")},_playChargeLoop:function(){this.node.position=this._playChargeLoopPosition,this._isCharging||(this._isCharging=!0,this._switchChargeAnimation(!0),this._switchChargeUpAnimation(!0),this.spriteAnimation.play("player_charge_loop"))},playSecondCharge:function(t,e){var i=this,n=function(){i._switchChargeUpAnimation(!0),e&&i.scheduleOnce(function(){e()},1)};if(t){var o=this.extraEffectPlayer,a=this.node.parent,s=cc.v2(a.position.x,a.position.y+a.height/3),r=a.parent;o.playSwordSecondChargeVFX(2.5,s,r,n)}else n()},_playThirdCharge:function(t,e){var i=this,n=this.extraEffectPlayer;n.playThirdCharge(a.emptyFunc,function(){if(i._switchChargeUpAnimation(!0),t){var o=i.node.parent.position,a=i.node.parent.parent;n.playSwordSecondChargeVFX(2.75,o,a,function(){})}e&&e()})},playFourthCharge:function(t){var e=this,i=this.extraEffectPlayer,n=this.node.parent.position,o=this.node.parent.parent;i.playThirdCharge(a.emptyFunc,function(){e._switchChargeUpAnimation(!0),i.playSwordSecondChargeVFX(3,n,o,function(){}),t&&t()})},playChargeAttack:function(t,e,i){var n=this;this.extraEffectPlayer.playLightningAttack(function(){n.node.scaleX=2.1,n.node.scaleY=2.1,n.sprite.spriteFrame=n.defaultChargeAttackFrame,n.node.position=n._playChargeAttack,n._isCharging=!1,n._chargeAttackCallback=e,n._chargeAttackEndCallback=function(){n.node.scaleX=2,n.node.scaleY=2,i&&i()},n._switchSwordLightningCharge(!1),n._switchChargeAnimation(!1),n._switchEnemyTrailAnimation(!0),n.spriteAnimation.play("player_charge_attack"),t&&t()})},_switchChargeAnimation:function(t){t?(this._chargeAnimNode.active=!0,this.chargeAnimation.play("charge")):(this.chargeAnimation.stop(),this._chargeAnimNode.active=!1)},_switchEnemyTrailAnimation:function(t){t?(this._enemyTrailAnimNode.active=!0,this.enemyTrailAnimation.play("enemy_trail_anim")):(this.enemyTrailAnimation.stop(),this._enemyTrailAnimNode.active=!1)},_switchSwordLightningCharge:function(t){t?(this._swordLightningChargeNode.active=!0,this.swordLightningCharge.playEffect()):(this.swordLightningCharge.stopEffect(),this._swordLightningChargeNode.active=!1)},_switchChargeUpAnimation:function(t){t?(this.swordChargeUpEffect.node.active=!0,this.swordChargeUpEffect.playEffect()):this.swordChargeUpEffect.node.active=!1},didChargeAttack:function(){var t=this._chargeAttackCallback;t&&(this._chargeAttackCallback=void 0,t())},animDidEnd:function(t){if("StartCharge"===t){this._playChargeLoop();var e=this._startChargeCallback;e&&(this._startChargeCallback=void 0,e())}else if("ChargeAttack"===t){var i=this._chargeAttackEndCallback;i&&(this._chargeAttackEndCallback=void 0,i())}else if("StopCharge"===t){var n=this._stopChargeCallback;n&&(this._stopChargeCallback=void 0,n())}}});i.default=s,e.exports=i.default,cc._RF.pop()}},{CallbackEffect:"CallbackEffect",Utils:"Utils"}],PlayerSprite:[function(t,e,i){"use strict";if(!cc._RF.push(e,"2ded85IgxNGapBlTKLue4lj","PlayerSprite")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Component,properties:{defaultSprite:cc.SpriteFrame,defaultCheerSprite:cc.SpriteFrame},onLoad:function(){this._spriteAnim=this.getComponent(cc.Animation),this._sprite=this.getComponent(cc.Sprite),this._attackPosition=cc.v2(-387,471),this._attackScale=2,this._cheerPosition=cc.v2(-350,453),this._cheerScale=2},attack2:function(){this._sprite.spriteFrame=this.defaultSprite,this.node.position=this._attackPosition,this._changeScale(this._attackScale),this._spriteAnim.play("player_attack")},cheer:function(){this._sprite.spriteFrame=this.defaultCheerSprite,this.node.position=this._cheerPosition,this._changeScale(this._cheerScale),this._spriteAnim.play("player_cheer")},extraCheer:function(){this._sprite.spriteFrame=this.defaultCheerSprite,this.node.position=this._cheerPosition,this._changeScale(this._cheerScale),this._spriteAnim.play("player_extra_cheer")},_changeScale:function(t){this.node.scaleX=t,this.node.scaleY=t},spriteAnimEnded:function(t){this.didAnimEnd&&this.didAnimEnd(t)},spriteAnimHit:function(t){this.didAnimHit&&this.didAnimHit(t)},didAnimForward:function(t){this.didAnimForward&&this.didAnimForward(t)},didAnimBackward:function(t){this.didAnimBackward&&this.didAnimBackward(t)}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],PlayerSymbolState:[function(t,e,i){"use strict";if(!cc._RF.push(e,"b8e9e7UpTVJGKCvnVgYWzJw","PlayerSymbolState")){i.__esModule=!0,i.default=void 0;var n,o=(n=t("BaseState"))&&n.__esModule?n:{default:n},a=cc.Class({extends:o.default,init:function(t){return this._symbol=t,this},getName:function(){return"PlayerSymbol"},willEnterState:function(t){var e=this,i=t.getActor(),n=t.getController();i.idle(),n.didEncounterSymbol(this._symbol,function(){e._didFinishEncounter()})},_didFinishEncounter:function(){this.didFinishEncounter&&this.didFinishEncounter(this)},willLeaveState:function(){},executeAction:function(){}});i.default=a,e.exports=i.default,cc._RF.pop()}},{BaseState:"BaseState"}],PlayerWalkState:[function(t,e,i){"use strict";if(!cc._RF.push(e,"38af9PKA/tOEKqGphInF3cu","PlayerWalkState")){i.__esModule=!0,i.default=void 0;var n=r(t("BaseState")),o=r(t("PlayerIdleState")),a=t("Enum"),s=cc.Class({extends:n.default,getName:function(){return"PlayerWalk"},ctor:function(){this._walkAction=void 0},willEnterState:function(t){var e=this;this._actorAI=t;var i=this._actor=t.getActor(),n=i.node;i.setDirection(a.PlayerDirection.right),i.move(),this._walkAction||(this._walkAction=n.runAction(cc.sequence([cc.delayTime(1),cc.callFunc(function(){e._walkAction=void 0,t.setState(new o.default)})])))},willLeaveState:function(t){var e=t.getActor().node;this._walkAction&&(e.stopAction(this._walkAction),this._walkAction=void 0)},destroy:function(){this._walkAction&&(this._actor.node.stopAction(this._walkAction),this._walkAction=void 0),this._actor=void 0,this._super()},executeAction:function(){}});i.default=s,e.exports=i.default,cc._RF.pop()}function r(t){return t&&t.__esModule?t:{default:t}}},{BaseState:"BaseState",Enum:"Enum",PlayerIdleState:"PlayerIdleState"}],Player:[function(t,e,i){"use strict";if(!cc._RF.push(e,"0ab03H2d2BKt57TEw3I1UAq","Player")){i.__esModule=!0,i.default=void 0;var n=t("Enum"),o=f(t("PlayerSprite")),a=f(t("PlayerSpecialSprite")),s=f(t("HpState")),r=f(t("BaseActor")),c=f(t("AudioLibrary")),l=f(t("DataManager")),h=t("GeneralBundle"),u=t("AssetManager"),d=t("Utils"),p=cc.Class({extends:r.default,properties:{regenRate:1,chestRange:800,portalRange:500,mixTime:.2,spine:sp.Skeleton,sprite:o.default,specialSprite:a.default,heroState:s.default,atk1Animation:cc.Animation,protectAnimation:cc.Animation,idleElecAnimation:cc.Animation},init:function(){this.setMaxHP(l.default.rpgHeroMaxHp),this.setHP(l.default.rpgHeroCurrentHp),this._isAlive=l.default.rpgHeroIsAliveState,this._isAlive?this.stopProtect():(this._revealState(),this.startProtect(),this._isProtected=!0)},onLoad:function(){var t=u.assetManager.getAsset(h.GeneralGameAudioBundle);this.getHitSound=t.playerHit,this.attackSound=t.playerAttack,this.comboSound=t.playerCombo,this.chargeAttackSound=t.playerElecAttack,this.chargeSound=t.playerCharge,this.celebrateSound=t.playerCelebrate,this.celebrateSoundNormal=t.playerCelebrateNormal,this.chargeElecLoopSound=t.playerChargeLoop,this.chargeThunderSound=t.playerSecondCharge,this.shieldDeflectSound=t.playerShield,this._setupAnimations(),this._setupSpineListeners(),this._setupSpecialSprite(),this.sprite.didAnimEnd=this.didAnimEnd.bind(this),this.sprite.didAnimHit=this.didAnimHit.bind(this),this._chargeNumber=0,this._hasLightning=!1,this.node.y+=this.node.height/2},_setupSpecialSprite:function(){this._specialSpriteNode=this.specialSprite.node,this._specialSpriteNode.active=!1,this.specialSprite.extraEffectPlayer=this.extraEffectPlayer,this.extraEffectPlayer.playChargeElecLoopSound=this._playChargeElecLoopSound.bind(this),this.extraEffectPlayer.playChargeThunderSound=this._playChargeThunderSound.bind(this)},_playChargeElecLoopSound:function(){return c.default.playEffect(this.chargeElecLoopSound,!0)},_playChargeThunderSound:function(){c.default.playEffect(this.chargeThunderSound)},_setupAnimations:function(){this._atk1AnimNode=this.atk1Animation.node,this._atk1AnimNode.active=!1,this._idleElecAnimNode=this.idleElecAnimation.node,this._idleElecAnimNode.active=!1,this._protectAnimNode=this.protectAnimation.node,this._protectAnimNode.active=!1,this._isProtected=!1},_setupSpineListeners:function(){var t=this,e=this.spine;e.setStartListener(function(e){e&&("idle_battle"===(e.animation?e.animation.name:"")?t._revealIdleElectric():t._hideIdleElectric())}),e.setCompleteListener(function(e){if(e&&e.animation){var i=e.animation.name;"hit"===i||"atk"===i||"in2a-run_to_idle_b"===i||"weak_to_idle_battle"===i||"run_to_idle_b"===i?(t.spine.clearTrack(0),t.spine.setAnimation(0,"idle_battle",!0)):"win_to_run"===i||"in1a-idle_b_to_run"===i||"idle_to_run"===i?(t._actorState=n.ActorState.moving,t.spine.clearTrack(0),t.spine.setAnimation(0,"run",!0)):"run_to_idle"===i?(t.spine.clearTrack(0),t.spine.setAnimation(0,"idle_relax",!0)):"hit_to_weak"!==i&&"weak_recover_fail"!==i||(t.spine.clearTrack(0),t.spine.setAnimation(0,"weak",!0))}})},getForwardEventName:function(){return"Forward"},getBackwardEventName:function(){return"backwards"},getAttackEventName:function(){return"Stop_Forward"},getBackwardStopEventName:function(){return"stop_Backwards"},onEnable:function(){this._super(),this._direction=n.PlayerDirection.right,this._switchToSprite(!1),this._inAttackPosition=!1},isDead:function(){return!this._isAlive},isAttack:function(){return l.default.rpgHeroIsAttack},isProtected:function(){return this._isProtected},idle:function(){if(this._actorState!==n.ActorState.idling){this._actorState=n.ActorState.idling;var t=this.spine,e=t.animation;this._hideState(),t.clearTrack(0),"idle_relax"!==e&&t.setAnimation(0,"run_to_idle",!1)}},idleBattle:function(t,e){if(void 0===t&&(t=!1),void 0===e&&(e=!0),this._actorState!==n.ActorState.battleIdling){this._actorState=n.ActorState.battleIdling;var i=this.spine,o=i.animation;e&&this._revealState(),"idle_battle"!==o&&(i.clearTrack(0),t?i.setAnimation(0,"weak_to_idle_battle",!1):i.setAnimation(0,"in2a-run_to_idle_b",!1))}},die:function(){if(this._actorState!==n.ActorState.dead){this._actorState=n.ActorState.dead;var t=this.spine;"weak"!==t.animation&&(t.clearTrack(0),t.setAnimation(0,"hit_to_weak",!1))}},regen:function(t){l.default.rpgHeroHpChange>0&&this._displayRegenAnimation(),this.setHP(l.default.rpgHeroCurrentHp);var e=!this._isAlive,i=this._isAlive=l.default.rpgHeroIsAliveState;e&&i?t&&this.scheduleOnce(t,.5):t&&t()},_displayRegenAnimation:function(){this.extraEffectPlayer.playHealEffect(cc.v2(0,160),this.node)},_displayCoinAmount:function(t){if(this.coinObtainedLabelGenerator){var e=(1-this.node.getAnchorPoint().y)*this.node.height*this.node.scaleY,i=cc.v2(this.node.x+200,this.node.y+e),n=(0,d.formatCurrency)(t,"");this.coinObtainedLabelGenerator.generateNumbers(n,i)}},tryRecover:function(t){var e=this.spine;e.clearTrack(0),e.setAnimation(0,"weak_recover_fail",!1),this.scheduleOnce(t,.5)},revive:function(){this._switchToSprite(!1),this.idleBattle(!0),this.stopProtect(),this._isAlive=l.default.rpgHeroIsAliveState},_switchToSprite:function(t){t?(this.spine.node.active=!1,this.sprite.node.active=!0,this._hideIdleElectric()):(this.spine.node.active=!0,this.sprite.node.active=!1)},_switchToSpecialSprite:function(t){t?(this.spine.node.active=!1,this._specialSpriteNode.active=!0,this._hideIdleElectric()):(this.spine.node.active=!0,this._specialSpriteNode.active=!1)},stop:function(){this._actorState=void 0,this.spine.clearTrack(0)},getHP:function(){return this._hp},attack:function(t,e,i){var n=this;this.node.zIndex=5,this._executeAttack(t,e,function(){n.node.zIndex=2,i&&i()})},move:function(){},run:function(){var t=this._actorState,e=this.spine,i=e.animation;t===n.ActorState.moving&&"win_to_run"!==i||(this._actorState=n.ActorState.moving,this._hideState(),"run"!==i&&(e.clearTrack(0),"idle_battle"===i?e.setAnimation(0,"in1a-idle_b_to_run",!1):e.setAnimation(0,"idle_to_run",!1),this.node.zIndex=2))},runFaster:function(){var t=this.spine;this._isRunningFaster=!0,t.timeScale=1.2},stopRunningFaster:function(){var t=this.spine;this._isRunningFaster=!1,t.timeScale=1},setHP:function(t){var e=this.heroState;t&&(this._hp=t);var i=this._hp/this.maxHp;e.setBlood(i),this._hp<=0&&!1===l.default.rpgHeroIsAliveState&&(this._isAlive=!1)},setDirection:function(t){this._direction!==t&&(this._direction=t,this._adjustSpriteDirection())},getDirection:function(){return this._direction},_adjustSpriteDirection:function(){this._direction===n.PlayerDirection.right?this.node.setScaleX(.5):this.node.setScaleX(-.5)},didAnimEnd:function(t){this._switchToSprite(!1),"attack"===t?(this.spine.clearTrack(0),this.spine.setAnimation(0,"idle_battle",!0),this._attackCallback&&this._attackCallback(),this.extraEffectPlayer.stopSpeedLineEffect(function(){})):"cheer"!==t&&"extraCheer"!==t||(this._cheerCallback&&this._cheerCallback(),this._cheerCallback=void 0)},didAnimHit:function(t){var e=this;if(5===t){var i=this.extraEffectPlayer;this._callShakeScreenEffect(),i.stopSwordSecondChargeVFX()}this._targetActors&&this._targetActors.forEach(function(i,o){var a=e._hitDamages[o];5===t?(a=Math.ceil(a),i.damaged(a,n.AttackType.Normal,!0)):i.damaged(a)})},isMoving:function(){var t=this.spine.animation,e=this._isRunningFaster;return this.isSlowMovingAnim(t)?n.MovingStyle.Moving:this.isFastMovingAnim(t)&&!e?n.MovingStyle.Running:this.isFastMovingAnim(t)&&e?n.MovingStyle.RunningFaster:n.MovingStyle.NotMoving},isSlowMovingAnim:function(t){return"idle_to_run"===t||"in1a-idle_b_to_run"===t||"run_to_idle"===t},isFastMovingAnim:function(t){return"run"===t||"win_to_run"===t},executeDamagedAnimation:function(){this._isAlive&&(c.default.playEffect(this.getHitSound),this.spine.clearTrack(0),this.spine.setAnimation(0,"hit",!1))},playDeflectSound:function(){c.default.playEffect(this.shieldDeflectSound)},playSpecialCharge:function(t,e,i){this._switchToSpecialSprite(!0),this._chargeNumber=t,2===t&&c.default.playEffect(this.chargeSound,!1,.9),this.specialSprite.playSpecialCharge(t,e,i)},playLightningCharge:function(){this._switchToSpecialSprite(!0),this._hasLightning=!0,this.specialSprite.addLightningCharge()},startSpecialAttack:function(t){this._switchToSpecialSprite(!0),this.specialSprite.playSpecialAttack(t)},prepareProtect:function(){this._isProtected=!0},startProtect:function(){this._protectAnimNode.active=!0,this.protectAnimation.play("protect_shield")},stopProtect:function(){this._protectAnimNode.active=!1,this._isProtected=!1,this.protectAnimation.stop()},celebrate:function(t){if(!1!==l.default.hasRpgHeroInfo()&&0!==l.default.rpgHeroEliminateCount)if(this._actorState!==n.ActorState.acting){this._actorState=n.ActorState.acting;var e=this.spine;"win_to_run"!==e.animation&&(e.clearTrack(0),e.setAnimation(0,"win_to_run",!1),c.default.playEffect(this.celebrateSoundNormal)),this.scheduleOnce(function(){t&&t()},.5)}else t&&this.scheduleOnce(t,.2);else t&&t()},playDamagedEffect:function(t,e){void 0===e&&(e=void 0);var i=this.extraEffectPlayer,o=this.isDead()?cc.v2(this.node.x+200,this.node.y):this.node.position;t===n.AttackType.Normal?i.playHitEffect(o,this.node.parent,e):t===n.AttackType.Magic&&(i.playMagicEffect(o,new cc.Color(115,27,185),this.node.parent,e),i.playBrightEffect(o,this.node.parent))},damaged:function(t,e){var i=this;void 0===e&&(e=n.AttackType.Normal);var o=this._hp-t;this.executeDamagedAnimation(),(0,d.sequenceCallback)(function(t){i.playDamagedEffect(e),t()})(function(){i.setHP(o)})},lightningAttack:function(t,e){var i=this,o=this.extraEffectPlayer,a=this.specialSprite;this._switchToSpecialSprite(!0);var s=function(){var e=cc.v2(850,0);o.playLightningEffect(e,i.node.parent,d.emptyFunc,function(){t.forEach(function(t){t.stopElectrocuted()})}),t.forEach(function(t){var e=(-t.getChangeInHp()/6).toFixed(1);t.damaged(e,n.AttackType.Lightning),t.playElectrocuted()}),i._callShakeScreenEffect()},r=function(){e&&e()},l=function(){c.default.playEffect(i.chargeAttackSound),i.didLightningAttack&&i.didLightningAttack()};this.scheduleOnce(function(){a.playChargeAttack(l,s,r)},.3)},attackTargetActors:function(t,e){var i=e;t.forEach(function(t){var e=-t.getChangeInHp()/i;t.damaged(e,n.AttackType.Normal,!0)})},attack1:function(t,e){var i=this,n=this.attackSound,o=t[0].node,a=cc.v2(o.x-o.width/2-this.node.width/6,o.y),s={moveSpeedIn:.07,moveSpeedOut:.07,minDistance:200,attackHits:1,animFunc:this.playAttack1Anim.bind(this)};this.spineAttack(t,a,s,function(){i._atk1AnimNode.active=!1,i.atk1Animation.stop(),e&&e()}),this.scheduleOnce(function(){c.default.playEffect(n,!1,.86)},.2)},playAttack1Anim:function(){var t=this.spine;"atk"!==t.animation&&(this._atk1AnimNode.active=!0,this.atk1Animation.play("player_attack_effect"),t.clearTrack(0),t.setAnimation(0,"atk",!1))},attack2:function(t,e){var i=this;this._targetActors=t,this._attackCallback=e,this._hitDamages=[];var n=t.length>1?t[1].node:t[0].node,o=cc.v2(n.x-n.width/2-this.node.width/6,n.y),a={moveSpeedIn:.07,moveSpeedOut:.225,minDistance:200,maxPositionX:600,animFunc:this.playAttack2Anim.bind(this)};t.forEach(function(t){var e=(-t.getChangeInHp()/(i._hasLightning?6:5)).toFixed(1);i._hitDamages.push(e)}),c.default.playEffect(this.comboSound),this.spriteAttack(t,o,a)},playAttack2Anim:function(){this._switchToSprite(!0),this.sprite.attack2()},cheer:function(t){c.default.playEffect(this.celebrateSound),this._switchToSprite(!0);var e=this.spine;e.clearTrack(0),e.setAnimation(0,"idle_battle",!1),this._cheerCallback=t,this.sprite.cheer()},extraCheer:function(t){c.default.playEffect(this.celebrateSound),this._switchToSprite(!0);var e=this.spine;e.clearTrack(0),e.setAnimation(0,"idle_battle",!1),this._cheerCallback=t,this.sprite.extraCheer()},setAnimation:function(t,e){void 0===e&&(e=!1),this.spine.setAnimation(0,t,e)},hideHP:function(){this._hideState()},_executeAttack:function(t,e,i){var n=this,o=this._chargeNumber,a=this.extraEffectPlayer,s=function(t){n.startSpecialAttack(function(){t&&t()})};this._hasLightning&&(s=function(e){n.lightningAttack(t,e)}),o>2?s(function(){a.angleSecondCharge(),n._switchToSpecialSprite(!1),n.attack2(t,function(){a.stopSwordSecondChargeVFX(),a.stopSwordChargeLoopSFX(),n._hasLightning=!1,i&&i()})}):o>0&&o<=2?s(function(){a.angleSecondCharge(),n._switchToSpecialSprite(!1),n.attack1(t,function(){a.stopSpeedLineEffect(function(){}),a.stopSwordSecondChargeVFX(),a.stopSwordChargeLoopSFX(),n._hasLightning=!1,i&&i()})}):(this._hasLightning=!1,a.stopSwordChargeLoopSFX(),this.attack1(t,i)),this._chargeNumber=0},_revealIdleElectric:function(){this._idleElecAnimNode.active=!0,this.idleElecAnimation.play("player_idle_elec")},_hideIdleElectric:function(){this._idleElecAnimNode.active=!1,this.idleElecAnimation.stop()},_revealState:function(){this.heroState.isHidden()&&this.heroState.show()},_hideState:function(){this.heroState.isHidden()||this.heroState.hide()},destroy:function(){this.didLightningAttack=void 0,this.extraEffectPlayer=void 0,this.coinObtainedLabelGenerator=void 0,this.cleanUpSpine(),this._super()},cleanUpSpine:function(){var t=this.spine;t.setStartListener(void 0),t.setEventListener(void 0),t.setCompleteListener(void 0)}});i.default=p,e.exports=i.default,cc._RF.pop()}function f(t){return t&&t.__esModule?t:{default:t}}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",BaseActor:"BaseActor",DataManager:"DataManager",Enum:"Enum",GeneralBundle:"GeneralBundle",HpState:"HpState",PlayerSpecialSprite:"PlayerSpecialSprite",PlayerSprite:"PlayerSprite",Utils:"Utils"}],Portal:[function(t,e,i){"use strict";if(!cc._RF.push(e,"ab110TQJEJM15MwXwagn67M","Portal")){i.__esModule=!0,i.default=void 0;var n,o=(n=t("AudioLibrary"))&&n.__esModule?n:{default:n},a=t("AssetManager"),s=t("GeneralBundle"),r=cc.Class({extends:cc.Component,properties:{spine:sp.Skeleton,_isHDVer:cc.Boolean},onLoad:function(){this.didEliminate=void 0;var t=a.assetManager.getAsset(s.GeneralGameAudioBundle);this.portalEnterSound=t.portalLevelEnd,this.node.y+=this.node.height/2,this._isOpen=!1,this._hasDestroyed=!1,this.node.zIndex=1},play:function(){if(!this._isOpen){this._isOpen=!0;var t=this.spine;t.setAnimation(0,"open",!1),t.addAnimation(0,"idle",!0,0)}},playPortalSound:function(){this._portalSoundId=o.default.playEffect(this.portalEnterSound)},stop:function(){this._isOpen=!1,this._portalSoundId&&(o.default.stopEffect(this._portalSoundId,this.portalEnterSound),this._portalSoundId=void 0),this.spine.clearTrack(0)},update:function(){this.node.x<=-300&&!this._hasDestroyed&&(this._hasDestroyed=!0,this.didEliminate&&this.didEliminate(this))}});i.default=r,e.exports=i.default,cc._RF.pop()}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",GeneralBundle:"GeneralBundle"}],Preference:[function(t,e){"use strict";if(!cc._RF.push(e,"4f03eu8pStAcoUzDXzKwqRs","Preference")){var i=function(t,e){var i=a();return function(t){return i[t-=206]}(t,e)},n=System[i(207)](i(210)+i(211))[i(218)+i(214)+i(208)+"e"];for(var o in n)e[i(215)+i(219)+"s"][o]=n[o];e[i(215)+i(219)+"s"][i(206)+i(209)+i(216)+"e"]=!0,cc._RF.pop()}function a(){var t=["__e","get","enc","sMo","com","mon","uil","der","fer","exp","dul","isB","Pre","ort"];return(a=function(){return t})()}},{}],Printer:[function(t,e){"use strict";if(!cc._RF.push(e,"32368KNB7pJsY71CP9W4dC1","Printer")){var i=function(t,e){var i=a();return function(t){return i[t-=372]}(t,e)},n=System[i(373)](i(379)+i(377)+i(381)+"rk")[i(376)+i(383)+"r"];for(var o in n)e[i(374)+i(385)+"s"][o]=n[o];e[i(374)+i(385)+"s"][i(378)+i(375)+i(384)+"e"]=!0,cc._RF.pop()}function a(){var t=["isB","get","exp","sMo","Pri","ram","__e","bvf","uil","ewo","der","nte","dul","ort"];return(a=function(){return t})()}},{}],QaSpin:[function(t,e,i){"use strict";if(!cc._RF.push(e,"3a79bi8wDFPfLtX/Xu9Nr/I","QaSpin")){i.__esModule=!0,i.default=void 0;i.default={qaSpin:void 0},e.exports=i.default,cc._RF.pop()}},{TweaksData:"TweaksData"}],"QiBaseBigWinController.spec":[function(t,e,i){"use strict";if(!cc._RF.push(e,"58438yM6V9MzbOG60/h8ufg","QiBaseBigWinController.spec")){Object.defineProperty(i,"__esModule",{value:!0}),i.initNodes=i.onSkipAnimationEnabled=i.onSkipNumberRollEnabled=void 0;var n=System.get("automation")&&System.get("automation").GameData;i.onSkipNumberRollEnabled=function(){n&&n.emit("BigWin",{displayState:"SkipNumberRollEnabled"})},i.onSkipAnimationEnabled=function(){n&&n.emit("BigWin",{displayState:"SkipAnimationEnabled"})},i.initNodes=function(t){var e=System.get("automation")&&System.get("automation").GameConfigs;e&&e.initNodeConfig(t.skipButtonNode,"big_win_skip_button")},cc._RF.pop()}},{}],QiBaseBigWinController:[function(t,e,i){"use strict";if(!cc._RF.push(e,"ea3a5psIQhPuYhMMSF7tkFO","QiBaseBigWinController")){Object.defineProperty(i,"__esModule",{value:!0}),i.BigWinType=i.ENABLE_SKIP_TOTAL_SHOW_INTERVEL=void 0;var n,o=t("Utils"),a=t("GameEventHandler"),s=t("AutomationDecorator"),r=t("QiBaseBigWinController.spec"),c=cc._decorator,l=c.ccclass,h=c.property;i.ENABLE_SKIP_TOTAL_SHOW_INTERVEL=2,function(t){t[t.NotSpecified=-1]="NotSpecified",t[t.BigWin=0]="BigWin",t[t.MegaWin=1]="MegaWin",t[t.SuperMegaWin=2]="SuperMegaWin"}(n=i.BigWinType||(i.BigWinType={}));var u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.timedWinRollControllerNode=void 0,e.numberDisplayControllerNode=void 0,e.blackMaskNode=void 0,e.bigWinSprite=void 0,e.megaWinSprite=void 0,e.superMegaWinSprite=void 0,e.skipBtnNode=void 0,e._winRollController=void 0,e._numberDisplayController=void 0,e._isSkipEnable=!1,e._isSkipping=!1,e._isPlaying=!1,e._isCounting=!1,e._isGameReplaying=!1,e._lastValue=void 0,e.totalWinAmount=void 0,e.winThreshold=void 0,e.onBigWinComplete=void 0,e._targetBigWinType=n.NotSpecified,e.currentBigWinType=n.NotSpecified,e}return __extends(e,t),Object.defineProperty(e.prototype,"targetBigWinType",{get:function(){return this._targetBigWinType},enumerable:!1,configurable:!0}),e.prototype.setupSprite=function(t,e,i){this.bigWinSprite.spriteFrame=t,this.megaWinSprite.spriteFrame=e,this.superMegaWinSprite.spriteFrame=i},e.prototype.init=function(t){this.cameraEffect=t,this._numberDisplayController=this.numberDisplayControllerNode.getComponent("NumberDisplayController"),this._winRollController=this.timedWinRollControllerNode.getComponent("TimedWinRollController"),this.bindedExitAnim=this._exit.bind(this),this._initNodes({skipButtonNode:this.skipBtnNode}),this.customInit(),this._clean()},e.prototype.play=function(t,e,i,o,a){if(void 0===o&&(o=0),void 0===a&&(a=!1),!0!==this._isPlaying){this.node.active=!0,this.totalWinAmount=t,this.winThreshold=e,this.onBigWinComplete=i,this._isGameReplaying=a,t>=e.superMegaWinThreshold?this._targetBigWinType=n.SuperMegaWin:t>=e.megaWinThreshold?this._targetBigWinType=n.MegaWin:this._targetBigWinType=n.BigWin,this._isPlaying=!0,this._isCounting=!0;var s=this._winRollController;this._winRollDuration||(this._winRollDuration=this.setWinRollDuration());var r=this._winRollDuration;s.setNumbersCallback([e.bigWinThreshold,e.megaWinThreshold,e.superMegaWinThreshold]),s.init({bigWinThreshold:e.bigWinThreshold,megaWinThreshold:e.megaWinThreshold,superMegaWinThreshold:e.superMegaWinThreshold,bigWinDuration:r.BIG_WIN_DURATION,megaWinDuration:r.MEGA_WIN_DURATION,superMegaWinDuration:r.SUPER_MEGA_WIN_DURATION,totalWin:t}),this.node.opacity=255,o<=0?this._playBigWin():this.scheduleOnce(this._playBigWin.bind(this),o)}},e.prototype.skipPlay=function(t,e){var i=this;if(this._isSkipEnable)if(this._isSkipEnable=!1,this._isSkipping=!0,this._isPlaying&&this._isCounting){var n=function(){i._winRollController.stop(),i._isCounting=!1,i._numberDisplayController.displayNumber(i.totalWinAmount,!0)};this.currentBigWinType!==this._targetBigWinType&&e?o.delayCallback(e)(n):n(),this._playReachedTotal(!0)}else this.unschedule(this.bindedExitAnim),this._exit()},e.prototype.setTitleActivate=function(t){switch(t){case n.BigWin:this._activateTitle(!0,!1,!1);break;case n.MegaWin:this._activateTitle(!1,!0,!1);break;case n.SuperMegaWin:this._activateTitle(!1,!1,!0);break;default:this._activateTitle(!1,!1,!1)}},e.prototype.setWinRollDuration=function(){var t=Object.create(null);return t.BIG_WIN_DURATION=[3.038,3.038],t.MEGA_WIN_DURATION=[3.038,3.038],t.SUPER_MEGA_WIN_DURATION=[3.038,3.038],t},e.prototype.customInit=function(){},e.prototype.customClean=function(){this.setTitleActivate(),this.numberDisplayControllerNode.active=!1},e.prototype.playBigWinAnim=function(t){var e=this;this.setTitleActivate(n.BigWin),this.numberDisplayControllerNode.active=!0;var i=this.blackMaskNode;i.opacity=0,i.runAction(cc.fadeTo(.74,180)),this.scheduleOnce(function(){e._enableNumRollSkip(t)},1)},e.prototype.playMegaWinAnim=function(t){this.setTitleActivate(n.MegaWin),this._enableNumRollSkip(t)},e.prototype.playSuperMegaWinAnim=function(t){this.setTitleActivate(n.SuperMegaWin),this._enableNumRollSkip(t)},e.prototype.playReachTotalAnim=function(){this.setTitleActivate(this._targetBigWinType)},e.prototype.playExitAnim=function(t){this.node.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){t()})))},e.prototype.enableSkipAfterTotalShow=function(){this._isSkipEnable=!0},e.prototype.checkToPlaySuitableEffect=function(t){if(t){var e=this.winThreshold,i=this.totalWinAmount;i>=e.superMegaWinThreshold?this.currentBigWinType!==n.SuperMegaWin&&(this.currentBigWinType=n.SuperMegaWin,this.playSuperMegaWinAnim()):i>=e.megaWinThreshold&&this.currentBigWinType!==n.MegaWin&&(this.currentBigWinType=n.MegaWin,this.playMegaWinAnim())}this.playReachTotalAnim()},e.prototype._startNumRolling=function(){this._winRollController.play(this._onValueReached.bind(this))},e.prototype._onValueReached=function(t){var e=this.winThreshold;t===this._lastValue||this._isSkipping||(this._lastValue=t,t===e.megaWinThreshold?this._playMegaWin():t===e.superMegaWinThreshold&&this._playSuperMegaWin(),t===this.totalWinAmount&&(this._isCounting=!1,this._playReachedTotal()))},e.prototype._playBigWin=function(){var t=this;a.emitGameEffectStateChangedEvent({displayState:"Start",effectType:"BigWin"}),this._isSkipEnable&&(this._isSkipEnable=!1),this.currentBigWinType=n.BigWin,this._startNumRolling(),this.playBigWinAnim(function(){t._isSkipEnable=!0}),this.cameraEffect&&this.cameraEffect.shakeOnce()},e.prototype._playMegaWin=function(t,e){var i=this;if(void 0===e&&(e=!0),e){var o=this._isSkipEnable;o&&(this._isSkipEnable=!1),this.currentBigWinType=n.MegaWin,this.playMegaWinAnim(function(){o&&(i._isSkipEnable=!0)}),this.cameraEffect&&this.cameraEffect.shakeOnce()}else t&&t()},e.prototype._playSuperMegaWin=function(t,e){var i=this;if(void 0===e&&(e=!0),e){var o=this._isSkipEnable;o&&(this._isSkipEnable=!1),this.currentBigWinType=n.SuperMegaWin,this.playSuperMegaWinAnim(function(){o&&(i._isSkipEnable=!0)}),this.cameraEffect&&this.cameraEffect.shakeOnce()}else t&&t()},e.prototype._playReachedTotal=function(t){var e=this;void 0===t&&(t=!1),this._isSkipEnable=!1,this.unschedule(this.bindedExitAnim),this.scheduleOnce(this.bindedExitAnim,this._isGameReplaying?3:6),this.scheduleOnce(function(){e.enableSkipAfterTotalShow()},i.ENABLE_SKIP_TOTAL_SHOW_INTERVEL),this.checkToPlaySuitableEffect(t),a.emitGameEffectStateChangedEvent({displayState:"DidUpdate",effectType:"BigWin"}),this.cameraEffect&&this.cameraEffect.shakeOnce()},e.prototype._activateTitle=function(t,e,i){this.bigWinSprite.node.active=t,this.megaWinSprite.node.active=e,this.superMegaWinSprite.node.active=i},e.prototype._exit=function(){var t=this;this._isSkipEnable=!1,a.emitGameEffectStateChangedEvent({displayState:"WillEnd",effectType:"BigWin"}),this.playExitAnim(function(){a.emitGameEffectStateChangedEvent({displayState:"End",effectType:"BigWin"});var e=t.onBigWinComplete;e&&e(),t._clean()})},e.prototype._clean=function(){this.onBigWinComplete=void 0,this._isSkipEnable=!1,this._isSkipping=!1,this._isPlaying=!1,this._isCounting=!1,this._isGameReplaying=!1,this._lastValue=void 0,this.totalWinAmount=void 0,this.winThreshold=void 0,this._targetBigWinType=n.NotSpecified,this.currentBigWinType=n.NotSpecified;var t=this._numberDisplayController;t.clear(),t.displayNumber(0),this.unscheduleAllCallbacks(),this.customClean(),this.blackMaskNode.opacity=0;var e=this.node;e.opacity=0,e.active=!1},e.prototype._enableNumRollSkip=function(t){t&&t()},e.prototype._initNodes=function(){},__decorate([h(cc.Node)],e.prototype,"timedWinRollControllerNode",void 0),__decorate([h(cc.Node)],e.prototype,"numberDisplayControllerNode",void 0),__decorate([h(cc.Node)],e.prototype,"blackMaskNode",void 0),__decorate([h(cc.Sprite)],e.prototype,"bigWinSprite",void 0),__decorate([h(cc.Sprite)],e.prototype,"megaWinSprite",void 0),__decorate([h(cc.Sprite)],e.prototype,"superMegaWinSprite",void 0),__decorate([h(cc.Node)],e.prototype,"skipBtnNode",void 0),__decorate([s.automationDec({func:r.onSkipAnimationEnabled})],e.prototype,"enableSkipAfterTotalShow",null),__decorate([s.automationDec({func:r.onSkipNumberRollEnabled})],e.prototype,"_enableNumRollSkip",null),__decorate([s.automationDec({func:r.initNodes})],e.prototype,"_initNodes",null),__decorate([l],e)}(cc.Component);i.default=u,cc._RF.pop()}},{AutomationDecorator:"AutomationDecorator",GameEventHandler:"GameEventHandler","QiBaseBigWinController.spec":"QiBaseBigWinController.spec",Utils:"Utils"}],QiBaseBonusLoadingController:[function(t,e,i){"use strict";if(!cc._RF.push(e,"b402d01PbFLo6UBCsJrmPD+","QiBaseBonusLoadingController")){Object.defineProperty(i,"__esModule",{value:!0});var n=t("Utils"),o=t("QiBaseControllerMouseHover"),a=cc._decorator,s=a.ccclass,r=a.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.titleTextSprite=void 0,e.featureTextSprite=void 0,e.enableLoadingComponent=!0,e.mockLoading=!1,e.loadingHolder=void 0,e.loadingSpriteNode=void 0,e.loadingNumberHolder=void 0,e.enableStartBtnComponent=!0,e.startBtnNode=void 0,e.startBtnSprite=void 0,e.controllerMouseHover=void 0,e.startButtonOriginalSF=void 0,e.startButtonOnPressedSF=void 0,e.autoHide=!1,e._loadingNumDisplayController=void 0,e._resourceLoadingCompleteCallback=void 0,e._completeCallback=void 0,e._btnActionCompleteCallback=void 0,e._hideCallback=void 0,e._startButton=void 0,e._time=0,e._startValue=0,e._maxValue=0,e._startLoading=!1,e._isGameReplaying=!1,e}return __extends(e,t),e.prototype.setupSprite=function(t,e,i,n){this.titleTextSprite.spriteFrame=t,e&&(this.featureTextSprite.spriteFrame=e),i&&(this.startButtonOriginalSF=i),n&&(this.startButtonOnPressedSF=n)},e.prototype.init=function(){var t=this.node;if(this.enableStartBtnComponent){var e=this.startBtnNode;(this._startButton=e.getComponent(cc.Button)).interactable=!1;var i=this.controllerMouseHover;i&&i.setEnable(!1)}this.enableLoadingComponent&&(this._loadingNumDisplayController=this.loadingNumberHolder.getComponent("NumberDisplayController")),this._bindedOnBtnClick=this._startBtnClick.bind(this,!0),this.customInit(),t.opacity=0,t.active=!1},e.prototype.play=function(t,e){var i=this;void 0===e&&(e=!1),this._clean(),this.node.active=!0,this._completeCallback=t,this._isGameReplaying=e,this.enableLoadingComponent&&this._loadingNumDisplayController.displayNumber(0),n.sequenceCallback(this._onEnter(),this._onStartLoadingResource(),this._loadResourse(),this._onResourceLoaded(),this._enableStartBtn(),this._onExit())(function(){i._completeCallbackWrapper()})},e.prototype.hide=function(){var t=this._hideCallback;t&&t(),this._hideCallback=void 0},e.prototype.updateLoadingProgress=function(t,e){this._maxValue=t/e*100,this._startValue=(t>1?t-1:0)/e*100},e.prototype.update=function(t){var e=this;if(this._startLoading){this._time+=t;var i=this._time/1;if(this.enableLoadingComponent)if(i>=1)this._loadingNumDisplayController.displayNumber(this._maxValue,!0,function(){100===e._maxValue&&e._resourceLoadingCompleteCallbackWrapper()});else{i=1-Math.cos(i*Math.PI*.5);var n=cc.misc.lerp(this._startValue,this._maxValue,i);this._loadingNumDisplayController.displayNumber(n,!1)}else i>=1&&100===this._maxValue&&this._resourceLoadingCompleteCallbackWrapper()}},e.prototype.startBtnClick=function(){this._startBtnClick()},e.prototype.customInit=function(){},e.prototype.onEnter=function(t){var e=this;n.sequenceCallback(function(t){e.node.runAction(cc.sequence(cc.fadeIn(.5),cc.callFunc(function(){t()})))},function(t){e.enableLoadingComponent?(e.loadingHolder.runAction(cc.sequence(cc.fadeIn(.3),cc.callFunc(function(){t()}))),e.loadingSpriteNode.runAction(cc.rotateBy(1,120).repeatForever())):t()})(function(){t()})},e.prototype.onStartLoadingResource=function(t){t()},e.prototype.onResourceLoaded=function(t){var e=this;n.spawnCallback(function(t){if(e.enableLoadingComponent){var i=e.loadingHolder;i.stopAllActions(),i.runAction(cc.sequence(cc.delayTime(.5),cc.fadeOut(.5),cc.callFunc(function(){e.loadingSpriteNode.stopAllActions(),t()})))}else t()},function(t){e.enableStartBtnComponent?e.startBtnNode.runAction(cc.sequence(cc.delayTime(.5),cc.fadeIn(.5),cc.callFunc(function(){t()}))):t()})(function(){t()})},e.prototype.onBtnClicked=function(t){this.scheduleOnce(t,.3)},e.prototype.onExit=function(t){this.node.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){t()})))},e.prototype.customClean=function(){},e.prototype._onEnter=function(){var t=this;return function(e){t.onEnter(e)}},e.prototype._onStartLoadingResource=function(){var t=this;return function(e){t.onStartLoadingResource(e)}},e.prototype._loadResourse=function(){var t=this;return function(e){t.enableLoadingComponent?(t._startLoading=!0,t._resourceLoadingCompleteCallback=e,t.mockLoading&&t.updateLoadingProgress(1,1)):e()}},e.prototype._resourceLoadingCompleteCallbackWrapper=function(){var t=this._resourceLoadingCompleteCallback;t&&t(),this._resourceLoadingCompleteCallback=void 0},e.prototype._onResourceLoaded=function(){var t=this;return function(e){t.onResourceLoaded(e)}},e.prototype._enableStartBtn=function(){var t=this;return function(e){if(t.enableStartBtnComponent){t._startButton.interactable=!0,t.scheduleOnce(t._bindedOnBtnClick,t._isGameReplaying?1:6);var i=t.controllerMouseHover;i&&i.setEnable(!0),t._btnActionCompleteCallback=e}else t.autoHide?e():t._hideCallback=e}},e.prototype._startBtnClick=function(t){var e=this;void 0===t&&(t=!1);var i=this._startButton;if(this.enableStartBtnComponent&&i.interactable){this.unschedule(this._bindedOnBtnClick),this.onBtnClicked(function(){var t=e._btnActionCompleteCallback;t&&t(),e._btnActionCompleteCallback=void 0},t),i.interactable=!1;var n=this.controllerMouseHover;n&&n.setEnable(!1),this.startButtonOnPressedSF&&(this.startBtnSprite.spriteFrame=this.startButtonOnPressedSF)}},e.prototype._onExit=function(){var t=this;return function(e){t.onExit(e)}},e.prototype._completeCallbackWrapper=function(){this._completeCallback&&this._completeCallback(),this._completeCallback=void 0,this._clean()},e.prototype._clean=function(){if(this._time=0,this._startValue=0,this._maxValue=0,this._startLoading=!1,this._isGameReplaying=!1,this.enableStartBtnComponent&&(this.startBtnNode.opacity=0),this.enableLoadingComponent){var t=this.loadingHolder;t.stopAllActions(),this.loadingSpriteNode.stopAllActions(),t.opacity=0,this._loadingNumDisplayController.clear()}this.startButtonOriginalSF&&(this.startBtnSprite.spriteFrame=this.startButtonOriginalSF),this.customClean();var e=this.node;e.stopAllActions(),e.active=!1,e.opacity=0},__decorate([r(cc.Sprite)],e.prototype,"titleTextSprite",void 0),__decorate([r(cc.Sprite)],e.prototype,"featureTextSprite",void 0),__decorate([r(cc.Boolean)],e.prototype,"enableLoadingComponent",void 0),__decorate([r({visible:function(){return this.enableLoadingComponent}})],e.prototype,"mockLoading",void 0),__decorate([r({type:cc.Node,visible:function(){return this.enableLoadingComponent}})],e.prototype,"loadingHolder",void 0),__decorate([r({type:cc.Node,visible:function(){return this.enableLoadingComponent}})],e.prototype,"loadingSpriteNode",void 0),__decorate([r({type:cc.Node,visible:function(){return this.enableLoadingComponent}})],e.prototype,"loadingNumberHolder",void 0),__decorate([r(cc.Boolean)],e.prototype,"enableStartBtnComponent",void 0),__decorate([r({type:cc.Node,visible:function(){return this.enableStartBtnComponent}})],e.prototype,"startBtnNode",void 0),__decorate([r({type:cc.Sprite,visible:function(){return this.enableStartBtnComponent}})],e.prototype,"startBtnSprite",void 0),__decorate([r({type:o.default,visible:function(){return this.enableStartBtnComponent}})],e.prototype,"controllerMouseHover",void 0),__decorate([r({type:cc.SpriteFrame,visible:function(){return this.enableStartBtnComponent}})],e.prototype,"startButtonOriginalSF",void 0),__decorate([r({type:cc.SpriteFrame,visible:function(){return this.enableStartBtnComponent}})],e.prototype,"startButtonOnPressedSF",void 0),__decorate([r({visible:function(){return!this.enableStartBtnComponent}})],e.prototype,"autoHide",void 0),__decorate([s],e)}(cc.Component);i.default=c,cc._RF.pop()}},{QiBaseControllerMouseHover:"QiBaseControllerMouseHover",Utils:"Utils"}],QiBaseControllerMouseHover:[function(t,e,i){"use strict";if(!cc._RF.push(e,"91c8cdFWYlHS5Gj/k2l5ENm","QiBaseControllerMouseHover")){Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator,o=n.ccclass,a=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.hoverEffectNode=void 0,e.animDuration=.54,e.initScale=.7,e.targetScale=1.5,e.targetOpacity=255,e.cycleDelay=.15,e._isAnimPlaying=!1,e._pendingAnimStart=!1,e._isMouseHoverEnable=!0,e}return __extends(e,t),e.prototype.onLoad=function(){this._setUpTouchListener(),this.onLoadCustom()},e.prototype.setEnable=function(t,e){void 0===e&&(e=!1),this._isMouseHoverEnable=t,!t&&this._isAnimPlaying&&(this._mouseLeave(),e||(this._pendingAnimStart=!0)),t&&this._pendingAnimStart&&this._mouseEnter()},e.prototype.removeTouchListener=function(){var t=this.hoverEffectNode;t.off(cc.Node.EventType.MOUSE_ENTER,this._mouseEnter.bind(this),this),t.off(cc.Node.EventType.MOUSE_LEAVE,this._mouseLeave.bind(this),this)},e.prototype._setUpTouchListener=function(){var t=this.hoverEffectNode;t.on(cc.Node.EventType.MOUSE_ENTER,this._mouseEnter.bind(this),this),t.on(cc.Node.EventType.MOUSE_LEAVE,this._mouseLeave.bind(this),this)},e.prototype._mouseEnter=function(){this._isMouseHoverEnable?(this._pendingAnimStart=!1,this.mouseEnterCustom(),this._isAnimPlaying=!0):this._pendingAnimStart=!0},e.prototype._mouseLeave=function(){this._pendingAnimStart&&(this._pendingAnimStart=!1),this._isAnimPlaying&&(this._isAnimPlaying=!1,this.mouseLeaveCustom())},e.prototype.resetStart=function(){var t=this.hoverEffectNode;t.opacity=0,t.scale=this.initScale},e.prototype.resetClose=function(){this.hoverEffectNode.opacity=0},e.prototype.mouseEnterCustom=function(){this.resetStart();var t=this.animDuration/2;this.hoverEffectNode.opacity=0,this.hoverEffectNode.runAction(cc.repeatForever(cc.sequence([cc.spawn(cc.scaleTo(this.animDuration,this.targetScale).easing(cc.easeCubicActionInOut()),cc.sequence([cc.fadeTo(t,this.targetOpacity).easing(cc.easeOut(2)),cc.fadeOut(t)])),cc.delayTime(this.cycleDelay),cc.callFunc(this.bindedResetStart)])))},e.prototype.mouseLeaveCustom=function(){this.hoverEffectNode.stopAllActions(),this.resetClose()},e.prototype.onLoadCustom=function(){this.bindedResetStart=this.resetStart.bind(this),this.hoverEffectNode.opacity=0},__decorate([a(cc.Node)],e.prototype,"hoverEffectNode",void 0),__decorate([a(cc.Float)],e.prototype,"animDuration",void 0),__decorate([a(cc.Float)],e.prototype,"initScale",void 0),__decorate([a(cc.Float)],e.prototype,"targetScale",void 0),__decorate([a(cc.Float)],e.prototype,"targetOpacity",void 0),__decorate([a(cc.Float)],e.prototype,"cycleDelay",void 0),__decorate([o],e)}(cc.Component);i.default=s,cc._RF.pop()}},{}],QiBaseFastScrollController:[function(t,e,i){"use strict";if(!cc._RF.push(e,"f9425UyI/NI0byzRTKNm+AS","QiBaseFastScrollController")){Object.defineProperty(i,"__esModule",{value:!0});var n=t("Utils"),o=cc._decorator,a=o.ccclass,s=o.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.effectHolder=void 0,e.tintPrefab=void 0,e.tintHolder=void 0,e.tintNodeOpacity=180,e.fadeInDuration=.25,e.fadeOutDuration=.5,e.slotWidth=1080,e.numberOfSlotColumn=5,e.slotColumnHeight=792,e.tintNodesList=[],e.slotColumnPositionList=[],e._previousReelIndex=void 0,e._isPlaying=!1,e}return __extends(e,t),Object.defineProperty(e.prototype,"previousReelIndex",{get:function(){return this._previousReelIndex},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"isPlaying",{get:function(){return this._isPlaying},enumerable:!1,configurable:!0}),e.prototype.init=function(){var t=this.slotWidth,e=this.slotColumnWidth=t/this.numberOfSlotColumn;this.slothHalfWidth=t/2,this.slotColumnHalfWidth=e/2,this.slotColumnPositionList=this.setupSlotColumnPositionList(),this.setupTintNode(),this.customInit(),this.node.active=!1},e.prototype.play=function(t,e){var i=this;this.node.active=!0,this.playAnim(t,this.slotColumnPositionList[t],function(){i._previousReelIndex=t,i._isPlaying=!0,e&&e()})},e.prototype.stop=function(t){var e=this;this.stopAnim(function(){e._clean(),t&&t()})},e.prototype.customInit=function(){this.effectHolder.opacity=0},e.prototype.setupSlotColumnPositionList=function(){var t=[];this.slotColumnPositionList=[];for(var e=this.slotColumnWidth,i=this.slotColumnHalfWidth,n=this.slothHalfWidth,o=0;o<this.numberOfSlotColumn;o++){var a=e*o+i-n;t.push(cc.v2(a,0))}return t},e.prototype.playAnim=function(t,e,i){this.tintNodeFadeIn(t);var n=this.effectHolder;n.opacity=255,n.position=e,i()},e.prototype.stopAnim=function(t){var e=this,i=this.fadeInDuration;n.spawnCallback(function(t){e.tintNodeFadeOut(i,t)},function(t){e.effectHolder.runAction(cc.sequence(cc.fadeOut(i),cc.callFunc(function(){t()})))})(function(){t()})},e.prototype.customClean=function(){var t=this.effectHolder;t.stopAllActions(),t.opacity=0},e.prototype.setupTintNode=function(){for(var t=this.slotColumnWidth,e=this.tintHolder,i=this.slotColumnPositionList,n=this.tintPrefab,o=this.tintNodesList,a=0,s=this.numberOfSlotColumn;a<s;a++){var r=cc.instantiate(n);r.position=i[a],r.parent=e,r.opacity=0,r.width=t,r.height=this.slotColumnHeight,o.push(r)}},e.prototype.tintNodeFadeIn=function(t,e,i){void 0===e&&(e=this.fadeInDuration),void 0===i&&(i=this.tintNodeOpacity);for(var n=this.tintNodesList,o=0,a=n.length;o<a;o++)n[o].stopAllActions(),o===t?n[o].opacity=0:e>0?n[o].runAction(cc.fadeTo(e,i)):n[o].opacity=i},e.prototype.tintNodeFadeOut=function(t,e){for(var i=this.tintNodesList,o=0,a=i.length;o<a;o++)0!==i[o].opacity&&i[o].runAction(cc.fadeOut(t));n.delayCallback(t)(function(){e&&e()})},e.prototype._clean=function(){this.tintNodesList.forEach(function(t){t.stopAllActions(),t.opacity=0}),this._previousReelIndex=void 0,this._isPlaying=!1,this.customClean(),this.node.active=!1},__decorate([s(cc.Node)],e.prototype,"effectHolder",void 0),__decorate([s(cc.Prefab)],e.prototype,"tintPrefab",void 0),__decorate([s(cc.Node)],e.prototype,"tintHolder",void 0),__decorate([s],e.prototype,"tintNodeOpacity",void 0),__decorate([s],e.prototype,"fadeInDuration",void 0),__decorate([s],e.prototype,"fadeOutDuration",void 0),__decorate([s],e.prototype,"slotWidth",void 0),__decorate([s],e.prototype,"numberOfSlotColumn",void 0),__decorate([s],e.prototype,"slotColumnHeight",void 0),__decorate([a],e)}(cc.Component);i.default=r,cc._RF.pop()}},{Utils:"Utils"}],QiBaseInfoboardController:[function(t,e,i){"use strict";if(!cc._RF.push(e,"07183pTxKdN/q62A1w0ivuU","QiBaseInfoboardController")){Object.defineProperty(i,"__esModule",{value:!0});var n=t("InfoboardMessageController"),o=t("Utils"),a=t("GameUtils"),s=cc._decorator,r=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.numRollInitAmount=0,e.numRollDuration=2,e.numRollEnableSkipInterval=.5,e.infoboardMessageController=void 0,e.spriteStarterMessage=void 0,e.spriteNormalSpinMessageArr=[],e.spriteFreeSpinMessageArr=[],e.isMediumWinPlaying=!1,e.scheduledEvent=void 0,e.winShowed=!1,e._enableNumRollSkip=!1,e}return __extends(e,t),e.prototype.setupSprite=function(t,e,i,n,o){this.infoboardMessageController.setLocalizedSpriteFrame(t,e),this.spriteStarterMessage=i,this.spriteNormalSpinMessageArr=n,o&&(this.spriteFreeSpinMessageArr=o)},e.prototype.init=function(t,e){this.dataSource=t,this.cameraEffect=e,this.infoboardMessageController.initNumberDisplayNodeEvent(),this.resetInfoboardMessageController(),this.customInit()},e.prototype.playStarterMessage=function(t){void 0===t&&(t=!1),this.infoboardMessageController.setEventMessage(this.spriteStarterMessage,t,!1),this.clear()},e.prototype.updateInfoboardMessage=function(t){void 0===t&&(t=!1);var e,i=this.infoboardMessageController;e=t&&this.spriteFreeSpinMessageArr.length>0?__spread(this.spriteFreeSpinMessageArr):__spread(this.spriteNormalSpinMessageArr),i.setSprites(e),i.playScheduleRandomSpriteTips()},e.prototype.showAmount=function(t){t>0&&a.checkOperatorProfit(t,this.dataSource)&&(this.resetInfoboardMessageController(),this.infoboardMessageController.showDisplayNumber(t,!1))},e.prototype.showWinAmount=function(t,e){void 0===e&&(e=!1),t>0&&a.checkOperatorProfit(t,this.dataSource)&&(this.resetInfoboardMessageController(),this.infoboardMessageController.showDisplayNumber(t,!0),this.showWinText(e))},e.prototype.showTotalWinAmount=function(t){this.showWinAmount(t,!0)},e.prototype.playTotalWin=function(t,e,i){this.unscheduleEvent(),this.playTotalWinAnim(t,e,i),this.cameraEffect&&this.cameraEffect.shakeOnce()},e.prototype.playSmallWin=function(t,e,i){a.checkOperatorProfit(t,this.dataSource)?(this.unscheduleEvent(),this.playSmallWinAnim(t,e,i)):e&&e()},e.prototype.playMediumWin=function(t,e,i){var n=this;!0!==this.isMediumWinPlaying&&(this.clear(),this.isMediumWinPlaying=!0,this.resetInfoboardMessageController(),this.onMediumWinStartRoll(t,this.onMediumWinRollComplete.bind(this,function(){n.isMediumWinPlaying=!1,e()},i),i))},e.prototype.playSkipMediumWin=function(){this.isMediumWinPlaying&&this._enableNumRollSkip&&(this.dimissMediumWin(),this._enableNumRollSkip=!1)},e.prototype.clearInfoboard=function(t){var e=this;void 0===t&&(t=0),0===t?this.clear():(this.scheduledEvent&&this.unschedule(this.scheduledEvent),this.scheduledEvent=function(){e.clear()},this.scheduleOnce(this.scheduledEvent,t))},e.prototype.resetInfoboardMessageController=function(t,e){void 0===t&&(t=!1),void 0===e&&(e=!1);var i=this.infoboardMessageController;i.setTotalAndWinText(!1,!1),t&&i.clearDisplayNumber(),e?i.showInfoboardMessage():i.hideInfoboardMessage()},e.prototype.dimissMediumWin=function(){this.infoboardMessageController.skipNumberRoll()},e.prototype.playNumberRoll=function(t,e,i,n,s){var r=this;if(a.checkOperatorProfit(i,this.dataSource)){this.infoboardMessageController.showNumberRoll(t,e,i,function(){n&&n()},s),this._enableNumRollSkip=!1;var c=this.numRollEnableSkipInterval;0===c?this._enableNumRollSkip=!0:o.delayCallback(c)(function(){r._enableNumRollSkip=!0})}else n&&n()},e.prototype.customInit=function(){},e.prototype.playTotalWinAnim=function(t,e){this.showTotalWinAmount(t),e&&e()},e.prototype.playSmallWinAnim=function(t,e){this.showWinAmount(t,!1),e&&e()},e.prototype.onMediumWinStartRoll=function(t,e){!1!==this.isMediumWinPlaying&&this.playNumberRoll(this.numRollDuration,this.numRollInitAmount,t,e)},e.prototype.onMediumWinRollComplete=function(t){this.showWinText(!1),this.cameraEffect&&this.cameraEffect.shakeOnce(),t&&t()},e.prototype.showWinText=function(t){void 0===t&&(t=!1),this.infoboardMessageController.setTotalAndWinText(t,!t),this.winShowed=!0},e.prototype.clear=function(){this.resetInfoboardMessageController(!0,!0),this.winShowed&&(this.winShowed=!1,this.infoboardMessageController.clear(!0)),this.unscheduleEvent()},e.prototype.unscheduleEvent=function(){this.scheduledEvent&&(this.unschedule(this.scheduledEvent),this.scheduledEvent=void 0)},__decorate([c(cc.Float)],e.prototype,"numRollInitAmount",void 0),__decorate([c(cc.Float)],e.prototype,"numRollDuration",void 0),__decorate([c(cc.Float)],e.prototype,"numRollEnableSkipInterval",void 0),__decorate([c(n.default)],e.prototype,"infoboardMessageController",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"spriteStarterMessage",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"spriteNormalSpinMessageArr",void 0),__decorate([c(cc.SpriteFrame)],e.prototype,"spriteFreeSpinMessageArr",void 0),__decorate([r],e)}(cc.Component);i.default=l,cc._RF.pop()}},{GameUtils:"GameUtils",InfoboardMessageController:"InfoboardMessageController",Utils:"Utils"}],QiBaseSpinButtonController:[function(t,e,i){"use strict";if(!cc._RF.push(e,"81d1f0x6aFDdogox6AcWsv1","QiBaseSpinButtonController")){Object.defineProperty(i,"__esModule",{value:!0}),i.STATE_EVENT=i.SPIN_BUTTON_TYPE=void 0;var n,o,a,s,r,c=t("GameEventHandler"),l=t("SettingMenuHelper"),h=t("ButtonHitTest"),u=t("AutomationDecorator"),d=t("QiBaseSpinButtonViewController.spec"),p=cc._decorator,f=p.ccclass,_=p.property;(function(t){t[t.BUTTON=0]="BUTTON",t[t.SPACE_BAR=1]="SPACE_BAR"})(n||(n={})),function(t){t[t.PLAYING=0]="PLAYING",t[t.STOP=1]="STOP"}(o||(o={})),function(t){t[t.PLAYING=0]="PLAYING",t[t.STOP=1]="STOP"}(a||(a={})),function(t){t[t.NORMAL_SPIN=0]="NORMAL_SPIN",t[t.AUTO_SPIN=1]="AUTO_SPIN"}(s=i.SPIN_BUTTON_TYPE||(i.SPIN_BUTTON_TYPE={})),function(t){t[t.BUTTON_CLICKED=0]="BUTTON_CLICKED",t[t.CLICK_AREA_CLICKED=1]="CLICK_AREA_CLICKED",t[t.AUTO_SPIN_TRIGGERED=2]="AUTO_SPIN_TRIGGERED"}(r=i.STATE_EVENT||(i.STATE_EVENT={}));var m=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.spinBtnUIHolder=void 0,e.spinBtnArrowNode=void 0,e.spinArrowSprite=void 0,e.normalArrowSF=void 0,e.blurNormalArrowSF=void 0,e.greyArrowSF=void 0,e.blurGreyArrowSF=void 0,e.autoSpinNode=void 0,e.autoSpinNumNode=void 0,e.numberDisplayController=void 0,e._isTouching=!1,e._isButtonEnabled=!1,e._autoSpinCount=-1,e._isHover=!1,e._canHover=!0,e._canHoverReal=!0,e._isStopHasTrigger=!1,e._currentSpinType=s.NORMAL_SPIN,e._mouseHoverAnimState=o.STOP,e._spinAnimState=a.STOP,e._isHidden=!1,e}return __extends(e,t),e.prototype.setButtonInteractivity=function(t){this._isButtonEnabled=t},e.prototype.init=function(t){this._spinCallback=t;var e=this.spinBtnUIHolder,i=this.node;this.numberDisplayController=this.autoSpinNumNode.getComponent("NumberDisplayController"),e.on(cc.Node.EventType.TOUCH_START,this._onTouchStart,this),e.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancel,this),e.on(cc.Node.EventType.TOUCH_END,this._onTouchEnd,this),i.on("mouseenter",this._mouseHovered,this),i.on("mouseleave",this._mouseLeave,this),this._initNodes({spinButtonNode:e}),this.customInit()},e.prototype.idle=function(){this.onSpinIdle(),this.spinArrowSprite.spriteFrame=this.normalArrowSF,this._isStopHasTrigger=!1,this._canHover=!0,this._canHoverReal=!0,this._spinAnimState===a.STOP&&this._autoSpinCount<=0&&this._isHover&&(this._mouseHovered(),this._canHover=!1)},e.prototype.startAutoSpin=function(t){this._changeSpinUI(s.AUTO_SPIN),this._updateAutoSpinCount(t)},e.prototype.spin=function(t){var e=this;void 0===t&&(t=-1),this._isHidden||(this._autoSpinCount=t,t>-1?this._updateAutoSpinCount(t):this._isButtonEnabled&&(this._canHover=!1,this._spinAnimState=a.PLAYING,this._changeSpinUI(s.NORMAL_SPIN),this.spinArrowSprite.spriteFrame=this.blurNormalArrowSF,this._hideMouseHoverEffect(),this.onSpinStart(function(){e._spinAnimState=a.STOP,e._canHover=!0,e._isHover&&e._mouseHoverAnimState===o.STOP&&(e._mouseHovered(),e._canHover=!1)})))},e.prototype.stop=function(){var t=this._autoSpinCount;this.spinArrowSprite.spriteFrame=this.greyArrowSF,0===t&&l.settingMenuHelper.stopSpinOptionButtonAnim&&l.settingMenuHelper.stopSpinOptionButtonAnim(),this.onSpinStop(t),this._canHoverReal=t>0,this._isStopHasTrigger=!0,this._canHover=t>0,t<=0&&this._mouseHoverAnimState===o.PLAYING&&this._hideMouseHoverEffect()},e.prototype.interuptAutoSpin=function(t){var e=s.NORMAL_SPIN;this._changeSpinUI(e),this._autoSpinCount=-1,this.onAutoSpinInterrupted(t),l.settingMenuHelper.stopSpinOptionButtonAnim&&l.settingMenuHelper.stopSpinOptionButtonAnim(),this._isStopHasTrigger&&(this._canHover=!1,this._canHoverReal=!1,this._hideMouseHoverEffect()),c.emitAutoplayStopped()},e.prototype.setButtonHidden=function(t,e,i){var n=this;void 0===e&&(e=!0);var o=this.spinBtnUIHolder;if(this._isHidden=t,t){var a=this._canHover;this._canHover=!1,e?o.runAction(cc.sequence(cc.fadeOut(.2).easing(cc.easeQuadraticActionOut()),cc.callFunc(function(){o.active=!1,n._canHover=a,i&&i()}))):(o.active=!1,o.opacity=0,i&&i())}else o.active=!0,e?o.runAction(cc.sequence(cc.fadeIn(.2).easing(cc.easeQuadraticActionOut()),cc.callFunc(function(){i&&i()}))):(o.opacity=255,i&&i())},e.prototype.setButtonToGrey=function(){this._canHover=!1,this._canHoverReal=!1,this.spinArrowSprite.spriteFrame=this.greyArrowSF},e.prototype.setButtonToBlurGrey=function(){this._canHover=!1,this._canHoverReal=!1,this._hideMouseHoverEffect(),this.spinArrowSprite.spriteFrame=this.blurGreyArrowSF},e.prototype._updateAutoSpinCount=function(t){var e=this.numberDisplayController;e.clear(),e.displayNumber(t.toString())},e.prototype._changeSpinUI=function(t){if(t!==this._currentSpinType){this._currentSpinType=t;var e=this.spinBtnArrowNode,i=this.autoSpinNode,n=this.autoSpinNumNode;switch(t){case s.NORMAL_SPIN:e.active=!0,i.active=!1,n.active=!1;break;case s.AUTO_SPIN:e.active=!1,i.active=!0,n.active=!0}this.changeSpinUI(t),this._hideMouseHoverEffect()}},e.prototype._onTouchStart=function(t){t.stopPropagation(),!this._isTouching&&this._isButtonEnabled&&(this._isTouching=!0)},e.prototype._onTouchCancel=function(t){t.stopPropagation(),this._isTouching&&this._isButtonEnabled&&(this._isTouching=!1)},e.prototype._onTouchEnd=function(t){t.stopPropagation(),this._isTouching&&this._isButtonEnabled&&(this._isTouching=!1,this._spinCallback(r.BUTTON_CLICKED,n.BUTTON))},e.prototype.onKeyDown=function(){!this._isHidden&&this._isButtonEnabled&&h.buttonHitTest(this.spinBtnUIHolder)&&(this._isTouching=!1,this._spinCallback(r.BUTTON_CLICKED,n.SPACE_BAR))},e.prototype._mouseHovered=function(){this._isHover=!0,this._canHover&&this._canHoverReal&&this._isButtonEnabled&&this._showMouseHoverEffect()},e.prototype._mouseLeave=function(){this._isHover=!1,this._canHover=this._spinAnimState===a.STOP,this._hideMouseHoverEffect()},e.prototype._showMouseHoverEffect=function(){this.playMouseHoverAnim(this._currentSpinType===s.AUTO_SPIN),this._mouseHoverAnimState=o.PLAYING},e.prototype._hideMouseHoverEffect=function(){this.stopMouseHoverAnim(this._currentSpinType===s.AUTO_SPIN),this._mouseHoverAnimState=o.STOP},e.prototype._initNodes=function(){},e.prototype.customInit=function(){},e.prototype.onSpinIdle=function(){},e.prototype.onSpinStart=function(t){t()},e.prototype.onSpinStop=function(){},e.prototype.onAutoSpinInterrupted=function(){},e.prototype.playMouseHoverAnim=function(){},e.prototype.stopMouseHoverAnim=function(){},e.prototype.changeSpinUI=function(){},__decorate([_(cc.Node)],e.prototype,"spinBtnUIHolder",void 0),__decorate([_(cc.Node)],e.prototype,"spinBtnArrowNode",void 0),__decorate([_(cc.Sprite)],e.prototype,"spinArrowSprite",void 0),__decorate([_(cc.SpriteFrame)],e.prototype,"normalArrowSF",void 0),__decorate([_(cc.SpriteFrame)],e.prototype,"blurNormalArrowSF",void 0),__decorate([_(cc.SpriteFrame)],e.prototype,"greyArrowSF",void 0),__decorate([_(cc.SpriteFrame)],e.prototype,"blurGreyArrowSF",void 0),__decorate([_(cc.Node)],e.prototype,"autoSpinNode",void 0),__decorate([_(cc.Node)],e.prototype,"autoSpinNumNode",void 0),__decorate([u.automationDec({func:d.onSetButtonInteractivity})],e.prototype,"setButtonInteractivity",null),__decorate([u.automationDec({func:d.initNodes})],e.prototype,"_initNodes",null),__decorate([f],e)}(cc.Component);i.default=m,cc._RF.pop()}},{AutomationDecorator:"AutomationDecorator",ButtonHitTest:"ButtonHitTest",GameEventHandler:"GameEventHandler","QiBaseSpinButtonViewController.spec":"QiBaseSpinButtonViewController.spec",SettingMenuHelper:"SettingMenuHelper"}],"QiBaseSpinButtonViewController.spec":[function(t,e,i){"use strict";cc._RF.push(e,"0c08ffMI81KB6qGz4VArt2K","QiBaseSpinButtonViewController.spec")||(Object.defineProperty(i,"__esModule",{value:!0}),i.initNodes=i.onSetButtonInteractivity=void 0,i.onSetButtonInteractivity=function(t){var e=System.get("automation")&&System.get("automation").GameData;e&&e.emit("SpinButtonInteractivity",t)},i.initNodes=function(t){var e=System.get("automation")&&System.get("automation").GameConfigs;e&&e.initNodeConfig(t.spinButtonNode,"spin_button")},cc._RF.pop())},{}],"QiBaseTotalWinController.spec":[function(t,e,i){"use strict";if(!cc._RF.push(e,"351ebUVSOBMwbeg/UlkTPRF","QiBaseTotalWinController.spec")){Object.defineProperty(i,"__esModule",{value:!0}),i.initNodes=i.onCollectButtonShown=i.onSkipNumberRollEnabled=void 0;var n=System.get("automation")&&System.get("automation").GameData;i.onSkipNumberRollEnabled=function(){n&&n.emit("TotalWin",{displayState:"SkipNumberRollEnabled"})},i.onCollectButtonShown=function(){n&&n.emit("TotalWin",{displayState:"CollectButtonShown"})},i.initNodes=function(t){var e=System.get("automation")&&System.get("automation").GameConfigs;e&&(e.initNodeConfig(t.collectButtonNode,"total_win_collect_button"),e.initNodeConfig(t.skipButtonNode,"total_win_skip_button"))},cc._RF.pop()}},{}],QiBaseTotalWinController:[function(t,e,i){"use strict";if(!cc._RF.push(e,"8892eWaWU5EmKGjw0sML8lu","QiBaseTotalWinController")){Object.defineProperty(i,"__esModule",{value:!0});var n=t("Utils"),o=t("GameEventHandler"),a=t("QiBaseControllerMouseHover"),s=t("AutomationDecorator"),r=t("QiBaseTotalWinController.spec"),c=cc._decorator,l=c.ccclass,h=c.property,u=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.enableTotalFreeSpin=!1,e.totalFreeSpinNumDisplayNode=void 0,e.freeSpinTextSprite=void 0,e.numRollDuration=3.362,e.numDisplayNode=void 0,e.skipNumRollBtn=void 0,e.collectBtn=void 0,e.totalWinSprite=void 0,e.collectTextSprite=void 0,e.controllerMouseHover=void 0,e._bindedOnNumRollDone=void 0,e._onCollectButtonEnableCallback=void 0,e._finishCallback=void 0,e._abortNormalExit=void 0,e._onCollectButtonPressActionFunction=void 0,e._stateName="TotalWin",e._isGameReplaying=!1,e.numDisplayController=void 0,e.numRollController=void 0,e.totalFreeSpinNumDisplayController=void 0,e.totalAmount=void 0,e}return __extends(e,t),e.prototype.setupSprite=function(t,e,i,n){this.totalWinSprite.spriteFrame=t,this.collectOnSpriteFrame=e,this.collectOffSpriteFrame=i,this.collectTextSprite.spriteFrame=e,n&&this.freeSpinTextSprite&&(this.freeSpinTextSprite.spriteFrame=n)},e.prototype.init=function(t){this.cameraEffect=t,this._bindedOnNumRollDone=this._onNumRollDone.bind(this);var e=this.numDisplayNode;this.numDisplayController=e.getComponent("NumberDisplayController"),this.numRollController=e.getComponent("NumberRollController"),this.enableTotalFreeSpin&&(this.totalFreeSpinNumDisplayController=this.totalFreeSpinNumDisplayNode.getComponent("NumberDisplayController"));var i=this.controllerMouseHover;if(i)i.setEnable(!1);else{var n=this.collectBtn.node;n.on(cc.Node.EventType.MOUSE_ENTER,this._onMouseEnter.bind(this)),n.on(cc.Node.EventType.MOUSE_LEAVE,this._onMouseLeave.bind(this))}this._initNodes({collectButtonNode:this.collectBtn.node,skipButtonNode:this.skipNumRollBtn.node}),this.customInit(),this._clean()},e.prototype.play=function(t,e,i,n,a,s){void 0===s&&(s=!1),t<=0?a&&a():(this._onCollectButtonEnableCallback=i,this._onCollectButtonPressActionFunction=n,this._finishCallback=a,this._isGameReplaying=s,this.totalAmount=t,this.enableTotalFreeSpin&&e&&this.totalFreeSpinNumDisplayController.displayNumber(e,!0),this._playNumRoll(0,this.totalAmount),this._enableSkipBtnWithDelay(1),this.playStartAnim(),o.emitGameEffectStateChangedEvent({displayState:"Start",effectType:this._stateName}))},e.prototype.clean=function(){this._clean()},e.prototype.onDestroy=function(){if(!this.controllerMouseHover){var t=this.collectBtn.node;t.off(cc.Node.EventType.MOUSE_ENTER,this._onMouseEnter.bind(this),this),t.off(cc.Node.EventType.MOUSE_LEAVE,this._onMouseLeave.bind(this),this)}},e.prototype.onSkipAreaPressed=function(){this.skipNumRollBtn.interactable&&this.numRollController.skip()},e.prototype.onCollectBtnPressed=function(){this._collectBtnPressed()},e.prototype.customInit=function(){},e.prototype.playStartAnim=function(){var t=this.node;t.active=!0,t.opacity=255},e.prototype.playReachTotalAnim=function(t){var e=this.numDisplayNode,i=e.scale;e.runAction(cc.sequence(cc.scaleTo(.15,1.2*i).easing(cc.easeOut(2)),cc.scaleTo(.15,i)));var n=this.collectBtn.node;n.active=!0,n.opacity=0,n.runAction(cc.sequence(cc.fadeIn(.5),cc.callFunc(function(){t()})))},e.prototype.playCollectBtnPressedAnim=function(t){t()},e.prototype.playExitAnim=function(t){this.node.runAction(cc.sequence(cc.fadeOut(.5),cc.callFunc(function(){t()})))},e.prototype.onMouseEnter=function(){},e.prototype.onMouseLeave=function(){},e.prototype.customClean=function(){},e.prototype._playNumRoll=function(t,e){var i=this.numDisplayController,n=this.numRollController;i.clear(),i.displayNumber(t,!1),n.rollDuration=this.numRollDuration,n.play(t,e,this._bindedOnNumRollDone)},e.prototype._enableSkipBtnWithDelay=function(t){n.delayCallback(t)(this._enableNumRollSkip.bind(this))},e.prototype._enableNumRollSkip=function(){var t=this.skipNumRollBtn;t.interactable=!0,t.node.active=!0},e.prototype._onNumRollDone=function(){var t=this.skipNumRollBtn;t.interactable=!1,t.node.active=!1,this.collectTextSprite.spriteFrame=this.collectOnSpriteFrame,this.playReachTotalAnim(this._enableCollectButtonWrapper.bind(this)),this.cameraEffect&&this.cameraEffect.shakeOnce()},e.prototype._enableCollectButtonWrapper=function(){var t=this;this.collectBtn.interactable=!0,this.controllerMouseHover&&this.controllerMouseHover.setEnable(!0),this._abortNormalExit=n.delayCallback(this._isGameReplaying?1:6)(function(){t._collectBtnPressed(!0),t._abortNormalExit=void 0}),o.emitGameEffectStateChangedEvent({displayState:"DidUpdate",effectType:this._stateName}),this._onCollectButtonEnableCallback&&this._onCollectButtonEnableCallback(),this._onCollectButtonEnableCallback=void 0},e.prototype._collectBtnPressed=function(t){var e=this;void 0===t&&(t=!1);var i=this.collectBtn;if(i&&i.interactable){this._abortNormalExit&&this._abortNormalExit(),this._abortNormalExit=void 0,i.interactable=!1,this.controllerMouseHover&&this.controllerMouseHover.setEnable(!1);var n=function(){e.collectOffSpriteFrame&&(e.collectTextSprite.spriteFrame=e.collectOffSpriteFrame),o.emitGameEffectStateChangedEvent({displayState:"WillEnd",effectType:e._stateName}),e.playCollectBtnPressedAnim(e._totalWinEnd.bind(e),t)},a=this._onCollectButtonPressActionFunction;a?(a(n),this._onCollectButtonPressActionFunction=void 0):n()}},e.prototype._totalWinEnd=function(){var t=this;this.playExitAnim(function(e){t._finishCallbackWrapper(e)})},e.prototype._finishCallbackWrapper=function(t){void 0===t&&(t=!0),o.emitGameEffectStateChangedEvent({displayState:"End",effectType:this._stateName}),this._finishCallback&&this._finishCallback(),this._finishCallback=void 0,t&&this._clean()},e.prototype._clean=function(){var t=this.collectBtn,e=t.node;e.active=!0,e.opacity=0,t.interactable=!1;var i=this.skipNumRollBtn;i.interactable=!1,i.node.active=!1,this._isGameReplaying=!1,this.customClean();var n=this.node;n.opacity=0,n.active=!1},e.prototype._onMouseEnter=function(){this.onMouseEnter()},e.prototype._onMouseLeave=function(){this.onMouseLeave()},e.prototype._initNodes=function(){},__decorate([h(cc.Boolean)],e.prototype,"enableTotalFreeSpin",void 0),__decorate([h({type:cc.Node,visible:function(){return this.enableTotalFreeSpin}})],e.prototype,"totalFreeSpinNumDisplayNode",void 0),__decorate([h({type:cc.Sprite,visible:function(){return this.enableTotalFreeSpin}})],e.prototype,"freeSpinTextSprite",void 0),__decorate([h(cc.Float)],e.prototype,"numRollDuration",void 0),__decorate([h(cc.Node)],e.prototype,"numDisplayNode",void 0),__decorate([h(cc.Button)],e.prototype,"skipNumRollBtn",void 0),__decorate([h(cc.Button)],e.prototype,"collectBtn",void 0),__decorate([h(cc.Sprite)],e.prototype,"totalWinSprite",void 0),__decorate([h(cc.Sprite)],e.prototype,"collectTextSprite",void 0),__decorate([h(a.default)],e.prototype,"controllerMouseHover",void 0),__decorate([s.automationDec({func:r.onSkipNumberRollEnabled})],e.prototype,"_enableNumRollSkip",null),__decorate([s.automationDec({func:r.onCollectButtonShown})],e.prototype,"_enableCollectButtonWrapper",null),__decorate([s.automationDec({func:r.initNodes})],e.prototype,"_initNodes",null),__decorate([l],e)}(cc.Component);i.default=u,cc._RF.pop()}},{AutomationDecorator:"AutomationDecorator",GameEventHandler:"GameEventHandler",QiBaseControllerMouseHover:"QiBaseControllerMouseHover","QiBaseTotalWinController.spec":"QiBaseTotalWinController.spec",Utils:"Utils"}],QiSlotTemplate:[function(t,e){"use strict";cc._RF.push(e,"64b77sjeYtOWKwinwmfPvF8","QiSlotTemplate")||cc._RF.pop()},{}],QuitGameWithEvent:[function(t,e){"use strict";if(!cc._RF.push(e,"9dae5FG2alGMJdhhlTrbpbu","QuitGameWithEvent")){var i=function(t,e){var i=a();return function(t){return i[t-=154]}(t,e)},n=System[i(163)](i(166)+i(157)+i(169)+"rk")[i(156)+i(159)+i(168)+i(165)+i(158)+"nt"];for(var o in n)e[i(170)+i(160)+"s"][o]=n[o];e[i(170)+i(160)+"s"][i(161)+i(155)+i(162)+"e"]=!0,cc._RF.pop()}function a(){var t=["isB","sMo","Qui","ram","Eve","tGa","ort","__e","dul","get","der","ith","bvf","uil","meW","ewo","exp"];return(a=function(){return t})()}},{}],QuitGame:[function(t,e){"use strict";if(!cc._RF.push(e,"456a5aKQwZLCowcei+t+Ga2","QuitGame")){var i=function(t,e){var i=a();return function(t){return i[t-=228]}(t,e)},n=System[i(234)](i(235)+i(229)+i(230)+"rk")[i(232)+i(236)+"me"];for(var o in n)e[i(237)+i(238)+"s"][o]=n[o];e[i(237)+i(238)+"s"][i(228)+i(231)+i(241)+"e"]=!0,cc._RF.pop()}function a(){var t=["__e","ram","ewo","sMo","Qui","der","get","bvf","tGa","exp","ort","uil","isB","dul"];return(a=function(){return t})()}},{}],RPGCamera:[function(t,e,i){"use strict";if(!cc._RF.push(e,"b34c3172YhNMp5NMtM894v1","RPGCamera")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Object,ctor:function(){this._movables=[],this._actionCameraActivated=!1,this._enemyCameraActivated=!1,this._bindedDelayedExitEnemyTransition=this._delayedExitEnemyTransition.bind(this),this._bindedDelayedExitActionTransition=this._delayedExitActionTransition.bind(this),this._id="GEM_SAVIOUR_RPG_CAMERA_ID"},addMovables:function(t){var e;!(e=t)||e.moveBy,this._movables.push(t)},enterActionTransition:function(t){if(this._actionCameraActivated)t&&t();else{this._actionCameraActivated=!0;var e=this._movables;e.forEach(function(i,n){var o=n===e.length-1?t:void 0;i.moveBy(-200,.7,o)})}},enterEnemyTransition:function(t){if(this._enemyCameraActivated)t&&t();else{this._enemyCameraActivated=!0;var e=this._movables;e.forEach(function(i,n){var o=n===e.length-1?t:void 0;i.moveBy(-400,.7,o)})}},exitActionTransition:function(t){this._enemyCameraActivated?(this._actionCameraActivated=!1,this._enemyCameraActivated=!1,this._exitCallback=t,cc.director.getScheduler().schedule(this._delayedExitEnemyTransition,this,0,0,.3,!1)):this._actionCameraActivated?(this._actionCameraActivated=!1,this._exitCallback=t,cc.director.getScheduler().schedule(this._delayedExitActionTransition,this,0,0,.3,!1)):t&&t()},_delayedExitEnemyTransition:function(){var t=this._movables,e=this._exitCallback;t.forEach(function(i,n){var o=n===t.length-1?e:void 0;i.moveBy(600,.7,o)}),this._exitCallback=void 0},_delayedExitActionTransition:function(){var t=this._movables,e=this._exitCallback;t.forEach(function(i,n){var o=n===t.length-1?e:void 0;i.moveBy(200,.7,o)}),this._exitCallback=void 0},destroy:function(){this._movables=void 0,this._super()}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],RPGController:[function(t,e,i){"use strict";if(!cc._RF.push(e,"4171eYZAOBGMrRXbBO7Qr9n","RPGController")){i.__esModule=!0,i.default=void 0;var n=I(t("PlayerManager")),o=I(t("PetManager")),a=I(t("ObstacleManager")),s=I(t("SymbolManager")),r=I(t("WorldManager")),c=I(t("RPGCamera")),l=I(t("VictoryPlayer")),h=I(t("GenericQueue")),u=I(t("GenericCommand")),d=t("Enum"),p=I(t("RPGScroller")),f=I(t("ChatBubbleGenerator")),_=I(t("AudioLibrary")),m=t("GamePreference"),g=I(t("CoinObtainedLabelGenerator")),y=I(t("DataManager")),v=t("AssetManager"),b=t("GeneralBundle"),S=I(t("ExtraEffectPlayer")),C=I(t("EmoticonEffectPlayer")),A=t("WorldLoader"),E=t("ObstacleBundle"),M=t("Utils"),T=t("TransactionStateMachineHandler"),P=cc.Class({extends:cc.Object,ctor:function(){this._state=d.GameState.idle,this.delegate=void 0,this.head=void 0,this.effectLayer=void 0,this.responsiveEffectLayer=void 0,this.rpgViewPrefab=void 0,this.willSwitchWorld=void 0,this.keyEffectPlayer=void 0,this.itemGenerator=void 0,this.chatBubbleGenerator=void 0,this.extraEffectPlayer=void 0,this.emoticonEffectPlayer=void 0,this._queue=new h.default,this.reinit=!1,this._hasLoaded=!1,this._isFinalSpin=!1,this._isFirstSpin=!1,this._itemHasCollected=!1,this._waitingItem=!1,this._prizes=[],this.shakeScreenEffect=void 0,this._isLaunchGame=!1,this.worldResourcesLoaded=void 0,this.victoryPrefab=void 0,this.isHDVer=void 0,this.victoryBannerTitle=void 0,this.victoryLabelBattleReward=void 0,this.victoryLabelTreasureReward=void 0,this.font=void 0,this._id="GEM_SAVIOUR_RPG_CONTROLLER_ID"},willAppear:function(t){var e=this,i=function(){e._displayView(t)};this._hasLoaded?this._isLaunchGame&&i():(this._isLaunchGame=!1,this._setupComponents(i))},setupRPG:function(t){this._setupComponents(t)},launchGame:function(){this._isLaunchGame=!0},didDisappear:function(){},getName:function(){return"RPGController"},_createRPGScroller:function(){this.rpgScroller=(new p.default).init(this.worldManager.node,this.worldManager.getBackgroundWidth()),this.rpgScroller.addScrollableDataSource(this.worldManager),this.rpgScroller.addScrollableDataSource(this.obstacleManager),this.rpgScroller.addScrollableDataSource(this.itemGenerator),this.rpgScroller.addScrollableDataSource(this.symbolManager),this.rpgScroller.didResetScroll=this.didResetScroll.bind(this),this.rpgCamera=new c.default,this.rpgCamera.addMovables(this.rpgScroller),this.rpgCamera.addMovables(this.playerManager),this.rpgCamera.addMovables(this.petManager),this._hasLoaded=!0},_setupComponents:function(t){var e=this,i=v.assetManager.getAsset(b.GeneralResourceBundle),c=this.rpgView=cc.instantiate(i.rpgViewPrefab);c.x=this.rpgView.width/2,c.y=this.rpgView.height/2,this.worldManager=c.getComponentInChildren(r.default),this.chatBubbleGenerator=new f.default,this.chatBubbleGenerator.chatLayer=this.responsiveEffectLayer,this.chatBubbleGenerator.chatBubblePrefab=i.chatBubblePrefab;var h=this.playerManager=c.getComponentInChildren(n.default);h.init(this),h.didLightningAttack=this._didLightningAttack.bind(this),h.playerPrefab=i.playerPrefab,h.isHDVersion(this.isHDVer),this.playerPrefab=void 0;var u=this.petManager=c.getComponentInChildren(o.default);u.init(this,this.isHDVer),u.effectLayer=this.effectLayer,u.didPlaceSymbol=this._didPlaceSymbol.bind(this),u.didTouchSymbol=this._didTouchSymbol.bind(this);var d=this.obstacleManager=c.getComponentInChildren(a.default);d.chestPrefab=this.chestPrefab,d.portalPrefab=i.portalPrefab,this.chestPrefab=void 0,d.init(this),d.didWinBattle=this.didWinBattle.bind(this),d.beforeInterruptAction=this.beforeInterruptObstacleAction.bind(this),d.didInterruptAction=this.didInterruptObstacleAction.bind(this),d.isHDVersion(this.isHDVer);var p=this.symbolManager=c.getComponentInChildren(s.default);p.isHDVersion(this.isHDVer),p.init();var _=c.getChildByName("Camera").getChildByName("VictoryLayer"),m=this.victoryPlayer=new l.default;m.victoryPrefab=i.victoryPrefab,m.effectLayer=_,m.init(this.isHDVer,this.victoryBannerTitle,this.victoryLabelBattleReward,this.victoryLabelTreasureReward);var y=this.itemGenerator;y.didFollowPlayer=this.didItemFollowPlayer.bind(this),y.isHDVersion(this.isHDVer),y.init();var E=this.coinObtainedLabelGenerator=new g.default;E.worldLayer=h.playerLayer,E.font=this.font,this.keyEffectPlayer.delegate=this,this.extraEffectPlayer=new S.default,this.extraEffectPlayer.effectLayer=this.effectLayer,this.extraEffectPlayer.responsiveEffectFrontLayer=this.responsiveEffectFrontLayer,this.extraEffectPlayer.init(),this.emoticonEffectPlayer=new C.default,this.emoticonEffectPlayer.effectLayer=this.effectLayer,this.emoticonEffectPlayer.init(),this.worldResourcesLoaded?(this.worldManager.init(this),this._createRPGScroller(),t&&t()):A.worldLoader.loadResources(!1,function(){e.worldResourcesLoaded=!0,e.worldManager.init(e),e._createRPGScroller(),t&&t()})},_displayView:function(t){this.rpgView.parent||this.head.addChild(this.rpgView),this._init(t)},_init:function(t){var e=this;if(y.default.hasRpgInfo()){var i=this.reinit,n=m.gamePreference.story,o=this.worldManager,a=this.petManager,s=this._isLaunchGame,r=function(){s||o.playBackgroundMusic()},c=function(){n&&e.setState(d.GameState.scrolling),t&&t()};(0,M.sequenceCallback)(function(t){e.obstacleManager.updateData(),t()},function(t){i&&e.spawnPortalOnReinit(),t()},function(t){n?e.spawnHeroAndPet(500,cc.v2(300,400)):e.spawnHeroAndPet(-300,cc.v2(-500,400)),t()},function(t){y.default.hasRpgObstacleInfo()||i||!n||a.getPet().showEverytimeLoginDialog(),t()})(function(){y.default.hasRpgObstacleInfo()?!1===y.default.rpgObstacleEnemyIsMonster&&y.default.rpgObstacleRelicCurrentHp>0?(r(),e.spawnRelic(!0,c)):!1===y.default.rpgObstacleEnemyIsMonster&&y.default.rpgObstacleHasTreasureChest&&!1===y.default.rpgObstacleIsFinished?(r(),e.spawnChest(c)):!0===y.default.rpgObstacleEnemyIsMonster&&!1===y.default.rpgObstacleIsFinished?(e.spawnEnemies(!0,c),!y.default.hasRpgSpecialSymbolInfo()||e.symbolManager.getCurrentSymbol()||y.default.specialSymbolIsReadyState||(e.executeSymbolPhase(!0),e.executeBonusPhase())):y.default.hasRpgPrizeInfo()&&y.default.rpgObstacleIsFinished&&y.default.rpgObstacleIsFinished&&(r(),c()):(r(),c())})}},spawnHeroAndPet:function(t,e){this.playerManager.spawnPlayer(t),this.petManager.spawnPet(e)},spawnPortalOnReinit:function(){this._isFinalSpin=!0,this.spawnPortal(!0),this.earlyEndRPGActionPhase()},startMusic:function(){this._launchWithBattleMusic?(this._launchWithBattleMusic(),this._launchWithBattleMusic=void 0):this.worldManager.playBackgroundMusic(),this._isLaunchGame=!1},didStoryEnd:function(t){var e=this,i=this.playerManager.getPlayer();i.run(),this.playerManager.moveBy(800,1,function(){i.idle(),e.setState(d.GameState.scrolling),t&&t()}),this.petManager.moveBy(800,1)},didSpinReturned:function(t){void 0===t&&(t=!1);var e=y.default.rpgIsFinalInfo;this.updateControllerData(t),0===this.obstacleManager.getAliveEnemies().length&&this.executeSpawnPhase(),this.updateData(),e&&!t||(t&&y.default.hasRpgObstacleInfo()&&y.default.currentSpinType===d.SPIN_TYPE.NORMAL_SPIN&&this.executePlayerActionPhase(),y.default.hasRpgSpecialSymbolInfo()&&(this.symbolManager.getCurrentSymbol()&&y.default.specialSymbolIsReadyState?this.executePetActionPhase():this.executeSymbolPhase()),y.default.hasRpgObstacleInfo()&&y.default.rpgObstacleRound===d.OBSTACLE_ACTION_ROUND.ATTACK&&y.default.rpgObstacleEnemyIsMonster&&!y.default.rpgObstacleIsFinished&&!y.default.isChargingForLightningAttack&&this.executeObstacleActionPhase(),y.default.hasRpgPrizeInfo()&&y.default.rpgObstacleIsFinished&&0===this.obstacleManager.getAliveEnemies().length&&this.executeWaitItem())},executeSpecialSymbolSpecialLightningCharge:function(t){this.executePlayerChargeAction(t)},didGemEliminate:function(t){void 0===t&&(t=!1),y.default.hasRpgObstacleInfo()||this.executePlayerRunFaster(),this.executePlayerEliminateActionPhase(t)},didGemDroppedFinish:function(){y.default.hasRpgObstacleInfo()&&y.default.rpgObstacleEnemyIsMonster&&y.default.isRpgObstacleSpawnRound&&this.delegate.showMonsterWarning(!0),this.executeBonusPhase()},executeBonusPhase:function(){var t=this;this._queueCommand(d.CommandType.action,function(){var e=t._isFinalSpin=y.default.rpgIsFinalInfo,i=t._isFirstSpin;e&&!i&&y.default.isChargingForLightningAttack&&y.default.nextSpinType===d.SPIN_TYPE.NORMAL_SPIN&&t.executePlayerBonusActionPhase(),y.default.hasRpgSpecialSymbolInfo()&&t.symbolManager.getCurrentSymbol()&&y.default.specialSymbolIsReadyState&&t.executePetActionPhase(),t.executePlayerRegenerationPhase(),y.default.rpgObstacleIsFinished&&(y.default.rpgObstacleEnemyIsMonster?t.executeBattleEndPhase():y.default.rpgObstacleEnemyIsMonster||y.default.rpgObstacleRelicType===d.RELIC_ITEM_TYPE.TREASURE_CHEST||y.default.nextSpinType===d.SPIN_TYPE.RESPIN||t.executeRelicBattleEndPhase()),t.endPlayerActionPhase(),y.default.hasKeyInfo()&&t.executeUpdateTilePhase(),y.default.hasRpgStageInfo()&&y.default.rpgChangeStage&&t.spawnPortal(!1),t.earlyEndRPGActionPhase(),t._queue.executeNextCommand()})},updateControllerData:function(t){var e=this,i=y.default.rpgPrizeInfo;return this._queueCommand(d.CommandType.action,function(){e._isFirstSpin=t,e._isFinalSpin=y.default.rpgIsFinalInfo,i&&e._prizes.unshift(i),e._queue.executeNextCommand()}),void 0!==i},updateData:function(){var t=this;this._queueCommand(d.CommandType.action,function(){t.obstacleManager.updateData(),t._queue.executeNextCommand()})},spawnPortal:function(t){var e=this;void 0===t&&(t=!1),this._queueCommand(d.CommandType.spawn,function(){e.obstacleManager.spawnPortal(t),t&&e._queue.executeNextCommand()})},spawnEnemies:function(t,e){var i=this;void 0===t&&(t=!1),void 0===e&&(e=void 0),this._queueCommand(d.CommandType.spawn,function(){i.obstacleManager.spawnEnemies(t,e)})},spawnRelic:function(t,e){var i=this;void 0===t&&(t=!1),void 0===e&&(e=void 0),this._queueCommand(d.CommandType.spawn,function(){i.obstacleManager.spawnRelic(t,e)})},spawnChest:function(t){var e=this;this._queueCommand(d.CommandType.spawn,function(){e.obstacleManager.spawnChest(function(){e._queue.executeNextCommand(),t&&t()})})},executeSpawnPhase:function(){return!(!y.default.hasRpgObstacleInfo()||!y.default.isRpgObstacleSpawnRound||(y.default.rpgObstacleEnemyIsMonster?this.spawnEnemies():this.spawnRelic(),0))},executePlayerActionPhase:function(){var t=this;this._queueCommand(d.CommandType.action,function(){t.playerManager.executeActionPhase(function(){t._queue.executeNextCommand()})})},executePlayerEliminateActionPhase:function(t){var e=this;this._queueCommand(d.CommandType.action,function(){e.playerManager.executeEliminateActionPhase(t,function(){e._queue.executeNextCommand()})})},executeUpdateTilePhase:function(){var t=this;this._queueCommand(d.CommandType.action,function(){t.delegate.isKeyObtained(),t._queue.executeNextCommand()})},executePlayerChargeAction:function(t){var e=this,i=this.extraEffectPlayer,n=this.playerManager.getPlayer(),o=this.obstacleManager.getAliveEnemies(),a=this.delegate.infoBoard,s=a.node,r=this._convertToEffectLayoutPosition(s),c=function(){n.playLightningCharge(),e._queue.executeNextCommand()},l=function(){var t=cc.v2(r.x,r.y+s.height/2);if(o&&o.length>0&&!n.isDead()){var a=e._convertToEffectLayoutPosition(n.node);a=cc.v2(a.x-n.node.width/3,a.y+n.node.height),i.playLightningStrikeEffect(t,a,e.effectLayer,M.emptyFunc,c)}else e._queue.executeNextCommand()},h=cc.v2(r.x,r.y-s.height/2);i.playLightningStrikeBurstEffect(t,h,this.effectLayer,M.emptyFunc,function(){a.playLightningCharge(l),cc.director.getScheduler().schedule(e._playerCharge,e,0,0,.5,!1)})},_playerCharge:function(){this.playerManager.executeEliminateActionPhase(!0)},_convertToEffectLayoutPosition:function(t){var e=t.parent.convertToWorldSpaceAR(t.position);return this.effectLayer.convertToNodeSpaceAR(e)},executePlayerBonusActionPhase:function(){var t=this;this._queueCommand(d.CommandType.action,function(){t.playerManager.executeBonusActionPhase(function(){t._queue.executeNextCommand()})})},executeSymbolPhase:function(t){var e=this;void 0===t&&(t=!1),this._queueCommand(d.CommandType.spawn,function(){var i=function(){e._queue.executeNextCommand()};!y.default.hasRpgSpecialSymbolInfo()||y.default.getRpgSpecialSymbolAction!==d.SPECIAL_SYMBOL_ACTION_STATE.GET_SPECIAL_SYMBOL&&!t?i():e.obstacleManager.getAliveEnemies().length>0&&y.default.rpgObstacleEnemyIsMonster&&e.symbolManager.spawnSymbol(900,t,i)})},executePlayerRegenerationPhase:function(){var t=this;this._queueCommand(d.CommandType.action,function(){t.playerManager.executeRegenerationPhase(function(){t._queue.executeNextCommand()})})},executeWaitItem:function(){var t=this;this._queueCommand(d.CommandType.action,function(){t._itemHasCollected?(t._itemHasCollected=!1,t._queue.executeNextCommand()):t._waitingItem=!0})},executeStopWalkTimer:function(){var t=this;this._walkAction&&(this.rpgView.stopAction(this._walkAction),this._walkAction=void 0),this._walkAction=this.rpgView.runAction(cc.sequence([cc.delayTime(1.1),cc.callFunc(function(){t._walkAction=void 0,t.executePlayerStop()})]))},executePlayerRun:function(){var t=this;this._queueCommand(d.CommandType.action,function(){t.playerManager.startPlayerRun(),t._queue.executeNextCommand()})},executePlayerRunFaster:function(){var t=this;this._queueCommand(d.CommandType.action,function(){t.playerManager.startPlayerRunFaster(),t._queue.executeNextCommand()})},executePlayerStop:function(){var t=this;this._queueCommand(d.CommandType.action,function(){t.playerManager.startPlayerIdle(),t._queue.executeNextCommand()})},earlyEndRPGActionPhase:function(){var t=this;this._queueCommand(d.CommandType.action,function(){t._willEmptyQueue(),t._queue.executeNextCommand()})},endPlayerActionPhase:function(){var t=this;this._queueCommand(d.CommandType.action,function(){t.playerManager.endActionPhase(function(){t._queue.executeNextCommand()})})},executeObstacleActionPhase:function(){var t=this;this._queueCommand(d.CommandType.action,function(){t.obstacleManager.executeActionPhase(function(){t._queue.executeNextCommand()})})},executeBattleEndPhase:function(){var t=this;this._queueCommand(d.CommandType.action,function(){var e=function(){t._queue.executeNextCommand()};(0,T.transitionCompleteCallback)()(function(){(0,T.goToStateCallback)("setup",!0)(function(){t.obstacleManager.executeBattleEndPhase(e)})})})},executeRelicBattleEndPhase:function(){this._queueCommand(d.CommandType.action,function(){})},executeRelicBattleEndNextQueueCommand:function(){this._queue.executeNextCommand()},executePetLoginTalk:function(){this.petManager.getPet().showAfterStory()},executePetActionPhase:function(){var t=this;this._queueCommand(d.CommandType.action,function(){var e=t.petManager,i=t.delegate,n=t.symbolManager.getCurrentSymbol();if(n&&y.default.specialSymbolIsReadyState){var o=i.getGemPosition(n.getPositionIndex());e.startCollectSymbol(n,o,M.emptyFunc)}})},_queueCommand:function(t,e){var i=new u.default;i.init(t,e),this._queue.addToQueue(i)},didReceiveKey:function(){this.petManager.getPet().showGetKeyMsgDialog()},didStartSpin:function(t){void 0===t&&(t=!1),t||(this._walkAction&&(this.rpgView.stopAction(this._walkAction),this._walkAction=void 0),this.executePlayerRun())},didResetScroll:function(){this.worldManager.randomGenerateObjects(this.isHDVer)},moveCameraIn:function(t){this.rpgCamera.enterActionTransition(t)},didItemFollowPlayer:function(t){var e=this,i=this.delegate,n=this.petManager;if(i.isMapAppear()){var o=n.getPet();return i.updateKeyTileState(),void o.showGetMapMsgDialog()}var a=this._prizes.pop();a&&this.obtainMoney(a,t!==d.ItemType.Bag,function(i){var o=e.playerManager,s=e.playerManager.getPlayer();n.startVictoryDance(),t===d.ItemType.Bag&&s._displayCoinAmount(a),o.startPlayerCheer(i,function(){e._waitingItem?(e._waitingItem=!1,e._queue.executeNextCommand()):e._itemHasCollected=!0})})},didEncounterObject:function(t,e){var i=this;void 0===e&&(e=!0);var n=this.rpgCamera,o=this.obstacleManager,a=o.getAliveEnemies(),s=this.petManager,r=this.petManager.getPet(),c=a[a.length-1],l=function(){var e=c.getMeetDialogCat();if(e){r.displayBubbleChat(e);var n=function(){t&&t(),i._queue.executeNextCommand()};c.getEncounterDialog()?i.playerManager.node.runAction(cc.sequence(cc.delayTime(1),cc.callFunc(function(){c.encounterOpponent(),n()}))):n()}else t&&t(),i._queue.executeNextCommand()};if(c._getEnemyType()!==d.EnemyType.rock_pillar)this._isLaunchGame?this._launchWithBattleMusic=function(){i._startBattleMusic(c.isBoss())}:this._startBattleMusic(c.isBoss());else{var h=c.getComponent("RockPillar");s.executeMeetRelicDialog(h.hasPillarItemOnTop())}o.revealEnemiesState(),e?n.enterActionTransition(l):l&&l()},didEncounterChest:function(t){var e=this,i=this.keyEffectPlayer,n=this.petManager.getPet();(0,T.transitionCompleteCallback)()(function(){(0,T.goToStateCallback)("setup",!0)(function(){cc.director.getScheduler().schedule(function(){i.playKeyOpen(function(){n.showOpenTreasureDialog(),t&&t()})},e,0,0,.8,!1)})})},didEncounterPortal:function(t,e){void 0===e&&(e=!0);var i=this.rpgCamera,n=this.obstacleManager.getCurrentPortal();this.petManager.executeReachedTeleportDialog();var o=function(){t&&t()};n.playPortalSound(),e?i.exitActionTransition(o):o&&o()},didFinishObject:function(t,e){void 0===e&&(e=!0);var i=this.rpgCamera;this._stopBattleMusic(),e?i.exitActionTransition(t):t&&t()},didFinishChest:function(t){var e=this.rpgCamera,i=this.itemGenerator,n=this.playerManager.getPlayer(),o=this.victoryPlayer,a=function(){t&&t()},s=function(){e.exitActionTransition(a)};cc.director.getScheduler().schedule(function(){o.playVictoryEffect(d.RewardsType.TreasureRewards,s)},this,0,0,.3,!1),cc.director.getScheduler().schedule(function(){i.reconfigureAllObjectAsFollow(n.node)},this,0,0,.5,!1)},_startBattleMusic:function(t){var e;if(_.default.stopMusic(!1),t)e=v.assetManager.getAsset(E.WitchAudioBundle).battleBossBg,_.default.playMusic(e);else{var i=v.assetManager.getAsset(E.BattleSceneDefaultAudioBundle),n=[i.battleBackgroundOne,i.battleBackgroundTwo];e=n[(0,M.randomInt)(0,n.length-1)],_.default.playMusic(e)}},_stopBattleMusic:function(){_.default.stopMusic(!0),this.worldManager.playBackgroundMusic()},didWinBattle:function(t){var e=this,i=this.itemGenerator,n=this.petManager,o=this.obstacleManager,a=this.victoryPlayer,s=this.playerManager.getPlayer(),r=o.getEnemies();n.getPet().showAfterBattleDialog(),o.hideEnemiesState(),a.playVictoryEffect(d.RewardsType.BattleRewards,function(){r[r.length-1].isBoss()?e.rpgCamera.enterEnemyTransition(function(){o.recycleCurrentEnemyGroup(!0,t)}):o.recycleCurrentEnemyGroup(!0,t)}),cc.director.getScheduler().schedule(function(){i.reconfigureAllObjectAsFollow(s.node)},this,0,0,.5,!1),s.hideHP()},beforeInterruptObstacleAction:function(){},didInterruptObstacleAction:function(t){var e=this.petManager,i=this.playerManager,n=this.obstacleManager;if(i.getPlayerIsAlive()||i.getPlayerIsProtected()){var o=n.getAliveEnemies(),a=o[o.length-1];e.getPet().displayBubbleChat(a.getCounterAttackDialogCat()),t&&t()}else e.startProtectPlayer(function(){i.startPlayerProtect(t)}),i.preparePlayerProtect()},_didLightningAttack:function(){this.petManager.getPet().showLightningAppearDialog()},_didPlaceSymbol:function(t){this.didPlaceSymbol&&this.didPlaceSymbol(),this.symbolManager.recycleSymbol(t)},_didTouchSymbol:function(){this._queue.executeNextCommand(),this.didTouchSymbol&&this.didTouchSymbol()},_willEmptyQueue:function(){this._isFinalSpin&&(this._isFinalSpin=!1,this.rpgWillFinishAction&&this.rpgWillFinishAction())},shakeScreen:function(){this.shakeScreenEffect&&this.shakeScreenEffect()},switchWorld:function(){this.worldManager.stopBackgroundMusic(),this.willSwitchWorld&&cc.director.getScheduler().schedule(this.willSwitchWorld,this,0,0,.1,!1)},obtainMoney:function(t,e,i){this.didObtainMoney&&this.didObtainMoney(t,e,i)},getState:function(){return this._state},setState:function(t){t!==this._state&&(this._state=t)},destroy:function(){this.itemGenerator.clear(),this.rpgCamera.destroy(),this.rpgScroller.destroy(),this.chatBubbleGenerator.destroy(),this._queue.destroy(),this.coinObtainedLabelGenerator.destroy(),this.victoryPlayer.destroy(),this._destroyManagers(),this.delegate=void 0,this.rpgView.removeFromParent(),this.rpgView.destroy(),this._super()},_destroyManagers:function(){this._destroyManager(this.playerManager),this._destroyManager(this.worldManager),this._destroyManager(this.obstacleManager),this._destroyManager(this.symbolManager),this._destroyManager(this.petManager),this.playerManager=void 0,this.worldManager=void 0,this.obstacleManager=void 0,this.symbolManager=void 0,this.petManager=void 0,this.worldResourcesLoaded=!1},_destroyManager:function(t){var e=t.node;t.destroy(),e.destroy()},update:function(t){if(this._state!==d.GameState.idle){var e=this.playerManager;if(e&&e.hasPlayer()){var i=e.getPlayerMoving();if(i!==d.MovingStyle.NotMoving){var n=this.rpgScroller,o=e.getPlayerDirection();n.update(o,i,t)}}}},keyAnimEnd:function(){this.delegate.hideGrayKey()},rollVictoryPoints:function(t,e){this.victoryPlayer.rollPoints(t),e&&cc.director.getScheduler().schedule(this._stopVictoryEffect,this,0,0,2.3,!1)},_stopVictoryEffect:function(){this.victoryPlayer.stopVictoryEffect()}});i.default=P,e.exports=i.default,cc._RF.pop()}function I(t){return t&&t.__esModule?t:{default:t}}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",ChatBubbleGenerator:"ChatBubbleGenerator",CoinObtainedLabelGenerator:"CoinObtainedLabelGenerator",DataManager:"DataManager",EmoticonEffectPlayer:"EmoticonEffectPlayer",Enum:"Enum",ExtraEffectPlayer:"ExtraEffectPlayer",GamePreference:"GamePreference",GeneralBundle:"GeneralBundle",GenericCommand:"GenericCommand",GenericQueue:"GenericQueue",ObstacleBundle:"ObstacleBundle",ObstacleManager:"ObstacleManager",PetManager:"PetManager",PlayerManager:"PlayerManager",RPGCamera:"RPGCamera",RPGScroller:"RPGScroller",SymbolManager:"SymbolManager",TransactionStateMachineHandler:"TransactionStateMachineHandler",Utils:"Utils",VictoryPlayer:"VictoryPlayer",WorldLoader:"WorldLoader",WorldManager:"WorldManager"}],RPGScroller:[function(t,e,i){"use strict";if(!cc._RF.push(e,"f5d95IVSLREqK4W7YyMgcHN","RPGScroller")){i.__esModule=!0,i.default=void 0;var n=t("Enum"),o=t("Utils"),a=cc.Class({extends:cc.Object,ctor:function(){this._dataSources=[],this.backgroundLayer=void 0,this._didResetScroll=void 0,this.scrollSpeed=400,this.itemsMinRecycleX=-1842},init:function(t,e){return this.backgroundLayer=t,this.backgroundWidth=e,this.backgroundLayer.on("position-changed",this._onPositionChange,this),this},_onPositionChange:function(){var t=this.backgroundLayer,e=this.backgroundWidth;t.x<=-e?(t.x+=e,this.didResetScroll&&this.didResetScroll()):t.x>=e&&(t.x-=e)},addScrollableDataSource:function(t){var e;(e=t)&&e.getScrollableGroups&&e.recycleObject&&this._dataSources.push(t)},_scrollAll:function(t){var e=this;this._dataSources.forEach(function(i){e._scrollDataSource(i,t)})},_scrollDataSource:function(t,e){for(var i=t.getScrollableGroups(),n=i.length-1;n>=0;n--){var o=i[n];if(s(o))for(var a=e*o.speedFactor,r=o.objectList,c=o.groupIndex,l=r.length-1;l>=0;l--){var h=r[l];cc.isValid(h)&&(h.x+=a,h.x<this.itemsMinRecycleX&&t.recycleObject(h,l,c))}}},moveBy:function(t,e,i){this._dataSources.forEach(function(i){for(var n=i.getScrollableGroups(),o=n.length-1;o>=0;o--){var a=n[o];if(s(a))for(var r=a.objectList,c=a.speedFactor,l=t*c,h=function(t){var i=r[t];if(cc.isValid(i)){var n=i.x+l,o=cc.moveBy(e,cc.v2(l,0));i.runAction(cc.sequence([o,cc.callFunc(function(){i.x=n})]))}},u=r.length-1;u>=0;u--)h(u)}}),this.backgroundLayer.runAction(cc.sequence([cc.moveBy(e,cc.v2(t,0)),cc.callFunc(function(){i&&i()})]))},destroy:function(){this.backgroundLayer.off("position-changed",this._onPositionChange,this),this._dataSources.length=0,this._didResetScroll=void 0,this._super()},update:function(t,e,i){var o,a=t===n.PlayerDirection.right?-1:1;o=e===n.MovingStyle.RunningFaster?1.8:e===n.MovingStyle.Running?1.5:1;var s=Math.min(.2,i),r=this.scrollSpeed*o*s*a;this._scrollAll(r);var c=this.backgroundLayer.x;t===n.PlayerDirection.right?c+=r:c-=r,this.backgroundLayer.x=c}});i.default=a,e.exports=i.default,cc._RF.pop()}function s(t){return!!(t&&(0,o.hasProperty)(t,"speedFactor")&&(0,o.hasProperty)(t,"objectList")&&(0,o.hasProperty)(t,"groupIndex"))}},{Enum:"Enum",Utils:"Utils"}],RegionUtils:[function(t,e){"use strict";if(!cc._RF.push(e,"66f7cm+vSlJGI+BrDnM182m","RegionUtils")){var i=function(t,e){var i=a();return function(t){return i[t-=142]}(t,e)},n=System[i(148)](i(150)+i(151)+i(144)+"rk")[i(156)+i(143)+i(154)+"ls"];for(var o in n)e[i(153)+i(155)+"s"][o]=n[o];e[i(153)+i(155)+"s"][i(147)+i(152)+i(146)+"e"]=!0,cc._RF.pop()}function a(){var t=["der","ion","ewo","isB","dul","__e","get","uil","bvf","ram","sMo","exp","Uti","ort","Reg"];return(a=function(){return t})()}},{}],RequestHandler:[function(t,e){"use strict";if(!cc._RF.push(e,"ddac9it5qxAYKizptRrqz5F","RequestHandler")){var i=function(t,e){var i=a();return function(t){return i[t-=436]}(t,e)},n=System[i(446)](i(450)+i(442)+i(437)+"rk")[i(451)+i(448)+i(443)+i(444)+"er"];for(var o in n)e[i(441)+i(436)+"s"][o]=n[o];e[i(441)+i(436)+"s"][i(438)+i(439)+i(447)+"e"]=!0,cc._RF.pop()}function a(){var t=["ort","ewo","__e","sMo","der","exp","ram","tHa","ndl","isB","get","dul","ues","uil","bvf","Req"];return(a=function(){return t})()}},{}],ResRC:[function(t,e){"use strict";if(!cc._RF.push(e,"d4158znpd1MRoX1c9Ahg8Yp","ResRC")){var i=function(t,e){var i=r();return function(t){return i[t-=231]}(t,e)},n=System[i(250)](i(259)+i(256))[i(242)+"RC"],o={};o[i(233)+i(265)+i(255)+i(249)+i(270)+"et"]=i(235)+i(267)+i(237)+i(252)+i(268)+i(269),o[i(233)+i(265)]=i(235)+i(267)+"e",o[i(233)+i(265)+i(255)+i(249)]=i(235)+i(267)+i(237)+i(252)+"e",o[i(238)+i(253)+i(255)+i(249)]=i(262)+i(239)+i(255)+i(249),o[i(254)+i(244)+i(255)+i(249)+i(270)+"et"]=i(254)+i(234)+i(252)+i(268)+i(269),o[i(254)+i(257)+i(264)+i(243)+i(258)+i(261)]=i(254)+i(257)+i(264)+i(260)+i(247)+"e";var a=function(t,e){var n=i,o={};for(var a in e)t[n(241)+n(271)+n(246)+n(245)+"ty"](a)?o[t[a]]=e[a]:o[a]=e[a];return o}(o,n);for(var s in a)e[i(263)+i(236)+"s"][s]=a[s];e[i(263)+i(236)+"s"][i(240)+i(248)+i(232)+"e"]=!0,cc._RF.pop()}function r(){var t=["isB","dul","unl","dBu","rel","ort","eBu","del","ove","__e","has","Res","eBy","dBy","per","Pro","ngl","sMo","dle","get","uil","ndl","ete","loa","Bun","mon","dRe","Sin","com","eSi","gle","rem","exp","mot","oad","der","eas","eAs","set","Ass","Own"];return(r=function(){return t})()}},{}],ResourceQualifierHelper:[function(t,e){"use strict";if(!cc._RF.push(e,"1ee4bptwXpLdJMyzif4w8U5","ResourceQualifierHelper")){var i=function(t,e){var i=a();return function(t){return i[t-=377]}(t,e)},n=System[i(389)](i(387)+i(391)+i(388)+"rk")[i(382)+i(380)+i(378)+i(381)+i(386)+i(392)+i(395)+"er"];for(var o in n)e[i(393)+i(383)+"s"][o]=n[o];e[i(393)+i(383)+"s"][i(377)+i(390)+i(394)+"e"]=!0,cc._RF.pop()}function a(){var t=["__e","ceQ","isB","our","ual","Res","ort","der","uil","ifi","bvf","ewo","get","sMo","ram","erH","exp","dul","elp"];return(a=function(){return t})()}},{}],Respin:[function(t,e,i){"use strict";if(!cc._RF.push(e,"c2ba6vWFe9Io6criAz5EEdU","Respin")){i.__esModule=!0,i.default=void 0;var n,o=(n=t("AudioLibrary"))&&n.__esModule?n:{default:n},a=t("AssetManager"),s=t("GeneralBundle"),r=cc.Class({extends:cc.Component,properties:{anim:cc.Animation,symbolGlowAnim:cc.Animation,lightAnim:cc.Animation,respinNode:cc.Node,respinAnim:cc.Animation,respinGemAnim:cc.Animation,respinSymbol:cc.Node},init:function(){var t=a.assetManager.getAsset(s.GeneralGameAudioBundle);this.respinSound=t.respinGemMove},prepareRespin:function(t){this.lightAnim.node.position=t;var e=this.respinNode;e.position=t,e.scale=.9,this.respinSymbol.opacity=255,this.respinSymbol.angle=0;var i=this.symbolGlowAnim.node;i.color=cc.Color.WHITE,i.scale=4,this.symbolGlowAnim.play(),this.respinGemAnim.play(),this._respinReady=!1,this._pendingRespin=!1,this.scheduleOnce(this._readyToRespin,.1)},_readyToRespin:function(){this._pendingRespin?(this.anim.play(),this.respinAnim.play()):this._respinReady=!0},playRespin:function(){this._respinReady?(this.anim.play(),this.respinAnim.play()):this._pendingRespin=!0},lightBeginRotate:function(){this.lightAnim.play()},respinGemStartMove:function(){var t=cc.v2(0,0);this.lightAnim.node.runAction(cc.moveTo(.22,t)),this.respinNode.runAction(cc.moveTo(.22,t))},startRespinGems:function(){this.delegate.startRespin()},playRespinSound:function(){o.default.playEffect(this.respinSound)},stopSymbolAnimation:function(){this.symbolGlowAnim.stop(),this.respinGemAnim.stop(),this.lightAnim.stop()}});i.default=r,e.exports=i.default,cc._RF.pop()}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",GeneralBundle:"GeneralBundle"}],ResponsiveHandler:[function(t,e,i){"use strict";if(!cc._RF.push(e,"5d5ab/mZ+JHZLBE3uLcyLZO","ResponsiveHandler")){Object.defineProperty(i,"__esModule",{value:!0});var n=t("CanvasResizeBroadcaster"),o=cc._decorator,a=o.ccclass,s=o.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.widget=void 0,e.settingMenuNode=void 0,e}return __extends(e,t),e.prototype.onLoad=function(){n.default.subscribe(this.onCanvasResize.bind(this)),this.onCanvasResize()},e.prototype.onCanvasResize=function(){var t=cc.view.getVisibleSize().height/2+this.settingMenuNode.y;this.widget.bottom=t,this.widget.updateAlignment()},__decorate([s(cc.Widget)],e.prototype,"widget",void 0),__decorate([s(cc.Node)],e.prototype,"settingMenuNode",void 0),__decorate([a],e)}(cc.Component);i.default=r,cc._RF.pop()}},{CanvasResizeBroadcaster:"CanvasResizeBroadcaster"}],ResultServices:[function(t,e,i){"use strict";if(!cc._RF.push(e,"6c9365kePhAaabdo6SuCLws","ResultServices")){Object.defineProperty(i,"__esModule",{value:!0}),i.updateSettingFooterService=void 0;var n=t("SettingMenuHelper");i.updateSettingFooterService=function(t){var e=t.playerModel.balance;n.settingMenuHelper.setBalance(e);var i=t.transactionModel.accumulatedWinAmount;i&&n.settingMenuHelper.setWinAmount(i)},cc._RF.pop()}},{SettingMenuHelper:"SettingMenuHelper"}],RetryHandler:[function(t,e){"use strict";if(!cc._RF.push(e,"10d2ev3/JxFKL8CZQNMs/Ip","RetryHandler")){var i=function(t,e){var i=o();return function(t){return i[t-=171]}(t,e)},n=System[i(171)](i(175)+i(173)+i(174)+"rk")[i(182)+i(180)+i(179)+i(184)];e[i(187)+i(176)+"s"][i(188)+i(185)+"t"]=n,e[i(187)+i(176)+"s"][i(177)+i(183)+i(172)+"e"]=!0,cc._RF.pop()}function o(){var t=["get","dul","ram","ewo","bvf","ort","__e","uil","and","ryH","isB","Ret","sMo","ler","aul","der","exp","def"];return(o=function(){return t})()}},{}],RockMonsterSprite:[function(t,e,i){"use strict";if(!cc._RF.push(e,"6a6b15YxytGq6ily3JemN7f","RockMonsterSprite")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Component,onLoad:function(){this._spriteAnim=this.getComponent(cc.Animation),this._sprite=this.getComponent(cc.Sprite)},attack2:function(){this._spriteAnim.play()},spriteAnimEnded:function(t){this.didAnimEnd&&this.didAnimEnd(t)},spriteAnimHit:function(t){void 0===t&&(t=1),this.didAnimHit&&this.didAnimHit(t)}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],RockMonster:[function(t,e,i){"use strict";if(!cc._RF.push(e,"a620bbZ8HZKg7z2Gl5k4HUJ","RockMonster")){i.__esModule=!0,i.default=void 0;var n=d(t("BaseEnemyActor")),o=d(t("RockMonsterSprite")),a=t("Enum"),s=d(t("AudioLibrary")),r=t("AssetManager"),c=t("ObstacleBundle"),l=t("Utils"),h=shell.I18n,u=cc.Class({extends:n.default,properties:{sprite:o.default,atk1Animation:cc.Animation},getIdleAnim:function(){return"Idle"},getHitAnim:function(){return"Hit"},getDieAnim:function(){return"Death"},getDeflectAnim:function(){return"Deflect"},onLoad:function(){var t=r.assetManager.getAsset(c.GolemAudioBundle);this.atk1Sound=t.rockNormalAttack,this.atk2Sound=t.rockComboAttack,this.dieSound=t.rockDie,this._counterCatSpeak=!1,this._super(),this._targetActor=void 0,this._attackCallback=void 0,this.sprite.didAnimEnd=this.didAnimEnd.bind(this),this.sprite.didAnimHit=this.didAnimHit.bind(this),this._switchToSprite(!1),this._setupAnimations(),this._meetCat=["CatDialog.EncounteredGolemSpeech"]},_getEnemyType:function(){return a.EnemyType.rock_monster},_getEmoticonPosition:function(t){var e;switch(t){case a.EmoticonStyle.Sweat:e=cc.v2(0*this.node.getContentSize().width,.15*this.node.getContentSize().height);break;case a.EmoticonStyle.Shock:e=cc.v2(.1*this.node.getContentSize().width,.2*this.node.getContentSize().height);break;case a.EmoticonStyle.ShockExpMarkLv1:case a.EmoticonStyle.ShockExpMarkLv2:case a.EmoticonStyle.ShockExpMarkLv3:e=cc.v2(-.4*this.node.getContentSize().width,.15*this.node.getContentSize().height)}return e},getApproachRange:function(){return 670},_setupAnimations:function(){this._atk1AnimNode=this.atk1Animation.node,this._atk1AnimNode.active=!1},_executeAttack:function(t,e,i){t.isDead()?this.attack1(t,i):e?0===(0,l.randomInt)(0,1)?this.attack1(t,i):this.attack2(t,i):this.attack1(t,i)},_cancelEffects:function(){this.atk1Animation.stop(),this._atk1AnimNode.active=!1},attack1:function(t,e){var i=this,n=t.node,o=t.isDead()?n.x+n.width/2+200+400:n.x+n.width/2+200,a=cc.v2(o,n.y),r={moveSpeedIn:.3,moveSpeedOut:.4,moveDeflectSpeedOut:.2,minDistance:50,attackHits:1,animFunc:this._playAttack1Anim.bind(this)};this.spineAttack([t],a,r,function(){i._atk1AnimNode.active=!1,i.atk1Animation.stop(),e&&e()}),s.default.playEffect(this.atk1Sound)},moveIntoAttackPosition:function(t,e,i,n){var o=this,a=this.shouldMove(t,e);!this._inAttackPosition&&a&&(n&&t.x>n&&(t=cc.v2(n,t.y)),this._inAttackPosition=!0,this._defaultXPosition=this.node.x,this.node.runAction(cc.sequence([cc.moveTo(i,cc.v2(t.x,this.node.y)),cc.callFunc(function(){o._callShakeScreenEffect(),o.node.x=t.x})])))},_playAttack1Anim:function(){var t=this.spine;"Attack_01"!==t.animation&&(this._atk1AnimNode.active=!0,this.atk1Animation.play("rock_giant_attack_effect"),t.setAnimation(0,"Attack_01",!1),t.addAnimation(0,"Idle",!0,0))},attack2:function(t,e){this._targetActor=t,this._attackCallback=e,this._hitDamage=this._data.damage/2,this._switchToSprite(!0),this.sprite.attack2(),s.default.playEffect(this.atk2Sound)},_switchToSprite:function(t){t?(this.sprite.node.active=!0,this.spine.node.active=!1):(this.spine.node.active=!0,this.sprite.node.active=!1)},didAnimEnd:function(){this._switchToSprite(!1),this.spine.setAnimation(0,"Idle",!0),this._attackCallback&&this._attackCallback()},didAnimHit:function(t){2===t&&this._callShakeScreenEffect(),this._targetActor&&this._targetActor.damaged(this._hitDamage)},getCounterAttackDialogCat:function(){if(!this._counterCatSpeak)return(0,l.randomInt)(0,1)?(this._counterCatSpeak=!0,h.t("CatDialog.Cautious")):void 0},destroy:function(){this.sprite.didAnimEnd=void 0,this.sprite.didAnimHit=void 0,this._super()},getMeetDialogCat:function(){var t=this._meetCat.concat(n.default._meetMonster),e=(0,l.randomInt)(0,t.length-1);return h.t(t[e])},_playDieSound:function(){s.default.playEffect(this.dieSound)}});i.default=u,e.exports=i.default,cc._RF.pop()}function d(t){return t&&t.__esModule?t:{default:t}}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",BaseEnemyActor:"BaseEnemyActor",Enum:"Enum",ObstacleBundle:"ObstacleBundle",RockMonsterSprite:"RockMonsterSprite",Utils:"Utils"}],RockPillar:[function(t,e,i){"use strict";if(!cc._RF.push(e,"5e51cmbz2lN4rz9KQdMalct","RockPillar")){i.__esModule=!0,i.default=void 0;var n=t("Enum"),o=u(t("RockRelic")),a=u(t("BaseEnemyActor")),s=u(t("DataManager")),r=t("Utils"),c=t("TransactionStateMachineHandler"),l=t("Enum"),h=cc.Class({extends:a.default,properties:{rockRelics:[o.default],rockRelicsAnim:cc.Animation},onLoad:function(){this._saveDefaultProperties(),this.node.y+=this.node.height/2,this.executeRPGControllerRelicBattleEndNextQueueCommand=void 0},init:function(t){this._super(t),this.setRock(this._data.currentHp)},updateData:function(t){this._super(t)},setRock:function(t){var e=this;if(t>6||t<1)throw"RockPillar: Invalid rock count";var i=this.rockRelics;this._currentIndex=6-t,i.forEach(function(t){var i=250*e._currentIndex;t.node.y-=i})},setPillarItem:function(t,e){var i={itemNode:t,position:e};if(this._pillarItem=i,e===n.PillarItemPosition.Top){var o=250*(6-this._currentIndex);t.x=this.node.x,t.y=o+t.height/2}else t.x=this.node.x+400,t.zIndex=-1},hasPillarItemOnTop:function(){var t=this._pillarItem;return!(!t||t.position!==n.PillarItemPosition.Top)},setHP:function(t){this._hp=t,this._isAlive=this._hp>0},move:function(){},playEmoticonEffect:function(t,e){e&&e()},idle:function(){},attack:function(t,e,i){this._executeAttack(t,e,i)},die:function(){},_reconfigureItemAsFollow:function(){var t=this;if(!s.default.rpgObstacleEnemyIsMonster){var e=this._pillarItem.itemNode,i=this.itemGenerator,n=function(){i.reconfigureItemAsFollow(e,t.followActor.node),t.destroySelf()};s.default.nextSpinType!==l.SPIN_TYPE.NORMAL_SPIN?n():(0,c.transitionCompleteCallback)()(function(){(0,c.goToStateCallback)("setup",!0)(function(){var e=t.executeRPGControllerRelicBattleEndNextQueueCommand;t.executeRPGControllerRelicBattleEndNextQueueCommand=void 0,e&&e(),n()})})}},getApproachRange:function(){return 425},damaged:function(t,e,i){var o=this;if(void 0===e&&(e=n.AttackType.Normal),void 0===i&&(i=!1),this.rockRelicsAnim.play("rock_pillar_get_hit"),!this._hasDamagedThisTurn&&i){this._hasDamagedThisTurn=!0,t=this._hp-this._data.currentHp;var a=this._hp-t;this._executeDamagedAnimation(t),(0,r.sequenceCallback)(function(t){o.playDamagedEffect(e),t()})(function(){o.setHP(a)})}},playDamagedEffect:function(t){var e=this.extraEffectPlayer,i=cc.v2(this.node.x+50,this.node.height/6-50);t===n.AttackType.Normal?e.playSlashEffect(i,this.node.parent):e.playMagicEffect(i,new cc.Color(115,27,185),this.node.parent)},destroySelf:function(){this._pillarItem=void 0,this.node.stopAllActions(),this.rockRelicsAnim.stop(),this.didEliminate&&this.didEliminate(this)},dropPrize:function(){},_getEnemyType:function(){return n.EnemyType.rock_pillar},_executeDamagedAnimation:function(t){var e=this;this.breakApart(t,function(){e._isAlive||(s.default.rpgObstacleRelicType===n.RELIC_ITEM_TYPE.TREASURE_CHEST?e.destroySelf():e._reconfigureItemAsFollow())})},_executeAttack:function(t,e,i){var n=this;this._delayAction(.1,function(){n._hasDamagedThisTurn=!1,i&&i()})},_saveDefaultProperties:function(){var t=this,e=this.rockRelics;this._defaultProperties=[],e.forEach(function(e){var i=e.node,n={x:i.x,y:i.y};t._defaultProperties.push(n)})},isBroken:function(){return this._currentIndex===this.rockRelics.length-1},breakApart:function(t,e){var i=this,n=this._currentIndex,o=this.rockRelics,a=this.extraEffectPlayer,s=Math.min(this._currentIndex+t,o.length);if(n>o.length-1)e&&this._delayAction(.5,function(){e()});else{for(var r=function(t,e){var n=o[t];i._delayAction(.05*e,function(){n.breakApart()})},c=this._currentIndex,l=0;c<s;c++,l++)r(c,l);for(var h=this._pillarItem&&this._pillarItem.itemNode,u=o.length+(this.hasPillarItemOnTop()?1:0),d=this._currentIndex+1,p=0;d<u;d++,p++){var f=d===o.length&&h?h:o[d].node,_=.05+.01*p,m=cc.sequence([cc.delayTime(_),cc.moveBy(.1,cc.v2(0,10)).easing(cc.easeIn(.3)),cc.moveBy(.1,cc.v2(0,-10)).easing(cc.easeOut(.3))]);f.runAction(m),f.runAction(cc.sequence([cc.delayTime(_+.3),cc.callFunc(function(){if(6===i._currentIndex&&i.hasPillarItemOnTop()){var t=h.getComponent("SpawnableItem");t&&t.playDropSound()}}),cc.moveBy(.3,cc.v2(0,-250*t)).easing(cc.easeOut(.3))])),d===this._currentIndex+1&&this._delayAction(.5,function(){a.playDustEffect(cc.v2(i.node.x,0),i.node.parent)}),p++}e&&this._delayAction(.75,function(){e()}),this._currentIndex=s}},invalidateActor:function(){this._hasDamagedThisTurn=!1},restoreActorState:function(){this._super(),this._hasDamagedThisTurn=!1;var t=this.rockRelics,e=this._defaultProperties;t.forEach(function(t,i){var n=e[i];t.node.x=n.x,t.node.y=n.y,t.restore()})},destroy:function(){this.rockRelics.forEach(function(t){t.destroy()}),this._super()}});i.default=h,e.exports=i.default,cc._RF.pop()}function u(t){return t&&t.__esModule?t:{default:t}}},{BaseEnemyActor:"BaseEnemyActor",DataManager:"DataManager",Enum:"Enum",RockRelic:"RockRelic",TransactionStateMachineHandler:"TransactionStateMachineHandler",Utils:"Utils"}],RockRelic:[function(t,e,i){"use strict";if(!cc._RF.push(e,"37299UJAk9AkZIbWKxWjnXf","RockRelic")){i.__esModule=!0,i.default=void 0;var n,o=(n=t("AudioLibrary"))&&n.__esModule?n:{default:n},a=t("AssetManager"),s=t("Utils"),r=t("GeneralBundle"),c=cc.v2(16,16),l=cc.Class({extends:cc.Component,properties:{rockNodes:[cc.Node],rockSprites:[cc.SpriteFrame],rockNodeDirection:[cc.Integer],rockNumbering:cc.Node,nodeRotationRange:20,nodeRotationVariance:50,nodeXRange:100,nodeXVariance:300,scaleVariance:1.2,scaleRange:.5,rockPiecesZIndex:2},onLoad:function(){var t=a.assetManager.getAsset(r.GeneralGameAudioBundle);this.breakSound=t.stoneBreak,this._storeDefaultProperties(),this._isBroken=!1,this._piecesPool=new cc.NodePool,this._pieces=[]},getHitEffect:function(){this._isBroken||(this.rockNodes.forEach(function(t){t.color=new cc.Color(149,205,246)}),this.scheduleOnce(this._rockNormalColor,.1))},_rockNormalColor:function(){this.rockNodes.forEach(function(t){t.color=cc.Color.WHITE})},_storeDefaultProperties:function(){var t=this._defaultRockProperties=[];this.rockNodes.forEach(function(e){var i={x:e.x,y:e.y,angle:-e.angle};t.push(i)})},breakApart:function(t){if(!this._isBroken){this._isBroken=!0;var e=this.rockNodes,i=this.nodeRotationRange,n=this.nodeRotationVariance,a=this.nodeXRange,s=this.nodeXVariance,r=this.rockNodeDirection,c=-this.node.height-50;o.default.playEffect(this.breakSound);for(var l=0;l<e.length;l++){var h=e[l];h.zIndex=e.length-l;var u=.03*l,d=r[l],p=(n-Math.random()*i)*d,f=(s-Math.random()*a)*d;h.runAction(cc.sequence([cc.delayTime(u),cc.spawn([cc.rotateBy(.3,p).easing(cc.easeOut(.3)),cc.moveBy(.5,cc.v2(f,c)).easing(cc.easeOut(.3))])]))}this.scheduleOnce(function(){this._generateRockPieces(t)},.05)}},_generateRockPieces:function(t){var e=this,i=this.rockSprites,n=this._pieces,o=15-3*Math.random();this.rockNumbering.active=!1;for(var a=0;a<o;a++){var r=i[(0,s.randomInt)(0,i.length-1)],c=this._generatePiece(r,0,0);c.zIndex=this.rockPiecesZIndex,n.push(c),a===o-1?c.runAction(cc.sequence([cc.fadeOut(1.2).easing(cc.easeIn(3)),cc.callFunc(function(){e._cleanupRockPieces(),t&&t()})])):c.runAction(cc.fadeOut(.8).easing(cc.easeIn(3)))}},_generatePiece:function(t,e,i){var n,o=this._piecesPool,a=this.node,s=o.get();s?(s.opacity=255,n=s.getComponent(cc.Sprite)):((s=new cc.Node).setAnchorPoint(.5,.5),n=s.addComponent(cc.Sprite)),n.spriteFrame=t,a.addChild(s),s.scaleX=s.scaleY=this.scaleVariance-Math.random()*this.scaleRange,s.angle=-360*Math.random();var r=Math.random()-.5>0?1:-1,l=Math.random()-.5>0?1:-1;return s.x=50*Math.random()*r+e,s.y=50*Math.random()*l+i,s.inertiaX=c.x*Math.random()*-1*r,s.inertiaY=c.y+Math.random()*c.y/2,s},_cleanupRockPieces:function(){for(var t=this._pieces,e=this._piecesPool,i=t.length-1;i>=0;i--){var n=t[i];n.stopAllActions(),n.removeFromParent(),e.put(n)}this._pieces=[]},restore:function(){if(this._isBroken){this._isBroken=!1;for(var t=this._defaultRockProperties,e=this.rockNodes,i=0;i<e.length;i++){var n=t[i],o=e[i];o.x=n.x,o.y=n.y,o.angle=n.angle}this._cleanupRockPieces()}},update:function(t){var e=this._pieces;if(0!==e.length)for(var i=e.length-1;i>=0;i--){var n=e[i];n.inertiaX>0&&(n.inertiaX-=+t),n.x-=n.inertiaX,n.inertiaY-=120*t,n.y=n.y+n.inertiaY*n.scaleX}},destroy:function(){this._cleanupRockPieces(),this._piecesPool.clear(),this._super()}});i.default=l,e.exports=i.default,cc._RF.pop()}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",GeneralBundle:"GeneralBundle",Utils:"Utils"}],RtConfig:[function(t,e,i){"use strict";if(!cc._RF.push(e,"8dafeeP/ElNJJaJ5RfQkSx3","RtConfig")){i.__esModule=!0,i.cs_Config=void 0;var n=t("LaunchConfig");i.cs_Launch=n.cs_Launch;var o=Object.freeze({gameId:2,globalDomain:"com.pgsoft",bundleId:"com.pgsoft.slot.gemsaviour",loginMethod:window.LoginMethod,apiDomain:window.ApiDomain,version:"4.7.0.1",certifiedVersion:"1.0.0.0"});i.cs_Config=o,cc._RF.pop()}},{LaunchConfig:"LaunchConfig"}],ScrollViewEx:[function(t,e,i){"use strict";if(!cc._RF.push(e,"4403eAPMfNGO4d5KWMoVrU7","ScrollViewEx")){Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator,o=n.ccclass,a=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.speed=1,e.freeCells=[],e.snapPause=!1,e.snapDone=!1,e.nextAppearTarget=void 0,e.snapFinish=void 0,e.clickPos=void 0,e.clickTarget=void 0,e.timer=void 0,e}return __extends(e,t),e.prototype.cellsInsertToParent=function(){if(this.freeCells.length){for(var t=0;t<this.content.children.length;t++)this.freeCells[t]&&(this.freeCells[t].cellNode.parent=this.content.children[t],this.freeCells[t].cellNode.setPosition(cc.v2(0,0)),this._bindTouchListener(this.freeCells[t].cellNode));this.freeCells=[]}this.snapPause=!1},e.prototype.cellsPullOutFromParent=function(t){if(!this.freeCells.length){this.snapPause=!0,this.setSnapDone(!0);for(var e=0;e<this.content.children.length;e++){var i=this.content.children[e].children[0];if(i){this._unbindTouchListener(i);var n=i.parent.convertToWorldSpaceAR(i.getPosition()),o=t.convertToNodeSpaceAR(n);this.freeCells[e]={cellNode:i,position:o,index:e},this.freeCells[e].cellNode.setPosition(o),this.freeCells[e].cellNode.parent=t}}return this.freeCells}},e.prototype.setSnapPause=function(t){this.snapPause=t},e.prototype.setSnapDone=function(t){this.snapDone=t},e.prototype.isSnapDone=function(){return this.snapDone},e.prototype.setNextAppearTarget=function(t){this.nextAppearTarget=t},e.prototype.setSnapFinish=function(t){this.snapFinish=t},e.prototype._bindTouchListener=function(t){t.on(cc.Node.EventType.TOUCH_START,this._clickStart,this),t.on(cc.Node.EventType.TOUCH_END,this._clickEnd,this),t.on(cc.Node.EventType.TOUCH_MOVE,this._clickMove,this),t.on(cc.Node.EventType.TOUCH_CANCEL,this._clickCancel,this)},e.prototype._unbindTouchListener=function(t){t.off(cc.Node.EventType.TOUCH_START,this._clickStart,this),t.off(cc.Node.EventType.TOUCH_END,this._clickEnd,this),t.off(cc.Node.EventType.TOUCH_MOVE,this._clickMove,this),t.off(cc.Node.EventType.TOUCH_CANCEL,this._clickCancel,this)},e.prototype._clickStart=function(t){var e=t.touch.getLocation();this.clickPos=e,this.clickTarget=t.currentTarget,this.timer=Date.now()},e.prototype._clickMove=function(){},e.prototype._clickEnd=function(t){if(this.clickPos){var e=t.touch.getLocation(),i=this.clickPos,n=this.timer;this._touchMinDistance(i.x,e.x)||this._touchMinDistance(i.y,e.y)||!n||Date.now()-n>120||this._resetClick()}},e.prototype._clickCancel=function(t){if(this.clickPos){var e=t.touch.getLocation(),i=this.clickPos,n=this.timer;this._touchMinDistance(i.x,e.x)||this._touchMinDistance(i.y,e.y)||!n||Date.now()-n>120||this._resetClick()}},e.prototype._touchMinDistance=function(t,e){return Math.abs(e-t)>100},e.prototype._lerp1D=function(t,e,i,n,o){if(void 0===n&&(n=1),a=cc.v2(t,0),s=cc.v2(e,0),a.sub(s).mag()<=1)return this.setSnapDone(!0),o&&o(),e;var a,s,r=t+(i*=n)*(e-t);return t>=e?r<=e&&(o&&o(),r=e):r>=e&&(o&&o(),r=e),r},e.prototype._resetClick=function(){this.clickTarget=void 0,this.timer=void 0},__decorate([a(cc.Integer)],e.prototype,"speed",void 0),__decorate([o],e)}(cc.ScrollView);i.default=s,cc._RF.pop()}},{}],Serializer:[function(t,e){"use strict";if(!cc._RF.push(e,"5a816wMgqtMaZBgj1GhdE3y","Serializer")){var i=function(t,e){var i=o();return function(t){return i[t-=306]}(t,e)},n=System[i(318)](i(314)+i(309))[i(313)+i(310)+i(319)+"r"];e[i(320)+i(307)+"s"][i(313)+i(310)+i(306)+"r"]=n,e[i(320)+i(307)+"s"][i(317)+i(312)+i(316)+"e"]=!0,cc._RF.pop()}function o(){var t=["ize","ort","uil","mon","ial","isB","sMo","Ser","com","der","dul","__e","get","ise","exp"];return(o=function(){return t})()}},{}],SettingInfoFooterController:[function(t,e,i){"use strict";if(!cc._RF.push(e,"06e65rpYzVNHbDR0e2vljl/","SettingInfoFooterController")){Object.defineProperty(i,"__esModule",{value:!0}),i.SettingInfoFooterController=i.WALLET_FOOTER_TYPE=void 0;var n,o=t("UIAppearanceHelper"),a=t("Utils"),s=cc._decorator,r=s.ccclass,c=s.property;(function(t){t[t.CASH=1]="CASH",t[t.FREE_GAME=2]="FREE_GAME",t[t.BONUS=3]="BONUS",t[t.POINT=4]="POINT"})(n=i.WALLET_FOOTER_TYPE||(i.WALLET_FOOTER_TYPE={}));var l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.background=void 0,e.balanceNode=void 0,e.balanceValueNode=void 0,e.rightSlotNode=void 0,e.winValueNode=void 0,e.winHolderNode=void 0,e.freeGamesNode=void 0,e.freeSpinValue=void 0,e.walletButton=void 0,e.walletButtonSensor=void 0,e.walletNavigateIcon=void 0,e.walletNotificationIcon=void 0,e.walletFooterTypeSFList=[],e._isCustomInfoFooter=!1,e._isSticky=!1,e.currentBalance=0,e.targetBalance=0,e.winBalance=0,e.walletNotify=!1,e.lockWalletButton=!1,e._currentWinAmount=0,e._isShowingFreeGamesTitle=!1,e}return __extends(e,t),e.prototype.updateBetAmount=function(t){this._previousBetAmount?(this._currentBetAmount=this._previousBetAmount,this._previousBetAmount=t):this._currentBetAmount=this._previousBetAmount=t},Object.defineProperty(e.prototype,"currentBetAmount",{get:function(){if(void 0===this._currentBetAmount||0===this._currentBetAmount.length)throw Error("SettingInfoFooterController :: currentBetAmount : Please set legit bet amount by calling updateBetAmount first!");return parseFloat(this._currentBetAmount)},enumerable:!1,configurable:!0}),e.prototype.setWalletNavigateIcon=function(t){switch(t){case n.CASH:case n.BONUS:case n.FREE_GAME:this.walletNavigateIcon.getComponent(cc.Sprite).spriteFrame=this.walletFooterTypeSFList[t-1];break;default:this.walletNavigateIcon.getComponent(cc.Sprite).spriteFrame=void 0}},e.prototype.boot=function(){this._balanceLabelController=this.balanceValueNode.getComponent("NumberLabelControllerLite"),this._winLabelController=this.winValueNode.getComponent("NumberLabelControllerLite"),this.walletNavigateIcon.color=o.uiAppearanceHelper.v("setting.color_button_transition_a.normal"),this._balanceLabelController.skip(0),this._winLabelController.skip(0)},e.prototype.changeWalletIconColor=function(t){this.walletButton.opacity=t?o.uiAppearanceHelper.v("setting.color_button_transition_a.pressed").a:o.uiAppearanceHelper.v("setting.color_button_transition_a.normal").a},e.prototype.showBackground=function(t,e){void 0===e&&(e=225),this.background.active=t,this.background.opacity=e},e.prototype.setOpenWalletMenuCallback=function(t){this._openWalletMenu=t},e.prototype.enableWalletButton=function(t){!1===this.lockWalletButton&&(this.walletButton.opacity=t?o.uiAppearanceHelper.v("setting.color_button_transition_a.normal").a:0)},e.prototype.setWalletButtonLock=function(t){void 0===t&&(t=!1),this.lockWalletButton=t},e.prototype.interactableWalletButton=function(t){!1===this.lockWalletButton&&(this.walletButton.opacity=t?o.uiAppearanceHelper.v("setting.color_button_transition_a.normal").a:o.uiAppearanceHelper.v("setting.color_button_transition_a.disabled").a)},e.prototype.changeWalletButtonColor=function(t){this.walletButton.opacity=t?o.uiAppearanceHelper.v("setting.color_button_transition_a.pressed").a:o.uiAppearanceHelper.v("setting.color_button_transition_a.normal").a},e.prototype.showBalanceNode=function(t){this.balanceNode.active=t},e.prototype.showFreeGamesNode=function(t){this.freeGamesNode.active=t},e.prototype.activateWalletNotify=function(t){this.walletNotify=t,this.walletNavigateIcon.active=!t,!0===t?(this.walletNotificationIcon.active=t,this.walletNotificationIcon.stopAllActions(),this.walletNotificationIcon.runAction(cc.repeatForever(cc.sequence(cc.scaleTo(.5,1.2),cc.scaleTo(.5,1))))):(this.walletNotificationIcon.stopAllActions(),this.walletNotificationIcon.active=t)},e.prototype.openWalletMenu=function(){this._openWalletMenu&&this._openWalletMenu()},e.prototype.changeHolder=function(t){this._primeHolder||(this._primeHolder=t),this.node.removeFromParent(!1),t.addChild(this.node)},e.prototype.returnHolder=function(){if(!this._primeHolder)throw Error("SettingInfoFooterController :: returnHolder : do not have parent to return");this.node.removeFromParent(!1),this._primeHolder.addChild(this.node)},e.prototype.showCustomInfoFooter=function(){this._isCustomInfoFooter=!0,this.freeGamesNode.active=!0,this._isCustomInfoFooter&&this._activateFlipRightSlot(!0)},e.prototype.hideCustomInfoFooter=function(){this._isCustomInfoFooter=!1,this.freeGamesNode.active=!1,this.winHolderNode.active=!0;var t=this._abortDelay;this._abortDelay=void 0,t&&t();var e=this._abortSequence;this._abortSequence=void 0,e&&e(),this.rightSlotNode.stopAllActions(),this.rightSlotNode.scale=1},e.prototype.isCustomInfoFooter=function(){return this._isCustomInfoFooter},e.prototype.updateBalance=function(t,e,i){if(!this._balanceLabelController)throw Error("SettingInfoFooter :: updateBalance : Please call boot() to setup balance label controller first!");"number"==typeof t?this.currentBalance=t:t=this.currentBalance,"number"==typeof e?this.targetBalance=e:e=this.targetBalance,i?this._balanceLabelController.play(t,e):this._balanceLabelController.skip(e),this.currentBalance=this.targetBalance},Object.defineProperty(e.prototype,"currentWinAmount",{get:function(){return this._currentWinAmount},enumerable:!1,configurable:!0}),e.prototype.updateWinAmount=function(t,e,i){if(void 0===i&&(i=!0),void 0===this._winLabelController)throw Error("SettingInfoFooter :: updateWinAmount : Please call boot() to setup win label controller first!");a.isNumeric(t)?this.winBalance=t:t=this.winBalance,e?this._winLabelController.play(0,t):this._winLabelController.skip(t),this._isCustomInfoFooter&&!this._isSticky&&this._activateFlipRightSlot(!1,i)},e.prototype.setCustomMiddleInfoFooter=function(t,e){void 0===e&&(e=!0),this.freeSpinValue.string=t,this._isSticky=!e,this._isCustomInfoFooter&&this._activateFlipRightSlot(!0,e)},e.prototype._activateFlipRightSlot=function(t,e){void 0===e&&(e=!0);var i=0;t?(this.winHolderNode.active=!1,this.freeGamesNode.active=!0,i=3,this._isShowingFreeGamesTitle=!0):(this.winHolderNode.active=!0,this.freeGamesNode.active=!1,i=5,this._isShowingFreeGamesTitle=!1),this._startFlipRightSlot(i,e)},e.prototype._startFlipRightSlot=function(t,e){void 0===e&&(e=!0);var i=this._abortDelay;this._abortDelay=void 0,i&&i();var n=this._abortSequence;this._abortSequence=void 0,n&&n(),this.rightSlotNode.stopAllActions(),this.rightSlotNode.scale=1,e&&(this._abortDelay=a.delayCallback(t)(this._runFlipRightSlot.bind(this)))},e.prototype._runFlipRightSlot=function(){var t=this;this._abortDelay=void 0;var e=function(){t._isShowingFreeGamesTitle?(t.winHolderNode.active=!0,t.freeGamesNode.active=!1,t._isShowingFreeGamesTitle=!1):(t.winHolderNode.active=!1,t.freeGamesNode.active=!0,t._isShowingFreeGamesTitle=!0)};this._abortSequence=a.sequenceCallback(function(i){t.rightSlotNode.runAction(cc.sequence(cc.scaleTo(.1,1,0),cc.callFunc(e),cc.scaleTo(.1,1,1),cc.callFunc(function(){i()})))})(function(){var e;e=t._isShowingFreeGamesTitle?3:5,t._abortSequence=void 0,t._startFlipRightSlot(e)})},__decorate([c(cc.Node)],e.prototype,"background",void 0),__decorate([c(cc.Node)],e.prototype,"balanceNode",void 0),__decorate([c(cc.Node)],e.prototype,"balanceValueNode",void 0),__decorate([c(cc.Node)],e.prototype,"rightSlotNode",void 0),__decorate([c(cc.Node)],e.prototype,"winValueNode",void 0),__decorate([c(cc.Node)],e.prototype,"winHolderNode",void 0),__decorate([c(cc.Node)],e.prototype,"freeGamesNode",void 0),__decorate([c(cc.Label)],e.prototype,"freeSpinValue",void 0),__decorate([c(cc.Node)],e.prototype,"walletButton",void 0),__decorate([c(cc.Node)],e.prototype,"walletButtonSensor",void 0),__decorate([c(cc.Node)],e.prototype,"walletNavigateIcon",void 0),__decorate([c(cc.Node)],e.prototype,"walletNotificationIcon",void 0),__decorate([c([cc.SpriteFrame])],e.prototype,"walletFooterTypeSFList",void 0),__decorate([r],e)}(cc.Component);i.SettingInfoFooterController=l,cc._RF.pop()}},{UIAppearanceHelper:"UIAppearanceHelper",Utils:"Utils"}],SettingMenuButtonHelper:[function(t,e,i){"use strict";if(!cc._RF.push(e,"30f73QuhhBGgYaVY0XGDUeW","SettingMenuButtonHelper")){i.__esModule=!0,i.default=void 0;var n=r,o=cc[n(346)+n(423)+n(431)+"r"][n(383)+n(374)+"s"],a=function(){var t=n;function e(){var t=r;this[t(409)+t(372)+t(352)+"st"]=[],this[t(409)+t(372)+t(427)+t(322)+t(405)+t(394)]=Object[t(360)+t(362)](null),this[t(409)+t(372)+t(395)+t(416)+t(413)+t(388)+t(400)+t(394)]=Object[t(360)+t(362)](null),this[t(409)+t(372)+t(418)+t(363)+t(326)+"e"]=Object[t(360)+t(362)](null),this[t(409)+t(372)+"ns"]=Object[t(360)+t(362)](null),this[t(353)+t(349)+t(331)+t(387)+"s"]=Object[t(360)+t(362)](null),this[t(409)+t(372)+t(352)+t(340)+t(354)+t(379)+t(389)+t(365)+"le"]=Object[t(360)+t(362)](null)}return e[t(323)+t(428)+t(344)][t(341)+t(331)+t(387)+t(429)+t(368)]=function(e,i,n){var o=t;this[o(409)+o(372)+o(427)+o(322)+o(405)+o(394)][e]=i,this[o(409)+o(372)+o(352)+o(340)+o(354)+o(379)+o(389)+o(365)+"le"][e]=n},e[t(323)+t(428)+t(344)][t(428)+t(369)+t(327)+t(348)+t(384)+t(328)+"ed"]=function(){var e=t;return this[e(409)+e(372)+e(352)+"st"][e(330)+e(324)]},e[t(323)+t(428)+t(344)][t(334)+t(331)+t(387)+t(392)+t(401)]=function(e){var i=t;return cc[i(378)+i(412)+i(414)+"te"](this[i(409)+i(372)+i(427)+i(322)+i(405)+i(394)][e])[i(334)+i(426)+i(380)+i(359)](i(391)+i(333)+i(355)+i(342)+i(325)+i(327)+"on")},e[t(323)+t(428)+t(344)][t(341)+t(411)+t(410)+t(357)+t(408)+t(396)+t(372)+t(395)+t(417)+"t"]=function(e,i){var n=t,o=cc[n(378)+n(412)+n(414)+"te"](this[n(409)+n(372)+n(427)+n(322)+n(405)+n(394)][e])[n(334)+n(426)+n(380)+n(359)](n(391)+n(333)+n(355)+n(342)+n(325)+n(327)+"on");return this[n(409)+n(372)+n(352)+"st"][n(370)+"h"](o[n(375)+n(387)]),o[n(347)+n(430)+"k"]=function(){var t=n;i(),shell[t(371)+t(406)+t(398)+t(422)+t(377)+t(337)+t(319)+t(343)+t(382)+"n"](!0)},this[n(409)+n(372)+n(418)+n(363)+n(326)+"e"][e]=!1,this[n(409)+n(372)+"ns"][e]=o,o},e[t(323)+t(428)+t(344)][t(341)+t(411)+t(410)+t(357)+t(408)+t(402)+t(351)+t(331)+t(387)]=function(){var e=t,i=new(cc[e(332)+"e"])(e(318)+e(364)+e(327)+"on");return i[e(393)+"th"]=103,i[e(320)+e(339)]=103,i[e(356)+e(367)+"y"]=0,i},e[t(323)+t(428)+t(344)][t(341)+t(329)+t(345)+t(338)+t(372)+t(395)+t(417)+"t"]=function(e,i){var n=t;this[n(409)+n(372)+n(418)+n(363)+n(326)+"e"][e]=!1,this[n(353)+n(349)+n(331)+n(387)+"s"][e]={isInteractable:i},this[n(409)+n(372)+n(352)+n(340)+n(354)+n(379)+n(389)+n(365)+"le"][e]=!1},e[t(323)+t(428)+t(344)][t(341)+t(331)+t(387)+t(415)+t(419)+t(404)+t(406)+t(397)+"g"]=function(e,i){var n=t;void 0===i&&(i=!1),this[n(409)+n(372)+n(395)+n(416)+n(413)+n(388)+n(400)+n(394)][e]=i},e[t(323)+t(428)+t(344)][t(341)+t(331)+t(387)+t(415)+t(419)+t(404)+t(406)]=function(e){var i=t;this[i(409)+i(372)+i(352)+i(340)+i(354)+i(379)+i(389)+i(365)+"le"][e]||!1!==this[i(409)+i(372)+i(418)+i(363)+i(326)+"e"][e]||(this[i(353)+i(349)+i(331)+i(387)+"s"][e]?this[i(353)+i(349)+i(331)+i(387)+"s"][e][i(421)+i(386)+i(403)+i(350)+"le"](this[i(409)+i(372)+i(395)+i(416)+i(413)+i(388)+i(400)+i(394)][e]):this[i(409)+i(372)+"ns"][e][i(421)+i(386)+i(403)+i(350)+"le"]=this[i(409)+i(372)+i(395)+i(416)+i(413)+i(388)+i(400)+i(394)][e])},e[t(323)+t(428)+t(344)][t(341)+t(331)+t(387)+t(336)+"k"]=function(e,i){var n=t;void 0===i&&(i=!1),this[n(409)+n(372)+n(418)+n(363)+n(326)+"e"][e]=i},e[t(323)+t(428)+t(344)][t(399)+t(327)+t(420)+t(361)+"ed"]=function(e){var i=t;return this[i(409)+i(372)+i(418)+i(363)+i(326)+"e"][e]},e[t(323)+t(428)+t(344)][t(341)+t(376)+t(331)+t(387)+t(424)+t(416)+t(413)+t(388)+"e"]=function(e){for(var i=t,n=Object[i(381)+"s"](this[i(409)+i(372)+"ns"]),o=0,a=n[i(330)+i(324)];o<a;o++)this[i(341)+i(331)+i(387)+i(415)+i(419)+i(404)+i(406)+i(397)+"g"](parseInt(n[o]),e),this[i(341)+i(331)+i(387)+i(415)+i(419)+i(404)+i(406)](parseInt(n[o]));var s=Object[i(381)+"s"](this[i(353)+i(349)+i(331)+i(387)+"s"]);for(o=0,a=s[i(330)+i(324)];o<a;o++)this[i(341)+i(331)+i(387)+i(415)+i(419)+i(404)+i(406)+i(397)+"g"](parseInt(s[o]),e),this[i(341)+i(331)+i(387)+i(415)+i(419)+i(404)+i(406)](parseInt(s[o]))},e[t(323)+t(428)+t(344)][t(341)+t(331)+t(387)+t(373)+"ck"]=function(e){for(var i=t,n=0,o=Object[i(381)+"s"](this[i(409)+i(372)+"ns"])[i(330)+i(324)];n<o;n++)this[i(341)+i(331)+i(387)+i(336)+"k"](n+1,e);for(n=0,o=Object[i(381)+"s"](this[i(353)+i(349)+i(331)+i(387)+"s"])[i(330)+i(324)];n<o;n++)this[i(341)+i(331)+i(387)+i(336)+"k"](n+1,e)},e[t(323)+t(428)+t(344)][t(341)+t(336)+t(335)+t(366)+"s"]=function(e,i){var n=t;this[n(341)+n(331)+n(387)+n(336)+"k"](e,i),i?this[n(353)+n(349)+n(331)+n(387)+"s"][e]?this[n(353)+n(349)+n(331)+n(387)+"s"][e][n(421)+n(386)+n(403)+n(350)+"le"](!i):this[n(409)+n(372)+"ns"][e][n(421)+n(386)+n(403)+n(350)+"le"]=!i:this[n(341)+n(331)+n(387)+n(415)+n(419)+n(404)+n(406)](e)},e[t(323)+t(428)+t(344)][t(334)+t(331)+t(387)+t(332)+"e"]=function(e){var i=t,n=this[i(409)+i(372)+"ns"][e];return n?n[i(321)+"e"]:void 0},__decorate([o(t(317)+t(358)+t(385)+t(425)+t(327)+t(390)+t(407)+"er")],e)}();i.default=a,e.exports=i.default,cc._RF.pop()}function s(){var t=["Set","emp","rop","hei","nod","efa","pro","gth","ngB","tor","utt","upi","upO","len","But","Nod","eri","get","kAc","Loc","chP","rBu","ght","stC","set","tti","aga","ype","the","_de","onC","ons","her","tab","pty","nLi","_ot","ann","cSe","opa","ing","tin","ent","cre","ock","ate","ckS","tyB","sab","ces","cit","fab","alB","pus","ena","tto","sLo","las","but","All","Tou","ins","otB","pon","key","tio","ccc","Occ","gMe","nte","ton","abl","eDi","onH","Gen","InL","wid","ore","nIn","uBu","Fla","Can","isB","eSt","ist","uEm","rac","cta","bSt","ble","elp","Men","_bu","ett","upS","tan","act","tia","Int","ter","Lis","nLo","era","onL","isI","vas","cor","sIn","nuB","Com","nPr","tot","Pre","lic","ato"];return(s=function(){return t})()}function r(t,e){var i=s();return(r=function(t){return i[t-=317]})(t,e)}},{}],SettingMenuController:[function(t,e,i){"use strict";if(!cc._RF.push(e,"fba916JMWpJiL2n5fnfp4nN","SettingMenuController")){Object.defineProperty(i,"__esModule",{value:!0}),i.SettingMenuController=void 0;var n=t("HitPassThrough"),o=t("Utils"),a=t("CanvasResizeBroadcaster"),s=cc._decorator,r=s.ccclass,c=s.property,l=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.dimBackground=void 0,e.subControllerHolder=void 0,e.menusLayerHolder=void 0,e.defaultMenuLayerNode=void 0,e.moreMenuLayerNode=void 0,e.subControllerBG=void 0,e.settingInfoFooterFrontHolder=void 0,e.settingInfoFooterBackHolder=void 0,e.walletButtonSensor=void 0,e.hitPassThroughComponent=void 0,e.holders=[],e._isControllerPresent=!1,e._showingDefaultMenu=!0,e._isSwitchingLayer=!1,e._unsubscribeBroadcaster=void 0,e._itemList=[],e._visibleItems=[],e._isFullView=!1,e.FRONT_MAX_HOLDER=4,e._isPanelTouchMoved=!1,e._walletButtonInteractable=!0,e._touchPosY=0,e._touchStartPosY=0,e._subControllerHolderMoveDuration=.2,e._panelCanBeMove=!1,e._startTouchPosY=0,e._lockWalletButton=!1,e._touchInteraction=!1,e._startClick=!1,e._lastDeltaMoveY=0,e}return __extends(e,t),Object.defineProperty(e.prototype,"currentUsingHeight",{get:function(){return this._currentUsingHeight||(this._currentUsingHeight=cc.view.getVisibleSize().height),this._currentUsingHeight},enumerable:!1,configurable:!0}),e.prototype.onLoad=function(){this.defaultMenuLayerNode.y=0,this.moreMenuLayerNode.y=-this.defaultMenuLayerNode.height,this.moreMenuLayerNode.opacity=0,this.moreMenuLayerNode.active=!1,this.subControllerHolder.height=cc.view.getVisibleSize().height;var t=a.default.subscribe(this._onSizeChanged.bind(this));this._unsubscribeBroadcaster="function"==typeof t?t:void 0,this._enableTouchInteraction()},e.prototype._onSizeChanged=function(){var t=this,e=this._sizeChangeAbort;this._sizeChangeAbort=void 0,e&&e();var i=[];this._isFullView?i.push(function(){var e=cc.view.getVisibleSize().height,i=t._getGapBetweenBottomScreenValue();t.subControllerHolder.height=e-i,t.subControllerBG.height=e}):i.push(function(){var e=t.currentUsingHeight,i=t._getGapBetweenBottomScreenValue();t.subControllerHolder.height=e,t.subControllerBG.height=e+i}),this._sizeChangeAbort=o.sequenceCallback(o.delayCallback(0))(function(){t._sizeChangeAbort=void 0;for(var e=0;e<i.length;e++)i[e]()})},e.prototype.onDestroy=function(){var t=this._unsubscribeBroadcaster;this._unsubscribeBroadcaster=void 0,t&&t(),this._disableTouchInteraction()},e.prototype.addMenuItem=function(t){this.holders[this._itemList.length].addChild(t),this._itemList.push(t),this._reloadMenuItems()},e.prototype.replaceMenuItems=function(t){this._itemList.length=0;for(var e=0,i=t.length;e<i;e++)this._itemList.push(t[e]);this._reloadMenuItems()},e.prototype._reloadMenuItems=function(){this._visibleItems.length=0;for(var t=0,e=this._itemList.length;t<e;t++)if(this._showingDefaultMenu){if(t>=this.FRONT_MAX_HOLDER)break;this._visibleItems.push(this._itemList[t])}else t>=this.FRONT_MAX_HOLDER&&this._visibleItems.push(this._itemList[t])},e.prototype.isItemVisible=function(t){return-1!==this._visibleItems.indexOf(t)},e.prototype.visibleItems=function(){return this._visibleItems.slice()},e.prototype.getTotalItems=function(){return this._itemList.slice()},e.prototype.isIdle=function(){return!this._isControllerPresent&&this._showingDefaultMenu},e.prototype.setHitPassThroughPosAndSize=function(t,e,i,n){var o=this.walletButtonSensor.convertToNodeSpaceAR(cc.v2(t,e));this.hitPassThroughComponent.passPoint=cc.v2(o.x,o.y),this.hitPassThroughComponent.passSize=cc.size(i,n)},e.prototype.setHidden=function(t){this.node.active=!t},e.prototype.getSettingInfoFooterFrontHolder=function(){return this.settingInfoFooterFrontHolder},e.prototype.getSettingInfoFooterBackHolder=function(){return this.settingInfoFooterBackHolder},e.prototype.setMenusLayerHolderOffsetPosition=function(t,e){var i=this.menusLayerHolder;i.setPosition(i.x+t,i.y+e)},e.prototype.isSwitchingMenuLayer=function(){return this._isSwitchingLayer},e.prototype.showMoreMenuLayer=function(){var t=this;if(!this._isSwitchingLayer){this._isSwitchingLayer=!0,this._showingDefaultMenu=!1,this._reloadMenuItems(),this.defaultMenuLayerNode.runAction(cc.sequence(cc.spawn(cc.fadeOut(.2).easing(cc.easeQuadraticActionOut()),cc.moveTo(.2,0,-this.defaultMenuLayerNode.height).easing(cc.easeQuadraticActionOut())),cc.callFunc(function(){t._isSwitchingLayer=!1,t.defaultMenuLayerNode.active=!1,t.onMenuEndChanged&&t.onMenuEndChanged()}))),this.moreMenuLayerNode.active=!0,this.moreMenuLayerNode.runAction(cc.spawn(cc.moveTo(.2,0,0).easing(cc.easeQuadraticActionOut()),cc.fadeIn(.2).easing(cc.easeQuadraticActionOut())));var e=this.onMenuStartChanged;e&&e(!0,!0)}},e.prototype.hideMoreMenuLayer=function(){var t=this;if(!this._isSwitchingLayer){this._isSwitchingLayer=!0,this._showingDefaultMenu=!0,this._reloadMenuItems(),this.defaultMenuLayerNode.active=!0,this.defaultMenuLayerNode.runAction(cc.sequence(cc.spawn(cc.fadeIn(.2).easing(cc.easeQuadraticActionOut()),cc.moveTo(.2,0,0).easing(cc.easeQuadraticActionOut())),cc.callFunc(function(){t._isSwitchingLayer=!1,t.onMenuEndChanged&&t.onMenuEndChanged()}))),this.moreMenuLayerNode.runAction(cc.sequence(cc.spawn(cc.moveTo(.2,0,-this.defaultMenuLayerNode.height).easing(cc.easeQuadraticActionOut()),cc.fadeOut(.2).easing(cc.easeQuadraticActionOut())),cc.callFunc(function(){t.moreMenuLayerNode.active=!1})));var e=this.onMenuStartChanged;e&&e(!1,!0)}},e.prototype.isControllerPresenting=function(){return this._isControllerPresent},e.prototype.setIsControllerPresenting=function(t){this._isControllerPresent=t},e.prototype.setSubControllerHolderMoveDuration=function(t){this._subControllerHolderMoveDuration=t},e.prototype.showPanelWithoutLoading=function(t,e,i){void 0===e&&(e=!0),this._isFullView=0===t,0===t&&(t=cc.view.getVisibleSize().height),this._currentUsingHeight=t,e&&this.showDimBackground(),this._setupSubControllerHolder(t),this.subControllerHolder.runAction(cc.sequence([cc.moveTo(this._subControllerHolderMoveDuration,0,0).easing(cc.easeOut(5)),cc.callFunc(function(){i&&i()})]))},e.prototype.showDimBackground=function(){this.dimBackground.runAction(cc.fadeTo(.3,224))},e.prototype._getGapBetweenBottomScreenValue=function(){return this.node.parent.convertToWorldSpaceAR(cc.v2(this.node.x,this.node.y)).y},e.prototype.getGapBetweenBottomScreenValue=function(){return this._getGapBetweenBottomScreenValue()},e.prototype._setupSubControllerHolder=function(t){var e,i,n=this._getGapBetweenBottomScreenValue();n>0?(e=-n,i=n):(e=-1*n,i=-n);var o=this._isFullView?0:n;this.subControllerHolder.height=e+t+o,this.subControllerBG.opacity=255,this._isPanelTouchMoved||this.subControllerHolder.setPosition(cc.v2(0,-t)),this.subControllerBG.height=i+t},e.prototype.setStartMovePanelCallback=function(t){this._startMovePanelCallback=t},e.prototype.setMovePanelCallback=function(t){this._movePanelCallback=t},e.prototype.setEndMovePanelCallback=function(t){this._endMovePanelCallback=t},e.prototype.isPanelTouchMoving=function(){return this._isPanelTouchMoved},e.prototype.startMovePanel=function(t,e){this._isControllerPresent||(this._isPanelTouchMoved=!1,this._panelCanBeMove=!1,this.subControllerHolder.height=e,this.subControllerHolder.y=-e,this._startTouchPosY=t,this.subControllerBG.height=this._getGapBetweenBottomScreenValue()+e)},e.prototype.movePanel=function(t){if(!this._isControllerPresent){this._isPanelTouchMoved=!0;var e=this.subControllerHolder,i=this.subControllerHolder.height,n=e.parent.convertToNodeSpaceAR(cc.v2(0,t)).y,o=Math.abs(this._startTouchPosY-t);this._panelCanBeMove?(e.y=n-i,e.y>=0&&(e.y=0)):o>60?t>this._startTouchPosY&&(this._panelCanBeMove=!0,this.subControllerBG.opacity=255,this._movePanelCallback&&this._movePanelCallback()):e.y=n-i}},e.prototype.closePanel=function(t){var e=this;if(!this._isControllerPresent){this._isControllerPresent=!0;var i=this.subControllerHolder.height+this._getGapBetweenBottomScreenValue();this.subControllerHolder.runAction(cc.sequence(cc.moveTo(this._subControllerHolderMoveDuration,0,-i),cc.callFunc(function(){e._isControllerPresent=!1,e._isPanelTouchMoved=!1,e.subControllerBG.opacity=0,t&&t()})))}},e.prototype.endMovePanel=function(){},e.prototype.getCurrentPanelTopPositionY=function(){var t=this.subControllerHolder;return t.y+t.height},e.prototype.setWalletButtonLock=function(t){void 0===t&&(t=!1),this._lockWalletButton=t},e.prototype.interactableWalletButton=function(t,e){!1===this._lockWalletButton&&(this._walletButtonInteractable=t,t?this._enableTouchInteraction():(this._disableTouchInteraction(),e&&this.closePanel()))},e.prototype._enableTouchInteraction=function(){this._touchInteraction||(this._touchInteraction=!0,this.walletButtonSensor.on(cc.Node.EventType.TOUCH_START,this._touchStart,this),this.walletButtonSensor.on(cc.Node.EventType.TOUCH_MOVE,this._touchMoved,this),this.walletButtonSensor.on(cc.Node.EventType.TOUCH_END,this._touchEnded,this),this.walletButtonSensor.on(cc.Node.EventType.TOUCH_CANCEL,this._touchCancel,this))},e.prototype._disableTouchInteraction=function(){this._touchInteraction&&(this._touchInteraction=!1,this.walletButtonSensor.off(cc.Node.EventType.TOUCH_START,this._touchStart,this),this.walletButtonSensor.off(cc.Node.EventType.TOUCH_MOVE,this._touchMoved,this),this.walletButtonSensor.off(cc.Node.EventType.TOUCH_END,this._touchEnded,this),this.walletButtonSensor.off(cc.Node.EventType.TOUCH_CANCEL,this._touchCancel,this))},e.prototype._touchStart=function(t){if(!this._isControllerPresent&&this._walletButtonInteractable){if(!t)throw Error("SettingMenuController :: _touchStart : No event is passed in");shell.enableCanvasTouchPropagation(!1),this._startClick=!0,this._touchPosY=this._touchStartPosY=t.touch.getLocation().y,this._lastDeltaMoveY=0,this._startMovePanelCallback&&this._startMovePanelCallback(this._touchStartPosY)}},e.prototype._touchMoved=function(t){if(!this._isControllerPresent&&this._walletButtonInteractable){if(!t)throw Error("SettingMenuController :: _touchMoved : No event is passed in");this._lastDeltaMoveY=t.touch.getDelta().y,this._touchPosY=t.touch.getLocation().y,this.movePanel(this._touchPosY)}},e.prototype._touchEnded=function(){if(!this._isControllerPresent&&this._walletButtonInteractable){shell.enableCanvasTouchPropagation(!0);var t=this._lastDeltaMoveY,e=0;t>6?e=1:t<-6&&(e=-1);var i,n,o=(i=cc.v2(0,this._touchPosY),n=cc.v2(0,this._touchStartPosY),i.sub(n).mag()),a=this.node.parent.convertToWorldSpaceAR(this.node.position).y+100,s=this._startClick&&o<10&&this._touchStartPosY<a;this._endMovePanelCallback&&this._endMovePanelCallback(s,void 0,e),this._startClick=!1}},e.prototype._touchCancel=function(){if(!this._isControllerPresent&&this._walletButtonInteractable){shell.enableCanvasTouchPropagation(!0);var t=this._lastDeltaMoveY,e=0;t>6?e=1:t<-6&&(e=-1),this._endMovePanelCallback&&this._endMovePanelCallback(void 0,!this._panelCanBeMove,e),this._startClick=!1}},__decorate([c(cc.Node)],e.prototype,"dimBackground",void 0),__decorate([c(cc.Node)],e.prototype,"subControllerHolder",void 0),__decorate([c(cc.Node)],e.prototype,"menusLayerHolder",void 0),__decorate([c(cc.Node)],e.prototype,"defaultMenuLayerNode",void 0),__decorate([c(cc.Node)],e.prototype,"moreMenuLayerNode",void 0),__decorate([c(cc.Node)],e.prototype,"subControllerBG",void 0),__decorate([c(cc.Node)],e.prototype,"settingInfoFooterFrontHolder",void 0),__decorate([c(cc.Node)],e.prototype,"settingInfoFooterBackHolder",void 0),__decorate([c(cc.Node)],e.prototype,"walletButtonSensor",void 0),__decorate([c(n.default)],e.prototype,"hitPassThroughComponent",void 0),__decorate([c([cc.Node])],e.prototype,"holders",void 0),__decorate([r],e)}(cc.Component);i.SettingMenuController=l,cc._RF.pop()}},{CanvasResizeBroadcaster:"CanvasResizeBroadcaster",HitPassThrough:"HitPassThrough",Utils:"Utils"}],SettingMenuHelper:[function(t,e,i){"use strict";if(!cc._RF.push(e,"e4701ETAgxOxYIUpFHT4NiZ","SettingMenuHelper")){i.__esModule=!0,i.settingMenuHelper=i.SubControllers=i.SettingMenuType=i.ButtonPrefabType=i.BackButtonType=void 0;var n,o=t("Utils"),a=(n=t("SettingMenuButtonHelper"))&&n.__esModule?n:{default:n},s=t("NotifyHelper"),r=t("Preference"),c=t("BVFramework"),l=t("GameEventHandler"),h=E,u=System[h(787)](h(600)+h(707)),d=System[h(787)](h(547)+h(534)+h(325)),p=System[h(787)](h(164)+h(530)+h(639)+h(909)),f=System[h(787)](h(296)+h(494)+h(489)+h(160)+"es");h(589),h(341),h(546),h(574),h(802);var _,m,g,y,v,b,S,C=cc[h(232)+h(894)+h(230)+"r"][h(328)+h(462)+"s"];(_=(0,r.getPreference)(h(498)+h(438)+h(652)+h(325)))[h(780)+h(679)+h(623)+"m"](h(648)+h(309)+"n",!0),i.SubControllers=m,(g=m||(i.SubControllers=m={}))[g[(y=h)(157)+y(881)+y(682)+y(633)]=0]=y(157)+y(881)+y(682)+y(633),g[g[y(593)+y(559)+y(725)+"NS"]=1]=y(593)+y(559)+y(725)+"NS",g[g[y(204)+"ND"]=2]=y(204)+"ND",g[g[y(637)+y(327)+"Y"]=3]=y(637)+y(327)+"Y",g[g[y(229)+y(248)+"LE"]=4]=y(229)+y(248)+"LE",g[g[y(776)+"E"]=5]=y(776)+"E",g[g[y(733)+y(917)]=6]=y(733)+y(917),i.ButtonPrefabType=v,function(t){var e=h;t[t[e(842)+e(678)+e(906)+e(972)+"Y"]=1]=e(842)+e(678)+e(906)+e(972)+"Y",t[t[e(157)+e(881)+e(682)+e(633)]=2]=e(157)+e(881)+e(682)+e(633),t[t[e(593)+e(559)+e(725)+"NS"]=3]=e(593)+e(559)+e(725)+"NS",t[t[e(417)+e(629)+e(402)]=4]=e(417)+e(629)+e(402),t[t[e(204)+"ND"]=5]=e(204)+"ND",t[t[e(229)+e(248)+"LE"]=6]=e(229)+e(248)+"LE",t[t[e(776)+"E"]=7]=e(776)+"E",t[t[e(637)+e(327)+"Y"]=8]=e(637)+e(327)+"Y",t[t[e(188)+e(629)+e(224)]=9]=e(188)+e(629)+e(224),t[t[e(733)+e(917)]=10]=e(733)+e(917),t[t[e(973)+"TY"]=11]=e(973)+"TY"}(v||(i.ButtonPrefabType=v={})),i.BackButtonType=b,function(t){var e=h;t[t[e(188)+e(730)]=0]=e(188)+e(730),t[t[e(215)+e(577)+e(196)+e(925)+e(511)+"C"]=1]=e(215)+e(577)+e(196)+e(925)+e(511)+"C",t[t[e(258)+e(576)+e(157)+"N"]=3]=e(258)+e(576)+e(157)+"N",t[t[e(204)+e(872)+e(886)+e(440)+"G"]=4]=e(204)+e(872)+e(886)+e(440)+"G"}(b||(i.BackButtonType=b={})),i.SettingMenuType=S,function(t){var e=h;t[t[e(763)+e(249)]=0]=e(763)+e(249),t[t[e(708)]=1]=e(708)}(S||(i.SettingMenuType=S={}));var A=new(function(t){var e=h;function i(){var e=E,i=t[e(392)+"l"](this)||this;return i[e(648)+e(309)+"n"]=_[e(648)+e(309)+"n"],i[e(898)+e(201)+e(554)+"On"]=!1,i[e(857)+e(264)+e(744)]=!1,i[e(449)+e(167)+e(370)+e(333)+e(488)]=!0,i[e(636)+e(521)+e(250)+e(681)+e(187)]=b[e(188)+e(730)],i[e(500)+"th"]="",i[e(551)+e(590)+e(834)+e(335)+"e"]=0,i[e(551)+e(245)+e(808)+e(639)]=[],i[e(551)+e(297)+e(274)+e(543)+"t"]=[],i[e(551)+e(245)+e(214)+e(335)+"e"]=0,i[e(551)+e(297)+e(274)+e(185)+"ue"]=0,i[e(636)+e(247)+"et"]="",i[e(323)+e(869)+e(472)+e(418)+e(822)+"s"]={sliderEffect:e(198)+e(686)+e(614)+e(422)+e(883)+e(662)+"t",listItemClick:e(198)+e(686)+e(269)+e(933)+e(659)+e(517)+e(484),menuIconPress:e(198)+e(686)+e(395)+e(228)+e(377)+e(624)+e(693),walletCountingAbove:e(198)+e(686)+e(600)+e(707)+e(882)+e(391)+e(714)+e(841)+e(921)},i[e(323)+e(869)+e(472)+e(418)+e(826)+e(435)]={sliderEffect:!1,listItemClick:!1,menuIconPress:!1,walletCountingAbove:!1},i[e(326)+e(302)+e(461)+e(814)+"t"]=void 0,i[e(449)+e(621)+e(554)+e(692)+e(351)+e(753)+e(456)]=0,i[e(191)+e(939)+e(510)+e(934)+e(391)]=void 0,i[e(857)+e(244)+e(687)+e(692)+e(350)+e(356)+e(707)+"e"]=!1,i[e(719)+e(741)+e(458)+e(325)+e(631)+e(544)+e(471)+e(316)]=new a.default,i[e(363)+e(378)+e(919)+e(771)]=(0,c.getGameContext)(),i[e(852)+e(658)+e(536)+e(835)+e(283)+e(900)+e(783)+"s"](),i[e(852)+e(658)+e(536)+e(774)+e(477)+e(146)+e(687)+e(692)+e(272)+e(508)+"ts"](),i[e(363)+e(378)+e(919)+e(771)].on(e(353)+e(560)+e(856)+e(324)+e(266)+"d",i[e(719)+e(938)+e(311)+e(486)+e(370)+e(333)][e(877)+"d"](i)),i}return __extends(i,t),Object[e(780)+e(679)+e(957)+e(316)+"ty"](i[e(890)+e(159)+e(187)],e(163)+"h",{get:function(){return this[e(500)+"th"]},set:function(t){this[e(500)+"th"]=t},enumerable:!1,configurable:!0}),i[e(890)+e(159)+e(187)][e(498)+e(454)+e(438)+e(665)+e(429)+e(919)+e(516)+e(948)]=function(t){var i=e;this[i(719)+i(741)+i(458)+i(325)+i(370)+i(398)+i(940)+"r"]=t},Object[e(780)+e(679)+e(957)+e(316)+"ty"](i[e(890)+e(159)+e(187)],e(498)+e(438)+e(665)+e(429)+e(919)+e(516)+e(948),{get:function(){var t=e;if(!this[t(719)+t(741)+t(458)+t(325)+t(370)+t(398)+t(940)+"r"])throw Error(t(454)+t(438)+t(665)+t(698)+t(474)+t(147)+t(680)+t(498)+t(438)+t(665)+t(429)+t(919)+t(516)+t(948)+t(293)+t(762)+t(280)+t(638)+t(284)+t(498)+t(438)+t(665)+t(429)+t(919)+t(516)+t(948)+t(445)+t(949)+t(561)+t(498)+t(908)+t(423)+t(434)+t(498)+t(454)+t(438)+t(665)+t(429)+t(919)+t(516)+t(948)+t(638)+t(897)+"!");return this[t(719)+t(741)+t(458)+t(325)+t(370)+t(398)+t(940)+"r"]},enumerable:!1,configurable:!0}),i[e(890)+e(159)+e(187)][e(617)+e(654)+e(167)]=function(t){var i=e;this[i(446)+i(805)+i(736)+"o"](t)},i[e(890)+e(159)+e(187)][e(779)+e(861)+e(167)]=function(t){var i=e;this[i(161)+i(371)+i(736)+"o"](t)},i[e(890)+e(159)+e(187)][e(498)+e(631)+e(544)+e(219)+e(829)]=function(t,i,n){var o=e;void 0===n&&(n=!1),this[o(719)+o(741)+o(458)+o(325)+o(631)+o(544)+o(471)+o(316)][o(498)+o(631)+o(544)+o(219)+o(829)](t,i,n)},i[e(890)+e(159)+e(187)][e(719)+e(177)+e(821)+e(220)+e(631)+e(544)]=function(){var t,i=e,n=this,a=this[i(498)+i(438)+i(665)+i(429)+i(919)+i(516)+i(948)],s=this[i(719)+i(741)+i(458)+i(325)+i(631)+i(544)+i(471)+i(316)],r=this[i(636)+i(521)+i(250)+i(681)+i(187)],c=this;switch(r){case b[i(215)+i(577)+i(196)+i(925)+i(511)+"C"]:(t=s[i(498)+i(404)+i(907)+i(714)+i(407)+i(346)+i(695)+i(868)+i(543)+"t"](v[i(842)+i(678)+i(906)+i(972)+"Y"],this[i(971)+i(941)+i(501)+i(464)+i(250)+"on"][i(877)+"d"](this)))[i(498)+i(631)+i(544)+i(299)+i(344)](0),a[i(322)+i(407)+i(864)+"em"](t[i(653)+"e"]);break;case b[i(258)+i(576)+i(157)+"N"]:if(this[i(895)+i(190)+i(946)+i(810)+i(493)+"e"])(t=s[i(498)+i(404)+i(907)+i(714)+i(407)+i(346)+i(695)+i(868)+i(543)+"t"](v[i(842)+i(678)+i(906)+i(972)+"Y"],function(){var t=i;n[t(719)+t(227)+t(190)+t(946)+t(345)+t(695)+t(964)+t(217)](!n[t(898)+t(201)+t(554)+"On"]),n[t(314)+t(924)+t(401)+t(377)+t(219)+t(630)+t(814)+"d"](),shell.ga[t(932)+t(901)+t(783)](shell.ga[t(267)+t(731)+t(867)+t(959)+t(158)+"L"],shell.ga[t(459)+t(912)+t(566)+t(927)+t(165)+t(504)+"NG"],{name:t(757)+t(372)+t(946)+"n",index:n[t(898)+t(201)+t(554)+"On"]})}))[i(498)+i(631)+i(544)+i(343)+i(915)+"r"](i(498)+i(438)+"g",i(601)+i(168)+i(760)+i(544)+i(697)+i(477)+i(213)+i(490)+"a"),t[i(498)+i(631)+i(544)+i(286)+i(711)+"or"](i(498)+i(438)+"g",i(295)+i(200)+i(760)+i(544)+i(697)+i(477)+i(213)+i(490)+"a"),t[i(498)+i(299)+i(344)+i(308)+i(386)+i(266)](.8),a[i(322)+i(407)+i(864)+"em"](t[i(653)+"e"]),this[i(697)+i(612)+i(430)+i(475)+i(302)+i(461)+i(655)+i(598)+"k"]=function(){var t=i;this[t(545)+t(344)][t(545)+t(344)+t(519)+"me"]=c[t(898)+t(201)+t(554)+"On"]?this[t(898)+t(201)+t(554)+"On"]:this[t(898)+t(201)+t(554)+t(286)],this[t(300)+t(963)+t(631)+t(544)+t(711)+"or"](c[t(898)+t(201)+t(554)+"On"])}[i(877)+"d"](t),this[i(697)+i(612)+i(430)+i(475)+i(302)+i(461)+i(655)+i(598)+"k"](),this[i(697)+i(612)+i(430)+i(475)+i(302)+i(342)+i(968)+i(647)]=(0,o.observeCallback)(this,i(898)+i(201)+i(554)+"On")(this[i(697)+i(612)+i(430)+i(475)+i(302)+i(461)+i(655)+i(598)+"k"]);else{var l=s[i(498)+i(404)+i(907)+i(714)+i(407)+i(154)+i(405)+i(631)+i(544)]();a[i(322)+i(407)+i(864)+"em"](l)}break;case b[i(204)+i(872)+i(886)+i(440)+"G"]:(t=s[i(498)+i(404)+i(907)+i(714)+i(407)+i(346)+i(695)+i(868)+i(543)+"t"](v[i(842)+i(678)+i(906)+i(972)+"Y"],this[i(558)+i(628)+i(875)+i(814)+i(668)+i(749)+i(806)+i(250)+"on"][i(877)+"d"](this)))[i(498)+i(299)+i(344)+i(308)+i(386)+i(266)](.8),a[i(322)+i(407)+i(864)+"em"](t[i(653)+"e"]),this[i(697)+i(612)+i(275)+i(814)+i(668)+i(749)+i(251)+i(655)+i(598)+"k"]=function(){var t=i;this[t(545)+t(344)][t(545)+t(344)+t(519)+"me"]=c[t(648)+t(309)+"n"]?this[t(648)+t(309)+"n"]:this[t(648)+t(309)+"ff"]}[i(877)+"d"](t),this[i(449)+i(167)+i(370)+i(333)+i(488)]||(this[i(648)+i(936)+i(194)+"le"]=this[i(449)+i(167)+i(370)+i(333)+i(488)],this[i(498)+i(460)+i(513)+i(656)+"s"](v[i(842)+i(678)+i(906)+i(972)+"Y"],!0)),this[i(697)+i(612)+i(275)+i(814)+i(668)+i(749)+i(251)+i(655)+i(598)+"k"](),this[i(697)+i(612)+i(275)+i(814)+i(281)+i(287)+"ch"]=(0,o.observeCallback)(this,i(648)+i(309)+"n")(this[i(697)+i(612)+i(275)+i(814)+i(668)+i(749)+i(251)+i(655)+i(598)+"k"]);break;default:t=s[i(498)+i(404)+i(907)+i(714)+i(407)+i(346)+i(695)+i(868)+i(543)+"t"](v[i(842)+i(678)+i(906)+i(972)+"Y"],function(){}),a[i(322)+i(407)+i(864)+"em"](t[i(653)+"e"])}},i[e(890)+e(159)+e(187)][e(498)+e(404)+e(907)+e(714)+e(407)+e(346)+e(695)+"ns"]=function(){var t,i=e,n=this,a=this[i(498)+i(438)+i(665)+i(429)+i(919)+i(516)+i(948)],s=this[i(719)+i(741)+i(458)+i(325)+i(631)+i(544)+i(471)+i(316)],r=this;if(this[i(719)+i(177)+i(821)+i(220)+i(631)+i(544)](),this[i(449)+i(427)+i(368)+i(370)+i(333)])this[i(558)+i(757)+i(201)+i(554)+i(243)+i(963)]=function(t){var e=i;n[e(898)+e(201)+e(554)+"On"]!==t&&n[e(719)+e(227)+e(190)+e(946)+e(345)+e(695)+e(964)+e(217)](t)},t=s[i(498)+i(404)+i(907)+i(714)+i(407)+i(346)+i(695)+i(868)+i(543)+"t"](v[i(157)+i(881)+i(682)+i(633)],this[i(558)+i(628)+i(313)+i(246)+i(946)+i(931)+i(348)+i(250)+"on"][i(877)+"d"](this)),a[i(322)+i(407)+i(864)+"em"](t[i(653)+"e"]),this[i(446)+i(523)+i(352)+i(757)+i(201)+i(554)+i(851)+i(916)+"ck"]=function(){var t=i;this[t(545)+t(344)][t(545)+t(344)+t(519)+"me"]=r[t(898)+t(201)+t(554)+"On"]?this[t(898)+t(201)+t(554)+"On"]:this[t(898)+t(201)+t(554)+t(286)]}[i(877)+"d"](t),this[i(446)+i(523)+i(352)+i(757)+i(201)+i(554)+i(315)+i(811)+"h"]=(0,o.observeCallback)(this,i(898)+i(201)+i(554)+"On")(this[i(446)+i(523)+i(352)+i(757)+i(201)+i(554)+i(851)+i(916)+"ck"]);else{var c=s[i(498)+i(404)+i(907)+i(714)+i(407)+i(154)+i(405)+i(631)+i(544)]();a[i(322)+i(407)+i(864)+"em"](c)}t=s[i(498)+i(404)+i(907)+i(714)+i(407)+i(346)+i(695)+i(868)+i(543)+"t"](v[i(593)+i(559)+i(725)+"NS"],this[i(558)+i(628)+i(521)+i(320)+i(325)+i(631)+i(544)][i(877)+"d"](this)),a[i(322)+i(407)+i(864)+"em"](t[i(653)+"e"]);var l=t[i(782)+i(217)+i(193)+i(185)+i(602)+i(397)+"l"][i(877)+"d"](t);this[i(782)+i(217)+i(193)+i(795)+i(514)+i(655)+i(598)+"k"](function(t){var e=i;l(t),n[e(498)+e(438)+e(597)+e(922)+e(289)+"er"][e(782)+e(217)+e(193)+e(934)+e(391)](t)}),t=s[i(498)+i(404)+i(907)+i(714)+i(407)+i(346)+i(695)+i(868)+i(543)+"t"](v[i(417)+i(629)+i(402)],this[i(364)+i(359)+i(424)+i(325)+i(354)+"er"][i(877)+"d"](this)),a[i(322)+i(407)+i(864)+"em"](t[i(653)+"e"]),(t=s[i(498)+i(404)+i(907)+i(714)+i(407)+i(346)+i(695)+i(868)+i(543)+"t"](v[i(204)+"ND"],this[i(558)+i(628)+i(875)+i(814)+i(668)+i(749)+i(806)+i(250)+"on"][i(877)+"d"](this)))[i(498)+i(568)+"le"](shell[i(231)+"n"].t(i(454)+i(438)+i(665)+i(721)+i(454)+i(438)+i(839)+i(869)+i(529)+"d")),a[i(322)+i(407)+i(864)+"em"](t[i(653)+"e"]),this[i(446)+i(523)+i(352)+i(355)+i(428)+i(919)+i(516)+i(851)+i(916)+"ck"]=function(){var t=i;this[t(545)+t(344)][t(545)+t(344)+t(519)+"me"]=r[t(648)+t(309)+"n"]?this[t(648)+t(309)+"n"]:this[t(648)+t(309)+"ff"]}[i(877)+"d"](t),this[i(449)+i(167)+i(370)+i(333)+i(488)]||(this[i(648)+i(936)+i(194)+"le"]=this[i(449)+i(167)+i(370)+i(333)+i(488)],this[i(498)+i(460)+i(513)+i(656)+"s"](v[i(204)+"ND"],!0)),this[i(446)+i(523)+i(352)+i(355)+i(428)+i(919)+i(516)+i(851)+i(916)+"ck"](),this[i(446)+i(523)+i(352)+i(355)+i(309)+i(968)+i(647)]=(0,o.observeCallback)(this,i(648)+i(309)+"n")(this[i(446)+i(523)+i(352)+i(355)+i(428)+i(919)+i(516)+i(851)+i(916)+"ck"]),t=s[i(498)+i(404)+i(907)+i(714)+i(407)+i(346)+i(695)+i(868)+i(543)+"t"](v[i(229)+i(248)+"LE"],this[i(558)+i(628)+i(233)+i(463)+i(259)+i(325)+i(631)+i(544)][i(877)+"d"](this)),a[i(322)+i(407)+i(864)+"em"](t[i(653)+"e"]),t=s[i(498)+i(404)+i(907)+i(714)+i(407)+i(346)+i(695)+i(868)+i(543)+"t"](v[i(776)+"E"],this[i(558)+i(628)+i(376)+i(532)+i(747)+i(348)+i(250)+"on"][i(877)+"d"](this)),a[i(322)+i(407)+i(864)+"em"](t[i(653)+"e"]),t=s[i(498)+i(404)+i(907)+i(714)+i(407)+i(346)+i(695)+i(868)+i(543)+"t"](v[i(637)+i(327)+"Y"],this[i(558)+i(628)+i(700)+i(639)+i(909)+i(407)+i(346)+i(695)+"n"][i(877)+"d"](this)),a[i(322)+i(407)+i(864)+"em"](t[i(653)+"e"]),t=s[i(498)+i(404)+i(907)+i(714)+i(407)+i(346)+i(695)+i(868)+i(543)+"t"](v[i(188)+i(629)+i(224)],function(){var t=i;n[t(314)+t(924)+t(401)+t(377)+t(219)+t(630)+t(814)+"d"](),n[t(307)+t(891)+t(424)+t(325)+t(354)+"er"]()}),a[i(322)+i(407)+i(864)+"em"](t[i(653)+"e"])},Object[e(780)+e(679)+e(957)+e(316)+"ty"](i[e(890)+e(159)+e(187)],e(395)+e(447)+e(784)+e(974)+e(655)+e(155)+"k",{set:function(t){var i=e;this[i(182)+i(429)+i(366)+i(542)+i(851)+i(567)+"ck"]=t},enumerable:!1,configurable:!0}),Object[e(780)+e(679)+e(957)+e(316)+"ty"](i[e(890)+e(159)+e(187)],e(598)+e(627)+e(695)+e(644)+"pe",{get:function(){var t=e;return this[t(636)+t(521)+t(250)+t(681)+t(187)]},set:function(t){var i=e;this[i(636)+i(521)+i(250)+i(681)+i(187)]=t},enumerable:!1,configurable:!0}),i[e(890)+e(159)+e(187)][e(498)+e(343)+e(941)+e(499)+e(898)+e(345)+e(695)+e(703)+e(336)+e(152)]=function(t){var i=e;this[i(558)+i(628)+i(376)+i(651)+i(426)+i(250)+i(971)+i(655)+i(598)+"k"]=t},i[e(890)+e(159)+e(187)][e(498)+e(189)+e(919)+e(516)+e(948)+e(219)+e(932)+e(438)+"g"]=function(t){var i=e;this[i(498)+i(438)+i(665)+i(429)+i(919)+i(516)+i(948)][i(498)+i(189)+i(919)+i(516)+i(948)+i(219)+i(932)+i(438)+"g"](t)},i[e(890)+e(159)+e(187)][e(558)+e(628)+e(313)+e(246)+e(946)+e(931)+e(348)+e(250)+"on"]=function(){var t=e;this[t(314)+t(924)+t(401)+t(377)+t(219)+t(630)+t(814)+"d"](),this[t(498)+t(438)+t(665)+t(429)+t(919)+t(516)+t(948)][t(596)+t(206)+t(479)+t(202)+t(850)+t(714)]()||this[t(450)+t(766)+t(621)+t(554)+t(407)+"u"]()},i[e(890)+e(159)+e(187)][e(558)+e(628)+e(521)+e(320)+e(325)+e(631)+e(544)]=function(){var t=e;this[t(314)+t(924)+t(401)+t(377)+t(219)+t(630)+t(814)+"d"](),this[t(498)+t(438)+t(665)+t(429)+t(919)+t(516)+t(948)][t(596)+t(206)+t(479)+t(202)+t(850)+t(714)]()||this[t(450)+t(818)+t(148)+"nu"]()},i[e(890)+e(159)+e(187)][e(558)+e(628)+e(875)+e(814)+e(668)+e(749)+e(806)+e(250)+"on"]=function(){var t=e;this[t(314)+t(924)+t(401)+t(377)+t(219)+t(630)+t(814)+"d"](),this[t(277)+t(939)+t(355)+"nd"]()},i[e(890)+e(159)+e(187)][e(558)+e(628)+e(700)+e(639)+e(909)+e(407)+e(346)+e(695)+"n"]=function(){var t=e;this[t(314)+t(924)+t(401)+t(377)+t(219)+t(630)+t(814)+"d"](),this[t(498)+t(438)+t(665)+t(429)+t(919)+t(516)+t(948)][t(596)+t(206)+t(479)+t(202)+t(850)+t(714)]()||this[t(450)+t(550)+t(750)+t(793)+t(325)]()},i[e(890)+e(159)+e(187)][e(558)+e(628)+e(233)+e(463)+e(259)+e(325)+e(631)+e(544)]=function(){var t=e;this[t(314)+t(924)+t(401)+t(377)+t(219)+t(630)+t(814)+"d"](),this[t(498)+t(438)+t(665)+t(429)+t(919)+t(516)+t(948)][t(596)+t(206)+t(479)+t(202)+t(850)+t(714)]()||this[t(450)+t(294)+t(830)+t(148)+"nu"]()},i[e(890)+e(159)+e(187)][e(558)+e(628)+e(376)+e(532)+e(747)+e(348)+e(250)+"on"]=function(){var t=e;this[t(314)+t(924)+t(401)+t(377)+t(219)+t(630)+t(814)+"d"](),this[t(498)+t(438)+t(665)+t(429)+t(919)+t(516)+t(948)][t(596)+t(206)+t(479)+t(202)+t(850)+t(714)]()||this[t(450)+t(234)+t(279)+t(407)+"u"]()},i[e(890)+e(159)+e(187)][e(450)+e(766)+e(621)+e(554)+e(407)+"u"]=function(){var t=e,i=this[t(498)+t(438)+t(665)+t(429)+t(919)+t(516)+t(948)];i[t(606)+t(919)+t(516)+t(948)+t(219)+t(932)+t(438)+"g"]()||i[t(775)+t(304)+t(918)+t(458)+t(325)+t(354)+"er"]()||(i[t(498)+t(189)+t(919)+t(516)+t(948)+t(219)+t(932)+t(438)+"g"](!0),this[t(363)+t(378)+t(919)+t(771)][t(896)+"t"](t(149)+t(148)+t(721)+t(509)+t(217)+t(757)+t(201)+t(554)+t(778)+"e",this[t(898)+t(201)+t(554)+"On"]),this[t(363)+t(378)+t(919)+t(771)][t(896)+"t"](t(149)+t(148)+t(721)+t(291)+t(548)+t(342)+t(688)+t(455)))},i[e(890)+e(159)+e(187)][e(450)+e(818)+e(148)+"nu"]=function(){var t=e,i=this[t(498)+t(438)+t(665)+t(429)+t(919)+t(516)+t(948)];i[t(606)+t(919)+t(516)+t(948)+t(219)+t(932)+t(438)+"g"]()||i[t(775)+t(304)+t(918)+t(458)+t(325)+t(354)+"er"]()||(i[t(498)+t(189)+t(919)+t(516)+t(948)+t(219)+t(932)+t(438)+"g"](!0),this[t(363)+t(378)+t(919)+t(771)][t(896)+"t"](t(149)+t(148)+t(721)+t(291)+t(451)+t(938)+t(767)+"ns"),this[t(696)+t(745)+t(298)+t(938)+t(767)+t(396)+t(508)+"t"](!0))},i[e(890)+e(159)+e(187)][e(277)+e(939)+e(355)+"nd"]=function(){var t=e,i=this[t(498)+t(438)+t(665)+t(429)+t(919)+t(516)+t(948)];if(!i[t(606)+t(919)+t(516)+t(948)+t(219)+t(932)+t(438)+"g"]()&&!i[t(775)+t(304)+t(918)+t(458)+t(325)+t(354)+"er"]()){this[t(648)+t(936)+t(194)+"le"]=!this[t(648)+t(936)+t(194)+"le"];var n=!0===this[t(648)+t(936)+t(194)+"le"]?t(860)+t(885)+t(355)+"nd":t(286)+t(353)+t(953)+t(869);this[t(216)+t(805)+t(352)+t(540)+t(180)+t(508)+"t"](n),this[t(314)+t(924)+t(401)+t(377)+t(219)+t(630)+t(814)+"d"]()}},i[e(890)+e(159)+e(187)][e(450)+e(550)+e(750)+e(793)+e(325)]=function(){var t=e,i=this[t(498)+t(438)+t(665)+t(429)+t(919)+t(516)+t(948)];i[t(606)+t(919)+t(516)+t(948)+t(219)+t(932)+t(438)+"g"]()||i[t(775)+t(304)+t(918)+t(458)+t(325)+t(354)+"er"]()||(i[t(498)+t(189)+t(919)+t(516)+t(948)+t(219)+t(932)+t(438)+"g"](!0),this[t(363)+t(378)+t(919)+t(771)][t(896)+"t"](t(400)+t(486)+t(507)+t(663)+t(353)+"e"))},i[e(890)+e(159)+e(187)][e(450)+e(294)+e(830)+e(148)+"nu"]=function(){var t=e,i=this[t(498)+t(438)+t(665)+t(429)+t(919)+t(516)+t(948)];i[t(606)+t(919)+t(516)+t(948)+t(219)+t(932)+t(438)+"g"]()||i[t(775)+t(304)+t(918)+t(458)+t(325)+t(354)+"er"]()||(i[t(498)+t(189)+t(919)+t(516)+t(948)+t(219)+t(932)+t(438)+"g"](!0),this[t(363)+t(378)+t(919)+t(771)][t(896)+"t"](t(173)+t(494)+t(892)+t(291)+"w"))},i[e(890)+e(159)+e(187)][e(450)+e(234)+e(279)+e(407)+"u"]=function(){var t=e,i=this[t(498)+t(438)+t(665)+t(429)+t(919)+t(516)+t(948)];i[t(606)+t(919)+t(516)+t(948)+t(219)+t(932)+t(438)+"g"]()||i[t(775)+t(304)+t(918)+t(458)+t(325)+t(354)+"er"]()||(i[t(498)+t(189)+t(919)+t(516)+t(948)+t(219)+t(932)+t(438)+"g"](!0),this[t(363)+t(378)+t(919)+t(771)][t(896)+"t"](t(353)+t(935)+t(279)+t(866)+"ow"))},i[e(890)+e(159)+e(187)][e(450)+e(968)+e(940)+e(148)+"nu"]=function(t){var i=e,n=this,o=this[i(498)+i(438)+i(665)+i(429)+i(919)+i(516)+i(948)];o[i(606)+i(919)+i(516)+i(948)+i(219)+i(932)+i(438)+"g"]()||u&&(t===u[i(176)+i(707)+i(145)+i(399)+i(847)][i(761)+i(733)+i(917)+i(503)+i(582)+i(175)+"M"]?this[i(216)+i(740)+i(655)+i(150)+i(508)+"t"](t):(o[i(498)+i(389)+i(370)+i(398)+i(940)+i(701)+i(828)+i(759)+i(208)+i(557)+i(767)+"n"](M(i(733)+i(917)+i(801)+i(878)+"N")),o[i(364)+i(205)+i(640)+i(253)+i(584)+i(961)+i(570)+"ng"](T(i(733)+i(917)+i(801)+i(878)+"N"),!1,function(){var e=i;n[e(216)+e(740)+e(655)+e(150)+e(508)+"t"](t)})))},i[e(890)+e(159)+e(187)][e(364)+e(359)+e(424)+e(325)+e(354)+"er"]=function(){var t=e,i=this[t(498)+t(438)+t(665)+t(429)+t(919)+t(516)+t(948)];if(this[t(314)+t(924)+t(401)+t(377)+t(219)+t(630)+t(814)+"d"](),!i[t(606)+t(919)+t(516)+t(948)+t(219)+t(932)+t(438)+"g"]()&&!i[t(775)+t(304)+t(918)+t(458)+t(325)+t(354)+"er"]()){i[t(364)+t(359)+t(424)+t(325)+t(354)+"er"]();var n=this[t(182)+t(429)+t(366)+t(542)+t(851)+t(567)+"ck"];n&&n(!0,!0)}},i[e(890)+e(159)+e(187)][e(307)+e(891)+e(424)+e(325)+e(354)+"er"]=function(){var t=e,i=this[t(498)+t(438)+t(665)+t(429)+t(919)+t(516)+t(948)];if(!i[t(606)+t(919)+t(516)+t(948)+t(219)+t(932)+t(438)+"g"]()&&!i[t(775)+t(304)+t(918)+t(458)+t(325)+t(354)+"er"]()){i[t(307)+t(891)+t(424)+t(325)+t(354)+"er"]();var n=this[t(182)+t(429)+t(366)+t(542)+t(851)+t(567)+"ck"];n&&n(!1,!0)}},i[e(890)+e(159)+e(187)][e(971)+e(941)+e(501)+e(464)+e(250)+"on"]=function(){var t=e,i=this,n=this[t(498)+t(438)+t(665)+t(429)+t(919)+t(516)+t(948)];if(!n[t(596)+t(206)+t(479)+t(202)+t(850)+t(714)]()&&!n[t(606)+t(919)+t(516)+t(948)+t(219)+t(932)+t(438)+"g"]()&&!n[t(775)+t(304)+t(918)+t(458)+t(325)+t(354)+"er"]()){n[t(498)+t(189)+t(919)+t(516)+t(948)+t(219)+t(932)+t(438)+"g"](!0),this[t(216)+t(535)+t(339)+t(777)+t(145)+"nt"](!0);var o=function(){var e=t;i[e(216)+e(535)+e(339)+e(777)+e(145)+"nt"](!1)},a={title_message:void 0,content_message:void 0,actions:[]};this[t(636)+t(521)+t(250)+t(681)+t(187)]===b[t(215)+t(577)+t(196)+t(925)+t(511)+"C"]&&(a[t(616)+t(977)+t(282)+t(225)+"e"]=shell[t(231)+"n"].t(t(454)+t(438)+t(665)+t(698)+t(474)+t(689)+t(622)+t(646)+t(580)+t(645)+"e"),a[t(377)+t(181)+t(505)+t(693)+t(798)]=shell[t(231)+"n"].t(t(454)+t(438)+t(665)+t(698)+t(474)+t(689)+t(622)+t(646)+t(947)+t(693)+t(798)),a[t(146)+t(687)+"s"]=[{title:shell[t(231)+"n"].t(t(454)+t(438)+t(665)+t(698)+t(474)+t(689)+t(762)+t(473)),handler:function(){var e=t;o(),i[e(498)+e(438)+e(665)+e(429)+e(919)+e(516)+e(948)][e(498)+e(189)+e(919)+e(516)+e(948)+e(219)+e(932)+e(438)+"g"](!1)}},{title:shell[t(231)+"n"].t(t(454)+t(438)+t(665)+t(698)+t(474)+t(689)+t(622)+"t"),handler:function(){var e,n=t;switch(i[n(636)+n(521)+n(250)+n(681)+n(187)]){case b[n(215)+n(577)+n(196)+n(925)+n(511)+"C"]:default:e=i[n(558)+n(628)+n(376)+n(651)+n(426)+n(250)+n(971)+n(655)+n(598)+"k"]}o(),e&&e()},auto_dismiss:!1}]),(0,s.showDialog)(a),this[t(314)+t(924)+t(401)+t(377)+t(219)+t(630)+t(814)+"d"]()}},i[e(890)+e(159)+e(187)][e(365)+e(753)+e(456)+e(403)+e(706)+e(787)+e(672)+e(246)+e(946)+e(807)+"de"]=function(t,i){var n=e,o=!1,a=this[n(191)+n(939)+n(510)+n(934)+n(391)],s=this[n(312)+n(899)+n(179)+n(814)+n(843)+n(970)+n(366)],r=this[n(312)+n(899)+n(179)+n(814)+n(297)+n(799)+n(366)],c=this[n(449)+n(621)+n(554)+n(692)+n(351)+n(753)+n(456)];return a&&t>a&&(o=!0),s&&i>=c+s&&(o=!0),r&&i<=c-r&&(o=!0),o},Object[e(780)+e(679)+e(957)+e(316)+"ty"](i[e(890)+e(159)+e(187)],e(326)+e(302)+e(461)+e(655)+e(598)+"k",{set:function(t){var i=e,n=this;this[i(449)+i(621)+i(554)+i(851)+i(916)+"ck"]=function(e){var o=i,a=e[o(296)+o(779)+"d"];n[o(326)+o(302)+o(461)+o(814)+"t"]=a[o(326)+o(302)+o(461)+o(814)+"t"],n[o(191)+o(939)+o(510)+o(934)+o(391)]=a[o(191)+o(939)+o(510)+o(934)+o(391)],n[o(312)+o(899)+o(179)+o(814)+o(843)+o(970)+o(366)]=a[o(312)+o(899)+o(179)+o(814)+o(843)+o(970)+o(366)],n[o(312)+o(899)+o(179)+o(814)+o(297)+o(799)+o(366)]=a[o(312)+o(899)+o(179)+o(814)+o(297)+o(799)+o(366)],n[o(449)+o(621)+o(554)+o(692)+o(351)+o(753)+o(456)]=a[o(326)+o(302)+o(273)+o(876)+o(812)+o(926)+"ce"],t&&t()}},enumerable:!1,configurable:!0}),Object[e(780)+e(679)+e(957)+e(316)+"ty"](i[e(890)+e(159)+e(187)],e(898)+e(201)+e(554)+e(851)+e(916)+"ck",{set:function(t){var i=e;this[i(895)+i(190)+i(946)+i(703)+i(336)+i(152)]&&(this[i(895)+i(190)+i(946)+i(968)+i(647)]&&this[i(895)+i(190)+i(946)+i(968)+i(647)](),this[i(895)+i(190)+i(946)+i(703)+i(336)+i(152)]=void 0),this[i(895)+i(190)+i(946)+i(703)+i(336)+i(152)]=function(){t&&t()},this[i(895)+i(190)+i(946)+i(968)+i(647)]=(0,o.observeCallback)(this,i(898)+i(201)+i(554)+"On")(this[i(895)+i(190)+i(946)+i(703)+i(336)+i(152)])},enumerable:!1,configurable:!0}),Object[e(780)+e(679)+e(957)+e(316)+"ty"](i[e(890)+e(159)+e(187)],e(322)+e(213)+e(880)+e(641)+e(671)+e(374)+e(195)+e(687)+e(851)+e(916)+"ck",{set:function(t){var i=e;this[i(363)+i(378)+i(919)+i(771)][i(896)+"t"](i(149)+i(148)+i(721)+i(509)+i(217)+i(358)+i(213)+i(880)+i(641)+i(671)+i(374)+i(195)+i(687),t),this[i(610)+i(764)+i(687)+i(263)+i(337)+i(223)+i(443)+i(767)+i(703)+i(336)+i(152)]=t},enumerable:!1,configurable:!0}),Object[e(780)+e(679)+e(957)+e(316)+"ty"](i[e(890)+e(159)+e(187)],e(198)+e(538)+e(854)+e(816)+"re",{get:function(){var t=e;return this[t(449)+t(167)+t(370)+t(333)+t(488)]},set:function(t){var i=e;this[i(449)+i(167)+i(370)+i(333)+i(488)]=t},enumerable:!1,configurable:!0}),Object[e(780)+e(679)+e(957)+e(316)+"ty"](i[e(890)+e(159)+e(187)],e(221)+e(778)+e(832)+e(599)+e(393)+e(350)+e(655)+e(598)+"k",{set:function(){},enumerable:!1,configurable:!0}),Object[e(780)+e(679)+e(957)+e(316)+"ty"](i[e(890)+e(159)+e(187)],e(838)+e(379)+e(943)+e(298)+e(671)+e(336)+e(152),{set:function(t){var i=e;this[i(439)+i(483)+i(755)+i(746)+i(337)+i(655)+i(598)+"k"]=t},enumerable:!1,configurable:!0}),Object[e(780)+e(679)+e(957)+e(316)+"ty"](i[e(890)+e(159)+e(187)],e(364)+e(820)+e(784)+e(298)+e(817)+e(587)+e(422),{set:function(t){var i=e;this[i(363)+i(378)+i(919)+i(771)][i(896)+"t"](i(149)+i(148)+i(721)+i(454)+i(291)+i(820)+i(784)+i(298)+i(817)+i(587)+i(422),t)},enumerable:!1,configurable:!0}),Object[e(780)+e(679)+e(957)+e(316)+"ty"](i[e(890)+e(159)+e(187)],e(364)+e(382)+e(809)+e(330)+e(748)+e(235)+e(569)+e(587)+e(422),{set:function(t){var i=e;this[i(363)+i(378)+i(919)+i(771)][i(896)+"t"](i(149)+i(148)+i(721)+i(454)+i(291)+i(382)+i(809)+i(330)+i(748)+i(235)+i(569)+i(587)+i(422),t)},enumerable:!1,configurable:!0}),Object[e(780)+e(679)+e(957)+e(316)+"ty"](i[e(890)+e(159)+e(187)],e(169)+e(383)+e(509)+e(217)+e(193)+e(541)+e(486)+e(851)+e(567)+"ck",{set:function(t){var i=e;this[i(380)+i(260)+i(962)+i(265)+i(298)+i(650)+i(239)+i(583)+i(336)+i(152)]=t},enumerable:!1,configurable:!0}),Object[e(780)+e(679)+e(957)+e(316)+"ty"](i[e(890)+e(159)+e(187)],e(183)+e(712)+e(193)+e(642)+e(453)+e(336)+e(152),{set:function(t){var i=e;this[i(506)+i(929)+i(685)+i(976)+i(318)+i(655)+i(598)+"k"]=t},enumerable:!1,configurable:!0}),Object[e(780)+e(679)+e(957)+e(316)+"ty"](i[e(890)+e(159)+e(187)],e(394)+e(473)+e(193)+e(728)+e(514)+e(655)+e(598)+"k",{set:function(t){var i=e;this[i(555)+i(456)+i(641)+i(562)+i(640)+i(851)+i(916)+"ck"]=t},enumerable:!1,configurable:!0}),i[e(890)+e(159)+e(187)][e(782)+e(217)+e(193)+e(795)+e(514)+e(655)+e(598)+"k"]=function(t){var i=e;this[i(863)+i(265)+i(298)+i(819)+i(626)+i(851)+i(916)+"ck"]=t},i[e(890)+e(159)+e(187)][e(782)+e(217)+e(193)+e(185)+e(772)]=function(){var t=e,i=this[t(610)+t(764)+t(687)+t(263)+t(337)+t(223)+t(443)+t(767)+t(703)+t(336)+t(152)];i||(this[t(610)+t(764)+t(687)+t(263)+t(337)+t(223)+t(443)+t(767)+t(703)+t(336)+t(152)]=i=function(t,e,i){return t*e*i},this[t(363)+t(378)+t(919)+t(771)][t(896)+"t"](t(149)+t(148)+t(721)+t(509)+t(217)+t(358)+t(213)+t(880)+t(641)+t(671)+t(374)+t(195)+t(687),this[t(610)+t(764)+t(687)+t(263)+t(337)+t(223)+t(443)+t(767)+t(703)+t(336)+t(152)]));var n=i(this[t(221)+t(758)+t(837)+t(796)],this[t(221)+t(859)+t(470)+t(335)+"e"],this[t(221)+t(903)+t(837)+t(796)]),a=(0,o.formatCurrency)(n);this[t(863)+t(265)+t(298)+t(819)+t(626)+t(851)+t(916)+"ck"]&&this[t(863)+t(265)+t(298)+t(819)+t(626)+t(851)+t(916)+"ck"](a),this[t(216)+t(735)+t(410)+t(657)+t(767)+t(868)+t(833)+t(366)+t(542)+t(145)+"nt"]({totalBet:(0,o.toDecimalWithExp)(n,2)})},i[e(890)+e(159)+e(187)][e(857)+e(193)+e(903)+e(837)+e(369)]=function(){var t=e,i=this[t(221)+t(903)+t(942)+"st"],n=this[t(221)+t(903)+t(837)+t(796)];return!(!i||!cc.js[t(773)+t(865)+"er"](n))&&-1!==i[t(683)+t(738)+"f"](n)},i[e(890)+e(159)+e(187)][e(857)+e(193)+e(209)+e(470)+e(197)+"d"]=function(){var t=e,i=this[t(221)+t(859)+t(481)+t(639)],n=this[t(221)+t(859)+t(470)+t(335)+"e"];return!(!i||!cc.js[t(773)+t(865)+"er"](n))&&-1!==i[t(683)+t(738)+"f"](n)},i[e(890)+e(159)+e(187)][e(838)+e(379)+e(943)+e(298)+"t"]=function(){var t=e;if(!this[t(857)+t(193)+t(903)+t(837)+t(369)]()||!this[t(857)+t(193)+t(209)+t(470)+t(197)+"d"]()){var i=this[t(221)+t(903)+t(942)+"st"];this[t(221)+t(903)+t(837)+t(796)]=i[0];var n=this[t(221)+t(859)+t(481)+t(639)];return this[t(221)+t(859)+t(470)+t(335)+"e"]=n[0],this[t(439)+t(483)+t(755)+t(746)+t(337)+t(655)+t(598)+"k"]&&this[t(439)+t(483)+t(755)+t(746)+t(337)+t(655)+t(598)+"k"](this[t(221)+t(903)+t(837)+t(796)],this[t(221)+t(859)+t(470)+t(335)+"e"]),!0}return!1},i[e(890)+e(159)+e(187)][e(364)+e(485)+e(379)+e(858)+e(564)+e(324)+"og"]=function(){var t=e,i=this,n={title_message:void 0,content_message:shell[t(231)+"n"].t(t(454)+t(438)+t(665)+t(698)+t(474)+t(689)+t(785)+t(379)+t(943)+t(298)+"t"),actions:[{title:shell[t(231)+"n"].t(t(454)+t(438)+t(665)+t(698)+t(474)+t(689)+t(495)+t(418)),handler:function(){var e=t;i[e(450)+e(818)+e(148)+"nu"]()}}]};(0,s.showDialog)(n)},Object[e(780)+e(679)+e(957)+e(316)+"ty"](i[e(890)+e(159)+e(187)],e(300)+e(963)+e(355)+e(800)+e(958)+"me",{set:function(t){var i=e,n=this;this[i(889)+i(784)+i(953)+i(869)+i(512)+i(537)+i(851)+i(916)+"ck"]&&(this[i(323)+i(869)+i(315)+i(811)+"h"]&&this[i(323)+i(869)+i(315)+i(811)+"h"](),this[i(889)+i(784)+i(953)+i(869)+i(512)+i(537)+i(851)+i(916)+"ck"]=void 0),this[i(889)+i(784)+i(953)+i(869)+i(512)+i(537)+i(851)+i(916)+"ck"]=function(){var e=i;n[e(216)+e(805)+e(736)+e(257)+e(217)+e(243)+e(963)+e(145)+"nt"](n[e(648)+e(309)+"n"]),t&&t(n[e(648)+e(309)+"n"])},this[i(323)+i(869)+i(315)+i(811)+"h"]=(0,o.observeCallback)(this,i(648)+i(309)+"n")(this[i(889)+i(784)+i(953)+i(869)+i(512)+i(537)+i(851)+i(916)+"ck"])},enumerable:!1,configurable:!0}),i[e(890)+e(159)+e(187)][e(498)+e(340)+e(899)+"e"]=function(t,i){var n=e,a=this;void 0===i&&(i=!1);var s=this[n(240)+n(172)+n(592)+n(926)+n(751)+n(452)+n(635)+n(373)+n(879)+"ay"](t);this[n(439)+n(220)+n(288)+n(410)+n(657)+n(767)+n(868)+"fo"](function(e){var r=n;s&&a[r(314)+r(952)+r(940)+r(831)+r(391)+r(714)+r(737)+r(792)+"fx"]();var c=(0,o.toDecimalWithExp)(e&&e[r(312)+r(899)+"e"]||t,2);a[r(498)+r(438)+r(597)+r(922)+r(289)+"er"][r(782)+r(217)+r(340)+r(899)+"e"](void 0,c,i),a[r(216)+r(735)+r(410)+r(657)+r(767)+r(868)+r(833)+r(366)+r(542)+r(145)+"nt"]({balance:c})})},i[e(890)+e(159)+e(187)][e(498)+e(510)+e(934)+e(391)]=function(t,i,n){var a=e;void 0===i&&(i=!1),void 0===n&&(n=!0),this[a(498)+a(438)+a(597)+a(922)+a(289)+"er"][a(782)+a(217)+a(510)+a(934)+a(391)](t,i,n),this[a(363)+a(378)+a(919)+a(771)][a(896)+"t"](a(149)+a(148)+a(721)+a(509)+a(217)+a(510)+a(934)+a(391),t),this[a(216)+a(735)+a(410)+a(657)+a(767)+a(868)+a(833)+a(366)+a(542)+a(145)+"nt"]({totalWin:(0,o.toDecimalWithExp)(t,2)})},i[e(890)+e(159)+e(187)][e(498)+e(649)+e(631)+e(544)+e(466)+e(523)+e(146)+e(493)+"e"]=function(t){var i=e;this[i(719)+i(741)+i(458)+i(325)+i(631)+i(544)+i(471)+i(316)][i(498)+i(649)+i(631)+i(544)+i(466)+i(523)+i(146)+i(493)+"e"](t)},i[e(890)+e(159)+e(187)][e(498)+e(460)+e(513)+e(656)+"s"]=function(t,i){var n=e;this[n(719)+n(741)+n(458)+n(325)+n(631)+n(544)+n(471)+n(316)][n(498)+n(460)+n(513)+n(656)+"s"](t,i)},i[e(890)+e(159)+e(187)][e(365)+e(250)+e(375)+e(777)+"ed"]=function(t){var i=e;return this[i(719)+i(741)+i(458)+i(325)+i(631)+i(544)+i(471)+i(316)][i(365)+i(250)+i(375)+i(777)+"ed"](t)},i[e(890)+e(159)+e(187)][e(498)+e(631)+e(544)+e(310)+e(311)+e(887)+e(965)+e(609)+"g"]=function(t,i){var n=e;void 0===i&&(i=!1),this[n(719)+n(741)+n(458)+n(325)+n(631)+n(544)+n(471)+n(316)][n(498)+n(631)+n(544)+n(310)+n(311)+n(887)+n(965)+n(609)+"g"](t,i)},i[e(890)+e(159)+e(187)][e(498)+e(631)+e(544)+e(310)+e(311)+e(887)+e(965)]=function(t){var i=e;this[i(719)+i(741)+i(458)+i(325)+i(631)+i(544)+i(471)+i(316)][i(498)+i(631)+i(544)+i(310)+i(311)+i(887)+i(965)](t)},i[e(890)+e(159)+e(187)][e(498)+e(460)+e(513)+e(656)+e(643)+e(621)+e(554)+e(728)+"el"]=function(t){var i=e;this[i(498)+i(460)+i(513)+i(656)+"s"](v[i(157)+i(881)+i(682)+i(633)],t)},i[e(890)+e(159)+e(187)][e(498)+e(460)+e(513)+e(656)+e(742)+e(562)+e(640)]=function(t){var i=e;this[i(498)+i(460)+i(513)+i(656)+"s"](v[i(593)+i(559)+i(725)+"NS"],t)},i[e(890)+e(159)+e(187)][e(498)+e(460)+e(153)+e(424)+e(325)+e(631)+e(544)]=function(t){var i=e;this[i(498)+i(460)+i(513)+i(656)+"s"](v[i(417)+i(629)+i(402)],t)},i[e(890)+e(159)+e(187)][e(498)+e(264)+e(744)]=function(t){var i=e;this[i(857)+i(264)+i(744)]=t,this[i(498)+i(438)+i(665)+i(429)+i(919)+i(516)+i(948)][i(498)+i(264)+i(744)](t)},i[e(890)+e(159)+e(187)][e(448)+e(388)]=function(){var t=e;return this[t(498)+t(438)+t(665)+t(429)+t(919)+t(516)+t(948)][t(448)+t(388)]()},i[e(890)+e(159)+e(187)][e(146)+e(527)+e(769)+e(655)+e(431)+e(956)+"fy"]=function(t){var i=e;this[i(498)+i(438)+i(597)+i(922)+i(289)+"er"][i(146)+i(527)+i(769)+i(655)+i(431)+i(956)+"fy"](t)},i[e(890)+e(159)+e(187)][e(322)+e(454)+e(438)+e(597)+e(922)+e(289)+"er"]=function(t){var i=e,n=this;this[i(719)+i(741)+i(491)+i(170)+i(162)+i(523)]=t;var o=this[i(498)+i(438)+i(665)+i(429)+i(919)+i(516)+i(948)];this[i(719)+i(741)+i(458)+i(325)+i(631)+i(544)+i(471)+i(316)][i(498)+i(702)+i(723)+i(334)+i(695)+i(868)+i(543)+"t"](v[i(733)+i(917)],function(e){var n=i;t[n(715)+n(311)+n(887)+n(965)+n(176)+n(707)+n(631)+n(544)](e),o[n(715)+n(311)+n(887)+n(965)+n(176)+n(707)+n(631)+n(544)](e,!1)}),t[i(364)+i(525)+i(789)+i(611)+"nd"](!1),t[i(300)+i(963)+i(578)+i(422)](o[i(787)+i(454)+i(438)+i(597)+i(922)+i(289)+i(254)+i(694)+i(955)+i(828)+"r"]()),o[i(498)+i(692)+i(804)+i(921)+i(728)+i(514)+i(655)+i(598)+"k"](function(t){var e=i;o[e(184)+e(804)+e(921)+e(728)+"el"](t,T(e(733)+e(917)+e(801)+e(878)+"N"))}),o[i(498)+i(850)+i(528)+i(640)+i(851)+i(916)+"ck"](function(){var e=i;t[e(300)+e(963)+e(176)+e(707)+e(631)+e(544)+e(711)+"or"](!0)}),o[i(498)+i(823)+i(850)+i(528)+i(640)+i(851)+i(916)+"ck"](function(e,a,s){var r=i;if(a)return t[r(300)+r(963)+r(176)+r(707)+r(631)+r(544)+r(711)+"or"](!1),o[r(498)+r(389)+r(370)+r(398)+r(940)+r(701)+r(828)+r(759)+r(208)+r(557)+r(767)+"n"](.15),void o[r(910)+r(362)+r(206)+"l"]();e?u&&n[r(450)+r(968)+r(940)+r(148)+"nu"](u[r(176)+r(707)+r(145)+r(399)+r(847)][r(761)+r(733)+r(917)+r(503)+r(582)+r(175)+"M"]):0===s?o[r(787)+r(210)+r(870)+r(562)+r(640)+r(849)+r(768)+r(213)+r(815)]()>210?u&&n[r(450)+r(968)+r(940)+r(148)+"nu"](u[r(176)+r(707)+r(145)+r(399)+r(847)][r(761)+r(733)+r(917)+r(503)+r(582)+r(690)+r(175)+"M"]):(t[r(300)+r(963)+r(176)+r(707)+r(631)+r(544)+r(711)+"or"](!1),o[r(498)+r(389)+r(370)+r(398)+r(940)+r(701)+r(828)+r(759)+r(208)+r(557)+r(767)+"n"](.15),o[r(910)+r(362)+r(206)+"l"]()):1===s?u&&n[r(450)+r(968)+r(940)+r(148)+"nu"](u[r(176)+r(707)+r(145)+r(399)+r(847)][r(761)+r(733)+r(917)+r(503)+r(582)+r(690)+r(175)+"M"]):(t[r(300)+r(963)+r(176)+r(707)+r(631)+r(544)+r(711)+"or"](!1),o[r(498)+r(389)+r(370)+r(398)+r(940)+r(701)+r(828)+r(759)+r(208)+r(557)+r(767)+"n"](.15),o[r(910)+r(362)+r(206)+"l"]())}),t[i(844)+"t"]()},i[e(890)+e(159)+e(187)][e(787)+e(454)+e(438)+e(597)+e(922)+e(289)+"er"]=function(){var t=e;return this[t(498)+t(438)+t(597)+t(922)+t(289)+"er"]},Object[e(780)+e(679)+e(957)+e(316)+"ty"](i[e(890)+e(159)+e(187)],e(498)+e(438)+e(597)+e(922)+e(289)+"er",{get:function(){var t=e;if(!this[t(719)+t(741)+t(491)+t(170)+t(162)+t(523)])throw Error(t(454)+t(438)+t(665)+t(698)+t(474)+t(147)+t(680)+t(498)+t(438)+t(597)+t(922)+t(289)+t(147)+t(531)+t(691)+t(207)+t(183)+t(734)+t(907)+t(714)+t(937)+t(520)+t(305)+t(271)+t(756)+t(178)+t(586)+t(177)+t(586)+t(741)+t(434)+t(236)+t(661)+t(289)+t(147)+t(710)+t(913)+t(716)+t(845)+t(907)+t(714)+t(937)+t(520)+t(305)+"r)");return this[t(719)+t(741)+t(491)+t(170)+t(162)+t(523)]},enumerable:!1,configurable:!0}),i[e(890)+e(159)+e(187)][e(522)+e(965)+e(176)+e(707)+e(631)+e(544)]=function(t){var i=e;this[i(498)+i(438)+i(597)+i(922)+i(289)+"er"][i(522)+i(965)+i(176)+i(707)+i(631)+i(544)](t)},i[e(890)+e(159)+e(187)][e(364)+e(726)+e(741)+e(491)+e(170)+e(162)+e(523)+e(155)+e(425)+e(814)+"d"]=function(t){var i=e;this[i(498)+i(438)+i(597)+i(922)+i(289)+"er"][i(364)+i(525)+i(789)+i(611)+"nd"](t)},i[e(890)+e(159)+e(187)][e(787)+e(210)+e(870)+e(812)+e(926)+"ce"]=function(){var t=e;return this[t(498)+t(438)+t(597)+t(922)+t(289)+"er"][t(632)+t(870)+t(812)+t(926)+"ce"]},i[e(890)+e(159)+e(187)][e(322)+e(213)+e(880)+e(641)+e(671)+e(374)+e(195)+e(687)]=function(){var t=e;if(!this[t(610)+t(764)+t(687)+t(263)+t(337)+t(223)+t(443)+t(767)+t(703)+t(336)+t(152)])throw Error(t(454)+t(438)+t(665)+t(698)+t(474)+t(147)+t(680)+t(322)+t(213)+t(880)+t(641)+t(671)+t(374)+t(195)+t(687)+t(293)+t(322)+t(213)+t(880)+t(641)+t(671)+t(374)+t(195)+t(687)+t(851)+t(916)+t(911)+t(478)+t(869)+t(699)+t(873)+t(797)+t(949)+t(561)+t(617)+t(413)+t(268)+t(292)+t(319)+t(191)+t(781)+t(944)+t(767)+t(352)+t(193)+t(851)+t(156)+t(563)+t(971)+t(655)+t(598)+t(967)+t(907)+t(147)+t(710)+"st");return this[t(610)+t(764)+t(687)+t(263)+t(337)+t(223)+t(443)+t(767)+t(703)+t(336)+t(152)](this[t(221)+t(758)+t(837)+t(796)],this[t(221)+t(859)+t(470)+t(335)+"e"],this[t(221)+t(903)+t(837)+t(796)])},Object[e(780)+e(679)+e(957)+e(316)+"ty"](i[e(890)+e(159)+e(187)],e(221)+e(758)+e(837)+e(796),{get:function(){var t=e;return this[t(551)+t(590)+t(834)+t(335)+"e"]},set:function(t){var i=e;this[i(363)+i(378)+i(919)+i(771)][i(896)+"t"](i(149)+i(148)+i(721)+i(454)+i(193)+i(758)+i(837)+i(796),t),this[i(551)+i(590)+i(834)+i(335)+"e"]=t},enumerable:!1,configurable:!0}),Object[e(780)+e(679)+e(957)+e(316)+"ty"](i[e(890)+e(159)+e(187)],e(221)+e(903)+e(942)+"st",{get:function(){var t=e;return this[t(551)+t(245)+t(808)+t(639)]},set:function(t){var i=e;this[i(363)+i(378)+i(919)+i(771)][i(896)+"t"](i(149)+i(148)+i(721)+i(454)+i(193)+i(903)+i(942)+"st",t),this[i(551)+i(245)+i(808)+i(639)]=t},enumerable:!1,configurable:!0}),Object[e(780)+e(679)+e(957)+e(316)+"ty"](i[e(890)+e(159)+e(187)],e(221)+e(903)+e(837)+e(796),{get:function(){var t=e;return this[t(551)+t(245)+t(214)+t(335)+"e"]},set:function(t){var i=e;this[i(363)+i(378)+i(919)+i(771)][i(896)+"t"](i(149)+i(148)+i(721)+i(454)+i(193)+i(903)+i(837)+i(796),t),this[i(551)+i(245)+i(214)+i(335)+"e"]=t},enumerable:!1,configurable:!0}),Object[e(780)+e(679)+e(957)+e(316)+"ty"](i[e(890)+e(159)+e(187)],e(221)+e(859)+e(481)+e(639),{get:function(){var t=e;return this[t(551)+t(297)+t(274)+t(543)+"t"]},set:function(t){var i=e;this[i(363)+i(378)+i(919)+i(771)][i(896)+"t"](i(149)+i(148)+i(721)+i(454)+i(193)+i(859)+i(481)+i(639),t),this[i(551)+i(297)+i(274)+i(543)+"t"]=t},enumerable:!1,configurable:!0}),Object[e(780)+e(679)+e(957)+e(316)+"ty"](i[e(890)+e(159)+e(187)],e(221)+e(859)+e(470)+e(335)+"e",{get:function(){var t=e;return this[t(551)+t(297)+t(274)+t(185)+"ue"]},set:function(t){var i=e;this[i(363)+i(378)+i(919)+i(771)][i(896)+"t"](i(149)+i(148)+i(721)+i(454)+i(193)+i(859)+i(470)+i(335)+"e",t),this[i(551)+i(297)+i(274)+i(185)+"ue"]=t},enumerable:!1,configurable:!0}),Object[e(780)+e(679)+e(957)+e(316)+"ty"](i[e(890)+e(159)+e(187)],e(203)+e(298)+"t",{get:function(){var t=e;return this[t(636)+t(247)+"et"]},set:function(t){var i=e;this[i(636)+i(247)+"et"]=t,this[i(363)+i(378)+i(919)+i(771)][i(896)+"t"](i(149)+i(148)+i(721)+i(454)+i(556)+i(298)+"t",t)},enumerable:!1,configurable:!0}),Object[e(780)+e(679)+e(957)+e(316)+"ty"](i[e(890)+e(159)+e(187)],e(648)+e(936)+e(194)+"le",{get:function(){var t=e;return _[t(648)+t(309)+"n"]},set:function(t){var i=e;this[i(648)+i(309)+"n"]=t,_[i(648)+i(309)+"n"]=t},enumerable:!1,configurable:!0}),i[e(890)+e(159)+e(187)][e(498)+e(950)+e(433)+e(947)+e(613)]=function(t){var i=e;t?this[i(498)+i(460)+i(513)+i(656)+"s"](v[i(593)+i(559)+i(725)+"NS"],!0):this[i(498)+i(460)+i(513)+i(656)+"s"](v[i(593)+i(559)+i(725)+"NS"],!1)},i[e(890)+e(159)+e(187)][e(314)+e(952)+e(940)+e(831)+e(391)+e(714)+e(737)+e(792)+"fx"]=function(t){var i=e;void 0===t&&(t=1);var n=this[i(600)+i(707)+i(603)+i(321)+i(539)+i(437)+"e"];n[i(498)+i(512)+i(537)](t),n&&n[i(314)+"y"]()},i[e(890)+e(159)+e(187)][e(314)+e(924)+e(401)+e(377)+e(219)+e(630)+e(814)+"d"]=function(){var t=e,i=this[t(395)+t(252)+t(902)+t(235)+"s"];i&&i[t(314)+"y"]()},i[e(890)+e(159)+e(187)][e(314)+e(625)+e(552)+e(659)+e(628)+e(875)+e(814)+"d"]=function(){var t=e,i=this[t(269)+t(411)+t(261)+t(941)+"k"];i&&i[t(314)+"y"]()},i[e(890)+e(159)+e(187)][e(314)+e(255)+e(502)+e(739)+e(662)+e(836)+e(869)]=function(){var t=e,i=this[t(614)+t(422)+t(472)+t(418)];i&&i[t(314)+"y"]()},i[e(890)+e(159)+e(187)][e(446)+e(805)+e(736)+"o"]=function(t){var i=e,n=this;Object[i(242)+"s"](this[i(323)+i(869)+i(472)+i(418)+i(822)+"s"])[i(732)+i(553)+"h"](function(e){var o=i;n[e]=new t({preload:!1,src:o(412)+o(416)+o(907)+o(714)+o(182)+o(969)+n[o(323)+o(869)+o(472)+o(418)+o(822)+"s"][e]})})},i[e(890)+e(159)+e(187)][e(161)+e(371)+e(736)+"o"]=function(t){var i=e,n=this;if(this[i(357)+i(677)+i(608)+i(262)+i(826)+i(861)+i(167)]){var a=this[i(357)+i(677)+i(608)+i(262)+i(826)+i(861)+i(167)];this[i(357)+i(677)+i(608)+i(262)+i(826)+i(861)+i(167)]=void 0,a&&a()}this[i(357)+i(677)+i(608)+i(262)+i(826)+i(861)+i(167)]=(0,o.sequenceCallback)(function(e){var o=i;n[o(161)+o(174)+o(408)+o(832)+o(480)+o(167)](o(395)+o(252)+o(902)+o(235)+"s",function(i){i?t(i):e()})},function(e){var o=i;n[o(161)+o(174)+o(408)+o(832)+o(480)+o(167)](o(269)+o(411)+o(261)+o(941)+"k",function(i){i?t(i):e()})},function(e){var o=i;n[o(161)+o(174)+o(408)+o(832)+o(480)+o(167)](o(614)+o(422)+o(472)+o(418),function(i){i?t(i):e()})},function(e){var o=i;n[o(161)+o(174)+o(408)+o(832)+o(480)+o(167)](o(600)+o(707)+o(603)+o(321)+o(539)+o(437)+"e",function(i){i?t(i):e()})})(t)},i[e(890)+e(159)+e(187)][e(161)+e(174)+e(408)+e(832)+e(480)+e(167)]=function(t,i){var n=e,o=this;if(this[n(323)+n(869)+n(472)+n(418)+n(826)+n(435)][t])i();else{var a=this[t],s=function(){var e=n;a[e(441)](e(779)+e(422)+e(827),r),o[e(323)+e(869)+e(472)+e(418)+e(826)+e(435)][t]=!0,i()},r=function(t,e){var o=n;a[o(441)](o(779)+"d",s),i(e)};a[n(329)+"e"](n(779)+"d",s),a[n(329)+"e"](n(779)+n(422)+n(827),r),a[n(779)+"d"]()}},i[e(890)+e(159)+e(187)][e(719)+e(227)+e(190)+e(946)+e(345)+e(695)+e(964)+e(217)]=function(t){var i=e;this[i(898)+i(201)+i(554)+"On"]=!!this[i(895)+i(190)+i(946)+i(810)+i(493)+"e"]&&t,this[i(363)+i(378)+i(919)+i(771)][i(896)+"t"](i(353)+i(524)+i(475)+i(302)+i(273)+i(406)+i(713)+i(784)+"ed",this[i(898)+i(201)+i(554)+"On"])},i[e(890)+e(159)+e(187)][e(235)+"et"]=function(){var t=e;this[t(697)+t(612)+t(430)+t(475)+t(302)+t(342)+t(968)+t(647)]&&this[t(697)+t(612)+t(430)+t(475)+t(302)+t(342)+t(968)+t(647)](),this[t(446)+t(523)+t(352)+t(757)+t(201)+t(554)+t(315)+t(811)+"h"]&&this[t(446)+t(523)+t(352)+t(757)+t(201)+t(554)+t(315)+t(811)+"h"](),this[t(895)+t(190)+t(946)+t(968)+t(647)]&&this[t(895)+t(190)+t(946)+t(968)+t(647)](),this[t(697)+t(612)+t(275)+t(814)+t(281)+t(287)+"ch"]&&this[t(697)+t(612)+t(275)+t(814)+t(281)+t(287)+"ch"](),this[t(446)+t(523)+t(352)+t(355)+t(309)+t(968)+t(647)]&&this[t(446)+t(523)+t(352)+t(355)+t(309)+t(968)+t(647)](),this[t(323)+t(869)+t(315)+t(811)+"h"]&&this[t(323)+t(869)+t(315)+t(811)+"h"](),this[t(863)+t(265)+t(298)+t(819)+t(626)+t(851)+t(916)+"ck"]=void 0,this[t(449)+t(621)+t(554)+t(851)+t(916)+"ck"]=void 0,this[t(895)+t(190)+t(946)+t(703)+t(336)+t(152)]=void 0,this[t(889)+t(784)+t(953)+t(869)+t(512)+t(537)+t(851)+t(916)+"ck"]=void 0,this[t(182)+t(429)+t(366)+t(542)+t(851)+t(567)+"ck"]=void 0,this[t(446)+t(523)+t(352)+t(757)+t(201)+t(554)+t(851)+t(916)+"ck"]=void 0,this[t(446)+t(523)+t(352)+t(355)+t(428)+t(919)+t(516)+t(851)+t(916)+"ck"]=void 0,this[t(697)+t(612)+t(275)+t(814)+t(668)+t(749)+t(251)+t(655)+t(598)+"k"]=void 0,this[t(697)+t(612)+t(430)+t(475)+t(302)+t(461)+t(655)+t(598)+"k"]=void 0,this[t(719)+t(741)+t(458)+t(325)+t(631)+t(544)+t(471)+t(316)]=new a.default,this[t(357)+t(677)+t(608)+t(262)+t(826)+t(861)+t(167)]=void 0,this[t(323)+t(869)+t(472)+t(418)+t(826)+t(435)]={sliderEffect:!1,listItemClick:!1,menuIconPress:!1}},i[e(890)+e(159)+e(187)][e(216)+e(535)+e(339)+e(777)+e(145)+"nt"]=function(t){var i=e;this[i(363)+i(378)+i(919)+i(771)][i(896)+"t"](i(353)+i(588)+i(469)+i(549),t)},i[e(890)+e(159)+e(187)][e(216)+e(740)+e(655)+e(150)+e(508)+"t"]=function(t){var i=e;this[i(363)+i(378)+i(919)+i(771)][i(896)+"t"](i(176)+i(707)+i(866)+i(594)+i(655)+i(241)+i(639),t)},i[e(890)+e(159)+e(187)][e(216)+e(735)+e(410)+e(657)+e(767)+e(868)+e(833)+e(366)+e(542)+e(145)+"nt"]=function(t){var i=e;this[i(363)+i(378)+i(919)+i(771)][i(896)+"t"](i(353)+i(524)+i(410)+i(657)+i(767)+i(868)+i(833)+i(366)+i(542),t)},i[e(890)+e(159)+e(187)][e(216)+e(805)+e(736)+e(257)+e(217)+e(243)+e(963)+e(145)+"nt"]=function(t){var i=e,n=t?"On":i(286);this[i(363)+i(378)+i(919)+i(771)][i(896)+"t"](i(353)+i(166)+i(736)+i(257)+i(217)+i(243)+i(963)+"d",n)},i[e(890)+e(159)+e(187)][e(852)+e(658)+e(536)+e(835)+e(283)+e(900)+e(783)+"s"]=function(){var t=e,i=this;(0,l.setGamePlayUIBlockEventCallback)(t(498)+t(438)+t(791)+"nu",function(e){var n=t;i[n(719)+n(741)+n(458)+n(325)+n(631)+n(544)+n(471)+n(316)][n(498)+n(649)+n(631)+n(544)+n(466)+n(523)+n(146)+n(493)+"e"](!e)}),u&&(this[t(363)+t(378)+t(919)+t(771)].on(t(176)+t(707)+t(518)+t(575)+"n",function(){var e=t;i[e(498)+e(438)+e(665)+e(429)+e(919)+e(516)+e(948)][e(498)+e(189)+e(919)+e(516)+e(948)+e(219)+e(932)+e(438)+"g"](!1)}),this[t(363)+t(378)+t(919)+t(771)].on(t(176)+t(707)+t(866)+t(709),function(){var e=t;i[e(307)+e(891)+e(424)+e(325)+e(354)+"er"](),i[e(498)+e(438)+e(665)+e(429)+e(919)+e(516)+e(948)][e(910)+e(362)+e(206)+"l"](function(){var t=E;i[t(498)+t(438)+t(665)+t(429)+t(919)+t(516)+t(948)][t(498)+t(189)+t(919)+t(516)+t(948)+t(219)+t(932)+t(438)+"g"](!0)}),i[e(146)+e(527)+e(769)+e(655)+e(431)+e(956)+"fy"](!1)}),this[t(363)+t(378)+t(919)+t(771)].on(t(149)+t(148)+t(721)+t(692)+t(765)+t(246)+t(946)+"n",function(e){var n=t;if(!i[n(449)+n(621)+n(554)+n(851)+n(916)+"ck"])throw Error(n(454)+n(438)+n(665)+n(698)+n(474)+n(147)+n(680)+n(326)+n(302)+n(461)+n(655)+n(598)+n(607)+n(722)+n(246)+n(946)+n(703)+n(336)+n(152)+n(930)+n(673)+n(226)+n(699)+n(873)+n(797)+n(949)+n(561)+n(780)+n(679)+n(951)+n(724)+n(714)+n(704)+n(621)+n(554)+n(851)+n(916)+n(911)+n(498)+n(523)+n(638)+n(897));i[n(449)+n(621)+n(554)+n(851)+n(916)+"ck"](e)},this)),d&&(this[t(363)+t(378)+t(919)+t(771)].on(t(149)+t(148)+t(721)+t(264)+t(744)+t(193)+t(615)+t(687)+"s",function(){var e=t;i[e(498)+e(438)+e(665)+e(429)+e(919)+e(516)+e(948)][e(498)+e(189)+e(919)+e(516)+e(948)+e(219)+e(932)+e(438)+"g"](!1)}),this[t(363)+t(378)+t(919)+t(771)].on(t(149)+t(148)+t(721)+t(264)+t(744)+t(946)+t(238)+t(767)+"ns",function(){var e=t;i[e(498)+e(438)+e(665)+e(429)+e(919)+e(516)+e(948)][e(498)+e(189)+e(919)+e(516)+e(948)+e(219)+e(932)+e(438)+"g"](!1)}),this[t(363)+t(378)+t(919)+t(771)].on(t(353)+t(222)+t(663)+t(615)+t(687)+"s",this[t(450)+t(818)+t(148)+"nu"],this),this[t(363)+t(378)+t(919)+t(771)].on(t(353)+t(347)+t(502)+t(615)+t(687)+"s",this[t(517)+t(361)+t(193)+t(615)+t(687)+"s"],this),this[t(363)+t(378)+t(919)+t(771)].on(t(149)+t(148)+t(721)+t(585)+t(383)+t(509)+t(217)+t(193)+t(541)+t(486)+t(851)+t(916)+"ck",function(e){var n=t,o=e[n(296)+n(779)+"d"],a=o[n(221)+n(903)+"e"],s=o[n(221)+n(859)+"el"];i[n(380)+n(260)+n(962)+n(265)+n(298)+n(650)+n(239)+n(583)+n(336)+n(152)]&&i[n(380)+n(260)+n(962)+n(265)+n(298)+n(650)+n(239)+n(583)+n(336)+n(152)](a,s)},this),this[t(363)+t(378)+t(919)+t(771)].on(t(149)+t(148)+t(721)+t(762)+t(473)+t(193)+t(728)+t(514)+t(655)+t(598)+"k",function(){var e=t;i[e(555)+e(456)+e(641)+e(562)+e(640)+e(851)+e(916)+"ck"]&&i[e(555)+e(456)+e(641)+e(562)+e(640)+e(851)+e(916)+"ck"]()},this),this[t(363)+t(378)+t(919)+t(771)].on(t(149)+t(148)+t(721)+t(803)+t(712)+t(193)+t(642)+t(453)+t(336)+t(152),function(e){var n=t,o=e[n(296)+n(779)+"d"],a=o[n(221)+n(903)+"e"],s=o[n(221)+n(859)+"el"];i[n(506)+n(929)+n(685)+n(976)+n(318)+n(655)+n(598)+"k"]&&i[n(506)+n(929)+n(685)+n(976)+n(318)+n(655)+n(598)+"k"](a,s)},this),this[t(363)+t(378)+t(919)+t(771)].on(t(149)+t(148)+t(721)+t(681)+t(475)+t(302)+t(461)+t(366)+"ge",function(e){var n=t,o=e[n(296)+n(779)+"d"];i[n(558)+n(757)+n(201)+n(554)+n(243)+n(963)]&&i[n(558)+n(757)+n(201)+n(554)+n(243)+n(963)](o)},this)),f&&(this[t(363)+t(378)+t(919)+t(771)].on(t(173)+t(494)+t(892)+t(264)+"e",function(){var e=t;i[e(498)+e(438)+e(665)+e(429)+e(919)+e(516)+e(948)][e(498)+e(189)+e(919)+e(516)+e(948)+e(219)+e(932)+e(438)+"g"](!1)}),this[t(363)+t(378)+t(919)+t(771)].on(t(353)+t(935)+t(279)+t(518)+"de",function(){var e=t;i[e(498)+e(438)+e(665)+e(429)+e(919)+e(516)+e(948)][e(498)+e(189)+e(919)+e(516)+e(948)+e(219)+e(932)+e(438)+"g"](!1)})),p&&this[t(363)+t(378)+t(919)+t(771)].on(t(400)+t(486)+t(171)+t(752)+"e",function(){var e=t;i[e(498)+e(438)+e(665)+e(429)+e(919)+e(516)+e(948)][e(498)+e(189)+e(919)+e(516)+e(948)+e(219)+e(932)+e(438)+"g"](!1)}),this[t(363)+t(378)+t(919)+t(771)].on(t(353)+t(848)+t(766)+t(167),function(){var e=t;i[e(648)+e(936)+e(194)+"le"]=!0}),this[t(363)+t(378)+t(919)+t(771)].on(t(353)+t(848)+t(618)+t(736)+"o",function(){var e=t;i[e(648)+e(936)+e(194)+"le"]=!1}),this[t(363)+t(378)+t(919)+t(771)].on(t(353)+t(436)+t(306)+t(604)+t(684)+t(457)+t(406)+"e",function(e){var n=t;!0===i[n(648)+n(936)+n(194)+"le"]?e[n(235)+n(620)+"se"]="On":e[n(235)+n(620)+"se"]=n(286)}),this[t(363)+t(378)+t(919)+t(771)].on(t(454)+t(438)+t(665)+t(698)+t(474)+t(689)+t(360)+t(454)+t(438)+t(665)+t(278)+t(187),function(e){var i=t;e[i(235)+i(620)+"se"]=S[i(763)+i(249)]}),this[t(363)+t(378)+t(919)+t(771)].on(t(353)+t(303)+t(468)+t(907)+t(714)+t(407)+t(467)+"pe",function(e){var i=t;e[i(235)+i(620)+"se"]=S[i(763)+i(249)]}),this[t(363)+t(378)+t(919)+t(771)].on(t(353)+t(848)+t(846)+t(190)+t(946)+"n",function(){var e=t;i[e(719)+e(227)+e(190)+e(946)+e(345)+e(695)+e(964)+e(217)](!0)}),this[t(363)+t(378)+t(919)+t(771)].on(t(353)+t(848)+t(496)+t(475)+t(302)+"in",function(){var e=t;i[e(719)+e(227)+e(190)+e(946)+e(345)+e(695)+e(964)+e(217)](!1)}),this[t(363)+t(378)+t(919)+t(771)].on(t(353)+t(436)+t(151)+t(720)+t(856)+t(595)+"ed",function(){var e=t,n=i[e(498)+e(438)+e(665)+e(429)+e(919)+e(516)+e(948)];if(!n[e(606)+e(919)+e(516)+e(948)+e(219)+e(932)+e(438)+"g"]()&&!n[e(775)+e(304)+e(918)+e(458)+e(325)+e(354)+"er"]()){n[e(307)+e(891)+e(424)+e(325)+e(354)+"er"]();var o=i[e(182)+e(429)+e(366)+e(542)+e(851)+e(567)+"ck"];o&&o(i[e(857)+e(264)+e(744)],!0)}})},i[e(890)+e(159)+e(187)][e(852)+e(658)+e(536)+e(774)+e(477)+e(146)+e(687)+e(692)+e(272)+e(508)+"ts"]=function(){var t=e,i=this;this[t(363)+t(378)+t(919)+t(771)].on(t(353)+t(524)+t(410)+t(657)+t(767)+t(964)+t(217)+t(904)+t(199)+"te",function(e){var n=t;if(i[n(591)+n(390)+n(902)+n(675)+n(855)+n(619)+"ct"]){var o=e[n(296)+n(779)+"d"].to;o===n(498)+"up"&&i[n(857)+n(244)+n(687)+n(692)+n(350)+n(356)+n(707)+"e"]&&(i[n(857)+n(244)+n(687)+n(692)+n(350)+n(356)+n(707)+"e"]=!1),o!==n(146)+n(687)||i[n(857)+n(244)+n(687)+n(692)+n(350)+n(356)+n(707)+"e"]||(i[n(857)+n(244)+n(687)+n(692)+n(350)+n(356)+n(707)+"e"]=!0)}}),this[t(363)+t(378)+t(919)+t(771)].on(t(353)+t(524)+t(410)+t(657)+t(767)+t(868)+t(853)+t(393)+t(186),function(e){var n=t;i[n(591)+n(390)+n(902)+n(675)+n(855)+n(619)+"ct"]&&(i[n(551)+n(960)+n(814)+"t"]=e[n(296)+n(779)+"d"][n(367)])})},i[e(890)+e(159)+e(187)][e(719)+e(938)+e(311)+e(486)+e(370)+e(333)]=function(){var t=e,i=this;this[t(363)+t(378)+t(919)+t(771)][t(896)+"t"](t(353)+t(436)+t(306)+t(604)+t(387)+t(666)+"n",void 0,function(t){var e=E,n=t[e(235)+e(620)+"se"];if(!n||!n[e(164)+e(442)])throw Error(e(454)+e(438)+e(665)+e(698)+e(474)+e(945)+e(743)+e(885)+e(565)+e(220)+e(788)+e(693)+e(687)+e(754)+e(898)+e(579)+e(660)+e(369)+e(487)+"ta");i[e(895)+e(190)+e(946)+e(810)+e(493)+"e"]=n[e(450)+e(923)+e(729)+e(824)+e(317)+e(465)+e(971)+e(854)+"ig"][e(898)+e(201)+e(554)+e(905)+e(965)],i[e(449)+e(427)+e(368)+e(370)+e(333)]=n[e(450)+e(923)+e(729)+e(824)+e(317)+e(465)+e(971)+e(854)+"ig"][e(326)+e(384)+e(667)+e(854)+"ig"],i[e(591)+e(390)+e(902)+e(675)+e(855)+e(619)+"ct"]=n[e(450)+e(923)+e(729)+e(824)+e(317)+e(465)+e(971)+e(854)+"ig"][e(307)+e(840)+e(573)+e(669)+e(975)+e(662)+"t"],i[e(636)+e(521)+e(250)+e(681)+e(187)]=n[e(450)+e(923)+e(729)+e(824)+e(317)+e(465)+e(971)+e(854)+"ig"][e(598)+e(627)+e(695)+"n"]}),this[t(363)+t(378)+t(919)+t(771)][t(441)](t(353)+t(560)+t(856)+t(324)+t(266)+"d",this[t(719)+t(938)+t(311)+t(486)+t(370)+t(333)][t(877)+"d"](this))},i[e(890)+e(159)+e(187)][e(696)+e(745)+e(298)+e(938)+e(767)+e(396)+e(508)+"t"]=function(t){var i=e;t?this[i(363)+i(378)+i(919)+i(771)].on(i(353)+i(347)+i(502)+i(615)+i(687)+"s",this[i(517)+i(361)+i(193)+i(615)+i(687)+"s"],this):this[i(363)+i(378)+i(919)+i(771)][i(441)](i(353)+i(347)+i(502)+i(615)+i(687)+"s",this[i(517)+i(361)+i(193)+i(615)+i(687)+"s"],this)},i[e(890)+e(159)+e(187)][e(517)+e(361)+e(193)+e(615)+e(687)+"s"]=function(){var t=e;this[t(696)+t(745)+t(298)+t(938)+t(767)+t(396)+t(508)+"t"](!1),this[t(363)+t(378)+t(919)+t(771)][t(896)+"t"](t(149)+t(148)+t(721)+t(264)+t(298)+t(938)+t(767)+"ns")},i[e(890)+e(159)+e(187)][e(439)+e(220)+e(288)+e(410)+e(657)+e(767)+e(868)+"fo"]=function(t){var i=e;t&&this[i(363)+i(378)+i(919)+i(771)][i(896)+"t"](i(353)+i(436)+i(306)+i(604)+i(270)+i(954)+i(465)+i(813)+i(170),void 0,function(e){var n=i;t(e[n(235)+n(620)+"se"])})},i[e(890)+e(159)+e(187)][e(216)+e(805)+e(352)+e(540)+e(180)+e(508)+"t"]=function(t){var i=e;this[i(363)+i(378)+i(919)+i(771)][i(896)+"t"](i(572)+i(727)+i(634)+i(211)+i(783),{actionName:t})},i[e(890)+e(159)+e(187)][e(787)+e(454)+e(438)+e(665)+e(348)+e(250)+e(432)+e(613)]=function(t){var i=e;return this[i(719)+i(741)+i(458)+i(325)+i(631)+i(544)+i(471)+i(316)][i(787)+i(631)+i(544)+i(786)+"e"](t)},i[e(890)+e(159)+e(187)][e(240)+e(172)+e(592)+e(926)+e(751)+e(452)+e(635)+e(373)+e(879)+"ay"]=function(t){var i=e;if(this[i(857)+i(244)+i(687)+i(692)+i(350)+i(356)+i(707)+"e"]&&this[i(591)+i(390)+i(902)+i(675)+i(855)+i(619)+"ct"]){var n=this[i(498)+i(438)+i(597)+i(922)+i(289)+"er"][i(632)+i(870)+i(812)+i(926)+"ce"],a=+(0,o.toFixed)(t-this[i(498)+i(438)+i(597)+i(922)+i(289)+"er"][i(632)+i(870)+i(812)+i(926)+"ce"],2);if(this[i(551)+i(960)+i(814)+"t"]&&t>n&&a>this[i(551)+i(960)+i(814)+"t"])return!0}return!1},__decorate([C(e(454)+e(438)+e(665)+e(698)+e(474)+"er")],i)}(cc[h(862)+h(418)]));i.settingMenuHelper=A,cc._RF.pop()}function E(t,e){var i=P();return(E=function(t){return i[t-=145]})(t,e)}function M(t){var e=h;return t===e(733)+e(917)+e(801)+e(878)+"N"?.15:.2}function T(t){var e=h;return t===e(331)+e(492)+e(409)+"EN"?0:t===e(825)+e(338)+e(409)+"EN"?1428:800}function P(){var t=["Eve","act","er ","tMe","Slo","etE","epl","ack","kMo","uEm","Bac","cul","SPI","ERA","tot","rul","_lo","Foo","pat","gam","_SE","e.A","dio","or_","man","nfo","y.C","oul","Pay","adS","ANI","Wal","tup","ase","eAm","csE","ten","_me","fin","sta","Val","ted","ype","HID","IsC","rbo","sin"," (b","Bet","nab","lat","_BA","ali","aud","ple","te_","boS","uch","bas","SOU","wPa","ane","ot ","veD","lev","Cur",".Ev","pus","iti","zeV","NOR","_em","ate",") o","Pre","que","bet","e.S","alc","ORE","sag","t d","tTu","u_i","PAY","ato","I18","_de","ckP","nRu","res","inf","rUp","nOp","cto","_sh","etL","key","Cha","Act","tSi","uto","seB","TAB","ACY","utt","olC","uIc","Wit","erF","ySl","g M","oSt","TUR","utM","nua","emC","ibe","alB","Hid","dat","ize","CAT","liz","lis","Tra","r. ","teE","inS","vel","erS"," ba","tog","nuT","les","not","dOn","mes","ugi","nd ","r i","Off","Wat","stT","oot","om ","Sho","e i"," : ","nPa","whi","pay","tLe","eBe","Spr","cha","rks","oSp","e.G","wit","ote","equ","hid","Sca","ndO","Int","era","bal","ckA","pla","OnW","per","sdi","ckC","t u","etM","nti","add","_so","ial","enu","aut","TOR","ccc","onc","itP","FUL",": g","fig","rBu","alu","llb","etC","F_S","IBl","Bal","2.0","inO","OnC","ite","nBu","uBu","e.H","nuB","ty ","teC","rtB","nal","Gam","Lay","Sou","omp","_un","Add","wMo","Get","ose","seP","_ga","sho","isB","han","tbb","lay","lid","Con","adA","bo ","eSf","lcu","onL","ckR","con","meC","val","_ma","log","wFo","ual","oPl","Emp","leS","Ses","dle","Sub","deN","unt","cal","pda","can","men","nsE","abe","tro","ntE","His","nuI","ENU","Hit","upS","pty","tat","Men","pec","CRE","ran","tIt","/li","tia","aks","201","b/s","MOR","ect"," 's","war","ste","der","usi","reM","kgr","rnB","toP","ndC","nuC","erT","etN","onN","eGa","ng ","ded","e.R","bov","tin","_re","TIN","off","eId","ula","nu ",". P","_in","uCh","isI","_au","ope","wBe","ncr","kCa","Set","ons","nce","ioS","ngM","EVE","Loc","inC","las","ayo","itB","cti","sIn","uTy","etS","loc","elV","Hel","Eff","cel","elp","urb","on ","ans","is ","lTo","cAu","elL","r' ","eva","ick","wIn","tor"," da","ure","le-","on_","ngI","L_S","abl","tab","Sel","ffT","epr","set","kRe","_pa","kQu","ide","_LI","TTI","t_m","_fi","y.S","ven","Upd","Win","FUN","Vol","kAc","elC"," ha","rol","_cl",".Hi","Fra","oFo","ckB","ena","ter","e.T","wBa","odi","iva","ePa","Wor","e-h",": C","ule","Is ","t-m","itU","rib","ume","ioC","ngA","yti","Fac","ged","Lis","ton","spr","-le","slo","wSp","kUI","nHi","_be","stI","Eac","pin","_ca","Bas","ura","_on","_OP","e.I","se ","tPa","ati","etD",".Re","CHA","lBa","Tit","sRe","adi","twe","Ana","nPr","gac","dde","BO_","MAL","Hol","n i","meT"," fr","ST_","rCa","hou","Man"," se","min","e.B","11.","tLi","_hi","dBa","BET","owW","iat","isP","gIn","bac","erU","wal","col","ueL","Cou","est"," wo","isC","k :","scr","Fla","_ad","rou","igg","ode","sli","Opt","tit","ini","ffA","ffe","pon","toS","Qui","Ite","_pr","yLi","bel","kBu","Cli","E_M","ssS","But","cur","ONS","ics","eas","_ba","HIS"," fi","ist","nel","lBe","Pic","sAu","nTy","itl","tGa","tch","sou","All","tFa","etu","g_m","nod","tAu","all","ces","sac","bsc","tem","nva","o f","fec","how"," He","gMe","sio","ayC","dCo","ofi","nly","tCa","InA"," no","use","rof","fie","sub","K_T","ine",":: ","onT","PTI","ind","Aud","hBe","io/","ion","pti","er.","NO_","ann","Sta","ess","ron","tto","_to","_tr","nuH","efi","ckH","rHo","upO","nCa"," au"," fu","Tar","let","NEW","own","fir","Col","ish","eCh","ing","int"," (a","hod","nct","_se","ayI","nu."," _a","the"," us","TIO","wSe","lyt","Pan","orJ","DEN","EGO","for","WAL","d s","itT","udi","Abo","exO","rEf","itW","tti","sBe",": G","den","ggl","teB","sMe","rog","ntr","sto","ceI","los","ala"," re","lua","Ple","Tur","Lin","rMo","but","EN_","Can","LEG","dit","rtA","nAu","tio","Pos","teW","s d","ext","ues","isN","eTr","isS","RUL","ock","Mod","loa","def","g a","upd","ent","ang","Ree","Nod","get","stS","ckg","eca","gme","veS","ryM"," me","Lab","lue",", p","age","ssT","ndV","_SC","y.1","Fin","rtM","itA","olB","nMo","zeL","rfe","nEn","atc","tBa","onI","oun","onY","igu","tRe","nBe","tLa","wCh","Uni","Url","End","uri","HAL","Loa","ror","lde","fab","you","tCo","ifi","foC","neV","ePl","tSo","eVa","ree","gSo","eNo","_ab","BAC","tMo","boo","ddS","nTu","num","e.O","Top","Mov","Cal","_su","foU","onf","itE","nit","_is","idB","Lev","OnG","dAu","Obj","_up","uIt","umb",".Sh","RY_","nIn","und","ren"," in","ND_","ned","eCa","ckS","tar","bin","REE","xPl","ona","N_O","_co","_ef","[Se","ame","SET","cta","d d","_ch","pro","eMo","le.","lpe","cor","_tu","emi","rst","tur","anc","nEv","dEv","onP","Siz","Com","Ena","O_L","ett","up ","ory","clo","ck ","NT_","st!","his","olo","lba","LET","chi","ont","met","ove","foF","rat","yMe","CK_","lan","NGE","] t","nis"," is","nMe","sen","t_i","Amo","eRu","ndE","Inf","tOp","gle","lle","lic","eLi","uat","ddi","er:","Spi","meM","ler","lea","Fre"," it","yWa","eSo","nsa","tHo","oti","Pro","olu","GEN","tAm","tLo","lUp","nge","nSt","ble","An ","k s","nWa","nu/","reT","onC","OBB","EMP","edC","tEf","tPi","le_"];return(P=function(){return t})()}},{BVFramework:"BVFramework",GameEventHandler:"GameEventHandler",NotifyHelper:"NotifyHelper",Preference:"Preference",SettingMenuButtonHelper:"SettingMenuButtonHelper",Utils:"Utils"}],SettingQuitButton:[function(t,e,i){"use strict";if(!cc._RF.push(e,"0db89a+hytA8oUU5guEDsTg","SettingQuitButton")){Object.defineProperty(i,"__esModule",{value:!0});var n=t("GenericSettingButton"),o=cc._decorator,a=o.ccclass,s=o.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprite=void 0,e.returnSF=void 0,e.closeSF=void 0,e.soundOn=void 0,e.soundOff=void 0,e.turboSpinOn=void 0,e.turboSpinOff=void 0,e}return __extends(e,t),e.prototype.setSpriteScaleSize=function(t){this.sprite.node.setScale(cc.v2(t,t))},e.prototype.setButtonOnColor=function(t,e){this._buttonOnColorDK=t,this._buttonOnColorCK=e},e.prototype.setButtonOffColor=function(t,e){this._buttonOffColorDK=t,this._buttonOffColorCK=e},e.prototype.changeButtonColor=function(e){this.buttonTheme.domainKey=e?this._buttonOnColorDK:this._buttonOffColorDK,this.buttonTheme.colorKey=e?this._buttonOnColorCK:this._buttonOffColorCK,t.prototype.changeButtonColor.call(this,!1)},e.prototype.setButtonSprite=function(t){this.sprite.spriteFrame=50===t?this.closeSF:this.returnSF},__decorate([s(cc.Sprite)],e.prototype,"sprite",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"returnSF",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"closeSF",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"soundOn",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"soundOff",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"turboSpinOn",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"turboSpinOff",void 0),__decorate([a],e)}(n.default);i.default=r,cc._RF.pop()}},{GenericSettingButton:"GenericSettingButton"}],SettingSliderNum:[function(t,e,i){"use strict";if(!cc._RF.push(e,"89028I5vilAgJwUYY+0IKoT","SettingSliderNum")){i.__esModule=!0,i.default=void 0;var n=t("Utils"),o=cc.Class({extends:cc.Component,properties:{numberLabel:cc.Label,numSprites:[cc.Sprite],pixelSprites:[cc.SpriteFrame],num:10,shortLine:cc.Node,onColor:cc.Color,offColor:cc.Color,isMin:!1},setColor:function(t,e){this.onColor=t,this.offColor=e},setDisplayValue:function(t,e){this.numberLabel.string=e,this.numberLabel.node.active=t},onLoad:function(){this.isMin&&(this.shortLine.active=!1)},setLight:function(t){t?(0,n.setNodeColorWithOpacity)(this.numberLabel.node,this.onColor):(0,n.setNodeColorWithOpacity)(this.numberLabel.node,this.offColor)}});i.default=o,e.exports=i.default,cc._RF.pop()}},{Utils:"Utils"}],SettingSliderSingleNum:[function(t,e,i){"use strict";if(!cc._RF.push(e,"449bftyQ69GBqYbHra7PRW2","SettingSliderSingleNum")){i.__esModule=!0,i.default=void 0;var n=t("Utils"),o=cc.Class({extends:cc.Component,properties:{numberLabel:cc.Label,num:10,onColor:cc.Color,offColor:cc.Color},onLoad:function(){this.numberLabel.string=this.num},setColor:function(t,e){this.onColor=t,this.offColor=e},setLight:function(t){t?(0,n.setNodeColorWithOpacity)(this.numberLabel.node,this.onColor):(0,n.setNodeColorWithOpacity)(this.numberLabel.node,this.offColor)}});i.default=o,e.exports=i.default,cc._RF.pop()}},{Utils:"Utils"}],SettingSliderSingle:[function(t,e,i){"use strict";if(!cc._RF.push(e,"41cdfy0E9FKC7KilcTyf7iZ","SettingSliderSingle")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Component,properties:{settingSliderNum:cc.Prefab,numbers:[cc.Float],content:cc.Node,valueLabel:cc.Label,alwaysShow:!1},onEnable:function(){this._changeNumberStartPoint(),this.node.on("size-changed",this._changeNumberStartPoint,this)},onDisable:function(){this.node.off("size-changed",this._changeNumberStartPoint,this)},_changeNumberStartPoint:function(){if(this._middlePoint=cc.Canvas.instance.node.width/2,this._inited){for(var t=this._sliderNums,e=0,i=t.length;e<i;e++)t[e].node.x=this._middlePoint+183*e;this.updateSlider()}},setBiggestValue:function(){var t=this.numbers.length-1;this.setLight(t),this.content.x=-this._middlePoint-183*t},setNumberList:function(t){this.numbers=t},setValueColor:function(t,e){this._valueOnColor=t,this._valueOffColor=e},setPlaySound:function(t){this._playSound=t},init:function(){var t=this;this._inited=!1;for(var e=this._sliderNums=[],i=this.numbers,n=this.numbers.length-1,o=this.content,a=0,s=this.numbers.length;a<s;a++){var r=cc.instantiate(this.settingSliderNum),c=e[a]=r.getComponent("SettingSliderSingleNum");c.setColor(this._valueOnColor,this._valueOffColor),c.num=i[a],r.x=this._middlePoint+183*a,r.parent=this.content}var l=-this._middlePoint-183*n,h=-this._middlePoint,u=this.node;if(u.on(cc.Node.EventType.TOUCH_START,function(e){u.active&&(e.stopPropagation(),t._startingX=e.getLocation().x,t._contentX=o.x)}),u.on(cc.Node.EventType.TOUCH_MOVE,function(e){if(u.active){e.stopPropagation();var i=e.getLocation().x-t._startingX,a=t._contentX+i;if(a<l)o.x=l,t.setLight(n);else if(a>h)o.x=h,t.setLight(0);else{var s=Math.round(i/183),r=183*s,c=t._contentX+r;o.x=c,t.setLight(-((t._middlePoint+t._contentX)/183+s))}}}),u.on(cc.Node.EventType.TOUCH_CANCEL,function(e){u.active&&(e.stopPropagation(),t.updateValue&&t.updateValue(t._currentSliderValue))}),u.on(cc.Node.EventType.TOUCH_END,function(e){u.active&&(e.stopPropagation(),t.updateValue&&t.updateValue(t._currentSliderValue))}),this.alwaysShow){var d=this._currentSliderValue||0;this.setDefaultFirstSliderNum(d)}else u.active=!1;this._inited=!0},setLight:function(t,e){void 0===e&&(e=!1),t=Math.round(t);var i=this._currentSliderValue;if(this.valueLabel?this._currentSliderValue=this.valueLabel.string=this.numbers[t]:this._currentSliderValue=this.numbers[t],e||i==this._currentSliderValue||this._playSound(),t%1==0){var n=this._sliderNums[t];if(n==this._lastSliderNum)return;n.setLight(!0),this._lastSliderNum&&this._lastSliderNum.setLight(!1),this._lastSliderNum=n}else this._lastSliderNum&&(this._lastSliderNum.setLight(!1),this._lastSliderNum=null);this.saveValue&&this.saveValue(this._currentSliderValue)},setDefaultFirstSliderNum:function(t){var e=this.numbers.indexOf(t);-1===e&&(e=0);var i=183*e,n=-this._middlePoint-i;this.content.x=n,this.setLight(e,!0)},setValue:function(t){this._currentSliderValue=t},getValue:function(){return this._currentSliderValue},updateSlider:function(){this.setDefaultFirstSliderNum(this._currentSliderValue)},testSetSliderNum:function(){this.setDefaultFirstSliderNum(5*Math.floor(21*Math.random()))},_playSound:function(){}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],SettingSlider:[function(t,e,i){"use strict";if(!cc._RF.push(e,"357638pYQ9Eibsf8KFNqaZK","SettingSlider")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Component,properties:{settingSliderNum:cc.Prefab,numInterval:10,maxUnit:10,minNum:0,content:cc.Node,alwaysShow:!1,isPositive:!1,showValue:!1},setValueColor:function(t,e){this._valueOnColor=t,this._valueOffColor=e},init:function(){for(var t=this,e=this._sliderNums=[],i=this.numInterval,n=this.minNum,o=this.maxUnit,a=this.content,s=0;s<=o;s++){var r=cc.instantiate(this.settingSliderNum),c=e[s]=r.getComponent("SettingSliderNum");c.setColor(this._valueOnColor,this._valueOffColor),c.num=n+s*i,r.x=621+210*s,0==s?c.isMin=!0:c.setDisplayValue(this.showValue,c.num),r.parent=a}var l=-621-210*o,h=this.node;if(h.on(cc.Node.EventType.TOUCH_START,function(e){h.active&&(e.stopPropagation(),t._startingX=e.getLocation().x,t._contentX=a.x)}),h.on(cc.Node.EventType.TOUCH_MOVE,function(e){if(h.active){e.stopPropagation();var i=e.getLocation().x-t._startingX,n=t._contentX+i;if(n<l)a.x=l,t.setLight(o);else if(n>-621)a.x=-621,t.setLight(0);else{var s=Math.round(i/105),r=105*s,c=t._contentX+r;a.x=c,t.setLight(-((621+t._contentX)/105+s)/2)}}}),h.on(cc.Node.EventType.TOUCH_CANCEL,function(e){h.active&&(e.stopPropagation(),t.saveValue&&t.saveValue(t._currentSliderValue))}),h.on(cc.Node.EventType.TOUCH_END,function(e){h.active&&(e.stopPropagation(),t.saveValue&&t.saveValue(t._currentSliderValue))}),this.alwaysShow){var u=this._currentSliderValue||0;this.setDefaultFirstSliderNum(u)}else h.active=!1},setLight:function(t,e){if(void 0===e&&(e=!1),this._currentSliderValue,!e&&this._currentSliderValue,t%1==0){var i=this._sliderNums[t];if(i==this._lastSliderNum)return void(this.saveValue&&this.saveValue(this._currentSliderValue));i.setLight(!0),this._lastSliderNum&&this._lastSliderNum.setLight(!1),this._lastSliderNum=i}else this._lastSliderNum&&(this._lastSliderNum.setLight(!1),this._lastSliderNum=null);this.saveValue&&this.saveValue(this._currentSliderValue)},setDefaultFirstSliderNum:function(t){var e=(t-this.minNum)/5,i=-621-105*e;this.content.x=i,this.setLight(e/2,!0)},setValue:function(t){this._currentSliderValue=t},getValue:function(){return this._currentSliderValue},updateSlider:function(){this.setDefaultFirstSliderNum(this._currentSliderValue)},testSetSliderNum:function(){this.setDefaultFirstSliderNum(5*Math.floor(21*Math.random()))}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],SetupServices:[function(t,e,i){"use strict";if(!cc._RF.push(e,"2414d3JU0FMq5L2I6TePeY4","SetupServices")){Object.defineProperty(i,"__esModule",{value:!0}),i.setupRefreshWorldService=i.setupWalletHelperService=i.setupSettingMenuHelperService=void 0;var n=t("WalletHelper"),o=t("SettingMenuHelper"),a=t("BetCalculator"),s=t("QuitGameWithEvent"),r=t("AudioManager"),c=t("SlotUtils");i.setupSettingMenuHelperService=function(t,e,i){var n=e.systemModel.maxLineNumber;o.settingMenuHelper.audioConfigure=!c.isNoAudio(),o.settingMenuHelper.setOnClickReturnButtonCallback(function(){s.quitGameWithEvent("Setting Quit")()}),o.settingMenuHelper.setupSettingMenuButtons(),o.settingMenuHelper.additionalBetCalculationCallback=function(t,e,i){return t*e*i},o.settingMenuHelper.betLineValue=n,l(e),o.settingMenuHelper.setLockAccessBetPanel(!1),o.settingMenuHelper.showChangeBetReminder=!1;var h=function(t,i){e.transactionModel.selectedBetSizeValue=t,e.transactionModel.selectedBetLevelValue=i;var o=shell.ga;o.sendEvent(o.CATEGORY_GAME,o.EVENT_SLOT_CHANGE_BET,{amount:a.calculateBet(t,i,n)})};o.settingMenuHelper.betModifierUpdateCallback=h,o.settingMenuHelper.manualUpdateBetFactorCallBack=function(t,e){o.settingMenuHelper.betSizeValue=t,o.settingMenuHelper.betLevelValue=e,o.settingMenuHelper.updateBetValues(),h(t,e)},o.settingMenuHelper.autoSpinCallback=i,o.settingMenuHelper.changeSoundVolume=function(t){r.toggleChannelMuted(r.AUDIO_TYPE.MUSIC,!t),r.toggleChannelMuted(r.AUDIO_TYPE.SOUND,!t)}},i.setupWalletHelperService=function(t){var e={setFreeGameModeFunc:o.settingMenuHelper.setFreeGameMode.bind(o.settingMenuHelper),footerController:o.settingMenuHelper.settingInfoFooter};n.walletHelper.setup(e),h(t)},i.setupRefreshWorldService=function(t){l(t),h(t)},cc._RF.pop()}function l(t){var e=t.systemModel,i=e.betLevelList,n=e.betSizeList,a=t.transactionModel,s=a.betSizeValue,r=a.betLevelValue;o.settingMenuHelper.betSizeList=n,o.settingMenuHelper.betSizeValue=s,o.settingMenuHelper.betLevelList=i,o.settingMenuHelper.betLevelValue=r,o.settingMenuHelper.updateBetValues()}function h(t){n.walletHelper.setupWallet(t.lastTransactionRawData),o.settingMenuHelper.setBalance(t.playerModel.balance,!1),o.settingMenuHelper.setWinAmount(t.transactionModel.accumulatedWinAmount,!1)}},{AudioManager:"AudioManager",BetCalculator:"BetCalculator",QuitGameWithEvent:"QuitGameWithEvent",SettingMenuHelper:"SettingMenuHelper",SlotUtils:"SlotUtils",WalletHelper:"WalletHelper"}],ShockWave:[function(t,e,i){"use strict";if(!cc._RF.push(e,"6bf398H3/5PyJoerMjEpyPR","ShockWave")){i.__esModule=!0,i.default=void 0;var n=t("GemsManager"),o=cc.Class({extends:cc.Component,properties:{waveContainer:cc.Node,wavePrefab:cc.Prefab,bodyFrameColor:cc.Node},onLoad:function(){this._wavePool=new cc.NodePool},setShockWave:function(t,e){var i=this,o=this._dequeueReusableItem();o||(o=cc.instantiate(this.wavePrefab)),o.color=this._currentColor=n.GEM_COLOR[t],o.position=e,this.waveContainer.addChild(o),o.scaleX=o.scaleY=.1,o.runAction(cc.sequence([cc.scaleTo(.54,16),cc.callFunc(function(){i._animationEnded(o)})]))},testShockWave:function(){this.setShockWave(Math.floor(8*Math.random()),cc.v2(500,-500))},stopColorChange:function(){this._currentColor&&(this._currentColor=void 0,this._repeatAction&&(this.bodyFrameColor.stopAction(this._repeatAction),this._repeatAction=void 0),this.bodyFrameColor.runAction(cc.tintTo(.3,cc.Color.BLACK)))},_animationEnded:function(t){t.stopAllActions(),t.removeFromParent(),this._wavePool.put(t),this._repeatAction&&(this.bodyFrameColor.stopAction(this._repeatAction),this._repeatAction=void 0),this._repeatAction=this.bodyFrameColor.runAction(cc.repeatForever(cc.sequence([cc.tintTo(.3,this._currentColor),cc.tintTo(.3,cc.Color.BLACK)])))},_dequeueReusableItem:function(){return this._wavePool.get()}});i.default=o,e.exports=i.default,cc._RF.pop()}},{GemsManager:"GemsManager"}],Skeleton:[function(t,e,i){"use strict";if(!cc._RF.push(e,"f2ca1l7879FdqauIweq5TRU","Skeleton")){i.__esModule=!0,i.default=void 0;var n=u(t("BaseEnemyActor")),o=t("Enum"),a=u(t("AudioLibrary")),s=t("AssetManager"),r=t("ObstacleBundle"),c=t("Utils"),l=shell.I18n,h=cc.Class({extends:n.default,properties:{atk1Animation:cc.Animation,atk2Animation:cc.Animation},getIdleAnim:function(){return"idle"},getHitAnim:function(){return"hit"},getDieAnim:function(){return"dead"},getDeflectAnim:function(){return"deflect"},getDeflectStopEventName:function(){return"Deflect_back_Stop"},_cancelEffects:function(){this.atk1Animation.stop(),this._atk1AnimNode.active=!1},onLoad:function(){var t=s.assetManager.getAsset(r.SkeletonAudioBundle);this.atk1Sound=t.skeletonNormalAttack,this.atk2Sound=t.skeletonJumpAttack,this.dieSound=t.skeletonDie,this._super(),this._inAttackPosition=!1,this._setupAnimations(),this._meetCat=["CatDialog.EncounteredSkeletonSpeech"]},_getEnemyType:function(){return o.EnemyType.skeleton},_getEmoticonPosition:function(t){var e;switch(t){case o.EmoticonStyle.Sweat:e=cc.v2(.35*this.node.getContentSize().width,.3*this.node.getContentSize().height);break;case o.EmoticonStyle.Shock:e=cc.v2(.55*this.node.getContentSize().width,.4*this.node.getContentSize().height);break;case o.EmoticonStyle.ShockExpMarkLv1:case o.EmoticonStyle.ShockExpMarkLv2:case o.EmoticonStyle.ShockExpMarkLv3:e=cc.v2(-.5*this.node.getContentSize().width,.3*this.node.getContentSize().height)}return e},_setupAnimations:function(){this._atk1AnimNode=this.atk1Animation.node,this._atk1AnimNode.active=!1,this._atk2AnimNode=this.atk2Animation.node,this._atk2AnimNode.active=!1},_executeAttack:function(t,e,i){t.isDead()?this.attack1(t,i):0===(0,c.randomInt)(0,1)?this.attack1(t,i):this.attack2(t,i)},attack1:function(t,e){var i=this,n=t.node,o=t.isDead()?n.x+n.width/2+50+100:n.x+n.width/2+50,s=cc.v2(o,n.y),r={moveSpeedIn:.1,moveSpeedOut:.2,moveDeflectSpeedOut:.2,minDistance:50,attackHits:1,animFunc:this._attack1Anim.bind(this)};this.spineAttack([t],s,r,function(){i._atk1AnimNode.active=!1,i.atk1Animation.stop(),e&&e()}),a.default.playEffect(this.atk1Sound)},_attack1Anim:function(){var t=this.spine;"atk1"!==t.animation&&(this._atk1AnimNode.active=!0,this.atk1Animation.play("skeleton_atk_1"),t.setAnimation(0,"atk1",!1),t.addAnimation(0,"idle",!0,0))},attack2:function(t,e){var i=this,n=t.node,o=cc.v2(n.x+n.width/2+80,n.y),s={moveSpeedIn:.3,moveSpeedOut:.3,minDistance:50,attackHits:1,animFunc:this._attack2Anim.bind(this)};this.spineAttack([t],o,s,function(){i._atk2AnimNode.active=!1,i.atk2Animation.stop(),e&&e()}),a.default.playEffect(this.atk2Sound)},_attack2Anim:function(){var t=this.spine;"atk2"!==t.animation&&(this._atk2AnimNode.active=!0,this.atk2Animation.play("skeleton_atk_2"),t.setAnimation(0,"atk2",!1),t.addAnimation(0,"idle",!0,0))},getMeetDialogCat:function(){var t=this._meetCat.concat(n.default._meetMonster),e=(0,c.randomInt)(0,t.length-1);return l.t(t[e])},_playDieSound:function(){a.default.playEffect(this.dieSound)}});i.default=h,e.exports=i.default,cc._RF.pop()}function u(t){return t&&t.__esModule?t:{default:t}}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",BaseEnemyActor:"BaseEnemyActor",Enum:"Enum",ObstacleBundle:"ObstacleBundle",Utils:"Utils"}],SliderEx:[function(t,e,i){"use strict";if(!cc._RF.push(e,"dbb33H+Xs1Dw7xtUJLC1l6D","SliderEx")){Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator,o=n.ccclass,a=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=void 0,e.contentHeight=0,e}return __extends(e,t),e.prototype.onEnable=function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.on(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this),this.handle&&this.handle.isValid&&(this.handle.node.on(cc.Node.EventType.TOUCH_START,this._onHandleDragStart,this),this.handle.node.on(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this),this.handle.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this)),this._registerEvent()},e.prototype.onDisable=function(){this.node.off(cc.Node.EventType.TOUCH_START,this._onTouchBegan,this),this.node.off(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this),this.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this),this.node.off(cc.Node.EventType.TOUCH_CANCEL,this._onTouchCancelled,this),this.handle&&this.handle.isValid&&(this.handle.node.off(cc.Node.EventType.TOUCH_START,this._onHandleDragStart,this),this.handle.node.off(cc.Node.EventType.TOUCH_MOVE,this._onTouchMoved,this),this.handle.node.off(cc.Node.EventType.TOUCH_END,this._onTouchEnded,this)),this._unregisterEvent()},e.prototype._handleSliderLogic=function(t){this._updateProgress(t),this._moveContent(),this._emitSlideEvent()},e.prototype._onMouseWheel=function(t){var e=-cc.view._scaleY,i=cc.v2(0,t.getScrollY()*e),n=this.node.convertToWorldSpace(this.handle.node.position).x,o=n+i.y/10;this.progress=cc.misc.clamp01(this.progress+(o-n)/this.node.width),this._updateHandlePosition(),this._moveContent(),this._emitSlideEvent()},e.prototype._registerEvent=function(){this.content&&this.content.parent.on(cc.Node.EventType.MOUSE_WHEEL,this._onMouseWheel,this,!0)},e.prototype._unregisterEvent=function(){this.content&&this.content.parent.off(cc.Node.EventType.MOUSE_WHEEL,this._onMouseWheel,this,!0)},e.prototype._moveContent=function(){this.content&&(this.content.y=this.progress*(this.content.height-cc.view.getVisibleSize().height))},__decorate([a(cc.Node)],e.prototype,"content",void 0),__decorate([o],e)}(cc.Slider);i.default=s,cc._RF.pop()}},{}],SlotUtils:[function(t,e,i){"use strict";if(!cc._RF.push(e,"22ba5Vm3iVK5JuqZpmGVZAa","SlotUtils")){Object.defineProperty(i,"__esModule",{value:!0}),i.getWinThresholds=i.isNoAudio=i.scheduleIterator=i.asyncSpawnCallback=i.flattenNestedArray=i.clone=void 0;var n=t("LaunchConfig"),o=t("Utils");i.clone=function(t){return JSON.parse(JSON.stringify(t))},i.flattenNestedArray=function t(e){return e.reduce(function(e,i){return Array.isArray(i)?e.concat(t(i)):e.concat(i)},[])},i.asyncSpawnCallback=function(t,e){return function(){0==--t&&e()}},i.scheduleIterator=function(t,e,i,n){var a=0,s=0,r=function(){++s===i&&n&&n()},c=function(){t(a,r),a++};return c(),i>=2&&o.sharedScheduler.schedule(c,e,i-2),function(){i>=2&&o.sharedScheduler.unschedule(c),n=void 0}},i.isNoAudio=function(){return"1"===n.cs_Launch.noAudio},i.getWinThresholds=function(t,e,i,n){var a=t*e*i;return{mediumWinThreshold:o.toDecimalWithExp(a*n.mediumWin,2),bigWinThreshold:o.toDecimalWithExp(a*n.bigWin,2),megaWinThreshold:o.toDecimalWithExp(a*n.megaWin,2),superMegaWinThreshold:o.toDecimalWithExp(a*n.superMegaWin,2)}},cc._RF.pop()}},{LaunchConfig:"LaunchConfig",Utils:"Utils"}],SoundButton:[function(t,e,i){"use strict";if(!cc._RF.push(e,"47f2aqFJBBCiYjiG/SqB5jv","SoundButton")){Object.defineProperty(i,"__esModule",{value:!0});var n=t("GenericSettingButton"),o=cc._decorator,a=o.ccclass,s=o.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprite=void 0,e.soundOn=void 0,e.soundOff=void 0,e.title=void 0,e}return __extends(e,t),e.prototype.setTitle=function(t){this.title.string=t},__decorate([s(cc.Sprite)],e.prototype,"sprite",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"soundOn",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"soundOff",void 0),__decorate([s(cc.Label)],e.prototype,"title",void 0),__decorate([a],e)}(n.default);i.default=r,cc._RF.pop()}},{GenericSettingButton:"GenericSettingButton"}],SpawnableItem:[function(t,e,i){"use strict";if(!cc._RF.push(e,"8a40femTQ5MDot7JO5MD0bf","SpawnableItem")){i.__esModule=!0,i.default=i.Phase=void 0;var n=cc.Enum({None:-1,Spawning:-1,Following:-1});i.Phase=n;var o=cc.Class({extends:cc.Component,properties:{speed:900},onLoad:function(){this._currentPhase=n.None,this.gravity=100},spawnItemAt:function(t,e,i,o){this._defaultInertiaY=this._inertiaY=i.y,this._inertiaX=i.x,this.gravity=100,this._minY=-e.getAnchorPoint().y*e.height+this.node.height/2,this._didSpawn=o,this.node.x=t.x,this.node.y=t.y,this._currentPhase=n.Spawning},reconfigureToFollow:function(t,e){this._defaultInertiaY=0,this.node.stopAllActions(),this._targetActor=t,this._didFollow=e,this._currentPhase=n.Following},_didFinishSpawn:function(){this._currentPhase=n.None,this._minY=0,this._inertiaX=0,this._inertiaY=0,this._defaultInertiaY=0,this._didSpawn&&this._didSpawn(this)},_didFinishFollow:function(){this._currentPhase=n.None,this._targetActor=void 0,this._didFollow&&this._didFollow(this)},reset:function(){this._currentPhase=n.None,this.node.stopAllActions(),this._targetActor=void 0,this._didFollow=void 0,this._didSpawn=void 0},playDropSound:function(){},getItemType:function(){},update:function(t){if(this._currentPhase===n.None);else if(this._currentPhase===n.Spawning){var e=this.node,i=this._defaultInertiaY,o=this.gravity,a=this._minY;if(i<1)return void this._didFinishSpawn();if(this._inertiaX>0&&(this._inertiaX-=+t),e.x-=this._inertiaX,e.y<=a){var s=this._defaultInertiaY/=2;this._inertiaY=s}else this._inertiaY-=o*t;var r=Math.max(a,e.y+this._inertiaY*e.scaleX);e.y=r}else if(this._currentPhase===n.Following){var c=this.node,l=this._targetActor,h=l.x-(l.getAnchorPoint().x*l.width-l.width/2),u=l.y-(l.getAnchorPoint().y*l.height-l.height/3),d=cc.v2(h,u),p=d.x-c.x,f=d.y-c.y,_=Math.sqrt(p*p+f*f);_<=20?this._didFinishFollow():(p/=_,f/=_,c.x+=p*t*this.speed,c.y+=f*t*this.speed)}}});i.default=o,cc._RF.pop()}},{}],SpecialGemEffect:[function(t,e,i){"use strict";if(!cc._RF.push(e,"c907e9bfVRFg5pje7xe5ITX","SpecialGemEffect")){i.__esModule=!0,i.default=void 0;var n=t("GemsManager"),o=cc.Class({extends:cc.Component,properties:{lightnings:[cc.Animation],centerLightning:cc.Node,sGem:cc.Node,sGemSprite:cc.Sprite,sGemEffect:cc.Sprite,sGemOverlay:cc.Node,sGemBurst:cc.Node,sGemsImages:[cc.SpriteFrame],leftArrow:cc.Node,rightArrow:cc.Node,topArrow:cc.Node,bottomArrow:cc.Node,topLeftArrow:cc.Node,topRightArrow:cc.Node,bottomLeftArrow:cc.Node,bottomRightArrow:cc.Node},onLoad:function(){this.sGem.active=!1,this._anim=this.getComponent(cc.Animation),this._sGemBurstSprite=this.sGemBurst.getComponent(cc.Sprite),this._gemAnim=this.sGemEffect.node.getComponent(cc.Animation)},setSpecialGem:function(t,e){switch(this.sGem.active=!0,this.sGemSprite.spriteFrame=this._sGemBurstSprite.spriteFrame=this.sGemsImages[e],this.centerLightning.color=n.GEM_COLOR[e],t){case 1:this.leftArrow.active=!0,this.rightArrow.active=!0,this.topArrow.active=!1,this.bottomArrow.active=!1,this.topLeftArrow.active=!1,this.topRightArrow.active=!1,this.bottomLeftArrow.active=!1,this.bottomRightArrow.active=!1;break;case 2:this.leftArrow.active=!1,this.rightArrow.active=!1,this.topArrow.active=!0,this.bottomArrow.active=!0,this.topLeftArrow.active=!1,this.topRightArrow.active=!1,this.bottomLeftArrow.active=!1,this.bottomRightArrow.active=!1;break;case 3:this.leftArrow.active=!0,this.rightArrow.active=!0,this.topArrow.active=!0,this.bottomArrow.active=!0,this.topLeftArrow.active=!0,this.topRightArrow.active=!0,this.bottomLeftArrow.active=!0,this.bottomRightArrow.active=!0;break;case 4:this.leftArrow.active=!0,this.rightArrow.active=!0,this.topArrow.active=!0,this.bottomArrow.active=!0,this.topLeftArrow.active=!1,this.topRightArrow.active=!1,this.bottomLeftArrow.active=!1,this.bottomRightArrow.active=!1}this._gemAnim.play(),this._specialType=t,this._symbolType=e},playShockWave:function(){this._anim.playAdditive("special_shock_wave")},playLightning:function(){this._anim.playAdditive("gem_lightning_start")},showLightning:function(){var t=this.lightnings,e=this._symbolType;switch(this._specialType){case 1:t[0].node.color=t[1].node.color=n.GEM_COLOR[e],t[0].play(),t[1].play();break;case 2:t[2].node.color=t[3].node.color=n.GEM_COLOR[e],t[2].play(),t[3].play();break;case 3:t[4].node.color=n.GEM_COLOR[e],t[4].play();break;case 4:for(var i=0;i<4;i++)t[i].node.color=n.GEM_COLOR[e],t[i].play()}this.lightningStart&&this.lightningStart()},changeGem:function(){this.sGemOverlay.opacity=0,this._gemAnim.stop(),this.sGemEffect.spriteFrame=void 0,this.sGem.active=!1},lightningEnd:function(){this.lightningEnded&&this.lightningEnded()},destroy:function(){this.lightningEnded=void 0,this.lightningStart=void 0,this._super()}});i.default=o,e.exports=i.default,cc._RF.pop()}},{GemsManager:"GemsManager"}],SpecialSymbol:[function(t,e,i){"use strict";if(!cc._RF.push(e,"f38e8XmcztALqE1XZDzOm5J","SpecialSymbol")){i.__esModule=!0,i.default=void 0;var n,o=function(t){if(t&&t.__esModule)return t;if(null===t||"object"!=typeof t&&"function"!=typeof t)return{default:t};var e=r(void 0);if(e&&e.has(t))return e.get(t);var i={},n=Object.defineProperty&&Object.getOwnPropertyDescriptor;for(var o in t)if("default"!==o&&Object.prototype.hasOwnProperty.call(t,o)){var a=n?Object.getOwnPropertyDescriptor(t,o):null;a&&(a.get||a.set)?Object.defineProperty(i,o,a):i[o]=t[o]}return i.default=t,e&&e.set(t,i),i}(t("SpawnableItem")),a=(n=t("DataManager"))&&n.__esModule?n:{default:n},s=cc.Class({extends:o.default,properties:{shineAnimation:cc.Animation,floatAnimation:cc.Animation,specialGem:cc.Sprite,specialGemImages:[cc.SpriteFrame],particle:cc.ParticleSystem},onLoad:function(){this._shineNode=this.shineAnimation.node,this._index=0},_didFinishSpawn:function(){var t=this;this._currentPhase=o.Phase.None,this._minY=0,this._inertiaX=0,this._inertiaY=0,this._defaultInertiaY=0;var e=cc.v2(this.node.x,this.node.y+100);this.node.runAction(cc.sequence([cc.moveBy(.5,cc.v2(0,100)).easing(cc.easeIn(.3)),cc.callFunc(function(){t.node.x=e.x,t.node.y=e.y,t.playFloatAnimation(),t._didSpawn&&t._didSpawn(t)})]))},start:function(){this._setupGemTemplate()},playSpawnAnimation:function(t){this.node.scaleX=0,this.node.scaleY=0,this.node.runAction(cc.scaleTo(.5,1,1)),this.playShineAnimation(t),this.playSwitchAnimation()},playShineAnimation:function(t){this._shineNode.active=!0,this._shineNode.opacity=255,t?(this.particle.resetSystem(),this.particle.node.active=!0):(this.particle.stopSystem(),this.particle.node.active=!1),this.shineAnimation.play("new_key_glow_effect")},playFloatAnimation:function(){this.specialGem.node.x=0,this.specialGem.node.y=0,this.floatAnimation.play("special_float")},playSwitchAnimation:function(){this.stopSwitchAnimation(),this.schedule(this._switchTemplate,.5,cc.macro.REPEAT_FOREVER)},stopSwitchAnimation:function(){this.unschedule(this._switchTemplate)},_switchTemplate:function(){var t=this.specialGemImages;this._index++,this._index>t.length-1&&(this._index=0),this.specialGem.spriteFrame=t[this._index]},stopShineAnimation:function(){this._shineNode.active=!1,this._shineNode.opacity=0,this.particle.stopSystem(),this.shineAnimation.stop()},stopFloatAnimation:function(){this.floatAnimation.stop()},_setupGemTemplate:function(){this.specialGem.spriteFrame=this.specialGemImages[this._index]},stopAllAnimation:function(){this.stopShineAnimation(),this.stopFloatAnimation(),this.stopSwitchAnimation()},getPositionIndex:function(){return a.default.specialSymbolPlacementPosition},getSymbolIndex:function(){return a.default.selectedSpecialSymbol},isReady:function(){return a.default.specialSymbolIsReadyState}});i.default=s,e.exports=i.default,cc._RF.pop()}function r(t){if("function"!=typeof WeakMap)return null;var e=new WeakMap,i=new WeakMap;return(r=function(t){return t?i:e})(t)}},{DataManager:"DataManager",SpawnableItem:"SpawnableItem"}],SpinButton:[function(t,e,i){"use strict";if(!cc._RF.push(e,"9f29bv5cINJf4cGLcdZ4NTm","SpinButton")){i.__esModule=!0,i.default=void 0;var n,o,a,s,r,c,l,h,u,d,p,f,_,m,g,y,v,b,S,C,A,E,M,T,P,I,w,B,R,k,x,D,L,N,F,O=(n=t("AudioLibrary"))&&n.__esModule?n:{default:n},G=t("ButtonHitTest"),H=t("AssetManager"),W=t("GeneralBundle"),U=t("AutomationDecorator"),z=t("QiBaseSpinButtonViewController.spec"),V=cc._decorator,j=V.ccclass,Y=V.property,q=(o=Y(cc.Node),a=Y(cc.Node),s=Y(cc.Sprite),r=Y(cc.SpriteFrame),c=Y(cc.SpriteFrame),l=Y(cc.SpriteFrame),h=Y(cc.SpriteFrame),u=Y(cc.Sprite),d=Y(cc.SpriteFrame),p=Y(cc.SpriteFrame),f=Y(cc.SpriteFrame),_=Y(cc.SpriteFrame),m=Y(cc.SpriteFrame),g=Y([cc.Node]),y=Y(cc.Node),v=(0,U.automationDec)({func:z.initNodes}),b=(0,U.automationDec)({func:z.onSetButtonInteractivity}),j((C=function(t){var e,i;function n(){for(var e,i=arguments.length,n=Array(i),o=0;o<i;o++)n[o]=arguments[o];return K(e=t.call.apply(t,[this].concat(n))||this,"iconNode",A,X(e)),K(e,"label",E,X(e)),K(e,"spinButtonBG",M,X(e)),K(e,"spinIcon",T,X(e)),K(e,"spinBG",P,X(e)),K(e,"autoIcon",I,X(e)),K(e,"autoBG",w,X(e)),K(e,"highlight",B,X(e)),K(e,"spinHighlight",R,X(e)),K(e,"autoHighlight",k,X(e)),K(e,"spinBGGray",x,X(e)),K(e,"spinIconGray",D,X(e)),K(e,"mouseHoverAnimSprite",L,X(e)),K(e,"glowNodes",N,X(e)),K(e,"mouseHover",F,X(e)),e}i=t,(e=n).prototype=Object.create(i.prototype),e.prototype.constructor=e,Q(e,i);var o=n.prototype;return o.init=function(){var t=H.assetManager.getAsset(W.GeneralGameAudioBundle);this.spinClickAudio=t.spinClick},o.onLoad=function(){var t=this;this._speed=1.2,this._explodeAnim=this.getComponent(cc.Animation),this.effectNode=this.node.children[1],this.iconBgNode=this.node.children[0],this._iconSprite=this.iconNode.getComponent(cc.Sprite),this._autoSpinOnColor=new cc.Color(23,184,255),this._autoSpinOffColor=new cc.Color(133,133,133),this._label=this.label.getComponent(cc.Label),this._touching=!1,this.node.on(cc.Node.EventType.TOUCH_START,function(e){e.stopPropagation(),!t._touching&&t._isAbleToClick()&&(t._touching=!0,t._buttonScaleDown())}),this.node.on(cc.Node.EventType.TOUCH_CANCEL,function(e){e.stopPropagation(),t._touching&&(t._touching=!1,t._buttonScaleUp())}),this.node.on(cc.Node.EventType.TOUCH_END,function(e){e.stopPropagation(),t._touching&&(t._touching=!1,t._buttonScaleUp(),t.onClick&&t.onClick())}),cc.systemEvent.on(cc.SystemEvent.EventType.KEY_DOWN,this._onKeyDown.bind(this),this),this.mouseHoverController=this.mouseHover.getComponent("MouseHover"),this.glowSprite=this.glowNodes[0].getComponent(cc.Sprite);var e={spriteFrame:this.mouseHoverAnimSprite,width:230,height:230,color:new cc.Color(254,254,254),glowNodes:this.glowNodes};this.mouseHoverController.init(e),this.setSpinMode(),this._initNodes({spinButtonNode:this.node})},o.disableSpin=function(){this._enableSpin=!1,this.mouseHoverController.setEnable(!1),this._isAutospin||(this.spinButtonBG.spriteFrame=this.spinBGGray,this._iconSprite.spriteFrame=this.spinIconGray),this._onSetButtonInteractivity(!1)},o.enableSpin=function(){this._enableSpin=!0,this.mouseHoverController.setEnable(!0),this._isAutospin||(this.spinButtonBG.spriteFrame=this.spinBG,this._iconSprite.spriteFrame=this.spinIcon),this._onSetButtonInteractivity(!0)},o.accelerateSpin=function(t){t||this._explodeAnim.play(),this._slowingDown=!1,this._speed=8,this.disableSpin()},o.decelerateSpin=function(){this._slowingDown=!0},o.setSpinMode=function(){this.spinButtonBG.spriteFrame=this.spinBG,this._iconSprite.spriteFrame=this.spinIcon,this.glowSprite.spriteFrame=this.spinIcon,this.label.active=!1,this.enabled=!0,this.highlight.spriteFrame=this.spinHighlight,this._isAutospin=!1},o.setAutoSpinMode=function(t){this.spinButtonBG.spriteFrame=this.autoBG,this._iconSprite.spriteFrame=this.autoIcon,this.glowSprite.spriteFrame=this.autoIcon,this.iconNode.angle=0,t>0?(this.label.active=!0,this.setAutoCounter(t)):this.label.active=!1,this.enabled=!1,this.highlight.spriteFrame=this.autoHighlight,this._isAutospin=!0},o.setAutoCounter=function(t){this._label.string=t},o.update=function(t){this._slowingDown&&(this._speed-=.22,this._speed<=1.2&&(this._slowingDown=!1,this._speed=1.2)),this.iconNode.angle-=this._speed*t*60},o.playSpinClickAudio=function(){O.default.playEffect(this.spinClickAudio)},o.setButtonHidden=function(t,e){var i=this;if(this._isButtonHidden()!==t&&!this._animating){this._animating=!0;var n,o,a=this.node;t?(n=-152,o=0,this.mouseHoverController.setEnable(!1,!0),this._touching&&(this._touching=!1)):(a.active=!0,n=238,o=255,this.mouseHoverController.setEnable(!0)),e?a.runAction(cc.sequence(cc.spawn(cc.moveTo(.2,a.x,n),cc.fadeTo(.2,o)).easing(cc.easeQuadraticActionOut()),cc.callFunc(function(){return i._didSetButtonHidden(t)}))):(a.y=n,a.opacity=o,this._didSetButtonHidden(t))}},o._buttonScaleUp=function(){this.mouseHoverController.setEnable(!1),this.iconNode.stopAllActions(),this.iconBgNode.stopAllActions(),this.effectNode.stopAllActions(),this.iconNode.runAction(cc.sequence([cc.scaleTo(.07,1.05),cc.scaleTo(.07,1)])),this.iconBgNode.runAction(cc.sequence([cc.scaleTo(.07,1.05),cc.scaleTo(.07,1)])),this.effectNode.runAction(cc.sequence([cc.scaleTo(.07,1.05),cc.scaleTo(.07,1)]))},o._buttonScaleDown=function(){this.iconNode.stopAllActions(),this.iconBgNode.stopAllActions(),this.effectNode.stopAllActions(),this.iconNode.runAction(cc.sequence([cc.scaleTo(.07,.8),cc.scaleTo(.07,.9)])),this.iconBgNode.runAction(cc.sequence([cc.scaleTo(.07,.8),cc.scaleTo(.07,.9)])),this.effectNode.runAction(cc.sequence([cc.scaleTo(.07,.8),cc.scaleTo(.07,.9)]))},o._didSetButtonHidden=function(t){this._animating=!1;var e=this.node,i=e.children;t?(i.forEach(function(t){var e=t.getComponent(cc.Animation);e&&e.pause()}),e.active=!1):i.forEach(function(t){var e=t.getComponent(cc.Animation);e&&e.resume()})},o._isButtonHidden=function(){return!this.node.active},o._isAbleToClick=function(){return!this._isButtonHidden()&&(this._enableSpin||this._isAutospin)&&(0,G.buttonHitTest)(this.node)},o._onKeyDown=function(t){switch(t.keyCode){case cc.macro.KEY.space:this._isAbleToClick()&&this.onClick&&this.onClick(!1,!0)}},o._initNodes=function(){},o._onSetButtonInteractivity=function(){},n}(cc.Component),A=J(C.prototype,"iconNode",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),E=J(C.prototype,"label",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),M=J(C.prototype,"spinButtonBG",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),T=J(C.prototype,"spinIcon",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),P=J(C.prototype,"spinBG",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),I=J(C.prototype,"autoIcon",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),w=J(C.prototype,"autoBG",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),B=J(C.prototype,"highlight",[u],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),R=J(C.prototype,"spinHighlight",[d],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),k=J(C.prototype,"autoHighlight",[p],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),x=J(C.prototype,"spinBGGray",[f],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),D=J(C.prototype,"spinIconGray",[_],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),L=J(C.prototype,"mouseHoverAnimSprite",[m],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return null}}),N=J(C.prototype,"glowNodes",[g],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){return[]}}),F=J(C.prototype,"mouseHover",[y],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),J(C.prototype,"_initNodes",[v],Object.getOwnPropertyDescriptor(C.prototype,"_initNodes"),C.prototype),J(C.prototype,"_onSetButtonInteractivity",[b],Object.getOwnPropertyDescriptor(C.prototype,"_onSetButtonInteractivity"),C.prototype),S=C))||S);i.default=q,e.exports=i.default,cc._RF.pop()}function K(t,e,i,n){i&&Object.defineProperty(t,e,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function X(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function Q(t,e){return(Q=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function J(t,e,i,n,o){var a={};return Object.keys(n).forEach(function(t){a[t]=n[t]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce(function(i,n){return n(t,e,i)||i},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(t,e,a),a=null),a}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",AutomationDecorator:"AutomationDecorator",ButtonHitTest:"ButtonHitTest",GeneralBundle:"GeneralBundle","QiBaseSpinButtonViewController.spec":"QiBaseSpinButtonViewController.spec"}],SpinOptionsButton:[function(t,e,i){"use strict";if(!cc._RF.push(e,"e90b8cHC1pLU5MgBHHUG6M6","SpinOptionsButton")){Object.defineProperty(i,"__esModule",{value:!0});var n=t("GenericSettingButton"),o=cc._decorator,a=o.ccclass,s=o.property,r=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.sprite=void 0,e.turboSpinOn=void 0,e.turboSpinOff=void 0,e}return __extends(e,t),__decorate([s(cc.Sprite)],e.prototype,"sprite",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"turboSpinOn",void 0),__decorate([s(cc.SpriteFrame)],e.prototype,"turboSpinOff",void 0),__decorate([a],e)}(n.default);i.default=r,cc._RF.pop()}},{GenericSettingButton:"GenericSettingButton"}],SpinTimeHelper:[function(t,e,i){"use strict";if(!cc._RF.push(e,"087e1hMljlJD5YvEnFO1e3g","SpinTimeHelper")){Object.defineProperty(i,"__esModule",{value:!0}),i.spinTimeHelper=void 0;var n=new(function(){function t(){}return Object.defineProperty(t.prototype,"regularSpinningTime",{get:function(){return this._regularSpinningTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"minimumSpinningTime",{get:function(){return this._minimumSpinningTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"turboMinimumSpinningTime",{get:function(){return this._turboMinimumSpinningTime},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"fastStopFeature",{get:function(){return this._fastStopFeature},enumerable:!1,configurable:!0}),Object.defineProperty(t.prototype,"turboSpinFeature",{get:function(){return this._turboSpinFeature},enumerable:!1,configurable:!0}),t.prototype.init=function(t){var e=t.dataSource.systemModel.operatorJurisdiction,i=e.singlePlayMinDuration,n=e.turboSpinEnable;if(void 0===i)throw Error("SpinTimeConfig :: no singlePlayMinDuration found in operatorJurisdiction");if(i>0)this._regularSpinningTime=this._minimumSpinningTime=this._turboMinimumSpinningTime=i-t.spinningTimeDelayOffset;else{var o=t.regularSpinningTime,a=t.minimumSpinningTime,s=t.turboMinimumSpinningTime;this._regularSpinningTime=o,this._minimumSpinningTime=a,this._turboMinimumSpinningTime=s}this._fastStopFeature=this._turboSpinFeature=n},t}());i.spinTimeHelper=n,cc._RF.pop()}},{}],"Story.spec":[function(t,e,i){"use strict";if(!cc._RF.push(e,"9e2daeRsxhJbq2T4h434yAl","Story.spec")){Object.defineProperty(i,"__esModule",{value:!0}),i.initNodes=i.onSkipStoryEnabled=void 0;var n=t("AutomationConstant"),o=System.get("automation")&&System.get("automation").GameData;i.onSkipStoryEnabled=function(){o&&o.emit(n.AUTOMATION_CUSTOM_EVENT.STORY)},i.initNodes=function(t){var e=System.get("automation")&&System.get("automation").GameConfigs;e&&e.initNodeConfig(t.skipButtonNode,n.AUTOMATION_NODE.STORY_SKIP_BUTTON)},cc._RF.pop()}},{AutomationConstant:"AutomationConstant"}],Story:[function(t,e,i){"use strict";if(!cc._RF.push(e,"fa0b73GxrdFJJ6tTGNHEeqb","Story")){i.__esModule=!0,i.default=void 0;var n,o,a,s,r,c,l,h,u,d,p,f,_,m,g,y,v,b,S,C=t("Enum"),A=(n=t("ChatBubbleGenerator"))&&n.__esModule?n:{default:n},E=t("BVFrameworkEnum"),M=t("AutomationDecorator"),T=t("Story.spec"),P=shell.I18n,I=cc.Enum({catAppear:1,catAppearDialog:2,heroAppear:3,heroAppearQuestionMark:4,heroAppearDialog:5,catIntroductionDialog:6,catEnemyDialog:7,heroExclamationMark:8,batAppear:9,batInformDialog:10,storyFinish:11}),w=cc._decorator,B=w.ccclass,R=w.property,k=(o=R(cc.Node),a=R(cc.Node),s=R(cc.Node),r=R(cc.Node),c=R(cc.Node),l=R(cc.Node),h=R(cc.Node),u=(0,M.automationDec)({func:T.initNodes}),d=(0,M.automationDec)({func:T.onSkipStoryEnabled}),B((f=function(t){var e,i;function n(){for(var e,i=arguments.length,n=Array(i),o=0;o<i;o++)n[o]=arguments[o];return x(e=t.call.apply(t,[this].concat(n))||this,"cat",_,D(e)),x(e,"boy",m,D(e)),x(e,"bat",g,D(e)),x(e,"grass",y,D(e)),x(e,"question",v,D(e)),x(e,"exclamation",b,D(e)),x(e,"skipBtnNode",S,D(e)),e}i=t,(e=n).prototype=Object.create(i.prototype),e.prototype.constructor=e,L(e,i);var o=n.prototype;return o.onLoad=function(){var t=this;this.catWaitDialogConfig=this.getChatBubbleConfig(P.t("FirstTimeLoginDialog.Cat_WaitYou"),cc.v2(210,370),140),this.catIntroductionDialogConfig=this.getChatBubbleConfig(P.t("FirstTimeLoginDialog.Cat_SelfIntroduction"),cc.v2(210,370),150),this.catEnemyDialogConfig=this.getChatBubbleConfig(P.t("FirstTimeLoginDialog.Cat_EnemyAppear"),cc.v2(210,370),160,C.BubbleDirection.bottomLeft,C.BubbleType.SurprisedForStory),this.heroDialogConfig=this.getChatBubbleConfig(P.t("FirstTimeLoginDialog.Hero_WhoAreYou"),cc.v2(-250,-300),100,C.BubbleDirection.bottomRight),this.batDialogConfig=this.getChatBubbleConfig(P.t("FirstTimeLoginDialog.Bat_InformQueen"),cc.v2(-100,490),140,C.BubbleDirection.topRight),this._storyState=I.catAppear,this._chatBubbleBoxes=[],this.node.on(cc.Node.EventType.TOUCH_END,function(e){e.stopPropagation(),t._nextStory()}),this._chatBubbleGenerator=new A.default,this._chatBubbleGenerator.chatBubblePrefab=this.chatBubblePrefab,this._chatBubbleGenerator.chatLayer=this.node.parent,this._bindedNextStory=this._nextStory.bind(this),this._initNodes({skipButtonNode:this.skipBtnNode})},o.composeStory=function(){this._enableAutomationSkipStory(),this._continueStory(),this.schedule(this._bindedNextStory,3.2)},o._continueStory=function(){var t=this._storyState;switch(t){case I.catAppear:this._currentStoryState=t,this._storyState=I.catAppearDialog,this.catAppear(t);break;case I.catAppearDialog:this._currentStoryState=t,this._storyState=I.heroAppear,this._generateChat(this.catWaitDialogConfig,.3,.3,2.9);break;case I.heroAppear:this._currentStoryState=t,this._storyState=I.heroAppearQuestionMark,this.grassAppear(),this.boyAppear(t);break;case I.heroAppearQuestionMark:this._currentStoryState=t,this._storyState=I.heroAppearDialog,this.questionAppear();break;case I.heroAppearDialog:this._currentStoryState=t,this._storyState=I.catIntroductionDialog,this.questionDisappear(0),this._generateChat(this.heroDialogConfig,.3,.3,2.9);break;case I.catIntroductionDialog:this._currentStoryState=t,this._storyState=I.catEnemyDialog,this._recycleChatBubbles(),this._generateChat(this.catIntroductionDialogConfig,.3,.3,2.9);break;case I.catEnemyDialog:this._currentStoryState=t,this._storyState=I.heroExclamationMark,this._recycleChatBubbles(),this._generateChat(this.catEnemyDialogConfig,.3,.3,2.9);break;case I.heroExclamationMark:this._currentStoryState=t,this._storyState=I.batAppear,this._recycleChatBubbles(),this.exclamationAppear();break;case I.batAppear:this._currentStoryState=t,this._storyState=I.batInformDialog,this._recycleChatBubbles(),this.exclamationDisappear(0),this.catDisappear(),this.boyDisappear(),this.grassDisappear(),this.batAppear(t);break;case I.batInformDialog:this._currentStoryState=t,this._storyState=I.storyFinish,this._recycleChatBubbles(),this._generateChat(this.batDialogConfig,.3,.3,2.9);break;case I.storyFinish:this._currentStoryState=void 0,this._storyState=void 0,this._recycleChatBubbles(),this.storyFinish()}},o._nextStory=function(){this._currentStoryState=this._storyState,this._continueStory(),this._resetTimer()},o._resetTimer=function(){this.unschedule(this._bindedNextStory);var t=this._storyState===I.heroExclamation?1.5:3.2;this._storyState&&this.schedule(this._bindedNextStory,t)},o._recycleChatBubbles=function(){for(var t=this._chatBubbleBoxes,e=t.length,i=this._chatBubbleGenerator,n=0;n<e;n++){var o=t[n];i.recycleChatBubble(o.bubbleType,o.obj)}this._chatBubbleBoxes=[]},o.getChatBubbleConfig=function(t,e,i,n,o){return void 0===n&&(n=C.BubbleDirection.bottomLeft),void 0===o&&(o=C.BubbleType.Normal),{bubbleType:o,position:e,message:t,bubbleDirection:n,bubbleWidth:i}},o.catAppear=function(t,e){var i=this;void 0===e&&(e=1),this.cat.active=!0,this.cat.opacity=0,this.cat.runAction(cc.sequence(cc.fadeIn(e),cc.callFunc(function(){i._currentStoryState===t&&i._nextStory()})))},o.catDisappear=function(t){var e=this;void 0===t&&(t=1),this.cat.runAction(cc.sequence(cc.fadeOut(t),cc.callFunc(function(){e.cat.active=!1})))},o.boyAppear=function(t,e){var i=this;void 0===e&&(e=1),this.boy.opacity=0,this.boy.active=!0,this.boy.runAction(cc.sequence(cc.fadeIn(e),cc.callFunc(function(){i._currentStoryState===t&&i._nextStory()})))},o.boyDisappear=function(t){var e=this;void 0===t&&(t=1),this.boy.runAction(cc.sequence(cc.fadeOut(t),cc.callFunc(function(){e.boy.active=!1})))},o.grassAppear=function(t){void 0===t&&(t=1),this.grass.opacity=0,this.grass.active=!0,this.grass.runAction(cc.fadeIn(t))},o.grassDisappear=function(t){var e=this;void 0===t&&(t=1),this.grass.runAction(cc.sequence(cc.fadeOut(t),cc.callFunc(function(){e.grass.active=!1})))},o.batAppear=function(t,e){var i=this;void 0===e&&(e=1),this.bat.opacity=0,this.bat.active=!0,this.bat.runAction(cc.sequence(cc.fadeIn(e),cc.callFunc(function(){i._currentStoryState===t&&i._nextStory()})))},o.batDisappear=function(t){var e=this;void 0===t&&(t=1),this.bat.runAction(cc.sequence(cc.fadeOut(t),cc.callFunc(function(){e.bat.active=!1})))},o.questionAppear=function(t){void 0===t&&(t=1),this.bat.opacity=0,this.question.active=!0,this.question.runAction(cc.fadeIn(t))},o.questionDisappear=function(t){var e=this;void 0===t&&(t=1),this.question.runAction(cc.sequence(cc.fadeOut(t),cc.callFunc(function(){e.question.active=!1})))},o.exclamationAppear=function(t){void 0===t&&(t=1),this.exclamation.opacity=0,this.exclamation.active=!0,this.exclamation.runAction(cc.fadeIn(t))},o.exclamationDisappear=function(t){var e=this;void 0===t&&(t=1),this.exclamation.runAction(cc.sequence(cc.fadeOut(t),cc.callFunc(function(){e.exclamation.active=!1})))},o.storyFinish=function(){this.unschedule(this._bindedNextStory),this.batDisappear(),this.delegate.storyFinish()},o.skipStory=function(){this.unschedule(this._bindedNextStory),this.cat.active=!1,this.boy.active=!1,this.grass.active=!1,this.bat.active=!1,this._recycleChatBubbles(),this.delegate.storyFinish()},o._generateChat=function(t,e,i,n){var o=this,a=t.bubbleType,s=t.position,r=t.message,c=t.bubbleDirection,l=t.bubbleWidth;this._chatBubbleGenerator.getResizedChatBubbleWithMessage(l,a,this.node,r,c,s,function(t){var s={obj:t,bubbleType:a};o._chatBubbleBoxes.push(s),t.opacity=0,t.zIndex=E.EN_GAME_LAYER_Z_INDEX_HIGH+49,t.runAction(cc.sequence(cc.fadeIn(e),cc.delayTime(n),cc.fadeOut(i),cc.callFunc(function(){var e=o._chatBubbleBoxes.indexOf(s);e>-1&&(o._chatBubbleGenerator.recycleChatBubble(a,t),o._chatBubbleBoxes.splice(e,1),s=void 0)})))})},o._initNodes=function(){},o._enableAutomationSkipStory=function(){},n}(cc.Component),_=N(f.prototype,"cat",[o],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),m=N(f.prototype,"boy",[a],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),g=N(f.prototype,"bat",[s],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),y=N(f.prototype,"grass",[r],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),v=N(f.prototype,"question",[c],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),b=N(f.prototype,"exclamation",[l],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),S=N(f.prototype,"skipBtnNode",[h],{configurable:!0,enumerable:!0,writable:!0,initializer:function(){}}),N(f.prototype,"_initNodes",[u],Object.getOwnPropertyDescriptor(f.prototype,"_initNodes"),f.prototype),N(f.prototype,"_enableAutomationSkipStory",[d],Object.getOwnPropertyDescriptor(f.prototype,"_enableAutomationSkipStory"),f.prototype),p=f))||p);i.default=k,e.exports=i.default,cc._RF.pop()}function x(t,e,i,n){i&&Object.defineProperty(t,e,{enumerable:i.enumerable,configurable:i.configurable,writable:i.writable,value:i.initializer?i.initializer.call(n):void 0})}function D(t){if(void 0===t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return t}function L(t,e){return(L=Object.setPrototypeOf||function(t,e){return t.__proto__=e,t})(t,e)}function N(t,e,i,n,o){var a={};return Object.keys(n).forEach(function(t){a[t]=n[t]}),a.enumerable=!!a.enumerable,a.configurable=!!a.configurable,("value"in a||a.initializer)&&(a.writable=!0),a=i.slice().reverse().reduce(function(i,n){return n(t,e,i)||i},a),o&&void 0!==a.initializer&&(a.value=a.initializer?a.initializer.call(o):void 0,a.initializer=void 0),void 0===a.initializer&&(Object.defineProperty(t,e,a),a=null),a}},{AutomationDecorator:"AutomationDecorator",BVFrameworkEnum:"BVFrameworkEnum",ChatBubbleGenerator:"ChatBubbleGenerator",Enum:"Enum","Story.spec":"Story.spec"}],SubControllerConfig:[function(t,e,i){"use strict";cc._RF.push(e,"24ea0V+c1hBKJve2dHxdOZ/","SubControllerConfig")||(Object.defineProperty(i,"__esModule",{value:!0}),i.SubControllers=void 0,function(t){t[t.AUTOSPIN=0]="AUTOSPIN",t[t.BET=1]="BET",t[t.USER_SETTING=2]="USER_SETTING",t[t.HISTORY=3]="HISTORY",t[t.PAYTABLE=4]="PAYTABLE",t[t.RULE=5]="RULE",t[t.WALLET=6]="WALLET"}(i.SubControllers||(i.SubControllers={})),cc._RF.pop())},{}],SuperMegaWin:[function(t,e,i){"use strict";if(!cc._RF.push(e,"60d8cY1+DZLGblxBHoPK6Tu","SuperMegaWin")){i.__esModule=!0,i.default=void 0;var n=c(t("AudioLibrary")),o=c(t("NumberDisplayController")),a=t("AssetManager"),s=t("GeneralBundle"),r=cc.Class({extends:cc.Component,properties:{numberDisplay:o.default,popOutContainer:cc.Node,shine:cc.Node,thunder:cc.Node},onLoad:function(){this._anim=this.getComponent(cc.Animation),this.node.zIndex=9,this._canDisappear=!0},setNumber:function(t,e,i,o){var r=a.assetManager.getAsset(s.GeneralGameAudioBundle);if(this.lightingZap=r.superMegaWinZap,this._slowRoll=i,this.numberDisplay.clear(),this.numberDisplay.displayNumber(t,!e||i||o),this._appeared){if(!e&&(this._anim.playAdditive("super_mega_win_number"),o)){var c=cc.instantiate(this.numberDisplay.node);this.popOutContainer.addChild(c);var l=this.popOutContainer;l.stopAllActions(),l.scale=1,l.opacity=255,l.runAction(cc.sequence(cc.spawn(cc.scaleTo(.5,2).easing(cc.easeOut(2)),cc.fadeOut(.5).easing(cc.easeOut(2))),cc.callFunc(function(){c.removeFromParent(),c.destroy()})))}}else this._zapLoop=n.default.playEffect(this.lightingZap,!0,.96),this._anim.play(),this._appeared=!0;this._canDisappear||this._isRolling||this.unschedule(this._timeOutDisappear),!this._isRolling&&e&&(this._canDisappear=!1,this._isRolling=!0,this._playWinAnim()),e||(this._playWinAnim(),this._canDisappear=!1,this._isRolling=!1,this.scheduleOnce(this._timeOutDisappear,2))},_playWinAnim:function(){this.shine.active=!0,this.thunder.active=!0,this.shine.getComponent(cc.Animation).play(),this.thunder.getComponent(cc.Animation).play()},_timeOutDisappear:function(){this._canDisappear=!0,this._disappearPending&&(this._disappearPending=!1,this.disappear())},disappear:function(t){this._appeared?t||this._canDisappear?(this._canDisappear||this.unschedule(this._timeOutDisappear),this.shine.getComponent(cc.Animation).stop(),this.thunder.getComponent(cc.Animation).stop(),this.shine.active=!1,this.thunder.active=!1,this._isRolling=!1,this._anim.play("super_mega_win_disappear"),this._zapLoop&&(n.default.stopEffect(this._zapLoop,this.lightingZap),this._zapLoop=void 0),this._appeared=!1):this._disappearPending=!0:this._disappearPending=!t},_dequeueReusableItem:function(){return this._numberPool.get()}});i.default=r,e.exports=i.default,cc._RF.pop()}function c(t){return t&&t.__esModule?t:{default:t}}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",GeneralBundle:"GeneralBundle",NumberDisplayController:"NumberDisplayController"}],SymbolManager:[function(t,e,i){"use strict";if(!cc._RF.push(e,"e0ec1nP+mxEFKYNwEmJnB3+","SymbolManager")){i.__esModule=!0,i.default=void 0;var n,o=(n=t("AudioLibrary"))&&n.__esModule?n:{default:n},a=t("AssetManager"),s=t("GeneralBundle"),r=cc.Class({extends:cc.Component,properties:{specialSymbolPrefab:cc.Prefab,worldLayer:cc.Node,_isHDVer:cc.Boolean},onLoad:function(){this._currentSymbol=void 0,this._symbolInitX=900,this._symbolPool=new cc.NodePool},getCurrentSymbol:function(){return this._currentSymbol},init:function(){var t=a.assetManager.getAsset(s.GeneralGameAudioBundle);this.specialGemSpawn=t.specialGemSpawn},isHDVersion:function(t){this._isHDVer=t},spawnSymbol:function(t,e,i){if(void 0===e&&(e=!1),this._currentSymbol)this.updateSymbolData();else{var n=this._symbolPool.get();n||(n=cc.instantiate(this.specialSymbolPrefab));var a=n.getComponent("SpecialSymbol");this._currentSymbol=a,n.x=t,n.y=n.height/2+100,n.active=!0,n.zIndex=4;var s=n.getComponent("SpawnableItem");this.worldLayer.addChild(n),e?(n.x=t-200,a.playFloatAnimation(),i&&i()):s.spawnItemAt(n.position,this.worldLayer,cc.v2(6,13),i),a.playSpawnAnimation(this._isHDVer),o.default.playEffect(this.specialGemSpawn)}},recycleSymbol:function(t){var e=t.node;this._currentSymbol=void 0,t.stopAllAnimation(),e.removeFromParent(),e.active=!1,e.scaleX=1,e.scaleY=1,this._symbolPool.put(e)},getScrollableGroups:function(){var t=[],e=this._currentSymbol;if(e){var i={objectList:[e.node],speedFactor:1.1,groupIndex:0};t.push(i)}return t},recycleObject:function(){},destroy:function(){var t=this._currentSymbol;t&&this.recycleSymbol(t),this._symbolPool.clear(),this._super()}});i.default=r,e.exports=i.default,cc._RF.pop()}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",GeneralBundle:"GeneralBundle"}],SystemModel:[function(t,e){"use strict";if(!cc._RF.push(e,"b91bafvFUJE37wdg0nq8dKp","SystemModel")){var i=function(t,e){var i=o();return function(t){return i[t-=294]}(t,e)},n=System[i(303)](i(295)+i(307)+i(302)+"rk")[i(300)+i(304)+i(299)+"el"];e[i(294)+i(297)+"s"][i(301)+i(309)+"t"]=n,e[i(294)+i(297)+"s"][i(305)+i(306)+i(298)+"e"]=!0,cc._RF.pop()}function o(){var t=["exp","bvf","isB","ort","dul","Mod","Sys","def","ewo","get","tem","__e","sMo","ram","uil","aul","der"];return(o=function(){return t})()}},{}],TabBarController:[function(t,e,i){"use strict";if(!cc._RF.push(e,"b2f70mOAvdOxZtKjfDu/lHM","TabBarController")){Object.defineProperty(i,"__esModule",{value:!0});var n=t("TabBar"),o=t("TabBarItem"),a=t("TransitionContext"),s=t("ViewController"),r=cc._decorator,c=r.ccclass,l=r.property,h=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.content=void 0,e.tabBar=void 0,e.bottomNode=void 0,e.tabBarItemPrefab=void 0,e._tabBarItems=[],e._controllers=[],e._selectedController=void 0,e._selectedIndex=0,e._isOnTransistion=!1,e}return __extends(e,t),e.prototype.onLoad=function(){this._resizeContent(),this._resizeTabBar(),this._resizeBottomPlaceHolder(),this.node.on("size-changed",this._resize,this)},e.prototype.onEnable=function(){var t=this._selectedController;t&&(t.enabled=!0)},e.prototype.onDisable=function(){var t=this._selectedController;t&&(t.enabled=!1)},e.prototype.viewWillAppear=function(t){var e=this._selectedController;e&&e.viewWillAppear(t)},e.prototype.viewDidAppear=function(t){var e=this._selectedController;e&&e.viewDidAppear(t)},e.prototype.viewWillDisappear=function(t){var e=this._selectedController;e&&e.viewWillDisappear(t)},e.prototype.viewDidDisappear=function(t){var e=this._selectedController;e&&e.viewDidDisappear(t)},e.prototype.viewDidLayoutSubviews=function(){},e.prototype.setControllers=function(t,e,i){if(void 0===e&&(e=0),void 0===i&&(i=!1),Array.isArray(t)){this._selectedIndex=e,this._controllers=t,this._reduceDrawCalls(),this._tabBarItems=[];for(var n=this._tabBarItems,a=0;a<t.length;a++){var s=t[a];s.node.parent=this.content,this._resizeController(a);var r=s.tabBarItem;if(!(r&&r instanceof o.default)){var c=s.title;(r=cc.instantiate(this.tabBarItemPrefab).getComponent(o.default)).init(c,void 0,void 0,a),s.tabBarItem=r}r.selectAction=this._selectTabAtIndex.bind(this,a,i),n.push(r),s.enabled=a===e}this.tabBar.setItems(n,e);var l=t[e];this._selectedController=l,l.viewWillAppear(!1),l.viewDidAppear(!1),l.tabBarItem&&l.tabBarItem.animFinish&&l.tabBarItem.animFinish(),this._moveContentToIndex(e)}},e.prototype.getSelectedController=function(){return this._selectedController},e.prototype.getSelectedTabBarItem=function(){return this.tabBar.getSelectedItem()},e.prototype.hideTabBar=function(){(this.tabBar.node.active||this.bottomNode.active)&&(this.tabBar.node.active=!1,this.bottomNode.active=!1,this._resize())},e.prototype.showTabBar=function(){this.tabBar.node.active&&this.bottomNode.active||(this.tabBar.node.active=!0,this.bottomNode.active=!0,this._resize())},e.prototype._resizeController=function(t){var e=this._controllers[t],i=this.content;if(e&&e.node.getContentSize()!==i.getContentSize()){var n=e.node,o=i.width,a=i.height,s=i.anchorX,r=i.anchorY,c=(n.anchorX-s+t)*o,l=(n.anchorY-r)*a;n.setContentSize(o,a),n.setPosition(c,l)}},e.prototype._getBottomSafeArea=function(){return!0===this.tabBar.node.active?this.safeAreaInsets.bottom:0},e.prototype._resizeContent=function(){var t=this._getBottomSafeArea(),e=this.node,i=e.width,n=e.height;this.content.setContentSize(i,n-t)},e.prototype._resizeTabBar=function(){var t=this._getBottomSafeArea(),e=this.node.height;this.tabBar.node.y=t+this.tabBar.node.height-e},e.prototype._resizeBottomPlaceHolder=function(){if(this.tabBar.node.active){var t=this._getBottomSafeArea(),e=this.node,i=e.width,n=e.height,o=this.bottomNode;o.setContentSize(i,t),o.y=t-n}},e.prototype._resize=function(){var t=this._selectedIndex;this._resizeContent(),this._resizeTabBar(),this._resizeBottomPlaceHolder(),this._resizeController(t)},e.prototype._moveContentToIndex=function(t){this.content.x=-t*this.content.width},e.prototype._selectTabAtIndex=function(t,e){if(!this._isOnTransistion&&t!==this._selectedIndex){var i=this._controllers;if(!(t>=i.length)){var n=this._selectedController,o=i[t];if(void 0!==n&&void 0!==o)if(this._handleSwitchNavigationDrawCalls(t),this._isOnTransistion=!0,this.tabBar.selectItemAtIndex(t),this._selectedIndex=t,this._selectedController=o,o.setSelect&&o.setSelect(),o.enabled=!0,n.viewWillDisappear&&n.viewWillDisappear(e),o.viewWillAppear&&o.viewWillAppear(e),e)if(this.tabBarControllerDelegate&&(this.tabBarControllerDelegate.transitionAnimationForTabBarToRight||this.tabBarControllerDelegate.transitionAnimationForTabBarToLeft)){var a;(a=t>this._selectedIndex?this.tabBarControllerDelegate.transitionAnimationForTabBarToRight():this.tabBarControllerDelegate.transitionAnimationForTabBarToLeft())?this._playCustomSelectTabAnim(a,n,o,t):(this._moveContentToIndex(t),this._playDefaultSelectTabAnim(n,o,t))}else this._moveContentToIndex(t),this._playDefaultSelectTabAnim(n,o,t);else this._moveContentToIndex(t),this._selectTabBarFinish(n,o,t,!1)}}},e.prototype._playCustomSelectTabAnim=function(t,e,i,n){var o=this,s=new a.TransitionContext(e,i,e.view,i.view,this.content);t.animateTransition(s,function(){o._selectTabBarFinish(e,i,n,!0)})},e.prototype._playDefaultSelectTabAnim=function(t,e,i){var n=this,o=e.navigator?e.navigator:e;o.node.opacity=0;var a=cc.sequence(cc.fadeTo(1,255).easing(cc.easeSineIn()),cc.callFunc(function(){o.node.opacity=255,n._selectTabBarFinish(t,e,i,!0)}));o.node.runAction(a)},e.prototype._selectTabBarFinish=function(t,e,i,n){e.tabBarItem&&e.tabBarItem.animFinish&&e.tabBarItem.animFinish(),e&&e.viewDidAppear(n),t&&t.viewDidDisappear(n),t&&(t.enabled=!1),this._isOnTransistion=!1,this._reduceDrawCalls()},e.prototype._handleSwitchNavigationDrawCalls=function(t){var e,i,n=this._selectedIndex,o=this._controllers;n>t?(e=t,i=n):(e=n,i=t);for(var a=e;a<=i;a++)o[a].node.opacity=255},e.prototype._reduceDrawCalls=function(){for(var t=this._selectedIndex,e=this._controllers,i=0;i<e.length;i++)i!==t&&(e[i].node.opacity=0)},__decorate([l(cc.Node)],e.prototype,"content",void 0),__decorate([l(n.default)],e.prototype,"tabBar",void 0),__decorate([l(cc.Node)],e.prototype,"bottomNode",void 0),__decorate([l(cc.Prefab)],e.prototype,"tabBarItemPrefab",void 0),__decorate([c],e)}(s.default);i.default=h,cc._RF.pop()}},{TabBar:"TabBar",TabBarItem:"TabBarItem",TransitionContext:"TransitionContext",ViewController:"ViewController"}],TabBarItem:[function(t,e,i){"use strict";if(!cc._RF.push(e,"cd0fbm4LQBEVL5LzWleSsGj","TabBarItem")){Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator,o=n.ccclass,a=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.icon=void 0,e.titleLabel=void 0,e.tintColor=void 0,e.selectedTintColor=void 0,e._iconImage=void 0,e._isSelected=void 0,e._selectedIconImage=void 0,e._tag=void 0,e._selectAction=void 0,e}return __extends(e,t),Object.defineProperty(e.prototype,"tag",{get:function(){return this._tag},set:function(t){this._tag=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"selectAction",{set:function(t){this._selectAction=t},enumerable:!1,configurable:!0}),e.prototype.init=function(t,e,i,n){t&&(this.titleLabel.string=t),e&&(this.icon.spriteFrame=e,this._iconImage=e),this._selectedIconImage=i,this._tag=n,this._isSelected=!1},e.prototype.setupTouchAction=function(){this.node.on(cc.Node.EventType.TOUCH_START,this._onTouchStart,this),this.node.on(cc.Node.EventType.TOUCH_END,this._onTouchEnd,this)},e.prototype.setTintColor=function(t){this._isSelected||(this.icon.node.color=t,this.titleLabel.node.color=t),this.tintColor=t},e.prototype.setSelectedTintColor=function(t){this._isSelected&&(this.icon.node.color=t,this.titleLabel.node.color=t),this.selectedTintColor=t},e.prototype.setTitleAttributes=function(t){var e=t.getFontSize(),i=t.getNormalFontColor(),n=t.getFontName(),o=t.getLineHeight();this.titleLabel.fontSize=e,this.titleLabel.font=n,this.titleLabel.node.color=i,this.titleLabel.lineHeight=o},e.prototype.setSelect=function(){var t=this.selectedTintColor;this.icon.node.color=t,this.titleLabel.node.color=t,this.icon.spriteFrame=this._selectedIconImage,this._isSelected=!0},e.prototype.setUnselected=function(){var t=this.tintColor;this.icon.node.color=t,this.titleLabel.node.color=t,this.icon.spriteFrame=this._iconImage,this._isSelected=!1},e.prototype.animFinish=function(){},e.prototype._onTouchStart=function(){},e.prototype._onTouchEnd=function(t){t.stopPropagation(),this._selectAction&&this._selectAction()},__decorate([a(cc.Sprite)],e.prototype,"icon",void 0),__decorate([a(cc.Label)],e.prototype,"titleLabel",void 0),__decorate([a(cc.Color)],e.prototype,"tintColor",void 0),__decorate([a(cc.Color)],e.prototype,"selectedTintColor",void 0),__decorate([o],e)}(cc.Component);i.default=s,cc._RF.pop()}},{}],TabBar:[function(t,e,i){"use strict";if(!cc._RF.push(e,"b8f7436fYdNnryqvtnVtqIL","TabBar")){Object.defineProperty(i,"__esModule",{value:!0});var n=cc._decorator,o=n.ccclass,a=n.property,s=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.background=void 0,e.itemsContainer=void 0,e.shadow=void 0,e._tabBarItems=[],e._selectedTabBarItem=void 0,e}return __extends(e,t),e.prototype.onLoad=function(){var t=this.node.width,e=this.node.height;this.background.node.setContentSize(t,e),this.shadow.node.width=t,this.itemsContainer.setContentSize(t,e)},e.prototype.setItems=function(t,e){var i=t.length;if(i&&!(i<1)){for(var n=0;n<i;n++){var o=t[n];o.setupTouchAction(),o.node.parent=this.itemsContainer}var a=t[e];a.setSelect(),this._selectedTabBarItem=a,this._tabBarItems=t}},e.prototype.getItems=function(){return this._tabBarItems},e.prototype.selectItemAtIndex=function(t){if(!(t>=this._tabBarItems.length)){var e=this._selectedTabBarItem;e&&e.setUnselected();var i=this._tabBarItems[t];i.setSelect(),this._selectedTabBarItem=i}},e.prototype.getSelectedItem=function(){return this._selectedTabBarItem},e.prototype.setTintColor=function(t){for(var e=this._tabBarItems,i=0;i<e.length;i++)e[i].setTintColor(t)},e.prototype.setSelectedTintColor=function(t){for(var e=this._tabBarItems,i=0;i<e.length;i++)e[i].setSelectedTintColor(t)},e.prototype.setTitleAttributes=function(t){for(var e=this._tabBarItems,i=0;i<e.length;i++)e[i].setTitleAttributes(t)},e.prototype.setBackgroundImage=function(t,e){t?this.background.spriteFrame=t:e&&(this.background.node.color=e)},__decorate([a(cc.Sprite)],e.prototype,"background",void 0),__decorate([a(cc.Node)],e.prototype,"itemsContainer",void 0),__decorate([a(cc.Sprite)],e.prototype,"shadow",void 0),__decorate([o],e)}(cc.Component);i.default=s,cc._RF.pop()}},{}],TimedWinRollBaseController:[function(t,e,i){"use strict";if(!cc._RF.push(e,"12aa3hO3pdL6oUvYmprts/7","TimedWinRollBaseController")){i.__esModule=!0,i.default=void 0;var n,o=(n=t("NumberDisplayInterface"))&&n.__esModule?n:{default:n},a={big:0,mega:1,superMega:2,overflow:3},s=cc.Class({extends:cc.Component,properties:{displayController:{default:null,type:o.default,override:!0},_accumulatedDt:0,_previousThresholdTime:0,_maxValue:-1,_numberReachIndex:0,_numberCallbackList:[],_onNumReachedCallback:void 0,_onTimeReachedCallback:void 0,_lerp:void 0,_isRolling:!1,_winType:-1,_winStep:-1,_rollTime:[],_rollTo:[],_winThreshold:void 0,_winDuration:void 0,_totalWinDuration:[]},update:function(){},setNumbersCallback:function(t){this._numberCallbackList=t},setTimeCallback:function(t,e){this._timeCallbackList=t,this._onTimeReachedCallback=e},init:function(t){this._winThreshold=[t.bigWinThreshold,t.megaWinThreshold,t.superMegaWinThreshold],this._winDuration=[t.bigWinDuration,t.megaWinDuration,t.superMegaWinDuration],this._maxValue=t.totalWin,this._totalWinDuration=[];for(var e=0;e<3;e++)this._totalWinDuration[e]=this._winDuration[e].reduce(function(t,e){return t+e});this._calculatePlayTime()},getWinType:function(){return{winStyle:this._winType,winStep:this._winStep}},play:function(t){this._parametersSanityCheck()&&(this._accumulatedDt=0,this._numberReachIndex=0,this._previousThresholdTime=0,this._onNumReachedCallback=t,this.displayController.clear(),this.update=this._doRollNumber,this._isRolling=!0)},skip:function(){var t=this;this._isRolling&&(this.stop(!1),this.displayController.displayNumber(this._maxValue,!0,function(){t._onNumReachedCallback&&t._onNumReachedCallback(t._maxValue)}))},stop:function(t){void 0===t&&(t=!0),t&&(this.displayController.clear(),this._onNumReachedCallback=void 0,this._onTimeReachedCallback=void 0),this._accumulatedDt=0,this._isRolling=!1,this.update=function(){}},_parametersSanityCheck:function(){return!this._numberCallbackList||this._numberCallbackList.length,!(!this._winDuration||!this._winThreshold||this._maxValue<0)},_calculatePlayTime:function(){var t=this._maxValue,e=this._winThreshold,i=this._totalWinDuration,n=a,o=e[n.superMega]+(e[n.superMega]-e[n.mega])*i[n.superMega]/i[n.mega],s=[],c=[];t<e[n.mega]?(this._winType=n.big,c[n.big]=t,s[n.big]=this._calibrateWinTime(t,0,e[n.mega],n.big,0)):t<e[n.superMega]?(this._winType=n.mega,c[n.big]=e[n.mega],s[n.big]=i[n.big],c[n.mega]=t,s[n.mega]=this._calibrateWinTime(t,e[n.mega],e[n.superMega],n.mega,e[n.mega]/i[n.big])):t<o?(this._winType=n.superMega,c[n.big]=e[n.mega],s[n.big]=i[n.big],c[n.mega]=e[n.superMega],s[n.mega]=i[n.mega],c[n.superMega]=t,s[n.superMega]=this._calibrateWinTime(t,e[n.superMega],o,n.superMega,(e[n.superMega]-e[n.mega])/i[n.mega])):(this._winType=n.overflow,this._winStep=0,c[n.big]=e[n.mega],c[n.mega]=e[n.superMega],c[n.superMega]=t,s=i),this._rollTime=s,this._rollTo=c,this._lerp=r(0,this._rollTo[0])},_calibrateWinTime:function(t,e,i,n,o){for(var a=this._totalWinDuration[n],s=this._winDuration[n],r=(t-e)/(i-e),c=0,l=0;l<s.length;l++){var h=c+s[l];if(r<h/a)return o?(t-e)/h>=o?(this._winStep=l+1,h):(this._winStep=l,c):c&&r<(h+c)/2/a?(this._winStep=l,c):(this._winStep=l+1,h);c=h}return c},_doRollNumber:function(t){var e,i,n,o,s,c=(this._accumulatedDt+=t)-this._previousThresholdTime,l=this._rollTime[0];if(c<l)c+=t*(.2*Math.random()-.1),e=this._lerp.evaluate(c/l);else{var h,u;do{h=this._rollTime.shift(),l=this._rollTime[0],u=this._rollTo.shift(),this._previousThresholdTime+=h,c-=h}while(void 0!==l&&c>=l);if(void 0===l)this._lerp=void 0,this._isRolling=!1,this.update=function(){},e=this._maxValue;else{if(this._winType===a.overflow&&1===this._rollTime.length){var d=this._lerp.getDistance()/h;this._lerp=(i=u,n=this._rollTo[0],s=n-i-(o=d*l),{evaluate:function(t){return i+o*t+s*Math.pow(2,20*(t-1))}})}else this._lerp=r(u,this._rollTo[0]);c+=t*(.2*Math.random()-.1),e=this._lerp.evaluate(c/l)}}this._updateNumber(e),this._onTimeReachedCallback&&this._checkTimeReach(this._accumulatedDt)},_updateNumber:function(t){var e=this._numberCallbackList,i=this._maxValue,n=t,o=!1,a=[],s=this._onNumReachedCallback;if(void 0!==e)for(;e.length&&e[0]<=t;){var r=e.shift();a.push(r)}i<=t&&(this.stop(!1),n=i,o=!0,a.push(i),this._onNumReachedCallback=void 0),this.displayController.displayNumber(n,o,function(){a.forEach(function(t){s&&s(t)})})},_checkTimeReach:function(t){var e=this._timeCallbackList;if(void 0!==e&&e.length&&e[0]<=t){var i=e.shift();this._onTimeReachedCallback(i)}}});i.default=s,e.exports=i.default,cc._RF.pop()}function r(t,e){var i=e-t;return{evaluate:function(e){return t+i*e},getDistance:function(){return i}}}},{NumberDisplayInterface:"NumberDisplayInterface"}],TimedWinRollController:[function(t,e,i){"use strict";if(!cc._RF.push(e,"bbc6c4tBJdFQ76rTU5OtO2a","TimedWinRollController")){i.__esModule=!0,i.default=void 0;var n=s(t("NumberDisplayController")),o=s(t("TimedWinRollBaseController")),a=cc.Class({extends:o.default,properties:{displayController:{default:null,type:n.default,override:!0}}});i.default=a,e.exports=i.default,cc._RF.pop()}function s(t){return t&&t.__esModule?t:{default:t}}},{NumberDisplayController:"NumberDisplayController",TimedWinRollBaseController:"TimedWinRollBaseController"}],TimedWinRollCurveController:[function(t,e,i){"use strict";if(!cc._RF.push(e,"ac3b0Ey1QlMtZGe7RPoOsSH","TimedWinRollCurveController")){i.__esModule=!0,i.default=void 0;var n=s(t("NumberCurvedController")),o=s(t("TimedWinRollBaseController")),a=cc.Class({extends:o.default,properties:{displayController:{default:null,type:n.default,override:!0}}});i.default=a,e.exports=i.default,cc._RF.pop()}function s(t){return t&&t.__esModule?t:{default:t}}},{NumberCurvedController:"NumberCurvedController",TimedWinRollBaseController:"TimedWinRollBaseController"}],TimedWinRollLabelController:[function(t,e,i){"use strict";if(!cc._RF.push(e,"aa2360L0o1DHbvfzQuldvyg","TimedWinRollLabelController")){i.__esModule=!0,i.default=void 0;var n=s(t("NumberLabelController")),o=s(t("TimedWinRollBaseController")),a=cc.Class({extends:o.default,properties:{displayController:{default:null,type:n.default,override:!0}}});i.default=a,e.exports=i.default,cc._RF.pop()}function s(t){return t&&t.__esModule?t:{default:t}}},{NumberLabelController:"NumberLabelController",TimedWinRollBaseController:"TimedWinRollBaseController"}],TransactionModel:[function(t,e){"use strict";if(!cc._RF.push(e,"a5473Phv65OKq64k7r2ALUU","TransactionModel")){var i=function(t,e){var i=o();return function(t){return i[t-=343]}(t,e)},n=System[i(360)](i(347)+i(349)+i(355)+"rk")[i(348)+i(353)+i(358)+i(350)+i(359)+"l"];e[i(354)+i(346)+"s"][i(361)+i(344)+"t"]=n,e[i(354)+i(346)+"s"][i(352)+i(357)+i(356)+"e"]=!0,cc._RF.pop()}function o(){var t=["uil","aul","isB","ort","bvf","Tra","ram","onM","der","__e","nsa","exp","ewo","dul","sMo","cti","ode","get","def"];return(o=function(){return t})()}},{}],TransactionStateMachineHandler:[function(t,e){"use strict";if(!cc._RF.push(e,"88aa708sb5NDZ/jazdExsuw","TransactionStateMachineHandler")){var i=function(t,e){var i=a();return function(t){return i[t-=344]}(t,e)},n=System[i(359)](i(365)+i(369)+i(353)+"rk")[i(358)+i(362)+i(367)+i(349)+i(364)+i(357)+i(351)+i(347)+i(355)+i(368)];for(var o in n)n[i(363)+i(356)+i(354)+i(360)+"ty"](o)&&(e[i(366)+i(361)+"s"][o]=n[o]);e[i(366)+i(361)+"s"][i(345)+i(344)+i(348)+"e"]=!0,cc._RF.pop()}function a(){var t=["sMo","__e","der","neH","dul","onS","isB","chi","uil","ewo","Pro","and","Own","eMa","Tra","get","per","ort","nsa","has","tat","bvf","exp","cti","ler","ram"];return(a=function(){return t})()}},{}],TransitionContext:[function(t,e,i){"use strict";if(!cc._RF.push(e,"9fd10r5SF9AY7ViKPJFg+fR","TransitionContext")){Object.defineProperty(i,"__esModule",{value:!0}),i.TransitionContext=void 0;var n=function(){function t(t,e,i,n,o){this._fromController=t,this._toController=e,this._fromView=i,this._toView=n,this._container=o}return t.prototype.getFromController=function(){return this._fromController},t.prototype.getToController=function(){return this._toController},t.prototype.getFromView=function(){return this._fromView},t.prototype.getToView=function(){return this._toView},t.prototype.getContainer=function(){return this._container},t}();i.TransitionContext=n,cc._RF.pop()}},{}],TransitionEnum:[function(t,e,i){"use strict";cc._RF.push(e,"ba325vamDZMr5FAGrgPtoRH","TransitionEnum")||(Object.defineProperty(i,"__esModule",{value:!0}),i.NavigationControllerOperation=void 0,function(t){t[t.None=0]="None",t[t.Push=1]="Push",t[t.Pop=2]="Pop"}(i.NavigationControllerOperation||(i.NavigationControllerOperation={})),cc._RF.pop())},{}],TreeMonsterSprite:[function(t,e,i){"use strict";if(!cc._RF.push(e,"a2993y6OVFC451k07g+N0BE","TreeMonsterSprite")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Component,properties:{defaultFrame:cc.SpriteFrame},onLoad:function(){this._sprite=this.getComponent(cc.Sprite)},reset:function(){this._sprite&&(this._sprite.spriteFrame=this.defaultFrame)},spriteAnimEnded:function(t){this.didAnimEnd&&this.didAnimEnd(t)}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],TreeMonster:[function(t,e,i){"use strict";if(!cc._RF.push(e,"ddacfHjWM9IzbII7oEcYWEq","TreeMonster")){i.__esModule=!0,i.default=void 0;var n=d(t("BaseEnemyActor")),o=d(t("TreeMonsterSprite")),a=t("Enum"),s=d(t("AudioLibrary")),r=t("AssetManager"),c=t("ObstacleBundle"),l=t("Utils"),h=shell.I18n,u=cc.Class({extends:n.default,properties:{sprite:o.default,atk1Animation:cc.Animation,atk2Animation:cc.Animation,atk3Animation:cc.Animation},onLoad:function(){var t=r.assetManager.getAsset(c.TreantAudioBundle);this.atk1Sound=t.treeNormalAttack,this.atk2Sound=t.treeScissorAttack,this.atk3Sound=t.treeToxicAttack,this.dieSound=t.treeDie,this._super(),this._setupAnimations(),this._meetCat=["CatDialog.EncounteredTreantSpeech"]},start:function(){this._setupSpine()},_setupSpine:function(){this.spine.node.active=!0,this.spine.setAnimation(0,"idle",!0)},_setupAnimations:function(){this._atk1AnimNode=this.atk1Animation.node,this._atk1AnimNode.active=!1,this._atk2AnimNode=this.atk2Animation.node,this._atk2AnimNode.active=!1,this._atk3AnimNode=this.atk3Animation.node,this._atk3AnimNode.active=!1},_getEnemyType:function(){return a.EnemyType.tree_monster},_getEmoticonPosition:function(t){var e;switch(t){case a.EmoticonStyle.Sweat:e=cc.v2(.2*this.node.getContentSize().width,0*this.node.getContentSize().height);break;case a.EmoticonStyle.Shock:e=cc.v2(.35*this.node.getContentSize().width,.1*this.node.getContentSize().height);break;case a.EmoticonStyle.ShockExpMarkLv1:case a.EmoticonStyle.ShockExpMarkLv2:case a.EmoticonStyle.ShockExpMarkLv3:e=cc.v2(-.35*this.node.getContentSize().width,0*this.node.getContentSize().height)}return e},getIdleAnim:function(){return"idle"},getHitAnim:function(){return"hit"},getDieAnim:function(){return"dead"},getDeflectAnim:function(){return"deflect"},getApproachRange:function(){return 640},_executeAttack:function(t,e,i){if(t.isDead())this.attack1(t,i);else{var n=(0,l.randomInt)(0,2);0===n?this.attack1(t,i):1===n?this.attack2(t,i):this.attack3(t,i)}},_cancelEffects:function(){this.atk1Animation.stop(),this._atk1AnimNode.active=!1},_switchToSprite:function(t){this.sprite.node.active=t,this.spine.node.active=!t,this._isAnimating=t},attack1:function(t,e){var i=this,n=t.node,o=t.isDead()?n.x+n.width/2+250+100:n.x+n.width/2+250,a=cc.v2(o,n.y),r={moveSpeedIn:.1,moveSpeedOut:.3,moveDeflectSpeedOut:.2,minDistance:50,attackHits:1,animFunc:this._attack1Anim.bind(this)};this.spineAttack([t],a,r,function(){i._atk1AnimNode.active=!1,i.atk1Animation.stop(),e&&e()}),s.default.playEffect(this.atk1Sound)},_attack1Anim:function(){var t=this.spine;"atk1"!==t.animation&&(this._atk1AnimNode.active=!0,this.atk1Animation.play("tree_atk_1"),t.setAnimation(0,"atk1",!1),t.addAnimation(0,"idle",!0,0))},attack2:function(t,e){var i=this;this._attack2Anim(),s.default.playEffect(this.atk2Sound);var n=this._data.damage;this._delayAction(.4,function(){t.damaged(n,a.AttackType.None)}),this._delayAction(1.1,function(){i._atk2AnimNode.active=!1,i.spine.timeScale=1,i.atk2Animation.stop(),e&&e()})},_attack2Anim:function(){var t=this.spine;"atk2"!==t.animation&&(this._atk2AnimNode.active=!0,this.atk2Animation.play("tree_atk_2"),t.timeScale=1.3,t.setAnimation(0,"atk2",!1),t.addAnimation(0,"idle",!0,0))},attack3:function(t,e){var i=this,n=t.node,o=cc.v2(n.x+n.width/2+0,n.y),a={moveSpeedIn:.1,moveSpeedOut:.2,minDistance:50,attackHits:1,animFunc:this._attack3Anim.bind(this)};this.spineAttack([t],o,a,function(){i._atk3AnimNode.active=!1,i.atk3Animation.stop(),e&&e()}),s.default.playEffect(this.atk3Sound)},_attack3Anim:function(){var t=this.spine;"atk3"!==t.animation&&(this._atk3AnimNode.active=!0,this.atk3Animation.play("tree_atk_3"),t.setAnimation(0,"atk3",!1),t.addAnimation(0,"idle",!0,0))},restoreActorState:function(){this._super(),this._switchToSprite(!0),this._hasEntered=!1,this.sprite.reset()},getMeetDialogCat:function(){var t=this._meetCat.concat(n.default._meetMonster),e=(0,l.randomInt)(0,t.length-1);return h.t(t[e])},_playDieSound:function(){s.default.playEffect(this.dieSound)},destroy:function(){this.sprite.didAnimEnd=void 0,this._super()}});i.default=u,e.exports=i.default,cc._RF.pop()}function d(t){return t&&t.__esModule?t:{default:t}}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",BaseEnemyActor:"BaseEnemyActor",Enum:"Enum",ObstacleBundle:"ObstacleBundle",TreeMonsterSprite:"TreeMonsterSprite",Utils:"Utils"}],TweaksConfig:[function(t,e){"use strict";cc._RF.push(e,"a67eafUTwdFtIFqkeCft4rQ","TweaksConfig")||cc._RF.pop()},{CreatorTweaks:"CreatorTweaks",GamePreference:"GamePreference",Printer:"Printer",QuitGame:"QuitGame",RtConfig:"RtConfig",TweaksData:"TweaksData",Utils:"Utils"}],TweaksConfiguration:[function(t,e){"use strict";cc._RF.push(e,"f200aty5tBOz7NMCd27uFBE","TweaksConfiguration")||cc._RF.pop()},{CreatorTweaks:"CreatorTweaks",TweaksConfig:"TweaksConfig",TweaksData:"TweaksData"}],TweaksData:[function(t,e){"use strict";cc._RF.push(e,"b0089xUdQRLiZXeZmKk7dCG","TweaksData")||(e.exports={},e.exports.__esModule=!0,cc._RF.pop())},{}],UIAppearanceHelper:[function(t,e,i){"use strict";if(!cc._RF.push(e,"f4549VlHlxOL4w7V7h4rhZg","UIAppearanceHelper")){Object.defineProperty(i,"__esModule",{value:!0}),i.uiAppearanceHelper=i.getOffsetY=void 0;var n=t("BACKUP_DATA"),o=function(){function t(){}return t.prototype.interpret=function(t){return t[0]},t}(),a=function(){function t(){}return t.prototype.interpret=function(t){return new cc.Color(t[0],t[1],t[2],t[3])},t}(),s=cc._decorator.ccclass,r=function(t){function e(){var e=t.call(this)||this;e._uiAppearance=void 0;var i=e._uiAppearance=shell.uiAppearance;return i&&(i.registerInterpreter("font",new o),i.registerInterpreter("value",new o),i.registerInterpreter("path",new o),i.registerInterpreter("color",new a),i.registerInterpreter("classname",new o)),e}return __extends(e,t),e.prototype.v=function(t){var e=this._uiAppearance&&this._uiAppearance.v(t);return null===e&&(e=f(t)),e},e.prototype.unregisterInterpreter=function(t){return this._uiAppearance&&this._uiAppearance.unregisterInterpreter(t)},__decorate([s("UIAppearanceHelper")],e)}(cc.Object),c=Object.freeze({windows:{native:4,non_native:3},macos:{native:4,non_native:5},ios:{native:2,non_native:2},android:{native:5,non_native:4}}),l=Object.freeze({windows:{native:0,non_native:5},macos:{native:2,non_native:3},ios:{native:0,non_native:3},android:{native:4,non_native:4}}),h=shell.I18n.currentLocale,u=shell.getBrowserBaseType().toLowerCase(),d="zh"===h||"ko"===h||"ja"===h?l:c;i.getOffsetY=function(){switch(cc.sys.os){case cc.sys.OS_WINDOWS:return"ie"===u||"edge"===u?d.windows.native:d.windows.non_native;case cc.sys.OS_ANDROID:return"chrome"===u?d.android.native:d.android.non_native;case cc.sys.OS_OSX:return"safari"===u?d.macos.native:d.macos.non_native;case cc.sys.OS_IOS:return"mobile safari"===u?d.ios.native:d.ios.non_native;default:return d.macos.non_native}};var p=new r;i.uiAppearanceHelper=p,cc._RF.pop()}function f(t){for(var e,i=t.split("."),o=0,a=i.length;o<a;o++){var s=i[o];if(void 0===(e=e&&e[s]||n.default[s]))return null}return e}},{BACKUP_DATA:"BACKUP_DATA"}],UIKitUtils:[function(t,e,i){"use strict";function n(){return cc.sys.os===cc.sys.OS_IOS}cc._RF.push(e,"b3045XdzRhDNrJLCqWLZ6eT","UIKitUtils")||(Object.defineProperty(i,"__esModule",{value:!0}),i.isNotBrowserMode=i.deviceHasNotch=i.isIphoneX=i.isIphone=void 0,i.isIphone=n,i.isIphoneX=function(){var t=cc.view.getFrameSize();return n()&&(812===t.width&&375===t.height||375===t.width&&812===t.height)},i.deviceHasNotch=function(){return shell.environment.hasNotch()},i.isNotBrowserMode=function(){return window.navigator.standalone||"app"===shell.getEnvironment()},cc._RF.pop())},{}],UIKit:[function(t,e,i){"use strict";cc._RF.push(e,"cfcacQ0hpxOzKvh1YNNRBbk","UIKit")||(Object.defineProperty(i,"__esModule",{value:!0}),i.safeArea=i.TabBarConfigs=i.NavigationConfigs=void 0,i.NavigationConfigs={bar:{landscape:{height:139.5,item_space_x:48},portrait:{height:186,item_space_x:48}}},i.TabBarConfigs={bar:{landscape:{height:180},portrait:{height:180}}},i.safeArea=Object.freeze({iphone_x:{top:80,left:0,bottom:102,right:0},iphone:{top:50,left:0,bottom:0,right:0},normal:{top:0,left:0,bottom:0,right:0}}),cc._RF.pop())},{}],UIStateMachine:[function(t,e,i){"use strict";if(!cc._RF.push(e,"91c7b/nOD9OmZlFgP7hq/6C","UIStateMachine")){Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){this._states=[],this._bindedEvaluateState=this.evaluateState.bind(this)}return Object.defineProperty(t.prototype,"exitAppStateCallback",{set:function(t){this._exitAppStateCallback=t},enumerable:!1,configurable:!0}),t.prototype.evaluateState=function(t){var e=this._states[t.to];if(e){var i=this._currentRunningState=new e,n={from:t.from,completeCallback:this._bindedEvaluateState},o=this._getPoolCallback();return i.setControllerPool&&i.setControllerPool(o),void i.run(n)}var a=this._exitAppStateCallback;this._exitAppStateCallback=void 0,a&&a()},t.prototype.setupUIState=function(t){this._states=t},t.prototype.setGetpoolCallback=function(t){this._getPoolCallback=t},t.prototype.eventBroadcaster=function(t,e){var i=this._currentRunningState;i&&i.eventDispatcher&&i.eventDispatcher(t,e)},t}();i.default=n,cc._RF.pop()}},{}],UIState:[function(t,e,i){"use strict";if(!cc._RF.push(e,"d3cbcNval1KGZio7QatvHK/","UIState")){Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){this.stateName="",this.controllerPool=void 0,this.receiveEvent=!0,this._isRunning=!1}return Object.defineProperty(t.prototype,"isRunning",{get:function(){return this._isRunning},enumerable:!1,configurable:!0}),t.prototype.run=function(t){this._isRunning=!0,this._completeCallback=t.completeCallback,this.onStateRun(this._onStateComplete.bind(this))},t.prototype._onStateComplete=function(){if(this._completeCallback){this._isRunning=!1;var t=this.getEndStateConfig();this.cleanUpState(),this.controllerPool=void 0;var e=this._completeCallback;this._completeCallback=void 0,e&&e(t)}},t.prototype.setControllerPool=function(t){this.controllerPool=t},t.prototype.onStateRun=function(t){t&&t()},t.prototype.eventDispatcher=function(t,e){this.receiveEvent&&this.stateEventDispatcher(t,e)},t.prototype.getEndStateConfig=function(){throw Error("UIState : getEndStateConfig is not overwritten ! happen on state :"+this.stateName)},t.prototype.cleanUpState=function(){},t}();i.default=n,cc._RF.pop()}},{}],Utils:[function(t,e){"use strict";if(!cc._RF.push(e,"0bae8yw0vNOe5leu2IYM+mg","Utils")){var i=function(t,e){var i=r();return function(t){return i[t-=391]}(t,e)},n={};n[i(427)+i(392)+i(429)+i(486)+i(407)+"e"]=i(427)+i(392)+i(487)+i(477)+i(490)+i(458),n[i(427)+i(392)+i(429)+i(486)+i(407)+i(447)]=i(427)+i(392)+i(487)+i(477)+i(490)+i(458)+"AR",n[i(394)+i(441)+i(466)+i(443)+"os"]=i(394)+i(441)+i(466)+i(443)+i(449)+i(462)+"n",n[i(394)+i(441)+i(466)+i(400)+i(474)]=i(394)+i(441)+i(466)+i(400),n[i(394)+i(441)+i(466)+i(422)+i(474)]=i(394)+i(441)+i(466)+i(422),n[i(428)+i(441)+i(466)+i(443)+"os"]=i(428)+i(441)+i(466)+i(443)+i(449)+i(462)+"n",n[i(428)+i(441)+i(466)+i(400)+i(474)]=i(428)+i(441)+i(466)+i(400),n[i(428)+i(441)+i(466)+i(422)+i(474)]=i(428)+i(441)+i(466)+i(422),n[i(431)+i(398)+i(481)+i(488)+i(472)+i(415)+"t"]=i(431)+i(398)+i(481)+i(446)+i(415)+"t",n[i(394)+i(440)+i(491)+i(406)+i(419)+i(437)+i(456)+i(436)]=i(394)+i(440)+i(491)+i(437)+i(456)+i(436),n[i(397)+"ay"]=i(397)+i(426)+i(484)+i(460)+"k",n[i(471)+i(430)+"t"]=i(471)+i(430)+i(452)+i(483)+i(421),n[i(435)+i(411)+"or"]=i(435)+i(411)+i(451)+i(484)+i(460)+"k",n[i(464)+i(482)+"ce"]=i(464)+i(482)+i(453)+i(484)+i(460)+"k",n[i(432)+"wn"]=i(432)+i(408)+i(484)+i(460)+"k",n[i(459)+i(463)+i(484)]=i(459)+i(463)+i(405)+i(473)+"ck",n[i(427)+i(438)+i(391)]=i(427)+i(454)+i(483)+i(421),n[i(468)+"er"]=i(468)+i(465)+i(484)+i(460)+"k",n[i(423)+"k"]=i(423)+i(461)+i(483)+i(421),n[i(418)+i(433)+"e"]=i(418)+i(433)+i(399)+i(483)+i(421),n[i(409)+i(469)+i(425)+i(414)+i(489)+"ro"]=i(409)+i(469)+i(403)+i(450)+"it",n[i(409)+i(469)+i(393)+i(434)+"me"]=i(409)+i(469)+i(393)+"e",n[i(424)+i(442)+i(487)+i(467)+"t"]=i(424)+"TL",n[i(394)+i(478)+i(492)+i(401)+i(413)+i(476)+"l"]=i(394)+i(480)+i(493)+"ol",n[i(394)+i(478)+i(492)+i(402)+i(444)+"in"]=i(394)+i(479)+i(417);var o=System[i(394)](i(412)+i(485))[i(416)+"ls"],a=function(t,e){var n=i,o={};for(var a in e)t[n(455)+n(448)+n(480)+n(470)+"ty"](a)?o[t[a]]=e[a]:o[a]=e[a];return o}(n,o);for(var s in a)e[i(457)+i(439)+"s"][s]=a[s];e[i(457)+i(439)+"s"][i(404)+i(396)+i(410)+"e"]=!0,null==o[i(475)+i(491)+i(437)+i(456)+i(436)]&&(e[i(457)+i(439)+"s"][i(475)+i(491)+i(437)+i(456)+i(436)]=a[i(394)+i(440)+i(491)+i(437)+i(456)+i(436)]()),cc._RF.pop()}function r(){var t=["ion","ver","Dat","get","uil","sMo","del","nsf","eCa","teX","onP","onO","Two","__e","Cal","Sim","pac","wnC","for","dul","ect","com","rot","din","ren","Uti","gin","obs","ple","der","ack","teY","tic","isR","Lea","ayC","con","set","tNo","eou","tra","spa","erv","eTi","sel","ler","Sch","dit","ort","Sha","Abs","igh","teP","rig","isB","oPa","eAR","Own","osi","Dig","orC","tCa","ceC","dCa","has","edu","exp","ace","wat","bac","kCa","tio","erf","seq","erC","olu","Lef","def","mat","per","tim","wPa","lba","Pos","sha","oco","Nod","Loc","Ori","Pro","erT","uen","llb","all","mon","deS","tTo","oNe","gZe","eSp","red","ati","toc"];return(r=function(){return t})()}},{}],VictoryGlare:[function(t,e,i){"use strict";if(!cc._RF.push(e,"f98992E4R9CvY31McCvMCik","VictoryGlare")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Component,properties:{sprite:cc.Sprite,spriteAnim:cc.Animation},play:function(){this.sprite.node.runAction(cc.tintTo(.2,255,255,255)),this.spriteAnim.play("victory_glare")},stop:function(){this.sprite.node.stopAllActions(),this.spriteAnim.stop(),this.sprite.node.runAction(cc.tintTo(.2,0,0,0))}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],VictoryPlayer:[function(t,e,i){"use strict";if(!cc._RF.push(e,"b4023HySZxAtKO3tsIpxDrj","VictoryPlayer")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Object,ctor:function(){this.generalLoader=void 0,this.effectLayer=void 0,this._victory=void 0},init:function(t,e,i,n){var o=cc.instantiate(this.victoryPrefab),a=this._victory=o.getComponent("Victory");o.y-=o.height/3-30,a.isHDVersion(t),a.init(e,i,n),this.effectLayer.addChild(o)},playVictoryEffect:function(t,e){this._victoryAppeared||(this._endCallback=e,this._victory.startAnimation(t),this._victoryAppeared=!0)},stopVictoryEffect:function(){var t=this;this._victoryAppeared&&(this._victory.stopAnimation(function(){var e=t._endCallback;e&&(t._endCallback=void 0,e())}),this._victoryAppeared=!1)},rollPoints:function(t){var e=this._victory;e&&e.rollPoints(t)},destroy:function(){this.effectLayer=void 0,this.victoryPrefab=void 0;var t=this._victory;if(this._victory=void 0,t){var e=t.node;t.destroy(),e.removeFromParent(),e.destroy()}this._super()}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],Victory:[function(t,e,i){"use strict";if(!cc._RF.push(e,"d4883BGPRlK8rI+p0UHPdTF","Victory")){i.__esModule=!0,i.default=void 0;var n=l(t("VictoryGlare")),o=t("Enum"),a=l(t("AudioLibrary")),s=t("AssetManager"),r=t("GeneralBundle"),c=cc.Class({extends:cc.Component,properties:{victoryGlare:n.default,rewards:cc.Sprite,victoryBannerWording:cc.Node,pointsContainer:cc.Node,shineParticle:cc.ParticleSystem,_isHDVer:cc.Boolean,_battleRewardImage:cc.SpriteFrame,_treasureRewardImage:cc.SpriteFrame},onLoad:function(){this._anim=this.getComponent(cc.Animation),this.pointsContainer.on("size-changed",this.resizeNumberIfNeeded,this)},init:function(t,e,i){this.victoryBannerWording.getComponent(cc.Sprite).spriteFrame=t,this._battleRewardImage=e,this._treasureRewardImage=i;var n=s.assetManager.getAsset(r.GeneralGameAudioBundle);this.victorySound=n.battleVictory},isHDVersion:function(t){this._isHDVer=t},startAnimation:function(t){a.default.fadeOutMusic(),this._victorySoundId=a.default.playEffect(this.victorySound,!1,.8),this.rewards.spriteFrame=t===o.RewardsType.BattleRewards?this._battleRewardImage:this._treasureRewardImage,this._anim.play("battle_victory")},stopAnimation:function(t){this._victorySoundId&&(a.default.stopEffect(this._victorySoundId,this.victorySound),this._victorySoundId=void 0),this.shineParticle.stopSystem(),this.victoryGlare.stop(),this._anim.stop(),this.unscheduleAllCallbacks(),this._endCallback=t,this._anim.play("battle_victory_disappear")},rollPoints:function(t){var e=t;this.pointsContainer.getComponent(cc.Label).string=e},clearRollPoints:function(){this.pointsContainer.getComponent(cc.Label).string="0.00"},resizeNumberIfNeeded:function(){var t=this.pointsContainer.width,e=400/t,i=t*this.pointsContainer.scaleX;isFinite(e)&&Math.round(i)>400&&(this.pointsContainer.scale=e)},didEndDisappear:function(){var t=this._endCallback;t&&(this._endCallback=void 0,t()),a.default.fadeInMusic(),this.clearRollPoints()},_removeNumber:function(t){t.removeFromParent()},glareBeginRotate:function(){this.scheduleOnce(this._glareBeginRotate,1)},_glareBeginRotate:function(){this.victoryGlare.play()},destroy:function(){this.node.stopAllActions(),this._super()},beginShowPoints:function(){this._isHDVer?(this.shineParticle.resetSystem(),this.shineParticle.node.active=!0):(this.shineParticle.stopSystem(),this.shineParticle.node.active=!1)}});i.default=c,e.exports=i.default,cc._RF.pop()}function l(t){return t&&t.__esModule?t:{default:t}}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",Enum:"Enum",GeneralBundle:"GeneralBundle",VictoryGlare:"VictoryGlare"}],ViewControllerTransition:[function(t,e,i){"use strict";if(!cc._RF.push(e,"8e202781KBBRIxVxe3NWQ9e","ViewControllerTransition")){Object.defineProperty(i,"__esModule",{value:!0});var n=function(){function t(){}return t.prototype.transitionDuration=function(){return.3},t.prototype.animateTransition=function(){},t.prototype.animationEnd=function(){},t}();i.default=n,cc._RF.pop()}},{}],ViewController:[function(t,e,i){"use strict";if(!cc._RF.push(e,"ef8ab8zk59N1LEX0M2uhmRU","ViewController")){Object.defineProperty(i,"__esModule",{value:!0});var n=t("UIKitUtils"),o=t("UIKit"),a=cc._decorator,s=a.ccclass,r=a.property,c=function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e.title="",e.leftItem=void 0,e.middleItem=void 0,e.rightItem=void 0,e._navigator=void 0,e._safeAreaInsets=void 0,e}return __extends(e,t),Object.defineProperty(e.prototype,"navigator",{get:function(){return this._navigator},set:function(t){this._navigator=t},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"view",{get:function(){return this.node},enumerable:!1,configurable:!0}),Object.defineProperty(e.prototype,"safeAreaInsets",{get:function(){var t,e,i,a;return this._safeAreaInsets||(this._safeAreaInsets=(t=n.deviceHasNotch(),e=n.isIphone(),i=n.isNotBrowserMode(),a=shell.is1959Supported,t&&i&&a?o.safeArea.iphone_x:t&&a?{top:o.safeArea.normal.top,left:o.safeArea.iphone_x.left,bottom:o.safeArea.iphone_x.bottom,right:o.safeArea.iphone_x.right}:e&&i?o.safeArea.iphone:o.safeArea.normal)),this._safeAreaInsets},enumerable:!1,configurable:!0}),e.prototype.onEnable=function(){},e.prototype.onDisable=function(){},e.prototype.viewWillAppear=function(){},e.prototype.viewDidAppear=function(){},e.prototype.viewWillDisappear=function(){},e.prototype.viewDidDisappear=function(){},e.prototype.viewWillLayoutSubviews=function(){},e.prototype.viewDidLayoutSubviews=function(){},__decorate([r(cc.String)],e.prototype,"title",void 0),__decorate([s],e)}(cc.Component);i.default=c,cc._RF.pop()}},{UIKit:"UIKit",UIKitUtils:"UIKitUtils"}],WalletHelper:[function(t,e,i){"use strict";if(!cc._RF.push(e,"1ca2eEH71NDaahNBchOvZgw","WalletHelper")){Object.defineProperty(i,"__esModule",{value:!0}),i.walletHelper=void 0;var n,o=t("SettingInfoFooterController"),a=t("Utils"),s=t("BVFramework");(function(t){t[t.INACTIVE=0]="INACTIVE",t[t.ACTIVE=1]="ACTIVE",t[t.EXPIRED=2]="EXPIRED",t[t.CONVERTED=3]="CONVERTED",t[t.COMPLETED=4]="COMPLETED",t[t.NEW=5]="NEW",t[t.DISCARDED=6]="DISCARDED",t[t.LOCKED=7]="LOCKED"})(n||(n={}));var r=shell.I18n,c=cc._decorator.ccclass,l=new(function(t){function e(){var e=null!==t&&t.apply(this,arguments)||this;return e._hasNewWallet=!1,e._pendingCheck=!1,e}return __extends(e,t),e.prototype.init=function(t){var e=this;this._getGameInfo=t.getGameInfo;var i=s.getGameContext();i.on("Game.TransactionInfoUpdated",function(t){if(e._lastSpinInfo=t.payload,e._pendingCheck){var i=e._lastSpinInfo;e.isFreeGameMode()?e._setFreeGameCounter(i.wfg.gc):e.isBonusGameMode()&&e._setRollOverBalance(i.wbn.bra),e._pendingCheck=!1}}),i.on("Game.HasNewWallet",function(){e._settingMenuFooter.activateWalletNotify(!0)})},e.prototype.processInitGameInfo=function(t,e){var i=this,o=t.dt.ls.si;this._hasNewWallet=t.dt.inwe;var a=function(t){if(t)switch(t.s){case n.EXPIRED:case n.DISCARDED:case n.INACTIVE:if(!i._getGameInfo)throw Error("Wallethelper :: processInitGameInfo : getGameInfo callback not found!");return void i._getGameInfo("0_C",function(){e&&e()})}e&&e()};switch(o.wt){case"B":a(o.wbn);break;case"G":a(o.wfg);break;default:e&&e()}},e.prototype.setup=function(t){this._settingMenuSetFreeGameModeFunc=t.setFreeGameModeFunc,this._settingMenuFooter=t.footerController,this._settingMenuFooter.activateWalletNotify(this._hasNewWallet)},e.prototype.setupWallet=function(t){var e=this._settingMenuFooter,i=this._settingMenuSetFreeGameModeFunc,n=t.wfg,a=t.wbn;if(a){var s=a.bra!==a.ibra;i&&i(!1),e.showCustomInfoFooter(r.t("WalletHelper.Balance")),this._setRollOverBalance(a.bra,s),e.setWalletNavigateIcon(o.WALLET_FOOTER_TYPE.BONUS)}else n?(s=n.gc!==n.tg,i&&i(!0),e.showCustomInfoFooter(r.t("WalletHelper.Balance")),this._setFreeGameCounter(n.gc,s),e.setWalletNavigateIcon(o.WALLET_FOOTER_TYPE.FREE_GAME)):(i&&i(!1),e.hideCustomInfoFooter(),e.setWalletNavigateIcon(o.WALLET_FOOTER_TYPE.CASH));this._lastSpinInfo=t},e.prototype.hasFreeGame=function(){return this.isFreeGameMode()&&this._lastSpinInfo.wfg.gc>0},e.prototype.spin=function(t){if(this.isFreeGameMode()){var e=this._lastSpinInfo.wfg.gc;this._setFreeGameCounter(e-1),this._pendingCheck=!0}else if(this.isBonusGameMode()){var i=this._lastSpinInfo.wbn.bra,n=t>i?0:i-t;this._setRollOverBalance(n),this._pendingCheck=!0}},e.prototype.isFreeGameMode=function(){return this._lastSpinInfo&&this._lastSpinInfo.wfg},e.prototype.isBonusGameMode=function(){return this._lastSpinInfo&&this._lastSpinInfo.wbn},e.prototype.isWalletCompleted=function(){var t=this._lastSpinInfo,e=t.wfg,i=t.wbn;if(e||i)switch(e?e.s:i.s){case n.CONVERTED:case n.COMPLETED:return!0}return!1},e.prototype.cleanUp=function(){this._settingMenuFooter=void 0},e.prototype._setFreeGameCounter=function(t,e){void 0===e&&(e=!0),this._settingMenuFooter.setCustomMiddleInfoFooter(r.t("WalletHelper.FreeGameCounter",{count:t}),e)},e.prototype._setRollOverBalance=function(t,e){void 0===e&&(e=!0),this._settingMenuFooter.setCustomMiddleInfoFooter(r.t("WalletHelper.RollOver",{amount:a.formatCurrency(t)}),e)},__decorate([c("WalletHelper")],e)}(cc.Object));i.walletHelper=l,cc._RF.pop()}},{BVFramework:"BVFramework",SettingInfoFooterController:"SettingInfoFooterController",Utils:"Utils"}],WebSocketHandler:[function(t,e){"use strict";if(!cc._RF.push(e,"ca24aQhwL1C/LU/Wt0Cw1yJ","WebSocketHandler")){var i=function(t,e){var i=a();return function(t){return i[t-=253]}(t,e)},n=System[i(258)](i(269)+i(257)+i(268)+"rk")[i(273)+i(266)+i(256)+i(270)+i(265)+"r"];for(var o in n)n[i(260)+i(272)+i(264)+i(255)+"ty"](o)&&(e[i(261)+i(271)+"s"][o]=n[o]);e[i(261)+i(271)+"s"][i(267)+i(254)+i(253)+"e"]=!0,cc._RF.pop()}function a(){var t=["dul","sMo","per","ket","ram","get","der","has","exp","isB","uil","Pro","dle","Soc","__e","ewo","bvf","Han","ort","Own","Web"];return(a=function(){return t})()}},{}],WerewolfSprite:[function(t,e,i){"use strict";if(!cc._RF.push(e,"34857r+5iJHSajHDBcoLQ5K","WerewolfSprite")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Component,onLoad:function(){this._spriteAnim=this.getComponent(cc.Animation),this._sprite=this.getComponent(cc.Sprite)},attack3:function(){this._spriteAnim.play()},spriteAnimEnded:function(t){this.didAnimEnd&&this.didAnimEnd(t)},spriteAnimHit:function(){this.didAnimHit&&this.didAnimHit()}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],Werewolf:[function(t,e,i){"use strict";if(!cc._RF.push(e,"3d46cHYI25M061hj7d/a0ZY","Werewolf")){i.__esModule=!0,i.default=void 0;var n=d(t("BaseEnemyActor")),o=d(t("WerewolfSprite")),a=t("Enum"),s=d(t("AudioLibrary")),r=t("AssetManager"),c=t("ObstacleBundle"),l=t("Utils"),h=shell.I18n,u=cc.Class({extends:n.default,properties:{sprite:o.default,atk1Animation:cc.Animation,atk2Animation:cc.Animation},onLoad:function(){var t=r.assetManager.getAsset(c.WerewolfAudioBundle);this.atk1Sound=t.wolfNormalAttack,this.atk2Sound=t.wolfImpactAttack,this.atk3Sound=t.wolfTurnAroundAttack,this.dieSound=t.wolfDie,this._super(),this._targetActor=void 0,this._attackCallback=void 0,this.sprite.didAnimEnd=this.didAnimEnd.bind(this),this.sprite.didAnimHit=this.didAnimHit.bind(this),this._switchToSprite(!1),this._setupAnimations(),this._meetCat=["CatDialog.EncounteredWerewolfSpeech"]},_getEnemyType:function(){return a.EnemyType.werewolf},_getEmoticonPosition:function(t){var e;switch(t){case a.EmoticonStyle.Sweat:e=cc.v2(-this.node.getContentSize().width/6.25,this.node.getContentSize().height/4.25);break;case a.EmoticonStyle.Shock:e=cc.v2(-this.node.getContentSize().width/5.25,this.node.getContentSize().height/3.95);break;case a.EmoticonStyle.ShockExpMarkLv1:case a.EmoticonStyle.ShockExpMarkLv2:case a.EmoticonStyle.ShockExpMarkLv3:e=cc.v2(-this.node.getContentSize().width/1.25,this.node.getContentSize().height/4.25)}return e},_setupAnimations:function(){this._atk1AnimNode=this.atk1Animation.node,this._atk1AnimNode.active=!1,this._atk2AnimNode=this.atk2Animation.node,this._atk2AnimNode.active=!1},getApproachRange:function(){return 700},getIdleAnim:function(){return"idle"},getHitAnim:function(){return"hit"},getDieAnim:function(){return"dead"},getDeflectAnim:function(){return"deflection"},_switchToSprite:function(t){this.sprite.node.active=t,this.spine.node.active=!t,this._isAnimating=t},didAnimEnd:function(t){"die"!==t&&(this._switchToSprite(!1),this.spine.setAnimation(0,"idle",!0),this._attackCallback&&this._attackCallback())},didAnimHit:function(){this._targetActor&&this._targetActor.damaged(this._hitDamage)},_executeAttack:function(t,e,i){if(t.isDead())this.attack1(t,i);else if(e){var n=(0,l.randomInt)(0,2);0===n?this.attack1(t,i):1===n?this.attack2(t,i):this.attack3(t,i)}else{var o=(0,l.randomInt)(0,1);0===o?this.attack1(t,i):1===o&&this.attack2(t,i)}},attack1:function(t,e){var i=this,n=t.node,o=t.isDead()?n.x+n.width/2+50+100:n.x+n.width/2+50,a=cc.v2(o+50,n.y),r={moveSpeedIn:.1,moveSpeedOut:.2,moveDeflectSpeedOut:.2,minDistance:50,attackHits:1,animFunc:this._attack1Anim.bind(this)};this.spineAttack([t],a,r,function(){i._atk1AnimNode.active=!1,i.atk1Animation.stop(),e&&e()}),s.default.playEffect(this.atk1Sound)},_cancelEffects:function(){this.atk1Animation.stop(),this._atk1AnimNode.active=!1},_attack1Anim:function(){var t=this.spine;"atk1"!==t.animation&&(this._atk1AnimNode.active=!0,this.atk1Animation.play("wolf_atk_1"),t.setAnimation(0,"atk1",!1),t.addAnimation(0,"idle",!0,0))},attack2:function(t,e){var i=this,n=t.node,o=cc.v2(n.x+n.width/2+100,n.y),a={moveSpeedIn:.2,moveSpeedOut:.1,minDistance:50,attackHits:2,animFunc:this._attack2Anim.bind(this)};this.spineAttack([t],o,a,function(){i._atk2AnimNode.active=!1,i.atk2Animation.stop(),e&&e()}),s.default.playEffect(this.atk2Sound)},_attack2Anim:function(){var t=this.spine;"atk2"!==t.animation&&(this._atk2AnimNode.active=!0,this.atk2Animation.play("wolf_atk_2"),t.setAnimation(0,"atk2",!1),t.addAnimation(0,"idle",!0,0))},attack3:function(t,e){this._targetActor=t,this._attackCallback=e,this._hitDamage=this._data.damage/2,this._switchToSprite(!0),this.sprite.attack3(),s.default.playEffect(this.atk3Sound)},getMeetDialogCat:function(){var t=this._meetCat.concat(n.default._meetMonster),e=(0,l.randomInt)(0,t.length-1);return h.t(t[e])},_playDieSound:function(){s.default.playEffect(this.dieSound)},destroy:function(){this.sprite.didAnimEnd=void 0,this.sprite.didAnimHit=void 0,this._super()}});i.default=u,e.exports=i.default,cc._RF.pop()}function d(t){return t&&t.__esModule?t:{default:t}}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",BaseEnemyActor:"BaseEnemyActor",Enum:"Enum",ObstacleBundle:"ObstacleBundle",Utils:"Utils",WerewolfSprite:"WerewolfSprite"}],WinRollBaseController:[function(t,e,i){"use strict";if(!cc._RF.push(e,"adab7txcZBOsJ6NClaGwrmO","WinRollBaseController")){i.__esModule=!0,i.default=void 0;var n,o=(n=t("NumberDisplayInterface"))&&n.__esModule?n:{default:n},a=cc.Enum({playing:-1,stop:-1}),s=cc.Class({extends:cc.Component,properties:{_bigWinDuration:2,_megaWinDuration:2,_superMegaWinDuration:2,_hasSetThreshold:!1,_hasSetDuration:!1,_accumulatedDt:0,_currentState:a.stop,defaultVelocityStallDuration:8,displayController:{default:null,type:o.default,override:!0}},setNumbersCallback:function(t){this._numberCallbackList=t},setWinThresholds:function(t,e,i){this._bigWinThreshold=t,this._megaWinThreshold=e,this._superMegaWinThreshold=i,this._hasSetThreshold=!0},_defaultGetVelocity:function(t,e,i){return i<this.defaultVelocityStallDuration?e:t+Math.pow(2,i-this.defaultVelocityStallDuration)},setWinDurations:function(t,e){this._bigWinDuration=t,this._megaWinDuration=e,this._hasSetDuration=!0},setVelocityCalculation:function(t){this._getVelocity=t},play:function(t,e){if(this._parametersSanityCheck()){this._currentState=a.playing,this._onNumReachedCallback=e,this.displayController.clear(),this._accumulatedDt=0,this._currentCount=0,this._velocityDt=0,this._maxValue=t;var i=this._megaWinThreshold;this._initialStageSpeed=this._speed=i/this._bigWinDuration}},skip:function(){var t=this;this._currentState==a.playing&&(this.stop(!1),this.displayController.displayNumber(this._maxValue,!0,function(){t._onNumberReachedAtPoint(t._maxValue),t._onNumReachedCallback=null}))},_parametersSanityCheck:function(){return this._hasSetDuration,!this._numberCallbackList||this._numberCallbackList.length,this._getVelocity||(this._getVelocity=this._defaultGetVelocity),!!this._hasSetThreshold},stop:function(t){void 0===t&&(t=!0),t&&(this.displayController.clear(),this._onNumReachedCallback=null),this._accumulatedDt=0,this._currentState=a.stop},update:function(t){this._currentState==a.playing&&(this._currentCount>=this._superMegaWinThreshold?(this._accumulatedDt+=t,this._speed=this._getVelocity(this._initialStageSpeed,this._speed,this._accumulatedDt,t),this._currentCount=this._currentCount+this._speed*t*(.9+.2*Math.random())):this._currentCount=this._currentCount+this._speed*t*(.9+.2*Math.random()),this._updateNumber())},_onNumberReachedAtPoint:function(t){var e=this._megaWinDuration,i=this._superMegaWinThreshold,n=this._megaWinThreshold;if(t==n){var o=i-n;this._initialStageSpeed=this._speed=o/e}t==i&&(this._initialStageSpeed=this._speed=(i-n)/e),this._onNumReachedCallback&&this._onNumReachedCallback(t)},_updateNumber:function(){var t=this,e=this._currentCount,i=this._numberCallbackList,n=this._maxValue;if(n<=e)return this.stop(!1),void this.displayController.displayNumber(n,!0,function(){t._onNumberReachedAtPoint(n),t._onNumReachedCallback=null});if(void 0!==i&&i.length&&i[0]<=e){var o=i.shift();this.displayController.displayNumber(e,!1,function(){t._onNumberReachedAtPoint(o)})}else this.displayController.displayNumber(e,!1)}});i.default=s,e.exports=i.default,cc._RF.pop()}},{NumberDisplayInterface:"NumberDisplayInterface"}],WinRollController:[function(t,e,i){"use strict";if(!cc._RF.push(e,"00616+xbv9I/qAMwXqWbdkY","WinRollController")){i.__esModule=!0,i.default=void 0;var n=s(t("NumberDisplayController")),o=s(t("WinRollBaseController")),a=cc.Class({extends:o.default,properties:{displayController:{default:null,type:n.default,override:!0}}});i.default=a,e.exports=i.default,cc._RF.pop()}function s(t){return t&&t.__esModule?t:{default:t}}},{NumberDisplayController:"NumberDisplayController",WinRollBaseController:"WinRollBaseController"}],WinRollCurveController:[function(t,e,i){"use strict";if(!cc._RF.push(e,"a210c4WXCdAmKbdwKdx5P30","WinRollCurveController")){i.__esModule=!0,i.default=void 0;var n=s(t("NumberCurvedController")),o=s(t("WinRollBaseController")),a=cc.Class({extends:o.default,properties:{displayController:{default:null,type:n.default,override:!0}}});i.default=a,e.exports=i.default,cc._RF.pop()}function s(t){return t&&t.__esModule?t:{default:t}}},{NumberCurvedController:"NumberCurvedController",WinRollBaseController:"WinRollBaseController"}],WinRollLabelController:[function(t,e,i){"use strict";if(!cc._RF.push(e,"f7e1diBGQ5A8KF1oMrYEMNU","WinRollLabelController")){i.__esModule=!0,i.default=void 0;var n=s(t("NumberLabelController")),o=s(t("WinRollBaseController")),a=cc.Class({extends:o.default,properties:{displayController:{default:null,type:n.default,override:!0}}});i.default=a,e.exports=i.default,cc._RF.pop()}function s(t){return t&&t.__esModule?t:{default:t}}},{NumberLabelController:"NumberLabelController",WinRollBaseController:"WinRollBaseController"}],WitchPortal:[function(t,e,i){"use strict";if(!cc._RF.push(e,"0208fGSpKxGlo2/ewOy7K+7","WitchPortal")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Component,properties:{leftSprite:cc.Sprite,leftSpriteAnim:cc.Animation,rightSprite:cc.Sprite,rightSpriteAnim:cc.Animation},onLoad:function(){this.leftSprite.didOpen=this.didOpen.bind(this),this.leftSprite.didClose=this.didClose.bind(this),this.leftSprite.didOpenEnd=this.didOpenEnd.bind(this),this.leftSprite.node.zIndex=0,this.rightSprite.node.zIndex=10},open:function(){this.leftSpriteAnim.play("witch_portal_open"),this.rightSpriteAnim.play("witch_portal_open")},close:function(){this.leftSpriteAnim.play("witch_portal_close"),this.rightSpriteAnim.play("witch_portal_close")},didOpen:function(){this.didPortalOpen&&this.didPortalOpen()},didOpenEnd:function(){this.didPortalOpenEnd&&this.didPortalOpenEnd()},didClose:function(){this.didPortalClose&&this.didPortalClose()}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],WitchSprite:[function(t,e,i){"use strict";if(!cc._RF.push(e,"3979cGszKxOn5BrvZ8a8fNy","WitchSprite")){i.__esModule=!0,i.default=void 0;var n=cc.Class({extends:cc.Component,onLoad:function(){this._spriteAnim=this.getComponent(cc.Animation),this._sprite=this.getComponent(cc.Sprite),this._deathPosition=cc.v2(-540,395),this._attackPosition=cc.v2(-1036,507)},attack2:function(){this.node.position=this._attackPosition,this._spriteAnim.play("witch_attack")},die:function(){this.node.position=this._deathPosition,this._spriteAnim.play("witch_death")},_dieIdle:function(){this._spriteAnim.play("witch_death_idle")},dieDisappear:function(){this.didDieAnimEnd&&this.didDieAnimEnd(),this._spriteAnim.play("witch_death_disappear")},spriteAnimEnded:function(t){"death"===t&&this._dieIdle(),this.didAnimEnd&&this.didAnimEnd(t)},spriteAnimHit:function(){this.didAnimHit&&this.didAnimHit()}});i.default=n,e.exports=i.default,cc._RF.pop()}},{}],Witch:[function(t,e,i){"use strict";if(!cc._RF.push(e,"728e819xAZPE50CC+FThawQ","Witch")){i.__esModule=!0,i.default=void 0;var n=p(t("WitchSprite")),o=p(t("BaseEnemyActor")),a=p(t("WitchPortal")),s=t("Enum"),r=p(t("AudioLibrary")),c=t("ObstacleBundle"),l=t("AssetManager"),h=t("Utils"),u=shell.I18n,d=cc.Class({extends:o.default,properties:{sprite:n.default,portal:a.default,magicBallPrefab:cc.Prefab,eyeLazerPrefab:cc.Prefab,atk1Animation:cc.Animation,atk2Animation:cc.Animation,eyeAura:cc.Animation,_targetActor:void 0,_attackCallback:void 0},onLoad:function(){var t=l.assetManager.getAsset(c.WitchAudioBundle);this.atk1Sound=t.witchNormalAttack,this.atk2Sound=t.witchComboAttack,this.atk3Sound=t.witchLaserAttack,this.dieSound=t.witchDie,this.struggleSound=t.witchStruggleLoop,this.runAwaySound=t.witchRunAway,this.teleportSound=t.witchTeleport,this._super(),this.sprite.didAnimEnd=this.didAnimEnd.bind(this),this.sprite.didAnimHit=this.didAnimHit.bind(this),this.sprite.didDieAnimEnd=this._didDieAnimEnd.bind(this),this.portal.didPortalOpen=this.didPortalOpen.bind(this),this.portal.didPortalClose=this.didPortalClose.bind(this),this.portal.didPortalOpenEnd=this.didPortalOpenEnd.bind(this),this._defaultSpinXPos=this.spine.node.x,this._magicBallPool=new cc.NodePool,this._eyeLazerPool=new cc.NodePool,this._setupAnimations(),this._meetCat=["CatDialog.EncounteredWitchSpeechAdmiration","CatDialog.EncounteredWitchSpeechSuspicion"],this._meetAgainMe=["WitchDialog.MeetWitchAgainMeetAgain","WitchDialog.MeetWitchAgainNoChance"],this._afterBattleMe=["WitchDialog.AfterBattleWeWillMeetAgain","WitchDialog.AfterBattleIWillBeBack"]},_setupSpineListeners:function(){var t=this,e=this.spine;e&&(e.setStartListener(function(i){i&&(i.animation?i.animation.name:"")===t.getHitAnim()&&(e.timeScale=1.8)}),e.setCompleteListener(function(i){if(i){var n=i.animation?i.animation.name:"";n!==t.getHitAnim()&&"Eye_Lazer_01"!==n&&"Attack_02"!==n||(e.timeScale=1,e.clearTrack(0),e.setAnimation(0,t.getIdleAnim(),!0,0))}}))},_getEnemyType:function(){return s.EnemyType.witch},_getEmoticonPosition:function(t){var e;switch(t){case s.EmoticonStyle.Sweat:e=cc.v2(this.node.getContentSize().width/3,this.node.getContentSize().height/2.3);break;case s.EmoticonStyle.Shock:e=cc.v2(this.node.getContentSize().width/2,this.node.getContentSize().height/2);break;case s.EmoticonStyle.ShockExpMarkLv1:case s.EmoticonStyle.ShockExpMarkLv2:case s.EmoticonStyle.ShockExpMarkLv3:e=cc.v2(-this.node.getContentSize().width/4.5,this.node.getContentSize().height/2.3)}return e},_setupAnimations:function(){this._atk1AnimNode=this.atk1Animation.node,this._atk1AnimNode.active=!1,this._atk1AnimNode.zIndex=6,this._atk2AnimNode=this.atk2Animation.node,this._atk2AnimNode.active=!1,this._atk2AnimNode.zIndex=6,this._eyeAuraNode=this.eyeAura.node,this._eyeAuraNode.active=!1,this._eyeAuraNode.zIndex=6},onEnable:function(){this._super(),this.spine.node.active=!1,this.sprite.node.active=!1,this.portal.node.active=!1,this.spine.node.zIndex=2,this.frontDizzy.node.zIndex=2},configurePortal:function(){var t=this.portal,e=t.leftSprite.node.parent,i=t.rightSprite.node.parent;(0,h.transferToParent)(e,this.node),(0,h.transferToParent)(i,this.node),e.setScale(2,2),i.setScale(2,2),e.zIndex=0,i.zIndex=3},getIdleAnim:function(){return"Idle_01"},getHitAnim:function(){return"Hit"},getDeflectAnim:function(){return"Deflection"},idle:function(){this._hasEntered&&this._super()},die:function(){this.stopDizzy(),this._die(),this.dropPrize()},isBoss:function(){return!0},setHP:function(t){this._hp=t;var e=this._hp/this.maxHp;this._data.isDizzy&&(this._isDizzy=!0),this._isDizzy||(this._isAlive=this._hp>0),this.didBossHpChanged&&this.didBossHpChanged(this,e,this._hp,this.maxHp)},enterBattlefield:function(t){this._hasEntered?t&&t():(this._actorState=void 0,this._hasEntered=!0,this.spine.node.opacity=0,this.spine.node.x=this._defaultSpinXPos+200,this.portal.node.active=!0,this.portal.open(),this._enterBattleFieldCallback=t)},exitBattlefield:function(t){this._exitBattlefieldCallback=t,this._escape()},didPortalOpen:function(){var t=this;r.default.playEffect(this.teleportSound),this._switchToSprite(!1),this.idle(),this.spine.node.opacity=0,this.spine.node.runAction(cc.sequence([cc.spawn([cc.moveBy(.6,cc.v2(-200,0)),cc.fadeIn(.3)]),cc.callFunc(function(){var e=t._enterBattleFieldCallback;e&&(e(),t._enterBattleFieldCallback=void 0)})]))},didPortalOpenEnd:function(){this.portal.close()},didPortalClose:function(){this.portal.node.active=!1},_switchToSprite:function(t){this.sprite.node.active=t,this.spine.node.active=!t,this._isAnimating=t},_didDieAnimEnd:function(){this.defeatedByOpponent()},didAnimEnd:function(t){var e=this;"attack"===t?(this._switchToSprite(!1),this.spine.clearTrack(0),this.spine.setAnimation(0,this.getIdleAnim(),!0),this._attackCallback&&this._attackCallback()):"deathDisappear"===t?(this._stopStruggleSound(),this.node.runAction(cc.sequence([cc.delayTime(.5),cc.fadeOut(1),cc.callFunc(function(){e._exitBattlefieldCallback&&e._exitBattlefieldCallback(),e._exitBattlefieldCallback=void 0})]))):"death"===t&&this._playStruggleLoopSound()},didAnimHit:function(){this._callShakeScreenEffect(),this._targetActor&&this._targetActor.damaged(this._data.damage,s.AttackType.Magic)},_executeAttack:function(t,e,i){if(t.isDead()||!e)0===(0,h.randomInt)(0,1)?this.attack1(t,i):this.attack3(t,i);else{var n=(0,h.randomInt)(0,2);0===n?this.attack1(t,i):1===n?this.attack2(t,i):this.attack3(t,i)}},attack1:function(t,e){var i=this,n=this.spine,o=n.animation;this._targetActor=t,"Attack_02"!==o&&(this._atk2AnimNode.active=!0,this._eyeAuraNode.active=!0,this.atk2Animation.play("witch_atk_2"),this.eyeAura.play("witch_atk_2_eye_track"),n.timeScale=1.3,n.clearTrack(0),n.setAnimation(0,"Attack_02",!1));var a=t.node.y,s=t.isDead()?t.node.x+200:t.node.x,c=cc.v2(s,a);r.default.playEffect(this.atk1Sound);for(var l=function(t){var e=.2*t,n=1===t?7:5,o=1===t?3:4,a=i.node.x-i.node.width/n,s=i.node.y+i.node.height/o;i._delayAction(e,function(){i.spawnMagicBall(cc.v2(a,s),c)})},h=1;h<3;h++)l(h);this._delayAction(1.6,function(){i._atk2AnimNode.active=!1,i._eyeAuraNode.active=!1,i.atk2Animation.stop(),i.eyeAura.stop(),n.timeScale=1,e&&e()})},attack2:function(t,e){this._switchToSprite(!0),this._targetActor=t,this._attackCallback=e,this.sprite.attack2(),r.default.playEffect(this.atk2Sound)},attack3:function(t,e){var i=this,n=this.spine,o=n.animation;this._targetActor=t,"Eye_Lazer_01"!==o&&(this._atk1AnimNode.active=!0,this.atk1Animation.play("witch_laser"),n.timeScale=1.3,n.clearTrack(0),n.setAnimation(0,"Eye_Lazer_01",!1));var a=t.node.y-50,s=t.isDead()?t.node.x+200:t.node.x-50,c=cc.v2(s,a);r.default.playEffect(this.atk3Sound),this._delayAction(.6,function(){i.spawnEyeLazer(c)}),this._delayAction(1.6,function(){i._atk1AnimNode.active=!1,i.atk1Animation.stop(),n.timeScale=1,e&&e()})},_die:function(){this._playDieSound(),this._switchToSprite(!0),this.sprite.die()},_escape:function(){r.default.playEffect(this.runAwaySound),this._switchToSprite(!0),this.sprite.dieDisappear()},spawnMagicBall:function(t,e){var i=this._magicBallPool,n=this.node.parent,o=i.get();o||(o=cc.instantiate(this.magicBallPrefab)),o.zIndex=6;var a=o.getComponent("MagicBall");a.didHitTarget=this.magicBallDidHitTarget.bind(this),n.addChild(o),a.attack(t,e)},spawnEyeLazer:function(t){var e=this._eyeLazerPool,i=this.node.parent,n=e.get();n||(n=cc.instantiate(this.eyeLazerPrefab)),n.zIndex=6;var o=n.getComponent("EyeLazer");o.didHitTarget=this.eyeLazerDidHitTarget.bind(this),o.didAnimationEnd=this.eyeLazerDidAnimationEnd.bind(this),i.addChild(n);var a=this.node.x-this.node.width/2,s=this.node.y+this.node.height/8;o.attack(cc.v2(a,s),t)},magicBallDidHitTarget:function(t){var e=Math.round(this._data.damage/2);this._targetActor.damaged(e,s.AttackType.Magic),this._targetActor.isDead()&&this._targetActor.playDeflectSound(),t.node.removeFromParent(),this._magicBallPool.put(t.node)},eyeLazerDidHitTarget:function(){this._targetActor.isDead()&&this._targetActor.playDeflectSound(),this._targetActor.damaged(this._data.damage,s.AttackType.Magic)},eyeLazerDidAnimationEnd:function(t){t.node.removeFromParent(),this._eyeLazerPool.put(t.node)},restoreActorState:function(){this._super(),this._switchToSprite(!1),this._hasEntered=!1},_setMix:function(t,e){this.spine.setMix(t,e,.3),this.spine.setMix(e,t,.3)},destroy:function(){this._magicBallPool.clear(),this._eyeLazerPool.clear(),this._exitBattlefieldCallback=void 0,this._enterBattleFieldCallback=void 0,this.sprite.didAnimEnd=void 0,this.sprite.didAnimHit=void 0,this.sprite.didDieAnimEnd=void 0,this.portal.didPortalOpen=void 0,this.portal.didPortalClose=void 0,this.portal.didPortalOpenEnd=void 0,this._super()},getEncounterDialog:function(){return!0},encounterOpponent:function(){var t=(0,h.randomInt)(0,this._meetAgainMe.length-1);this.witchDisplayBubbleChat(u.t(this._meetAgainMe[t]))},defeatedByOpponent:function(){var t=(0,h.randomInt)(0,this._afterBattleMe.length-1);this.witchDisplayBubbleChat(u.t(this._afterBattleMe[t]))},getMeetDialogCat:function(){var t=(0,h.randomInt)(0,this._meetCat.length-1);return u.t(this._meetCat[t])},_playDieSound:function(){r.default.playEffect(this.dieSound)},_playStruggleLoopSound:function(){this._struggleLoopSound=r.default.playEffect(this.struggleSound,!0)},_stopStruggleSound:function(){this._struggleLoopSound&&(r.default.stopEffect(this._struggleLoopSound,this.struggleSound),this._struggleLoopSound=void 0)}});i.default=d,e.exports=i.default,cc._RF.pop()}function p(t){return t&&t.__esModule?t:{default:t}}},{AssetManager:"AssetManager",AudioLibrary:"AudioLibrary",BaseEnemyActor:"BaseEnemyActor",Enum:"Enum",ObstacleBundle:"ObstacleBundle",Utils:"Utils",WitchPortal:"WitchPortal",WitchSprite:"WitchSprite"}],WorldBundle:[function(t,e,i){"use strict";if(!cc._RF.push(e,"2591bv2NeZJaJP0YtHznDou","WorldBundle")){Object.defineProperty(i,"__esModule",{value:!0}),i.DungeonAudioBundle=i.ForestAudioBundle=i.DungeonResourceBundle=i.ForestResourceBundle=void 0;var n=t("AssetBundleUtils"),o=t("AssetManager"),a=!0,s=cc._decorator.ccclass,r=function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var o=this,s=!!e[0]&&e[0];if((o=t.call(this)||this).forestAtlas=void 0,o.forestBgPrefab=void 0,s)return o.forestAtlas=n.loadResourceMethodWrapper("atlas/backgrounds/forest/background",cc.SpriteAtlas,a),o.forestBgPrefab=n.loadResourceMethodWrapper("prefab/backgrounds/forest/main_background/main_background",cc.Prefab,a),o}return __extends(e,t),__decorate([s("ForestResourceBundle")],e)}(o.ResourceBundle);i.ForestResourceBundle=r;var c=function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var o=this,s=!!e[0]&&e[0];if((o=t.call(this)||this).dungeonAtlas=void 0,o.dungeonBgComponentsPrefab1=void 0,o.dungeonBgComponentsPrefab2=void 0,o.dungeonBgComponentsPrefab3=void 0,o.dungeonBgPrefab=void 0,s)return o.dungeonAtlas=n.loadResourceMethodWrapper("atlas/backgrounds/dungeon/background",cc.SpriteAtlas,a),o.dungeonBgComponentsPrefab1=n.loadResourceMethodWrapper("prefab/backgrounds/dungeon/bg_components/mg_01",cc.Prefab,a),o.dungeonBgComponentsPrefab2=n.loadResourceMethodWrapper("prefab/backgrounds/dungeon/bg_components/mg_02",cc.Prefab,a),o.dungeonBgComponentsPrefab3=n.loadResourceMethodWrapper("prefab/backgrounds/dungeon/bg_components/mg_06",cc.Prefab,a),o.dungeonBgPrefab=n.loadResourceMethodWrapper("prefab/backgrounds/dungeon/main_background/main_background",cc.Prefab,a),o}return __extends(e,t),__decorate([s("DungeonResourceBundle")],e)}(o.ResourceBundle);i.DungeonResourceBundle=c;var l=function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=this,o=!!e[0]&&e[0];if((n=t.call(this)||this).forestBgOne=void 0,n.forestBgTwo=void 0,n.forestBgThree=void 0,o){var a=function(t,e){var i=Object.create(null);return i.path="audio/mp3/"+t,i.isMusic=e,i};return n.forestBgOne=a("forest_bg_1",!0),n.forestBgTwo=a("forest_bg_2",!0),n.forestBgThree=a("forest_bg_3",!0),n}}return __extends(e,t),__decorate([s("ForestAudioBundle")],e)}(o.AudioBundle);i.ForestAudioBundle=l;var h=function(t){function e(){for(var e=[],i=0;i<arguments.length;i++)e[i]=arguments[i];var n=this,o=!!e[0]&&e[0];if((n=t.call(this)||this).dungeonBgOne=void 0,n.dungeonBgTwo=void 0,o){var a=function(t,e){var i=Object.create(null);return i.path="audio/mp3/"+t,i.isMusic=e,i};return n.dungeonBgOne=a("dungeon_bg_1",!0),n.dungeonBgTwo=a("dungeon_bg_2",!0),n}}return __extends(e,t),__decorate([s("DungeonAudioBundle")],e)}(o.AudioBundle);i.DungeonAudioBundle=h,cc._RF.pop()}},{AssetBundleUtils:"AssetBundleUtils",AssetManager:"AssetManager"}],WorldLoader:[function(t,e,i){"use strict";if(!cc._RF.push(e,"6c6b4/NwHxAr4+HKEZBAfFp","WorldLoader")){Object.defineProperty(i,"__esModule",{value:!0}),i.worldLoader=void 0;var n=t("DataManager"),o=t("Enum"),a=t("WorldBundle"),s=t("AssetManager"),r=new(function(){function t(){this._currentLoadedWorldResources=[]}return t.prototype.loadResources=function(t,e){void 0===t&&(t=!1),this._currentLoadedWorldResources=[];var i=this._currentLoadedWorldResources;switch(n.default.rpgCurrentStage){case o.LevelType.forest:s.assetManager.addAsset(a.ForestResourceBundle,a.ForestAudioBundle),i.push(a.ForestResourceBundle),i.push(a.ForestAudioBundle);break;case o.LevelType.dungeon:s.assetManager.addAsset(a.DungeonResourceBundle,a.DungeonAudioBundle),i.push(a.DungeonResourceBundle),i.push(a.DungeonAudioBundle)}t||s.assetManager.loadAsset(void 0,e)},t.prototype.unloadResources=function(){this._currentLoadedWorldResources.forEach(function(t){s.assetManager.releaseAsset(t)}),this._currentLoadedWorldResources=[]},t}());i.worldLoader=r,cc._RF.pop()}},{AssetManager:"AssetManager",DataManager:"DataManager",Enum:"Enum",WorldBundle:"WorldBundle"}],WorldManager:[function(t,e,i){"use strict";if(!cc._RF.push(e,"290b17bFBFDq4lmQVIFkJ3E","WorldManager")){i.__esModule=!0,i.default=void 0;var n,o=t("WorldObjectSpawner"),a=(n=t("DataManager"))&&n.__esModule?n:{default:n},s=t("Enum"),r=t("AssetManager"),c=t("WorldBundle"),l=t("WorldLoader"),h=t("Utils"),u=cc.Class({extends:cc.Component,properties:{speed:0,mainBackgroundLayer:cc.Node,backgroundLayer:cc.Node,midgroundLayer:cc.Node,foregroundLayer:cc.Node,itemsMinRecycleX:-1242,itemsMaxAmount:20},init:function(t){var e,i=this;this._rpgController=t,this._backgroundObjects=[],this._midgroundObjects=[],this._foregroundObjects=[],this.backgroundItems=[],this.midgroundItems=[],this.foregroundItems=[],this.mainBackgroundItem=void 0,this._hasLoaded=!1,this._genericBackground=void 0;var n=[],o=[],l=[],h=void 0,u=void 0;switch(a.default.rpgCurrentStage){case s.LevelType.forest:h=(e=r.assetManager.getAsset(c.ForestResourceBundle)).forestAtlas,u=e.forestBgPrefab,o=[],l=[];break;case s.LevelType.dungeon:l=[(e=r.assetManager.getAsset(c.DungeonResourceBundle)).dungeonBgComponentsPrefab1,e.dungeonBgComponentsPrefab2,e.dungeonBgComponentsPrefab3],o=["mg_01","mg_02","mg_06"],h=e.dungeonAtlas,u=e.dungeonBgPrefab}n.push(u),n.push(l),n.push(o),n.push(h),n.forEach(function(t,e){0===e?i._setupBackground(t):1===e?i._setupPrefabs(t):2===e?i._prefabNames=t:i._setupSpriteFrames(t)}),this._setupComponents()},_setupBackground:function(t){var e=this.mainBackgroundLayer;this.mainBackgroundItem=t,this.background=cc.instantiate(this.mainBackgroundItem),this.preBackground=cc.instantiate(this.mainBackgroundItem),this.preBackground.x=this.preBackground.width,this.postBackground=cc.instantiate(this.mainBackgroundItem),this.postBackground.x=2*this.postBackground.width,e.addChild(this.background),e.addChild(this.preBackground),e.addChild(this.postBackground);var i=this.preBackground.getComponent("GenericBackgroundObject"),n=this.background.getComponent("GenericBackgroundObject"),o=this.postBackground.getComponent("GenericBackgroundObject");i.playAnimations(),n.playAnimations(),o.playAnimations();var a=this.background;this._resetX=0,a&&(this._resetX=a.width),this._genericBackground=this.background.getComponent("GenericBackgroundObject")},playBackgroundMusic:function(){var t=this._genericBackground;t&&t.playBackgroundMusic()},stopBackgroundMusic:function(t){var e=this._genericBackground;e&&e.stopBackgroundMusic(t)},_setupSpriteFrames:function(t){var e=this;this._spriteAltas=t;var i=t.getSpriteFrames(),n=this._prefabNames;i.forEach(function(t){if("main_bg"!==name&&-1===n.indexOf(t.name)){var i=t.name,o={resource:t,name:i,isSprite:!0,isTop:i.toLowerCase().endsWith("top")};i.toLowerCase().startsWith("bg",0)?e.backgroundItems.push(o):i.toLowerCase().startsWith("fg",0)?e.foregroundItems.push(o):i.toLowerCase().startsWith("mg",0)&&e.midgroundItems.push(o)}})},_setupPrefabs:function(t){var e=this;t.forEach(function(t){var i=t.name,n={resource:t,name:i,isSprite:!1,isTop:i.toLowerCase().endsWith("top")};i.toLowerCase().startsWith("bg",0)?e.backgroundItems.push(n):i.toLowerCase().startsWith("fg",0)?e.foregroundItems.push(n):i.toLowerCase().startsWith("mg",0)&&e.midgroundItems.push(n)})},_setupComponents:function(){var t=this.spawner=new o.WorldObjectSpawner;t.backgroundItems=this.backgroundItems,t.midgroundItems=this.midgroundItems,t.foregroundItems=this.foregroundItems,t.backgroundLayer=this.backgroundLayer,t.midgroundLayer=this.midgroundLayer,t.foregroundLayer=this.foregroundLayer,t.backgroundWidth=this.background.width,this.startInitWithObjects(),this._hasLoaded=!0},getBackgroundWidth:function(){return this._resetX},startInitWithObjects:function(){for(var t=0;t<3;t++)this.createObject(o.ObjectType.Background,!0),t<2&&this.createObject(o.ObjectType.Midground,!0),this.createObject(o.ObjectType.Foreground,!0)},randomGenerateObjects:function(t){var e;e=t?(0,h.randomInt)(1,2):(0,h.randomInt)(0,1);for(var i=this._backgroundObjects.length,n=0;n<e;n++)i<this.itemsMaxAmount&&this.createObject(o.ObjectType.Background);var a;a=t?1:(0,h.randomInt)(0,1);for(var s=this._midgroundObjects.length,r=0;r<a;r++)s<this.itemsMaxAmount&&this.createObject(o.ObjectType.Midground);var c;c=t?(0,h.randomInt)(0,2):(0,h.randomInt)(0,1);for(var l=this._foregroundObjects.length,u=0;u<c;u++)l<this.itemsMaxAmount&&this.createObject(o.ObjectType.Foreground)},createObject:function(t,e){var i;void 0===e&&(e=!1);var n=this.spawner;switch(t){case o.ObjectType.Background:i=this._backgroundObjects;break;case o.ObjectType.Midground:i=this._midgroundObjects;break;case o.ObjectType.Foreground:i=this._foregroundObjects}var a=n.spawnObject(t,e);i.push(a)},getScrollableGroups:function(){return[this._getScrollableGroup(o.ObjectType.Background,this._backgroundObjects,1),this._getScrollableGroup(o.ObjectType.Midground,this._midgroundObjects,1.1),this._getScrollableGroup(o.ObjectType.Foreground,this._foregroundObjects,1.3)]},_getScrollableGroup:function(t,e,i){return{objectList:e,speedFactor:i,groupIndex:t}},recycleObject:function(t,e,i){var n,a=this.spawner;switch(i){case o.ObjectType.Background:n=this._backgroundObjects;break;case o.ObjectType.Midground:n=this._midgroundObjects;break;case o.ObjectType.Foreground:n=this._foregroundObjects}n.splice(e,1),a.recycleObject(t)},destroy:function(){this._releaseAllItems(),this._super()},_releaseAllItems:function(){this._rpgController=void 0,this.preBackground.removeFromParent(),this.preBackground.destroy(),this.postBackground.removeFromParent(),this.postBackground.destroy(),this.background.removeFromParent(),this.background.destroy(),this._releaseAllObjects(o.ObjectType.Background),this._releaseAllObjects(o.ObjectType.Midground),this._releaseAllObjects(o.ObjectType.Foreground),this.spawner.destroy(),l.worldLoader.unloadResources(),this.backgroundItems=void 0,this.midgroundItems=void 0,this.foregroundItems=void 0},_releaseAllObjects:function(t){var e;switch(t){case o.ObjectType.Background:e=this._backgroundObjects;break;case o.ObjectType.Midground:e=this._midgroundObjects;break;case o.ObjectType.Foreground:e=this._foregroundObjects}for(var i=e.length-1;i>=0;i--){var n=e[i];this.recycleObject(n,i,t)}}});i.default=u,e.exports=i.default,cc._RF.pop()}},{AssetManager:"AssetManager",DataManager:"DataManager",Enum:"Enum",Utils:"Utils",WorldBundle:"WorldBundle",WorldLoader:"WorldLoader",WorldObjectSpawner:"WorldObjectSpawner"}],WorldObjectSpawner:[function(t,e,i){"use strict";if(!cc._RF.push(e,"7e87cGB0GRNJoP2NPg9WpKg","WorldObjectSpawner")){i.__esModule=!0,i.WorldObjectSpawner=i.Portion=i.ObjectType=void 0;var n=t("Utils"),o=cc.Enum({Background:-1,Midground:-1,Foreground:-1});i.ObjectType=o,i.Portion={first:0,second:.25,third:.5,forth:.75};var a=cc.Class({extends:cc.Object,ctor:function(){this._objectPool=new cc.NodePool,this._prefabPoolMap={},this.backgroundItems=void 0,this.midgroundItems=void 0,this.foregroundItems=void 0,this.backgroundLayer=void 0,this.midgroundLayer=void 0,this.foregroundLayer=void 0,this.backgroundItemsStartY=-10,this._historyObjectIndex={background:[],midground:[],foreground:[]},this._resetHistoryPositionIndex()},_resetHistoryPositionIndex:function(){this._historyPositionIndex={background:void 0,midground:void 0,foreground:void 0}},spawnObject:function(t,e){var i,n;switch(t){case o.Background:i=this._historyPositionIndex.background,n=500;break;case o.Midground:i=this._historyPositionIndex.midground,n=450;break;case o.Foreground:i=this._historyPositionIndex.foreground,n=350}var a=this._getRandomObject(t),s=a.spriteWidth/2,r=i?i.position.x:void 0,c=this._getRandomPosition(e,s,n,r);return i={position:c,width:s},this._placeObjectAtPosition(a,t,c)},_getRandomObject:function(t){var e,i;switch(t){case o.Background:e=this.backgroundItems,i=this._historyObjectIndex.background;break;case o.Midground:e=this.midgroundItems,i=this._historyObjectIndex.midground;break;case o.Foreground:e=this.foregroundItems,i=this._historyObjectIndex.foreground}if(i.length>=e.length){var a=i.length-2;a=a>0?a:i.length,i.splice(0,a)}var s=(e=e.filter(function(t){return i.indexOf(t)<0}))[(0,n.randomInt)(0,e.length-1)];return i.push(s),s.isSprite?this._getSpriteFrameObject(s):this._getPrefabObject(s)},_getSpriteFrameObject:function(t){var e,i=this._objectPool.get();return e=i?i.getComponent(cc.Sprite):(i=new cc.Node).addComponent(cc.Sprite),i.scaleX=this._getRandomXDirection(),i.scaleY=4.3,i.isTop=t.isTop,i.isPrefab=!1,e.spriteFrame=t.resource,i.spriteWidth=e.node.width,i},_getPrefabObject:function(t){var e=this._prefabPoolMap,i=e[t.name];i||(i=new cc.NodePool,e[t.name]=i);var n=i.get();return n||((n=cc.instantiate(t.resource)).isPrefab=!0,n.prefabName=t.name),n.spriteWidth=n.width,n.getComponent("GenericBackgroundObject").playAnimations(),n},_placeObjectAtPosition:function(t,e,i){var n;switch(e){case o.Background:n=this.backgroundLayer;break;case o.Midground:n=this.midgroundLayer;break;case o.Foreground:n=this.foregroundLayer}return t.x=i.x,t.isTop?(t.setAnchorPoint(.5,1),t.y=-this.backgroundLayer.height):(t.setAnchorPoint(.5,0),t.y=i.y),n.addChild(t),t},_getRandomXDirection:function(){return Math.random()-.5>0?4.3:-4.3},_getRandomPosition:function(t,e,i,n){void 0===n&&(n=t?0:this.backgroundWidth);var o=n+e+(i-Math.random()*i);return cc.v2(o,this.backgroundItemsStartY)},recycleObject:function(t){if(t.isPrefab){var e=this._prefabPoolMap[t.prefabName];t.getComponent("GenericBackgroundObject").stopAnimations(),t.removeFromParent(),e.put(t)}else{var i=this._objectPool;t.removeFromParent(),i.put(t)}},destroy:function(){this._resetHistoryPositionIndex(),this._historyObjectIndex=void 0,this._objectPool.clear();var t=this._prefabPoolMap;for(var e in t)t[e].clear();this.backgroundItems=void 0,this.midgroundItems=void 0,this.foregroundItems=void 0,this.backgroundLayer=void 0,this.midgroundLayer=void 0,this.foregroundLayer=void 0,this._super()}});i.WorldObjectSpawner=a,cc._RF.pop()}},{Utils:"Utils"}],XHRFactory:[function(t,e){"use strict";if(!cc._RF.push(e,"722f7z8U9xBqp08oitCQE87","XHRFactory")){var i=function(t,e){var i=o();return function(t){return i[t-=183]}(t,e)},n=System[i(189)](i(195)+i(196))[i(183)];e[i(185)+i(187)+"s"][i(183)+i(186)+i(194)+"y"]=n,e[i(185)+i(187)+"s"][i(192)+i(184)+i(190)+"e"]=!0,cc._RF.pop()}function o(){var t=["XHR","sMo","exp","Fac","ort","uil","get","dul","isB","__e","der","tor","com","mon"];return(o=function(){return t})()}},{}],XHRHandler:[function(t,e){"use strict";if(!cc._RF.push(e,"1be93otgWpGHKuFP+lTObny","XHRHandler")){var i=function(t,e){var i=a();return function(t){return i[t-=480]}(t,e)},n=System[i(481)](i(490)+i(489)+i(494)+"rk")[i(491)+i(488)+i(483)+"r"];for(var o in n)e[i(487)+i(482)+"s"][o]=n[o];e[i(487)+i(482)+"s"][i(480)+i(485)+i(493)+"e"]=!0,cc._RF.pop()}function a(){var t=["__e","get","ort","dle","isB","sMo","uil","exp","Han","ram","bvf","XHR","der","dul","ewo"];return(a=function(){return t})()}},{}],XHRHelper:[function(t,e){"use strict";if(!cc._RF.push(e,"6c80aP/0cdOybBZUs2q8557","XHRHelper")){var i=function(t,e){var i=a();return function(t){return i[t-=304]}(t,e)},n=System[i(312)](i(307)+i(313)+i(310)+"rk")[i(316)+i(311)+i(318)];for(var o in n)e[i(315)+i(305)+"s"][o]=n[o];e[i(315)+i(305)+"s"][i(317)+i(306)+i(308)+"e"]=!0,cc._RF.pop()}function a(){var t=["der","ort","sMo","bvf","dul","isB","ewo","Hel","get","ram","uil","exp","XHR","__e","per"];return(a=function(){return t})()}},{}],opus:[function(t,e){"use strict";function i(t,e){var o=n();return(i=function(t){return o[t-=483]})(t,e)}function n(){var t=["mat","has","get","pla","dow","set","lay","s.p","_ma","urn"," th","Eve","ran","mai","Cus","aud","is.","Tim","ena","dom","res","ate","cal","ret","ntT","ype","opu","ool","she","pon","ble","();","mpS","che","tot","cc.","dio","fun","ioP","eou","age","abl","win","ion","eva","tro","Act","er;","era",'"cc',"Mat","cti","sel","des","Com","sto","ect","nag","_co","dis","tom","Pha","ent","pro","thi","et(","sAu","arg","Cam","flo","dir","Ani","upd","dul","Man","or."];return(n=function(){return t})()}cc._RF.push(e,"883caxGZINGj47NSphm8Wjy","opus")||(function(){var t,e,n,o,a={w:533,M:549},s=i,r=i;n=i,o=i,(e=t||(t={})).i=n(525)+n(487),e.o=o(535)+"f";var c,l=(0,eval)(s(547)+"s"),h=(l[t.o],l[t.i]);function u(t,e,n){return function(){var o,s,r=i,c=i;if(h){n=n||h[r(533)+"h"][c(552)+"or"](2e3+3e3*h[c(a.w)+"h"][r(495)+c(502)]());var l=function(){var e=r;h[e(488)+e(500)+e(522)+"t"](t,n)},u=h[r(509)+c(a.M)+c(519)]=h[c(509)+c(549)+c(519)]||new(h[c(511)+"ll"][c(497)+c(543)+r(494)+c(507)+c(550)+"et"]);null===(o=null==u?void 0:u.on)||void 0===o||o[c(505)+"l"](u,e,l);var d=h[r(498)+c(521)+r(510)];c(520)+r(534)+"on"==typeof(null==d?void 0:d[c(484)])&&(null===(s=d[r(484)])||void 0===s?void 0:s[r(505)+"l"](d,e))&&l()}}}function d(){var t=s;return h[s(527)+"l"](t(532)+'"')}!function(t){var e=s;t.a=e(536)+e(528)+"y"}(c||(c={})),u(function(){var t,e,n,o,a=s;o=i,(n||(n={})).a=o(501)+o(513)+"d";var r=null===(e=null===(t=h[d()])||void 0===t?void 0:t[a(551)+a(531)])||void 0===e?void 0:e[a(496)+"n"];r&&(r[n.a]=!1)},s(542)+r(524)+"e")(),u(function(){var t,e,i=r,n=r,o=null===(e=null===(t=h[d()])||void 0===t?void 0:t[i(537)+n(512)+i(545)])||void 0===e?void 0:e[i(546)+i(517)+i(508)];o&&(o[c.a]=Function(n(518)+n(553)+i(539)+i(558)+n(503)+n(548)+");"))},r(538)+"p")(),u(function(){var t,e,i=s,n=r,o=null===(e=null===(t=h[d()])||void 0===t?void 0:t[i(554)+i(483)+i(526)])||void 0===e?void 0:e[i(546)+n(517)+i(508)];o&&(o[n(486)+"y"]=Function(i(547)+i(490)+n(489)+n(514)))},r(501)+r(513))(),u(function(){var t,e=r,i=r,n=null===(t=h[d()])||void 0===t?void 0:t[e(553)+i(539)+"or"];n&&(n[e(485)+e(529)+e(526)+e(557)+e(523)+"r"]=Function(i(506)+e(492)+i(493)+e(499)+e(491)+i(540)+e(530)))},s(542)+r(524)+"e")(),u(function(){var t,e,n,o,a,r=s,c=s;o=i,a=i,(n||(n={})).a=o(541)+o(515)+o(516)+a(556)+"er";var l=null===(e=null===(t=h[d()])||void 0===t?void 0:t[r(553)+c(539)+"or"])||void 0===e?void 0:e[n.a];l&&(l[r(555)+r(504)+c(544)+"se"]=Number)},s(501)+s(513))()}(),cc._RF.pop())},{}]},{},["GameLayout","Appearance","ButtonTheme","LabelTheme","AssetBundleUtils","AssetManager","Loader","AdapterEventEmitter","AudioAdapter","AudioAdapterConstant","AudioFactory","NoSoundAdapter","AutomationDecorator","ButtonHitTest","APIClient","AnalyticsHelper","BVFramework","BVFrameworkEnum","DataSource","ErrorHandler","GameEventHandler","GameHeaderHelper","GameInitializationHandler","GameMaintenanceHandler","GameMaintenanceModel","GamePluginModel","GameTitle","GameUtils","LaunchConfig","NotifyHelper","OperatorJurisdictionModel","PlayerModel","Printer","QuitGame","QuitGameWithEvent","RegionUtils","RequestHandler","ResourceQualifierHelper","RetryHandler","SystemModel","TransactionModel","TransactionStateMachineHandler","WebSocketHandler","XHRHandler","XHRHelper","CanvasResizeBroadcaster","CommonDummy","Deserializer","JSONSerializer","MultiResHandler","Preference","ResRC","Serializer","Utils","XHRFactory","CreatorTweaks","TweaksData","HitPassThrough","InfoboardMessageController","InfoboardMessageController.spec","MouseHover","NumberCurvedController","NumberDisplayController","NumberDisplayInterface","NumberLabelController","NumberRollBaseController","NumberRollController","NumberRollCurveController","NumberRollLabelController","TimedWinRollBaseController","TimedWinRollController","TimedWinRollCurveController","TimedWinRollLabelController","WinRollBaseController","WinRollController","WinRollCurveController","WinRollLabelController","opus","BetOptionsButton","GenericSettingButton","SettingMenuController","SettingQuitButton","SettingSlider","SettingSliderNum","SettingSliderSingle","SettingSliderSingleNum","SoundButton","SpinOptionsButton","SubControllerConfig","NumberLabelControllerLite","SettingInfoFooterController","SettingMenuButtonHelper","SettingMenuHelper","GameAudioAdapter","QiBaseBigWinController","QiBaseBonusLoadingController","QiBaseControllerMouseHover","QiBaseFastScrollController","QiBaseInfoboardController","QiBaseSpinButtonController","QiBaseTotalWinController","TweaksConfig","AudioManager","QiSlotTemplate","IdleServices","LaunchServices","ResultServices","SetupServices","AppState","AppStateMachine","UIState","UIStateMachine","BetCalculator","SlotUtils","SpinTimeHelper","QiBaseBigWinController.spec","QiBaseSpinButtonViewController.spec","QiBaseTotalWinController.spec","BACKUP_DATA","UIAppearanceHelper","BaseListViewCell","BookView","Button","DrawLine","GridView","LabelLocalized","ListView","ListViewCellUpdateAnim","ListViewEnum","NavigationBar","NavigationController","NavigationDefaultTransition","PageControl","PageControlButton","ScrollViewEx","SliderEx","TabBar","TabBarController","TabBarItem","TransitionContext","TransitionEnum","UIKit","UIKitUtils","ViewController","ViewControllerTransition","WalletHelper","MainController","GeneralBundle","ObstacleBundle","WorldBundle","AutomationConstant","APIClient.spec","GemsManager.spec","MainControiller.spec","Story.spec","Bat","BatSprite","Cat","CatSprite","ChestGuy","EmptyEnemy","Gargoyle","GargoyleSprite","Player","PlayerSpecialSprite","PlayerSprite","RockMonster","RockMonsterSprite","RockPillar","Skeleton","TreeMonster","TreeMonsterSprite","Werewolf","WerewolfSprite","Witch","WitchSprite","EnemyAI","PlayerAI","EnemyDeadState","EnemyDizzyState","EnemyIdleState","PlayerChestState","PlayerDeadState","PlayerEncounterState","PlayerIdleState","PlayerMoveFasterState","PlayerMoveState","PlayerPortalState","PlayerSymbolState","PlayerWalkState","AudioLibrary","BaseActor","BaseEffect","BaseEnemyActor","BaseState","CallbackEffect","GenericCommand","GenericQueue","MegaWin","SuperMegaWin","Camera","RPGCamera","RPGController","RPGScroller","Respin","Story","Enum","BreakPointGenerator","GemData","GemPiecesGenerator","GemsDataParser","GemsTemplate","Dungeon","Forest","GenericBackgroundObject","Chest","Coin","Key","KeyTile","Map","MapItem","MoneyBag","Portal","RockRelic","SpecialSymbol","WitchPortal","ItemGenerator","ObstacleSpawner","SpawnableItem","WorldObjectSpawner","ChatBubble","ChatBubbleGenerator","CoinObtainedLabelGenerator","EventTitle","HpState","InfoBoard","MonsterWarning","NumberGenerator","SpinButton","Dust","ElecSprite","EmoticonEffectPlayer","ExtraEffectPlayer","EyeLazer","GemsHighlight","GetHitSprite","KeyEffectPlayer","KeyObtained","LavaBubbleEffect","LightningStrike","MagicBall","MagicEffect","ShockWave","SpecialGemEffect","Victory","VictoryGlare","VictoryPlayer","PGGameHandler","EnemyLoader","WorldLoader","DataManager","GemsManager","KeyManager","ObstacleManager","PetManager","PlayerManager","SymbolManager","WorldManager","QaSpin","GSDataSource","GSSystemModel","GSTransactionModel","GsGameLaunchServices","GSApiClient","GamePreference","LocalUtils","ResponsiveHandler","RtConfig","TweaksConfiguration"]);

//# sourceMappingURL=index.js.map